var ZA=Object.defineProperty;var eR=(e,n,r)=>n in e?ZA(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var De=(e,n,r)=>(eR(e,typeof n!="symbol"?n+"":n,r),r);import{d as Kf,r as x,j as t,e as tR,u as nR,i as Qe,S as Dv,A as lt,B as C,L as br,f as ir,h as Xt,k as Bt,D as Mt,T as v,l as Sn,c as _i,s as Ne,m as rt,n as rR,o as et,I as zr,p as Oe,q as yl,C as sR,t as Ss,U as Jf,v as Xf,N as ia,w as oR,R as Dt,x as cn,y as aR,z as vl,E as la,F as ce,G as Zt,H as Ed,J as so,M as Oo,K as je,O as Av,Q as iR,V as lR,W as Xe,X as pf,Y as cR,Z as Rv,_ as Qf,$ as Ao,a0 as oo,a1 as qa,a2 as Zf,a3 as Ka,a4 as gs,a5 as Fc,a6 as St,a7 as Id,a8 as dR,a9 as uR,aa as hR,ab as F,ac as Fe,ad as Ve,ae as pa,af as me,ag as he,ah as fR,ai as pR,aj as mR,ak as xR,al as gR,am as bR,an as yR,ao as vR,ap as mf,aq as Ja,ar as kv,as as Wc,at as Bc,au as Vc,av as ep,aw as Uc,ax as ao,ay as Pt,az as Ws,aA as jR,aB as Gt,aC as Qt,aD as Yt,aE as qt,aF as ue,aG as Bs,aH as An,aI as ws,aJ as Fs,aK as tp,aL as el,aM as _v,aN as xf,aO as SR,aP as np,aQ as wR,aR as Ls,aS as Ov,aT as CR,aU as ht,aV as PR,aW as ER,aX as Ro,aY as my,aZ as IR,a_ as TR,a$ as Mv,b0 as Xa,b1 as DR,b2 as Td,b3 as ko,b4 as Nv,b5 as AR,b6 as RR,b7 as Ct,b8 as mt,b9 as kR,ba as _h,bb as _R,bc as OR,bd as MR,be as NR,bf as Lv,bg as LR,bh as $R,bi as Dd,bj as Ad,bk as $s,bl as at,bm as Rd,bn as $v,bo as Fv,bp as FR,bq as WR,br as U,bs as BR,bt as VR,bu as UR,P as re,b as zR,a as rn,bv as it,bw as Kt,bx as Mo,by as Vs,bz as Wv,bA as HR,bB as Bv,bC as lo,bD as Vv,bE as Uv,bF as kd,bG as GR,bH as YR,bI as qR,bJ as KR,bK as xy,bL as JR,bM as XR,bN as zc,bO as zv,bP as rp,bQ as Hc,bR as QR,bS as ZR,bT as ek,bU as tk,bV as nk,bW as rk,bX as Hv,bY as sk,bZ as ok,b_ as ak,b$ as ik}from"./vendor-mui-h26KAeQu.js";import{o as lk,s as ck,a as dk,c as uk,b as hk,r as Gc,_ as Yc,C as qc,d as sp,E as Gv,F as fk,e as op,g as ap,f as pk,v as mk,i as xk,h as gk,j as Oh,k as bk,l as yk,G as vk,T as jk,m as Sk,O as wk}from"./vendor-firebase-DMTI5dsU.js";import{u as ma,L as er,a as xt,O as ip,N as gy,b as lp,c as dr,R as Ck,d as ze,B as Pk}from"./vendor-core-DpOMKka2.js";import{T as Ek,v as Ik,G as Tk,f as Dk,m as Ak,d as Rk,s as kk,a as _k,P as Ok,I as Mk,F as Nk,i as Lk,n as $k}from"./vendor-editor-D13Gvn5f.js";import{i as Fk,R as qi,L as Yv,C as Kc,X as Jc,Y as Xc,T as Ki,a as Qc,b as Ba,P as Wk,c as Bk,d as Vk,B as qv,e as Zc}from"./vendor-charts-C7vXGKT5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var gf={},by=Kf;gf.createRoot=by.createRoot,gf.hydrateRoot=by.hydrateRoot;const He={HOME:"/",APP:"/app",STUDIO:"/studio",AUTH:"/auth",ADMIN:"/admin"},Tn={ROOT:"news",SUBPATHS:{TRENDING:"trending",MY_FEED:"feed",DISCOVER:"discover"},CREATE:"create",EDIT:"edit",VIEW:":id"},In={ROOT:"channels",CREATE:"create",EDIT:"edit",VIEW:":id"},bs={ROOT:"tiers",CREATE:"create",EDIT:"edit",VIEW:":id",NESTED_VIEW:":tierId"},ar={ROOT:"polls",CREATE:"create",EDIT:"edit",VIEW:":id"},ms={ROOT:"account",PROFILE:"profile",PAYMENT_METHODS:"payment-methods",SUBSCRIPTIONS:"subscriptions",SETTINGS:"settings"},gr={ROOT:"expense-orders",CREATE:"create",EDIT:"edit",VIEW:":id"},ed={ROOT:"search"},Kv={ROOT:"bookmarks"},_t={ROOT:"admin",DASHBOARD:"dashboard",USERS:"users",CHANNELS:"channels",NEWS:"news",POLLS:"polls",EXPENSE_ORDERS:"expense-orders",PAYOUTS:"payouts",TAGS:"tags",SUBSCRIPTIONS:"subscriptions",ANALYTICS:"analytics",SETTINGS:"settings"},Va={ROOT:"subscriptions",MANAGEMENT:"management",ANALYTICS:"analytics",REVENUE:"revenue"},jc={ROOT:"users",LIST:"list",VIEW:":id",EDIT:":id/edit",ROLES:"roles"},Sc={ROOT:"channels",LIST:"list",VIEW:":id",EDIT:":id/edit",ANALYTICS:"analytics"},Ge="/journalist-material-client/".replace(/\/$/,""),fe={HOME:`${Ge}${He.HOME}`,LOGIN:`${Ge}${He.AUTH}/login`,SIGNUP:`${Ge}${He.AUTH}/signup`,POST_SIGNUP:`${Ge}${He.AUTH}/welcome`,ACCEPT_INVITATION:`${Ge}${He.AUTH}/accept-invitation`,APP_ROOT:`${Ge}${He.APP}`,APP_NEWS:`${Ge}${He.APP}/${Tn.ROOT}`,APP_NEWS_TRENDING:`${Ge}${He.APP}/${Tn.ROOT}/trending`,APP_NEWS_MY_FEED:`${Ge}${He.APP}/${Tn.ROOT}/feed`,APP_NEWS_DISCOVER:`${Ge}${He.APP}/${Tn.ROOT}/discover`,APP_NEWS_VIEW:`${Ge}${He.APP}/${Tn.ROOT}/:id`,APP_CHANNELS:`${Ge}${He.APP}/${In.ROOT}`,APP_CHANNEL_VIEW:`${Ge}${He.APP}/${In.ROOT}/:id`,APP_POLL_LIST:`${Ge}${He.APP}/${ar.ROOT}`,APP_POLL_VIEW:`${Ge}${He.APP}/${ar.ROOT}/:id`,APP_EXPLORE:`${Ge}${He.APP}/explore`,APP_SUBSCRIPTIONS:`${Ge}${He.APP}/subscriptions`,APP_POLLS:`${Ge}${He.APP}/${ar.ROOT}`,APP_SEARCH:`${Ge}${He.APP}/${ed.ROOT}`,APP_BOOKMARKS:`${Ge}${He.APP}/${Kv.ROOT}`,APP_ACCOUNT:`${Ge}${He.APP}/${ms.ROOT}`,APP_ACCOUNT_PROFILE:`${Ge}${He.APP}/${ms.ROOT}/${ms.PROFILE}`,APP_ACCOUNT_PAYMENT_METHODS:`${Ge}${He.APP}/${ms.ROOT}/${ms.PAYMENT_METHODS}`,APP_ACCOUNT_SUBSCRIPTIONS:`${Ge}${He.APP}/${ms.ROOT}/${ms.SUBSCRIPTIONS}`,APP_ACCOUNT_SETTINGS:`${Ge}${He.APP}/${ms.ROOT}/${ms.SETTINGS}`,APP_EXPENSE_ORDERS:`${Ge}${He.APP}/${gr.ROOT}`,APP_EXPENSE_ORDER_VIEW:`${Ge}${He.APP}/${gr.ROOT}/:id`,STUDIO_ROOT:`${Ge}${He.STUDIO}`,STUDIO_NEWS:`${Ge}${He.STUDIO}/${Tn.ROOT}`,STUDIO_NEWS_CREATE:`${Ge}${He.STUDIO}/${Tn.ROOT}/${Tn.CREATE}`,STUDIO_NEWS_EDIT:`${Ge}${He.STUDIO}/${Tn.ROOT}/${Tn.EDIT}/:id`,STUDIO_NEWS_VIEW:`${Ge}${He.STUDIO}/${Tn.ROOT}/:id`,STUDIO_CHANNELS:`${Ge}${He.STUDIO}/${In.ROOT}`,STUDIO_CHANNEL_CREATE:`${Ge}${He.STUDIO}/${In.ROOT}/${In.CREATE}`,STUDIO_CHANNEL_EDIT:`${Ge}${He.STUDIO}/${In.ROOT}/${In.EDIT}/:id`,STUDIO_CHANNEL_VIEW:`${Ge}${He.STUDIO}/${In.ROOT}/:id`,STUDIO_TIER_LIST:`${Ge}${He.STUDIO}/${In.ROOT}/:id/${bs.ROOT}`,STUDIO_TIER_CREATE:`${Ge}${He.STUDIO}/${In.ROOT}/:id/${bs.ROOT}/${bs.CREATE}`,STUDIO_TIER_EDIT:`${Ge}${He.STUDIO}/${In.ROOT}/:id/${bs.ROOT}/${bs.EDIT}/:tierId`,STUDIO_TIER_VIEW:`${Ge}${He.STUDIO}/${In.ROOT}/:id/${bs.ROOT}/:tierId`,STUDIO_POLLS:`${Ge}${He.STUDIO}/${ar.ROOT}`,STUDIO_POLL_CREATE:`${Ge}${He.STUDIO}/${ar.ROOT}/${ar.CREATE}`,STUDIO_POLL_EDIT:`${Ge}${He.STUDIO}/${ar.ROOT}/${ar.EDIT}/:id`,STUDIO_POLL_VIEW:`${Ge}${He.STUDIO}/${ar.ROOT}/:id`,STUDIO_SEARCH:`${Ge}${He.STUDIO}/${ed.ROOT}`,STUDIO_EXPENSE_ORDERS:`${Ge}${He.STUDIO}/${gr.ROOT}`,STUDIO_EXPENSE_ORDER_CREATE:`${Ge}${He.STUDIO}/${gr.ROOT}/${gr.CREATE}`,STUDIO_EXPENSE_ORDER_EDIT:`${Ge}${He.STUDIO}/${gr.ROOT}/${gr.EDIT}/:id`,STUDIO_EXPENSE_ORDER_VIEW:`${Ge}${He.STUDIO}/${gr.ROOT}/:id`,ADMIN_ROOT:`${Ge}${He.ADMIN}`,ADMIN_DASHBOARD:`${Ge}${He.ADMIN}/${_t.DASHBOARD}`,ADMIN_USERS:`${Ge}${He.ADMIN}/${_t.USERS}`,ADMIN_USER_LIST:`${Ge}${He.ADMIN}/${_t.USERS}/${jc.LIST}`,ADMIN_USER_VIEW:`${Ge}${He.ADMIN}/${_t.USERS}/${jc.VIEW}`,ADMIN_USER_EDIT:`${Ge}${He.ADMIN}/${_t.USERS}/${jc.EDIT}`,ADMIN_USER_ROLES:`${Ge}${He.ADMIN}/${_t.USERS}/${jc.ROLES}`,ADMIN_CHANNELS:`${Ge}${He.ADMIN}/${_t.CHANNELS}`,ADMIN_CHANNEL_LIST:`${Ge}${He.ADMIN}/${_t.CHANNELS}/${Sc.LIST}`,ADMIN_CHANNEL_VIEW:`${Ge}${He.ADMIN}/${_t.CHANNELS}/${Sc.VIEW}`,ADMIN_CHANNEL_EDIT:`${Ge}${He.ADMIN}/${_t.CHANNELS}/${Sc.EDIT}`,ADMIN_CHANNEL_ANALYTICS:`${Ge}${He.ADMIN}/${_t.CHANNELS}/${Sc.ANALYTICS}`,ADMIN_NEWS:`${Ge}${He.ADMIN}/${_t.NEWS}`,ADMIN_POLLS:`${Ge}${He.ADMIN}/${_t.POLLS}`,ADMIN_EXPENSE_ORDERS:`${Ge}${He.ADMIN}/${_t.EXPENSE_ORDERS}`,ADMIN_PAYOUTS:`${Ge}${He.ADMIN}/${_t.PAYOUTS}`,ADMIN_TAGS:`${Ge}${He.ADMIN}/${_t.TAGS}`,ADMIN_SUBSCRIPTIONS:`${Ge}${He.ADMIN}/${_t.SUBSCRIPTIONS}`,ADMIN_SUBSCRIPTION_MANAGEMENT:`${Ge}${He.ADMIN}/${_t.SUBSCRIPTIONS}/${Va.MANAGEMENT}`,ADMIN_SUBSCRIPTION_ANALYTICS:`${Ge}${He.ADMIN}/${_t.SUBSCRIPTIONS}/${Va.ANALYTICS}`,ADMIN_SUBSCRIPTION_REVENUE:`${Ge}${He.ADMIN}/${_t.SUBSCRIPTIONS}/${Va.REVENUE}`,ADMIN_ANALYTICS:`${Ge}${He.ADMIN}/${_t.ANALYTICS}`,ADMIN_SETTINGS:`${Ge}${He.ADMIN}/${_t.SETTINGS}`};function Jv(e,n){return function(){return e.apply(n,arguments)}}const{toString:Uk}=Object.prototype,{getPrototypeOf:cp}=Object,_d=(e=>n=>{const r=Uk.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ps=e=>(e=e.toLowerCase(),n=>_d(n)===e),Od=e=>n=>typeof n===e,{isArray:di}=Array,tl=Od("undefined");function zk(e){return e!==null&&!tl(e)&&e.constructor!==null&&!tl(e.constructor)&&as(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xv=Ps("ArrayBuffer");function Hk(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Xv(e.buffer),n}const Gk=Od("string"),as=Od("function"),Qv=Od("number"),Md=e=>e!==null&&typeof e=="object",Yk=e=>e===!0||e===!1,kc=e=>{if(_d(e)!=="object")return!1;const n=cp(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},qk=Ps("Date"),Kk=Ps("File"),Jk=Ps("Blob"),Xk=Ps("FileList"),Qk=e=>Md(e)&&as(e.pipe),Zk=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||as(e.append)&&((n=_d(e))==="formdata"||n==="object"&&as(e.toString)&&e.toString()==="[object FormData]"))},e_=Ps("URLSearchParams"),[t_,n_,r_,s_]=["ReadableStream","Request","Response","Headers"].map(Ps),o_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jl(e,n,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,o;if(typeof e!="object"&&(e=[e]),di(e))for(s=0,o=e.length;s<o;s++)n.call(null,e[s],s,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let d;for(s=0;s<l;s++)d=i[s],n.call(null,e[d],d,e)}}function Zv(e,n){n=n.toLowerCase();const r=Object.keys(e);let s=r.length,o;for(;s-- >0;)if(o=r[s],n===o.toLowerCase())return o;return null}const ej=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tj=e=>!tl(e)&&e!==ej;function bf(){const{caseless:e}=tj(this)&&this||{},n={},r=(s,o)=>{const i=e&&Zv(n,o)||o;kc(n[i])&&kc(s)?n[i]=bf(n[i],s):kc(s)?n[i]=bf({},s):di(s)?n[i]=s.slice():n[i]=s};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&jl(arguments[s],r);return n}const a_=(e,n,r,{allOwnKeys:s}={})=>(jl(n,(o,i)=>{r&&as(o)?e[i]=Jv(o,r):e[i]=o},{allOwnKeys:s}),e),i_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),l_=(e,n,r,s)=>{e.prototype=Object.create(n.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),r&&Object.assign(e.prototype,r)},c_=(e,n,r,s)=>{let o,i,l;const d={};if(n=n||{},e==null)return n;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)l=o[i],(!s||s(l,e,n))&&!d[l]&&(n[l]=e[l],d[l]=!0);e=r!==!1&&cp(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n},d_=(e,n,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;const s=e.indexOf(n,r);return s!==-1&&s===r},u_=e=>{if(!e)return null;if(di(e))return e;let n=e.length;if(!Qv(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=e[n];return r},h_=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&cp(Uint8Array)),f_=(e,n)=>{const s=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=s.next())&&!o.done;){const i=o.value;n.call(e,i[0],i[1])}},p_=(e,n)=>{let r;const s=[];for(;(r=e.exec(n))!==null;)s.push(r);return s},m_=Ps("HTMLFormElement"),x_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),yy=(({hasOwnProperty:e})=>(n,r)=>e.call(n,r))(Object.prototype),g_=Ps("RegExp"),nj=(e,n)=>{const r=Object.getOwnPropertyDescriptors(e),s={};jl(r,(o,i)=>{let l;(l=n(o,i,e))!==!1&&(s[i]=l||o)}),Object.defineProperties(e,s)},b_=e=>{nj(e,(n,r)=>{if(as(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(as(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},y_=(e,n)=>{const r={},s=o=>{o.forEach(i=>{r[i]=!0})};return di(e)?s(e):s(String(e).split(n)),r},v_=()=>{},j_=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n,Mh="abcdefghijklmnopqrstuvwxyz",vy="0123456789",rj={DIGIT:vy,ALPHA:Mh,ALPHA_DIGIT:Mh+Mh.toUpperCase()+vy},S_=(e=16,n=rj.ALPHA_DIGIT)=>{let r="";const{length:s}=n;for(;e--;)r+=n[Math.random()*s|0];return r};function w_(e){return!!(e&&as(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const C_=e=>{const n=new Array(10),r=(s,o)=>{if(Md(s)){if(n.indexOf(s)>=0)return;if(!("toJSON"in s)){n[o]=s;const i=di(s)?[]:{};return jl(s,(l,d)=>{const u=r(l,o+1);!tl(u)&&(i[d]=u)}),n[o]=void 0,i}}return s};return r(e,0)},P_=Ps("AsyncFunction"),E_=e=>e&&(Md(e)||as(e))&&as(e.then)&&as(e.catch),ve={isArray:di,isArrayBuffer:Xv,isBuffer:zk,isFormData:Zk,isArrayBufferView:Hk,isString:Gk,isNumber:Qv,isBoolean:Yk,isObject:Md,isPlainObject:kc,isReadableStream:t_,isRequest:n_,isResponse:r_,isHeaders:s_,isUndefined:tl,isDate:qk,isFile:Kk,isBlob:Jk,isRegExp:g_,isFunction:as,isStream:Qk,isURLSearchParams:e_,isTypedArray:h_,isFileList:Xk,forEach:jl,merge:bf,extend:a_,trim:o_,stripBOM:i_,inherits:l_,toFlatObject:c_,kindOf:_d,kindOfTest:Ps,endsWith:d_,toArray:u_,forEachEntry:f_,matchAll:p_,isHTMLForm:m_,hasOwnProperty:yy,hasOwnProp:yy,reduceDescriptors:nj,freezeMethods:b_,toObjectSet:y_,toCamelCase:x_,noop:v_,toFiniteNumber:j_,findKey:Zv,global:ej,isContextDefined:tj,ALPHABET:rj,generateString:S_,isSpecCompliantForm:w_,toJSONObject:C_,isAsyncFn:P_,isThenable:E_};function yt(e,n,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o)}ve.inherits(yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const sj=yt.prototype,oj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{oj[e]={value:e}});Object.defineProperties(yt,oj);Object.defineProperty(sj,"isAxiosError",{value:!0});yt.from=(e,n,r,s,o,i)=>{const l=Object.create(sj);return ve.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),yt.call(l,e.message,n,r,s,o),l.cause=e,l.name=e.name,i&&Object.assign(l,i),l};const I_=null;function yf(e){return ve.isPlainObject(e)||ve.isArray(e)}function aj(e){return ve.endsWith(e,"[]")?e.slice(0,-2):e}function jy(e,n,r){return e?e.concat(n).map(function(o,i){return o=aj(o),!r&&i?"["+o+"]":o}).join(r?".":""):n}function T_(e){return ve.isArray(e)&&!e.some(yf)}const D_=ve.toFlatObject(ve,{},null,function(n){return/^is[A-Z]/.test(n)});function Nd(e,n,r){if(!ve.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,r=ve.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,j){return!ve.isUndefined(j[S])});const s=r.metaTokens,o=r.visitor||f,i=r.dots,l=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(n);if(!ve.isFunction(o))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(ve.isDate(y))return y.toISOString();if(!u&&ve.isBlob(y))throw new yt("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(y)||ve.isTypedArray(y)?u&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function f(y,S,j){let P=y;if(y&&!j&&typeof y=="object"){if(ve.endsWith(S,"{}"))S=s?S:S.slice(0,-2),y=JSON.stringify(y);else if(ve.isArray(y)&&T_(y)||(ve.isFileList(y)||ve.endsWith(S,"[]"))&&(P=ve.toArray(y)))return S=aj(S),P.forEach(function(I,T){!(ve.isUndefined(I)||I===null)&&n.append(l===!0?jy([S],T,i):l===null?S:S+"[]",h(I))}),!1}return yf(y)?!0:(n.append(jy(j,S,i),h(y)),!1)}const p=[],g=Object.assign(D_,{defaultVisitor:f,convertValue:h,isVisitable:yf});function b(y,S){if(!ve.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(y),ve.forEach(y,function(P,w){(!(ve.isUndefined(P)||P===null)&&o.call(n,P,ve.isString(w)?w.trim():w,S,g))===!0&&b(P,S?S.concat(w):[w])}),p.pop()}}if(!ve.isObject(e))throw new TypeError("data must be an object");return b(e),n}function Sy(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function dp(e,n){this._pairs=[],e&&Nd(e,this,n)}const ij=dp.prototype;ij.append=function(n,r){this._pairs.push([n,r])};ij.toString=function(n){const r=n?function(s){return n.call(this,s,Sy)}:Sy;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function A_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lj(e,n,r){if(!n)return e;const s=r&&r.encode||A_,o=r&&r.serialize;let i;if(o?i=o(n,r):i=ve.isURLSearchParams(n)?n.toString():new dp(n,r).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class wy{constructor(){this.handlers=[]}use(n,r,s){return this.handlers.push({fulfilled:n,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ve.forEach(this.handlers,function(s){s!==null&&n(s)})}}const cj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R_=typeof URLSearchParams<"u"?URLSearchParams:dp,k_=typeof FormData<"u"?FormData:null,__=typeof Blob<"u"?Blob:null,O_={isBrowser:!0,classes:{URLSearchParams:R_,FormData:k_,Blob:__},protocols:["http","https","file","blob","url","data"]},up=typeof window<"u"&&typeof document<"u",M_=(e=>up&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),N_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",L_=up&&window.location.href||"http://localhost",$_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:up,hasStandardBrowserEnv:M_,hasStandardBrowserWebWorkerEnv:N_,origin:L_},Symbol.toStringTag,{value:"Module"})),js={...$_,...O_};function F_(e,n){return Nd(e,new js.classes.URLSearchParams,Object.assign({visitor:function(r,s,o,i){return js.isNode&&ve.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},n))}function W_(e){return ve.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function B_(e){const n={},r=Object.keys(e);let s;const o=r.length;let i;for(s=0;s<o;s++)i=r[s],n[i]=e[i];return n}function dj(e){function n(r,s,o,i){let l=r[i++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),u=i>=r.length;return l=!l&&ve.isArray(o)?o.length:l,u?(ve.hasOwnProp(o,l)?o[l]=[o[l],s]:o[l]=s,!d):((!o[l]||!ve.isObject(o[l]))&&(o[l]=[]),n(r,s,o[l],i)&&ve.isArray(o[l])&&(o[l]=B_(o[l])),!d)}if(ve.isFormData(e)&&ve.isFunction(e.entries)){const r={};return ve.forEachEntry(e,(s,o)=>{n(W_(s),o,r,0)}),r}return null}function V_(e,n,r){if(ve.isString(e))try{return(n||JSON.parse)(e),ve.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Sl={transitional:cj,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,i=ve.isObject(n);if(i&&ve.isHTMLForm(n)&&(n=new FormData(n)),ve.isFormData(n))return o?JSON.stringify(dj(n)):n;if(ve.isArrayBuffer(n)||ve.isBuffer(n)||ve.isStream(n)||ve.isFile(n)||ve.isBlob(n)||ve.isReadableStream(n))return n;if(ve.isArrayBufferView(n))return n.buffer;if(ve.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return F_(n,this.formSerializer).toString();if((d=ve.isFileList(n))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Nd(d?{"files[]":n}:n,u&&new u,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),V_(n)):n}],transformResponse:[function(n){const r=this.transitional||Sl.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if(ve.isResponse(n)||ve.isReadableStream(n))return n;if(n&&ve.isString(n)&&(s&&!this.responseType||o)){const l=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(n)}catch(d){if(l)throw d.name==="SyntaxError"?yt.from(d,yt.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:js.classes.FormData,Blob:js.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],e=>{Sl.headers[e]={}});const U_=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),z_=e=>{const n={};let r,s,o;return e&&e.split(`
`).forEach(function(l){o=l.indexOf(":"),r=l.substring(0,o).trim().toLowerCase(),s=l.substring(o+1).trim(),!(!r||n[r]&&U_[r])&&(r==="set-cookie"?n[r]?n[r].push(s):n[r]=[s]:n[r]=n[r]?n[r]+", "+s:s)}),n},Cy=Symbol("internals");function Oi(e){return e&&String(e).trim().toLowerCase()}function _c(e){return e===!1||e==null?e:ve.isArray(e)?e.map(_c):String(e)}function H_(e){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)n[s[1]]=s[2];return n}const G_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Nh(e,n,r,s,o){if(ve.isFunction(s))return s.call(this,n,r);if(o&&(n=r),!!ve.isString(n)){if(ve.isString(s))return n.indexOf(s)!==-1;if(ve.isRegExp(s))return s.test(n)}}function Y_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,s)=>r.toUpperCase()+s)}function q_(e,n){const r=ve.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(o,i,l){return this[s].call(this,n,o,i,l)},configurable:!0})})}class Ir{constructor(n){n&&this.set(n)}set(n,r,s){const o=this;function i(d,u,h){const f=Oi(u);if(!f)throw new Error("header name must be a non-empty string");const p=ve.findKey(o,f);(!p||o[p]===void 0||h===!0||h===void 0&&o[p]!==!1)&&(o[p||u]=_c(d))}const l=(d,u)=>ve.forEach(d,(h,f)=>i(h,f,u));if(ve.isPlainObject(n)||n instanceof this.constructor)l(n,r);else if(ve.isString(n)&&(n=n.trim())&&!G_(n))l(z_(n),r);else if(ve.isHeaders(n))for(const[d,u]of n.entries())i(u,d,s);else n!=null&&i(r,n,s);return this}get(n,r){if(n=Oi(n),n){const s=ve.findKey(this,n);if(s){const o=this[s];if(!r)return o;if(r===!0)return H_(o);if(ve.isFunction(r))return r.call(this,o,s);if(ve.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=Oi(n),n){const s=ve.findKey(this,n);return!!(s&&this[s]!==void 0&&(!r||Nh(this,this[s],s,r)))}return!1}delete(n,r){const s=this;let o=!1;function i(l){if(l=Oi(l),l){const d=ve.findKey(s,l);d&&(!r||Nh(s,s[d],d,r))&&(delete s[d],o=!0)}}return ve.isArray(n)?n.forEach(i):i(n),o}clear(n){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const i=r[s];(!n||Nh(this,this[i],i,n,!0))&&(delete this[i],o=!0)}return o}normalize(n){const r=this,s={};return ve.forEach(this,(o,i)=>{const l=ve.findKey(s,i);if(l){r[l]=_c(o),delete r[i];return}const d=n?Y_(i):String(i).trim();d!==i&&delete r[i],r[d]=_c(o),s[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return ve.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=n&&ve.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const s=new this(n);return r.forEach(o=>s.set(o)),s}static accessor(n){const s=(this[Cy]=this[Cy]={accessors:{}}).accessors,o=this.prototype;function i(l){const d=Oi(l);s[d]||(q_(o,l),s[d]=!0)}return ve.isArray(n)?n.forEach(i):i(n),this}}Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(Ir.prototype,({value:e},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(s){this[r]=s}}});ve.freezeMethods(Ir);function Lh(e,n){const r=this||Sl,s=n||r,o=Ir.from(s.headers);let i=s.data;return ve.forEach(e,function(d){i=d.call(r,i,o.normalize(),n?n.status:void 0)}),o.normalize(),i}function uj(e){return!!(e&&e.__CANCEL__)}function ui(e,n,r){yt.call(this,e??"canceled",yt.ERR_CANCELED,n,r),this.name="CanceledError"}ve.inherits(ui,yt,{__CANCEL__:!0});function hj(e,n,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):n(new yt("Request failed with status code "+r.status,[yt.ERR_BAD_REQUEST,yt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function K_(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function J_(e,n){e=e||10;const r=new Array(e),s=new Array(e);let o=0,i=0,l;return n=n!==void 0?n:1e3,function(u){const h=Date.now(),f=s[i];l||(l=h),r[o]=u,s[o]=h;let p=i,g=0;for(;p!==o;)g+=r[p++],p=p%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),h-l<n)return;const b=f&&h-f;return b?Math.round(g*1e3/b):void 0}}function X_(e,n){let r=0;const s=1e3/n;let o=null;return function(){const l=this===!0,d=Date.now();if(l||d-r>s)return o&&(clearTimeout(o),o=null),r=d,e.apply(null,arguments);o||(o=setTimeout(()=>(o=null,r=Date.now(),e.apply(null,arguments)),s-(d-r)))}}const td=(e,n,r=3)=>{let s=0;const o=J_(50,250);return X_(i=>{const l=i.loaded,d=i.lengthComputable?i.total:void 0,u=l-s,h=o(u),f=l<=d;s=l;const p={loaded:l,total:d,progress:d?l/d:void 0,bytes:u,rate:h||void 0,estimated:h&&d&&f?(d-l)/h:void 0,event:i,lengthComputable:d!=null};p[n?"download":"upload"]=!0,e(p)},r)},Q_=js.hasStandardBrowserEnv?function(){const n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function o(i){let l=i;return n&&(r.setAttribute("href",l),l=r.href),r.setAttribute("href",l),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=o(window.location.href),function(l){const d=ve.isString(l)?o(l):l;return d.protocol===s.protocol&&d.host===s.host}}():function(){return function(){return!0}}(),Z_=js.hasStandardBrowserEnv?{write(e,n,r,s,o,i){const l=[e+"="+encodeURIComponent(n)];ve.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),ve.isString(s)&&l.push("path="+s),ve.isString(o)&&l.push("domain="+o),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function eO(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function tO(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function fj(e,n){return e&&!eO(n)?tO(e,n):n}const Py=e=>e instanceof Ir?{...e}:e;function ca(e,n){n=n||{};const r={};function s(h,f,p){return ve.isPlainObject(h)&&ve.isPlainObject(f)?ve.merge.call({caseless:p},h,f):ve.isPlainObject(f)?ve.merge({},f):ve.isArray(f)?f.slice():f}function o(h,f,p){if(ve.isUndefined(f)){if(!ve.isUndefined(h))return s(void 0,h,p)}else return s(h,f,p)}function i(h,f){if(!ve.isUndefined(f))return s(void 0,f)}function l(h,f){if(ve.isUndefined(f)){if(!ve.isUndefined(h))return s(void 0,h)}else return s(void 0,f)}function d(h,f,p){if(p in n)return s(h,f);if(p in e)return s(void 0,h)}const u={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(h,f)=>o(Py(h),Py(f),!0)};return ve.forEach(Object.keys(Object.assign({},e,n)),function(f){const p=u[f]||o,g=p(e[f],n[f],f);ve.isUndefined(g)&&p!==d||(r[f]=g)}),r}const pj=e=>{const n=ca({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:l,auth:d}=n;n.headers=l=Ir.from(l),n.url=lj(fj(n.baseURL,n.url),e.params,e.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(ve.isFormData(r)){if(js.hasStandardBrowserEnv||js.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[h,...f]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...f].join("; "))}}if(js.hasStandardBrowserEnv&&(s&&ve.isFunction(s)&&(s=s(n)),s||s!==!1&&Q_(n.url))){const h=o&&i&&Z_.read(i);h&&l.set(o,h)}return n},nO=typeof XMLHttpRequest<"u",rO=nO&&function(e){return new Promise(function(r,s){const o=pj(e);let i=o.data;const l=Ir.from(o.headers).normalize();let{responseType:d}=o,u;function h(){o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let f=new XMLHttpRequest;f.open(o.method.toUpperCase(),o.url,!0),f.timeout=o.timeout;function p(){if(!f)return;const b=Ir.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),S={data:!d||d==="text"||d==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:b,config:e,request:f};hj(function(P){r(P),h()},function(P){s(P),h()},S),f=null}"onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(s(new yt("Request aborted",yt.ECONNABORTED,o,f)),f=null)},f.onerror=function(){s(new yt("Network Error",yt.ERR_NETWORK,o,f)),f=null},f.ontimeout=function(){let y=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const S=o.transitional||cj;o.timeoutErrorMessage&&(y=o.timeoutErrorMessage),s(new yt(y,S.clarifyTimeoutError?yt.ETIMEDOUT:yt.ECONNABORTED,o,f)),f=null},i===void 0&&l.setContentType(null),"setRequestHeader"in f&&ve.forEach(l.toJSON(),function(y,S){f.setRequestHeader(S,y)}),ve.isUndefined(o.withCredentials)||(f.withCredentials=!!o.withCredentials),d&&d!=="json"&&(f.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&f.addEventListener("progress",td(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",td(o.onUploadProgress)),(o.cancelToken||o.signal)&&(u=b=>{f&&(s(!b||b.type?new ui(null,e,f):b),f.abort(),f=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const g=K_(o.url);if(g&&js.protocols.indexOf(g)===-1){s(new yt("Unsupported protocol "+g+":",yt.ERR_BAD_REQUEST,e));return}f.send(i||null)})},sO=(e,n)=>{let r=new AbortController,s;const o=function(u){if(!s){s=!0,l();const h=u instanceof Error?u:this.reason;r.abort(h instanceof yt?h:new ui(h instanceof Error?h.message:h))}};let i=n&&setTimeout(()=>{o(new yt(`timeout ${n} of ms exceeded`,yt.ETIMEDOUT))},n);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u&&(u.removeEventListener?u.removeEventListener("abort",o):u.unsubscribe(o))}),e=null)};e.forEach(u=>u&&u.addEventListener&&u.addEventListener("abort",o));const{signal:d}=r;return d.unsubscribe=l,[d,()=>{i&&clearTimeout(i),i=null}]},oO=function*(e,n){let r=e.byteLength;if(!n||r<n){yield e;return}let s=0,o;for(;s<r;)o=s+n,yield e.slice(s,o),s=o},aO=async function*(e,n,r){for await(const s of e)yield*oO(ArrayBuffer.isView(s)?s:await r(String(s)),n)},Ey=(e,n,r,s,o)=>{const i=aO(e,n,o);let l=0;return new ReadableStream({type:"bytes",async pull(d){const{done:u,value:h}=await i.next();if(u){d.close(),s();return}let f=h.byteLength;r&&r(l+=f),d.enqueue(new Uint8Array(h))},cancel(d){return s(d),i.return()}},{highWaterMark:2})},Iy=(e,n)=>{const r=e!=null;return s=>setTimeout(()=>n({lengthComputable:r,total:e,loaded:s}))},Ld=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mj=Ld&&typeof ReadableStream=="function",vf=Ld&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),iO=mj&&(()=>{let e=!1;const n=new Request(js.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n})(),Ty=64*1024,jf=mj&&!!(()=>{try{return ve.isReadableStream(new Response("").body)}catch{}})(),nd={stream:jf&&(e=>e.body)};Ld&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!nd[n]&&(nd[n]=ve.isFunction(e[n])?r=>r[n]():(r,s)=>{throw new yt(`Response type '${n}' is not supported`,yt.ERR_NOT_SUPPORT,s)})})})(new Response);const lO=async e=>{if(e==null)return 0;if(ve.isBlob(e))return e.size;if(ve.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(ve.isArrayBufferView(e))return e.byteLength;if(ve.isURLSearchParams(e)&&(e=e+""),ve.isString(e))return(await vf(e)).byteLength},cO=async(e,n)=>{const r=ve.toFiniteNumber(e.getContentLength());return r??lO(n)},dO=Ld&&(async e=>{let{url:n,method:r,data:s,signal:o,cancelToken:i,timeout:l,onDownloadProgress:d,onUploadProgress:u,responseType:h,headers:f,withCredentials:p="same-origin",fetchOptions:g}=pj(e);h=h?(h+"").toLowerCase():"text";let[b,y]=o||i||l?sO([o,i],l):[],S,j;const P=()=>{!S&&setTimeout(()=>{b&&b.unsubscribe()}),S=!0};let w;try{if(u&&iO&&r!=="get"&&r!=="head"&&(w=await cO(f,s))!==0){let R=new Request(n,{method:"POST",body:s,duplex:"half"}),_;ve.isFormData(s)&&(_=R.headers.get("content-type"))&&f.setContentType(_),R.body&&(s=Ey(R.body,Ty,Iy(w,td(u)),null,vf))}ve.isString(p)||(p=p?"cors":"omit"),j=new Request(n,{...g,signal:b,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",withCredentials:p});let I=await fetch(j);const T=jf&&(h==="stream"||h==="response");if(jf&&(d||T)){const R={};["status","statusText","headers"].forEach(k=>{R[k]=I[k]});const _=ve.toFiniteNumber(I.headers.get("content-length"));I=new Response(Ey(I.body,Ty,d&&Iy(_,td(d,!0)),T&&P,vf),R)}h=h||"text";let D=await nd[ve.findKey(nd,h)||"text"](I,e);return!T&&P(),y&&y(),await new Promise((R,_)=>{hj(R,_,{data:D,headers:Ir.from(I.headers),status:I.status,statusText:I.statusText,config:e,request:j})})}catch(I){throw P(),I&&I.name==="TypeError"&&/fetch/i.test(I.message)?Object.assign(new yt("Network Error",yt.ERR_NETWORK,e,j),{cause:I.cause||I}):yt.from(I,I&&I.code,e,j)}}),Sf={http:I_,xhr:rO,fetch:dO};ve.forEach(Sf,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const Dy=e=>`- ${e}`,uO=e=>ve.isFunction(e)||e===null||e===!1,xj={getAdapter:e=>{e=ve.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let i=0;i<n;i++){r=e[i];let l;if(s=r,!uO(r)&&(s=Sf[(l=String(r)).toLowerCase()],s===void 0))throw new yt(`Unknown adapter '${l}'`);if(s)break;o[l||"#"+i]=s}if(!s){const i=Object.entries(o).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?i.length>1?`since :
`+i.map(Dy).join(`
`):" "+Dy(i[0]):"as no adapter specified";throw new yt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Sf};function $h(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ui(null,e)}function Ay(e){return $h(e),e.headers=Ir.from(e.headers),e.data=Lh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),xj.getAdapter(e.adapter||Sl.adapter)(e).then(function(s){return $h(e),s.data=Lh.call(e,e.transformResponse,s),s.headers=Ir.from(s.headers),s},function(s){return uj(s)||($h(e),s&&s.response&&(s.response.data=Lh.call(e,e.transformResponse,s.response),s.response.headers=Ir.from(s.response.headers))),Promise.reject(s)})}const gj="1.7.2",hp={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{hp[e]=function(s){return typeof s===e||"a"+(n<1?"n ":" ")+e}});const Ry={};hp.transitional=function(n,r,s){function o(i,l){return"[Axios v"+gj+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,d)=>{if(n===!1)throw new yt(o(l," has been removed"+(r?" in "+r:"")),yt.ERR_DEPRECATED);return r&&!Ry[l]&&(Ry[l]=!0,console.warn(o(l," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(i,l,d):!0}};function hO(e,n,r){if(typeof e!="object")throw new yt("options must be an object",yt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const i=s[o],l=n[i];if(l){const d=e[i],u=d===void 0||l(d,i,e);if(u!==!0)throw new yt("option "+i+" must be "+u,yt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new yt("Unknown option "+i,yt.ERR_BAD_OPTION)}}const wf={assertOptions:hO,validators:hp},yo=wf.validators;class aa{constructor(n){this.defaults=n,this.interceptors={request:new wy,response:new wy}}async request(n,r){try{return await this._request(n,r)}catch(s){if(s instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=ca(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:i}=r;s!==void 0&&wf.assertOptions(s,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1),o!=null&&(ve.isFunction(o)?r.paramsSerializer={serialize:o}:wf.assertOptions(o,{encode:yo.function,serialize:yo.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&ve.merge(i.common,i[r.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),r.headers=Ir.concat(l,i);const d=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(u=u&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const h=[];this.interceptors.response.forEach(function(S){h.push(S.fulfilled,S.rejected)});let f,p=0,g;if(!u){const y=[Ay.bind(this),void 0];for(y.unshift.apply(y,d),y.push.apply(y,h),g=y.length,f=Promise.resolve(r);p<g;)f=f.then(y[p++],y[p++]);return f}g=d.length;let b=r;for(p=0;p<g;){const y=d[p++],S=d[p++];try{b=y(b)}catch(j){S.call(this,j);break}}try{f=Ay.call(this,b)}catch(y){return Promise.reject(y)}for(p=0,g=h.length;p<g;)f=f.then(h[p++],h[p++]);return f}getUri(n){n=ca(this.defaults,n);const r=fj(n.baseURL,n.url);return lj(r,n.params,n.paramsSerializer)}}ve.forEach(["delete","get","head","options"],function(n){aa.prototype[n]=function(r,s){return this.request(ca(s||{},{method:n,url:r,data:(s||{}).data}))}});ve.forEach(["post","put","patch"],function(n){function r(s){return function(i,l,d){return this.request(ca(d||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}aa.prototype[n]=r(),aa.prototype[n+"Form"]=r(!0)});class fp{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(o=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](o);s._listeners=null}),this.promise.then=o=>{let i;const l=new Promise(d=>{s.subscribe(d),i=d}).then(o);return l.cancel=function(){s.unsubscribe(i)},l},n(function(i,l,d){s.reason||(s.reason=new ui(i,l,d),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}static source(){let n;return{token:new fp(function(o){n=o}),cancel:n}}}function fO(e){return function(r){return e.apply(null,r)}}function pO(e){return ve.isObject(e)&&e.isAxiosError===!0}const Cf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cf).forEach(([e,n])=>{Cf[n]=e});function bj(e){const n=new aa(e),r=Jv(aa.prototype.request,n);return ve.extend(r,aa.prototype,n,{allOwnKeys:!0}),ve.extend(r,n,null,{allOwnKeys:!0}),r.create=function(o){return bj(ca(e,o))},r}const Fn=bj(Sl);Fn.Axios=aa;Fn.CanceledError=ui;Fn.CancelToken=fp;Fn.isCancel=uj;Fn.VERSION=gj;Fn.toFormData=Nd;Fn.AxiosError=yt;Fn.Cancel=Fn.CanceledError;Fn.all=function(n){return Promise.all(n)};Fn.spread=fO;Fn.isAxiosError=pO;Fn.mergeConfig=ca;Fn.AxiosHeaders=Ir;Fn.formToJSON=e=>dj(ve.isHTMLForm(e)?new FormData(e):e);Fn.getAdapter=xj.getAdapter;Fn.HttpStatusCode=Cf;Fn.default=Fn;const mO="https://api.metajourno.com";class xO{constructor(){De(this,"instance");De(this,"handleAxiosError",n=>n.response?{status:n.response.status,data:n.response.data}:{status:500,data:"Network Error"});this.instance=Fn.create({baseURL:mO,headers:{"Content-Type":"application/json"}}),this.instance.interceptors.request.use(n=>n,n=>Promise.reject(n)),this.instance.interceptors.response.use(n=>n,n=>Promise.reject(n))}get axiosInstance(){return this.instance}}const $e={page:1,limit:20,order:"desc"};class dn{constructor(n,r){De(this,"axiosJ");De(this,"apiPath");De(this,"_list",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.get(n,{...s,params:r})).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_listAll",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.get(n,{...s,params:r})).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_listWithCursor",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.get(n,{...s,params:r})).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_get",async(n,r)=>{try{return(await this.axiosJ.axiosInstance.get(n,r)).data}catch(s){throw this.axiosJ.handleAxiosError(s)}});De(this,"_post",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.post(n,r,s)).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_patch",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.patch(n,r,s)).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_put",async(n,r,s)=>{try{return(await this.axiosJ.axiosInstance.put(n,r,s)).data}catch(o){throw this.axiosJ.handleAxiosError(o)}});De(this,"_remove",async(n,r)=>{try{return(await this.axiosJ.axiosInstance.delete(n,r)).data}catch(s){throw this.axiosJ.handleAxiosError(s)}});this.axiosJ=n,this.apiPath=r}}const ky="/api/admin";class gO extends dn{constructor(n){super(n,`${ky}/news`)}async getAllNews(n={},r=$e){const s={...r,...n};return this._list(`${ky}/news`,s)}}const _y="/api/admin";class bO extends dn{constructor(n){super(n,`${_y}/channels`)}async getAllChannels(n={},r=$e){const s={...r,...n};return this._list(`${_y}/channels`,s)}}const Oy="/api/admin";class yO extends dn{constructor(n){super(n,`${Oy}/polls`)}async getAllPolls(n={},r=$e){const s={...r,...n};return this._list(`${Oy}/polls`,s)}}const Rs="/api/admin";class vO extends dn{constructor(n){super(n,`${Rs}/users`)}async getAllUsers(n={},r=$e){const s={...r,...n};return this._list(`${Rs}/users`,s)}async getUserById(n){return this._get(`${Rs}/users/${n}`)}async registerUser(n){return this._post(`${Rs}/users/register`,n)}async updateUser(n,r){await this._put(`${Rs}/users/${n}`,r)}async updateUserCustomClaims(n,r){await this._put(`${Rs}/users/${n}/custom-claims`,{customClaims:r})}async suspendUser(n,r){await this._post(`${Rs}/users/${n}/suspend`,r)}async unsuspendUser(n,r){await this._post(`${Rs}/users/${n}/unsuspend`,r)}async deleteUser(n){await this._remove(`${Rs}/users/${n}`)}async getUsersByRole(n,r=$e){return this._list(`${Rs}/users/role/${n}`,r)}}const Zs="/api/admin";class jO extends dn{constructor(n){super(n,`${Zs}/payouts`)}async getPayouts(n={},r=$e){const s={...r,...n};return this._list(`${Zs}/payouts`,s)}async getPendingPayouts(n=$e){return this._list(`${Zs}/payouts/pending`,n)}async getFailedPayouts(n=$e){return this._list(`${Zs}/payouts/failed`,n)}async getPayoutStats(n={}){return this._list(`${Zs}/payouts/stats`,n)}async getPayoutById(n){return this._get(`${Zs}/payouts/${n}`)}async processPayout(n,r={}){await this._post(`${Zs}/payouts/${n}/process`,r)}async retryPayout(n,r={}){await this._post(`${Zs}/payouts/${n}/retry`,r)}async cancelPayout(n){await this._post(`${Zs}/payouts/${n}/cancel`,{})}}const Fh="/api/admin";class SO extends dn{constructor(n){super(n,`${Fh}/subscriptions`)}async getSubscriptions(n={},r=$e){const s={...r,...n};return this._list(`${Fh}/subscriptions`,s)}async getSubscriptionById(n){return this._get(`${Fh}/subscriptions/${n}`)}}const Mi="/api/admin";class wO extends dn{constructor(n){super(n,`${Mi}/tags`)}async getTags(n=$e){return this._list(`${Mi}/tags`,n)}async createTag(n){return this._post(`${Mi}/tags`,n)}async updateTag(n,r){await this._put(`${Mi}/tags/${n}`,r)}async deleteTag(n){await this._remove(`${Mi}/tags/${n}`)}}const wc="/api/admin";class CO extends dn{constructor(n){super(n,`${wc}/expense-orders`)}async getAllExpenseOrders(n={},r=$e){const s={...r,...n};return this._list(`${wc}/expense-orders`,s)}async getExpenseOrder(n){return this._get(`${wc}/expense-orders/${n}`)}async updateExpenseOrder(n,r){await this._put(`${wc}/expense-orders/${n}`,r)}}class PO{constructor(n){De(this,"news");De(this,"channels");De(this,"polls");De(this,"users");De(this,"payouts");De(this,"subscriptions");De(this,"tags");De(this,"expenseOrders");this.news=new gO(n),this.channels=new bO(n),this.polls=new yO(n),this.users=new vO(n),this.payouts=new jO(n),this.subscriptions=new SO(n),this.tags=new wO(n),this.expenseOrders=new CO(n)}}const Nn="/api/channels",ks={TIER:"tiers",SUBSCRIPTIONS:"subscriptions"};class EO extends dn{constructor(n){super(n,Nn)}async getChannels(n={},r=$e){const s={...r};return n.trending&&(s.trending="true"),n.popular&&(s.popular="true"),n.subscribed&&(s.subscribed="true"),n.followed&&(s.followed="true"),n.verified&&(s.verified="true"),n.creator&&(s.creator=n.creator),n.category&&(s.category=n.category),n.tags&&n.tags.length>0&&(s.tags=n.tags.join(",")),this._list(Nn,s)}async getAll(n=$e){return this.getChannels({},n)}async getTrending(n=$e){return this.getChannels({trending:!0},n)}async getPopular(n=$e){return this.getChannels({popular:!0},n)}async getSubscribed(n=$e){return this.getChannels({subscribed:!0},n)}async getFollowed(n=$e){return this.getChannels({followed:!0},n)}async getVerified(n=$e){return this.getChannels({verified:!0},n)}async createChannel(n){return this._post(Nn,n)}async getChannel(n){return this._get(`${Nn}/${n}`)}async getCreatorChannels(n,r=$e){return this.getChannels({creator:n},r)}async updateChannel(n,r){await this._put(`${Nn}/${n}`,r)}async deleteChannel(n){return this._remove(`${Nn}/${n}`)}async createTier(n,r){return this._post(`${Nn}/${n}/${ks.TIER}`,r)}async updateTier(n,r,s){await this._put(`${Nn}/${n}/${ks.TIER}/${r}`,s)}async updateTiers(n,r){const s=r.map(o=>{const{currency:i,channelId:l,isDefault:d,...u}=o;return u});return this._put(`${Nn}/${n}/${ks.TIER}`,s)}async getTiers(n){return this._list(`${Nn}/${n}/${ks.TIER}`)}async getTier(n,r){return this._get(`${Nn}/${n}/${ks.TIER}/${r}`)}async deleteTier(n,r){return this._remove(`${Nn}/${n}/${ks.TIER}/${r}`)}async subscribeToChannel(n,r={}){return this._post(`${Nn}/${n}/${ks.SUBSCRIPTIONS}`,r)}async unsubscribeFromChannel(n){await this._remove(`${Nn}/${n}/${ks.SUBSCRIPTIONS}`)}async getChannelSubscribers(n,r=$e){return this._list(`${Nn}/${n}/${ks.SUBSCRIPTIONS}`,r)}async getSubscriptionDetails(n,r){return this._get(`${Nn}/${n}/${ks.SUBSCRIPTIONS}/${r}`)}async inviteUser(n,r){return this._post(`${Nn}/${n}/invite`,r)}async getChannelInvitations(n,r=$e){return this._list(`${Nn}/${n}/invitations`,r)}async cancelInvitation(n,r){return this._remove(`${Nn}/${n}/invitations/${r}`)}async acceptInvitation(n){return this._post(`${Nn}/invitations/accept`,n)}}const eo="/api/news";class IO extends dn{constructor(n){super(n,eo)}async getNews(n={},r=$e){const s={...r};return n.feed&&(s.feed="true"),n.trending&&(s.trending="true"),n.subscribed&&(s.subscribed="true"),n.channel&&(s.channel=n.channel),n.creator&&(s.creator=n.creator),n.status&&(s.status=n.status),n.premium!==void 0&&(s.premium=n.premium.toString()),n.tags&&n.tags.length>0&&(s.tags=n.tags.join(",")),n.query&&(s.query=n.query),this._list(eo,s)}async getAll(n=$e){return this.getNews({},n)}async getFeed(n=$e){return this.getNews({feed:!0},n)}async getTrending(n=$e){return this.getNews({trending:!0},n)}async getSubscribed(n=$e){return this.getNews({subscribed:!0},n)}async getPremium(n=$e){return this.getNews({premium:!0},n)}async getNewsByChannel(n,r=$e){return this.getNews({channel:n},r)}async getCreatorNews(n,r=$e){return this.getNews({creator:n},r)}async getNewsByTags(n,r=$e){return this.getNews({tags:n},r)}async getNewsByStatus(n,r=$e){return this.getNews({status:n},r)}async get(n){return this._get(`${eo}/${n}`)}async getDetails(n){return this._get(`${eo}/${n}/details`)}async createNews(n){return this._post(eo,n)}async update(n,r){await this._put(`${eo}/${n}`,r)}async delete(n){await this._remove(`${eo}/${n}`)}async getNewsStats(n,r,s){return this._get(`${eo}/${n}/stats?startDate=${r}&endDate=${s}`)}async getNewsTags(n=$e){return this._list(`${eo}/tags`,n)}async create(n){return this.createNews(n)}}const Nr="/api/polls";class TO extends dn{constructor(n){super(n,Nr)}async getPolls(n={},r=$e){const s={...r};return n.trending&&(s.trending="true"),n.funded&&(s.funded="true"),n.claimed&&(s.claimed="true"),n.subscribed&&(s.subscribed="true"),n.channel&&(s.channel=n.channel),n.creator&&(s.creator=n.creator),n.status&&(s.status=n.status),n.converted!==void 0&&(s.converted=n.converted.toString()),n.tags&&n.tags.length>0&&(s.tags=n.tags.join(",")),this._list(Nr,s)}async getAll(n=$e){return this.getPolls({},n)}async getTrending(n=$e){return this.getPolls({trending:!0},n)}async getFunded(n=$e){return this.getPolls({funded:!0},n)}async getClaimed(n=$e){return this.getPolls({claimed:!0},n)}async getSubscribed(n=$e){return this.getPolls({subscribed:!0},n)}async getPollsByChannel(n,r=$e){return this.getPolls({channel:n},r)}async getCreatorPolls(n,r=$e){return this.getPolls({creator:n},r)}async getPollsByTags(n,r=$e){return this.getPolls({tags:n},r)}async get(n){return this._get(`${Nr}/${n}`)}async create(n){return this._post(Nr,n)}async update(n,r){await this._put(`${Nr}/${n}`,r)}async delete(n){return this._remove(`${Nr}/${n}`)}async getResults(n){return this._get(`${Nr}/${n}/votes`)}async vote(n,r){return this._post(`${Nr}/${n}/votes`,r)}async getUserVote(n){return this._get(`${Nr}/${n}/votes/me`)}async checkVotingEligibility(n){return this._get(`${Nr}/${n}/votes/eligibility`)}async getFunding(n){return this._get(`${Nr}/${n}/funding`)}async claim(n){return this._post(`${Nr}/${n}/claims`,{})}async convertToNews(n,r){return this._post(`${Nr}/${n}/conversions`,r)}async getVoteResults(n){return this.getResults(n)}async getMyVote(n){return this.getUserVote(n)}}const _s="/api/bookmarks";class DO extends dn{constructor(n){super(n,_s)}async bookmarkNews(n){return this._post(`${_s}/news/${n}`,{})}async unbookmarkNews(n){return this._remove(`${_s}/news/${n}`)}async checkNewsBookmarkStatus(n){return this._get(`${_s}/news/${n}/status`)}async getBookmarkedNews(n={}){return this._listWithCursor(`${_s}/news`,n)}async bookmarkPoll(n){return this._post(`${_s}/polls/${n}`,{})}async unbookmarkPoll(n){return this._remove(`${_s}/polls/${n}`)}async checkPollBookmarkStatus(n){return this._get(`${_s}/polls/${n}/status`)}async getBookmarkedPolls(n={}){return this._listWithCursor(`${_s}/polls`,n)}async getBookmarks(n,r={}){const s={...r};return s.type=n,this._listWithCursor(_s,s)}}const Oa="/api/users";class AO extends dn{constructor(n){super(n,Oa)}async getAll(n=$e){return this._list(Oa,n)}async get(n){return this._get(`${Oa}/${n}`)}async create(n){return this._post(Oa,n)}async update(n,r){await this._put(`${Oa}/${n}`,r)}async delete(n){return this._remove(`${Oa}/${n}`)}}const gn="/api/account";class RO extends dn{constructor(n){super(n,gn)}async getProfile(){return this._get(`${gn}/profile`)}async updateProfile(n){return this._put(`${gn}/profile`,n)}async getPayoutMethods(){return this._list(`${gn}/payout-methods`)}async getPayoutMethod(n){return this._get(`${gn}/payout-methods/${n}`)}async getDefaultPayoutMethod(){return this._get(`${gn}/payout-methods/default`)}async addPayoutMethod(n){return this._post(`${gn}/payout-methods`,n)}async updatePayoutMethod(n,r){return this._put(`${gn}/payout-methods/${n}`,r)}async deletePayoutMethod(n){return this._remove(`${gn}/payout-methods/${n}`)}async setDefaultPayoutMethod(n){return this._patch(`${gn}/payout-methods/${n}/default`,{})}async getAvailablePayoutMethods(){return this._get(`${gn}/payout-methods/available`)}async getSubscriptions(){return this._list(`${gn}/subscriptions`)}async subscribe(n,r){return this._post(`${gn}/subscriptions/${n}`,r)}async cancelSubscription(n){return this._remove(`${gn}/subscriptions/${n}`)}async getUserChannels(n=$e){return this._list(`${gn}/channels`,n)}async exchangePayPalAuthCode(n){return this._post(`${gn}/paypal/exchange-auth-code`,{authCode:n})}async savePayPalPayoutMethod(n){return this._post(`${gn}/paypal/save-payout-method`,n)}async getNotificationPreferences(){return this._get(`${gn}/notification-preferences`)}async getNotificationPreference(n){return this._get(`${gn}/notification-preferences/${n}`)}async updateNotificationPreference(n,r){return this._patch(`${gn}/notification-preferences/${n}`,r)}async bulkUpdateNotificationPreferences(n){return this._patch(`${gn}/notification-preferences/bulk`,{preferences:n})}async getUserPreference(){return this._get(`${gn}/preference`)}async updateUserPreference(n){return this._patch(`${gn}/preference`,n)}}const Cr="/api/expense-orders";class kO extends dn{constructor(n){super(n,Cr)}async createExpenseOrder(n){return this._post(Cr,n)}async updateExpenseOrder(n,r){return this._put(`${Cr}/${n}`,r)}async submitExpenseOrder(n,r){return this._post(`${Cr}/${n}/submit`,r||{})}async cancelExpenseOrder(n,r){return this._post(`${Cr}/${n}/cancel`,{reason:r})}async getMyExpenseOrders(n=$e,r){const s={...n};return r&&(s.status=r),this._list(`${Cr}/my-orders`,s)}async getAllExpenseOrders(n=$e,r){const s={...n};return(r==null?void 0:r.status)!==void 0&&(s.status=r.status),r!=null&&r.channelId&&(s.channelId=r.channelId),r!=null&&r.journalistId&&(s.journalistId=r.journalistId),this._list("/api/admin/expense-orders",s)}async approveExpenseOrder(n,r){return this._post(`${Cr}/${n}/approve`,r||{})}async rejectExpenseOrder(n,r){return this._post(`${Cr}/${n}/reject`,r)}async processPayment(n,r){return this._post(`${Cr}/${n}/process-payment`,r||{})}async getPendingExpenseOrders(n=$e){return this._list(`${Cr}/pending`,n)}async getExpenseOrderStats(n,r,s){const o={};return n&&(o.channelId=n),r&&(o.startDate=r.toISOString()),s&&(o.endDate=s.toISOString()),this._get(`${Cr}/stats`,{params:o})}async getExpenseOrder(n){return this._get(`${Cr}/${n}`)}async getExpenseOrdersByJournalist(n,r=$e,s){const o={...r};return s&&(o.status=s),this._list(`${Cr}/journalist/${n}`,o)}async getExpenseOrdersByChannel(n,r=$e,s){const o={...r};return s&&(o.status=s),this._list(`${Cr}/channel/${n}`,o)}async getExpenseTypes(){return this._get("/api/expense-types")}}const Hn="/api/subscriptions";class _O extends dn{constructor(n){super(n,Hn)}async getAllSubscriptions(n=$e,r={}){const s={...n,...r};return this._list(Hn,s)}async getSubscriptionById(n){return this._get(`${Hn}/${n}`)}async updateSubscriptionStatus(n,r,s){return this._patch(`${Hn}/${n}/status`,{status:r,reason:s})}async bulkUpdateSubscriptions(n){return this._post(`${Hn}/bulk-update`,n)}async getSubscriptionAnalytics(n={}){const r=new URLSearchParams(n).toString(),s=r?`${Hn}/analytics?${r}`:`${Hn}/analytics`;return this._get(s)}async getRevenueMetrics(n={}){const r=new URLSearchParams(n).toString(),s=r?`${Hn}/revenue?${r}`:`${Hn}/revenue`;return this._get(s)}async exportSubscriptions(n={},r="csv"){const s=new URLSearchParams({...n,format:r}).toString(),o=s?`${Hn}/export?${s}`:`${Hn}/export`;return this._get(o)}async cancelSubscription(n,r){await this.updateSubscriptionStatus(n,"canceled",r)}async activateSubscription(n,r){await this.updateSubscriptionStatus(n,"active",r)}async suspendSubscription(n,r){await this.updateSubscriptionStatus(n,"suspended",r)}async updateSubscriptionTier(n,r){return this._patch(`${Hn}/${n}/tier`,{tier_id:r})}async createDirectSubscription(n,r){return this._post(`${Hn}/channels/${n}/subscribe`,r)}async activatePayPalSubscription(n,r){return this._post(`${Hn}/channels/${n}/activate-paypal`,r)}async cancelUserSubscription(n){return this._remove(`${Hn}/${n}/cancel`)}async getMySubscriptions(n=$e,r={}){const s={...n,...r};return this._list(`${Hn}/my`,s)}async getSubscriptionStatus(n){return await this._get(`${Hn}/${n}/status`)}async searchSubscriptions(n,r=$e){const s={...r,search:n};return this._list(`${Hn}/search`,s)}async getSubscriptionsByChannel(n,r=$e){return this.getAllSubscriptions(r,{channel_id:n})}async getSubscriptionsByUser(n,r=$e){return this.getAllSubscriptions(r,{user_id:n})}}const or="/api/tags";class OO extends dn{constructor(n){super(n,or)}async getTags(n={},r=$e){const s={...r};return n.trending&&(s.trending="true"),n.popular&&(s.popular="true"),n.category&&(s.category=n.category),n.verified&&(s.verified="true"),this._list(or,s)}async getAll(n=$e){return this.getTags({},n)}async getTrending(n=$e){return this.getTags({trending:!0},n)}async getPopular(n=$e){return this.getTags({popular:!0},n)}async getVerified(n=$e){return this.getTags({verified:!0},n)}async getNewsTags(n=$e){return this.getTags({category:"news"},n)}async getPollTags(n=$e){return this.getTags({category:"polls"},n)}async getTagById(n){return this._get(`${or}/${n}`)}async getTagBySlug(n){return this._get(`${or}/slug/${n}`)}async createTag(n){return this._post(or,n)}async updateTag(n,r){return this._put(`${or}/${n}`,r)}async deleteTag(n){await this._remove(`${or}/${n}`)}async getTagNews(n,r=$e){return this._get(`${or}/${n}/news`,{params:r})}async getTagPolls(n,r=$e){return this._get(`${or}/${n}/polls`,{params:r})}async addTagToNews(n,r){return this._post(`${or}/${n}/news/${r}`,{})}async removeTagFromNews(n,r){return this._remove(`${or}/${n}/news/${r}`)}async addTagToPoll(n,r){return this._post(`${or}/${n}/polls/${r}`,{})}async removeTagFromPoll(n,r){return this._remove(`${or}/${n}/polls/${r}`)}async moderateTag(n,r){return this._patch(`${or}/${n}/moderate`,{status:r})}async approveTag(n){return this.moderateTag(n,"APPROVED")}async rejectTag(n){return this.moderateTag(n,"REJECTED")}async searchTags(n,r=$e){const s={...r,search:n};return this._list(or,s)}async getTagSuggestions(n,r=10){const s={prefix:n,limit:r};return this._get(`${or}/suggestions`,{params:s})}async get(n){return this.getTagById(n)}async create(n){return this.createTag(n)}async update(n,r){return this.updateTag(n,r)}async delete(n){return this.deleteTag(n)}}const to="/api/search";class MO extends dn{constructor(n){super(n,to)}async search(n,r={},s=$e){const o={q:n,...s};return Object.entries(r).forEach(([i,l])=>{l!=null&&l!==""&&(Array.isArray(l)?o[i]=l.join(","):l instanceof Date?o[i]=l.toISOString():o[i]=l.toString())}),this._list(to,o)}async searchNews(n,r=$e){return this._list(`${to}/news`,{q:n,...r})}async searchChannels(n,r=$e){return this._list(`${to}/channels`,{q:n,...r})}async searchUsers(n,r=$e){return this._list(`${to}/users`,{q:n,...r})}async searchPolls(n,r=$e){return this._list(`${to}/polls`,{q:n,...r})}async searchTags(n,r=$e){return this._list(`${to}/tags`,{q:n,...r})}async getSuggestions(n,r){const s={q:n};return r&&(s.type=r),this._get(`${to}/suggestions`,{params:s})}async getStructuredSuggestions(n,r){const s={q:n};return r&&(s.type=r),this._get(`${to}/suggestions/structured`,{params:s})}}const Zr="/api/funding";class NO extends dn{constructor(n){super(n,Zr)}async getFund(n,r){var s;try{return this._get(`${Zr}/${n}/${r}`)}catch(o){if(((s=o.response)==null?void 0:s.status)===404)return null;throw o}}async getFundSummary(n,r){var s;try{return this._get(`${Zr}/${n}/${r}/summary`)}catch(o){if(((s=o.response)==null?void 0:s.status)===404)return null;throw o}}async createPayPalOrder(n,r,s){return this._post(`${Zr}/${n}/${r}/create-paypal-order`,s)}async capturePayPalOrder(n,r,s){return this._post(`${Zr}/${n}/${r}/capture-paypal-order`,s)}async getContributions(n,r,s=$e){return this._list(`${Zr}/${n}/${r}/contributions`,s)}async getUserContributions(n=$e){return this._list(`${Zr}/my-contributions`,n)}async getUserContributionsForContent(n,r){return this._get(`${Zr}/${n}/${r}/my-contributions`)}async createFund(n,r,s){return this._post(`${Zr}/${n}/${r}/fund`,s)}async updateFund(n,r,s){return this._put(`${Zr}/${n}/${r}/fund`,s)}async getChannelFundingStats(n,r){return this._get(`${Zr}/channels/${n}/stats`,{params:r})}async processPayout(n,r,s){return this._post(`${Zr}/${n}/${r}/payout`,s)}}const Ni="/api/payment-tokens";class LO extends dn{constructor(n){super(n,Ni)}async createPayPalTokenizationOrder(){return this._post(`${Ni}/paypal/orders`,{})}async capturePayPalTokenizationOrder(n){return this._post(`${Ni}/paypal/orders/${n}/capture`,{})}async getPaymentTokenDetails(n){return this._get(`${Ni}/paypal/tokens/${n}`)}async deletePaymentToken(n){return this._remove(`${Ni}/paypal/tokens/${n}`)}}const Li="/api/iyzico-tokens";class $O extends dn{constructor(n){super(n,Li)}async initializeTokenization(n){return this._post(`${Li}/tokenization/init`,n)}async savePaymentMethod(n){return this._post(`${Li}/tokenization/save`,n)}async getStoredCards(){return this._get(`${Li}/cards`)}async deleteStoredCard(n){return this._remove(`${Li}/cards/${n}`)}}const es="/api/payouts";class FO extends dn{constructor(n){super(n,es)}async getPayouts(n){return this._list(es,n||{})}async getPayoutById(n){return this._get(`${es}/${n}`)}async getPendingPayouts(n=$e){return this._list(`${es}/pending`,n)}async getFailedPayouts(n=$e){return this._list(`${es}/failed`,n)}async getPayoutsReadyForRetry(){return this._get(`${es}/ready-for-retry`)}async getPayoutsByJournalist(n,r=$e,s){const o={...r};return s&&(o.status=s),this._list(`${es}/journalist/${n}`,o)}async getPayoutsByChannel(n,r=$e){return this._list(`${es}/channel/${n}`,r)}async getPayoutStats(n){return this._get(`${es}/stats`,{params:n})}async processPayout(n){return this._post(`${es}/${n}/process`,{})}async retryPayout(n){return this._post(`${es}/${n}/retry`,{})}async cancelPayout(n,r){return this._post(`${es}/${n}/cancel`,r)}}const vo="/api/notifications",My="/api/notifications/device-tokens",WO="/api/notifications/feed";class BO extends dn{constructor(n){super(n,vo)}async getNotifications(n={},r=$e){const s={...r};return n.typeId!==void 0&&(s.typeId=n.typeId),n.categoryId!==void 0&&(s.categoryId=n.categoryId),n.isRead!==void 0&&(s.isRead=n.isRead),await this._list(vo,s)}async getNewNotificationsCount(){return await this._get(`${vo}/new-count`)}async markAsChecked(){await this._post(`${vo}/mark-checked`,{})}async markAsRead(n){await this._patch(`${vo}/${n}/read`,null)}async markAllAsRead(){await this._patch(`${vo}/mark-all-read`,null)}async deleteNotification(n){await this._remove(`${vo}/${n}`)}async registerDeviceToken(n){await this._post(My,{token:n})}async unregisterDeviceToken(n){await this._remove(`${My}/${n}`)}async getNotificationFeed(n={}){const r={};return n.typeId!==void 0&&(r.typeId=n.typeId),n.categoryId!==void 0&&(r.categoryId=n.categoryId),n.isRead!==void 0&&(r.isRead=n.isRead),n.limit!==void 0&&(r.limit=n.limit),n.after&&(r.after=n.after),n.before&&(r.before=n.before),await this._listWithCursor(WO,r)}async getNotificationTypeMetadata(){return(await this._get(`${vo}/types`)).notificationTypes}}class VO{constructor(n){De(this,"user");De(this,"poll");De(this,"news");De(this,"bookmark");De(this,"channel");De(this,"account");De(this,"expenseOrder");De(this,"subscription");De(this,"tag");De(this,"search");De(this,"funding");De(this,"paymentToken");De(this,"iyzicoToken");De(this,"payout");De(this,"notification");this.user=new AO(n),this.poll=new TO(n),this.news=new IO(n),this.bookmark=new DO(n),this.channel=new EO(n),this.account=new RO(n),this.expenseOrder=new kO(n),this.subscription=new _O(n),this.tag=new OO(n),this.search=new MO(n),this.funding=new NO(n),this.paymentToken=new LO(n),this.iyzicoToken=new $O(n),this.payout=new FO(n),this.notification=new BO(n)}}const Cc="/api/auth";class UO extends dn{constructor(n){super(n,Cc)}async signIn(n){return this._post(`${Cc}/sign-in`,n)}async signUp(n){return this._post(`${Cc}/sign-up`,n)}async verifyToken(n){return this._post(`${Cc}/verify-token`,n)}}const Xo="/api/studio";class zO extends dn{constructor(n){super(n,Xo)}async createNews(n){return this._post(`${Xo}/news`,n)}async createChannel(n){return this._post(`${Xo}/channels`,n)}async createPoll(n){return this._post(`${Xo}/polls`,n)}async getMyChannels(){return this._list(`${Xo}/me/channels`)}async getMyContent(n="all",r=$e){const s={type:n,...r};return n==="all"?this._get(`${Xo}/me/content`,{params:s}):this._list(`${Xo}/me/content`,s)}async getMyRecentNews(n=$e){return this.getMyContent("news",n)}async getMyRecentPolls(n=$e){return this.getMyContent("polls",n)}async getMyRecentChannels(n=$e){return this.getMyContent("channels",n)}async getCreatorChannels(){return this.getMyChannels()}async getCreatorContent(n="all",r=$e){return this.getMyContent(n,r)}}class HO{constructor(){De(this,"axiosJ");De(this,"admin");De(this,"app");De(this,"auth");De(this,"studio");De(this,"setAuthHeader",n=>(n?this.axiosJ.axiosInstance.defaults.headers.common.Authorization=`Bearer ${n}`:delete this.axiosJ.axiosInstance.defaults.headers.common.Authorization,this));De(this,"setApis",()=>(this.admin=new PO(this.axiosJ),this.app=new VO(this.axiosJ),this.auth=new UO(this.axiosJ),this.studio=new zO(this.axiosJ),this));this.axiosJ=new xO}}const GO=50*60*1e3,YO=e=>{const[n,r]=x.useState(null),[s,o]=x.useState(!0),i=x.useRef(null),l=x.useRef(new Set);x.useEffect(()=>{const b=lk(e,y=>{r(y||null),o(!1)});return()=>b()},[e]),x.useEffect(()=>(i.current&&(clearInterval(i.current),i.current=null),n&&(i.current=setInterval(async()=>{try{l.current.forEach(b=>{try{b(),console.log("Token refresh callback called automatically")}catch(y){console.error("Error in token refresh callback:",y)}})}catch(b){console.error("Error during automatic token refresh:",b)}},GO)),()=>{i.current&&(clearInterval(i.current),i.current=null)}),[n]);const d=async(b=!1)=>{if(!n)return null;try{return await n.getIdToken(b)}catch(y){return console.error("Error getting token:",y),null}},u=async(b,y)=>{try{return await(await ck(e,b,y)).user.getIdToken()}catch(S){throw console.error("Sign in error:",S),S}},h=async b=>{try{return await(await dk(e,b)).user.getIdToken()}catch(y){throw console.error("Sign in with provider error:",y),y}},f=async(b,y)=>{try{return(await uk(e,b,y)).user}catch(S){throw console.error("Sign up error:",S),S}},p=async()=>{try{await hk(e),r(null)}catch(b){throw console.error("Sign out error:",b),b}},g=b=>(l.current.add(b),()=>{l.current.delete(b)});return{user:n,isAuthenticated:n!=null,isLoading:s,getToken:d,signIn:u,signInWithProvider:h,signUp:f,signOut:p,onTokenRefresh:g}},yj="@firebase/installations",pp="0.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=1e4,jj=`w:${pp}`,Sj="FIS_v2",qO="https://firebaseinstallations.googleapis.com/v1",KO=60*60*1e3,JO="installations",XO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new Gv(JO,XO,QO);function wj(e){return e instanceof fk&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj({projectId:e}){return`${qO}/projects/${e}/installations`}function Pj(e){return{token:e.token,requestStatus:2,expiresIn:eM(e.expiresIn),creationTime:Date.now()}}async function Ej(e,n){const s=(await n.json()).error;return da.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Ij({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ZO(e,{refreshToken:n}){const r=Ij(e);return r.append("Authorization",tM(n)),r}async function Tj(e){const n=await e();return n.status>=500&&n.status<600?e():n}function eM(e){return Number(e.replace("s","000"))}function tM(e){return`${Sj} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM({appConfig:e,heartbeatServiceProvider:n},{fid:r}){const s=Cj(e),o=Ij(e),i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const l={fid:r,authVersion:Sj,appId:e.appId,sdkVersion:jj},d={method:"POST",headers:o,body:JSON.stringify(l)},u=await Tj(()=>fetch(s,d));if(u.ok){const h=await u.json();return{fid:h.fid||r,registrationStatus:2,refreshToken:h.refreshToken,authToken:Pj(h.authToken)}}else throw await Ej("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(e){return new Promise(n=>{setTimeout(n,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/^[cdef][\w-]{21}$/,Pf="";function oM(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const r=aM(e);return sM.test(r)?r:Pf}catch{return Pf}}function aM(e){return rM(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Map;function Rj(e,n){const r=$d(e);kj(r,n),iM(r,n)}function kj(e,n){const r=Aj.get(e);if(r)for(const s of r)s(n)}function iM(e,n){const r=lM();r&&r.postMessage({key:e,fid:n}),cM()}let sa=null;function lM(){return!sa&&"BroadcastChannel"in self&&(sa=new BroadcastChannel("[Firebase] FID Change"),sa.onmessage=e=>{kj(e.data.key,e.data.fid)}),sa}function cM(){Aj.size===0&&sa&&(sa.close(),sa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="firebase-installations-database",uM=1,ua="firebase-installations-store";let Wh=null;function mp(){return Wh||(Wh=op(dM,uM,{upgrade:(e,n)=>{switch(n){case 0:e.createObjectStore(ua)}}})),Wh}async function rd(e,n){const r=$d(e),o=(await mp()).transaction(ua,"readwrite"),i=o.objectStore(ua),l=await i.get(r);return await i.put(n,r),await o.done,(!l||l.fid!==n.fid)&&Rj(e,n.fid),n}async function _j(e){const n=$d(e),s=(await mp()).transaction(ua,"readwrite");await s.objectStore(ua).delete(n),await s.done}async function Fd(e,n){const r=$d(e),o=(await mp()).transaction(ua,"readwrite"),i=o.objectStore(ua),l=await i.get(r),d=n(l);return d===void 0?await i.delete(r):await i.put(d,r),await o.done,d&&(!l||l.fid!==d.fid)&&Rj(e,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xp(e){let n;const r=await Fd(e.appConfig,s=>{const o=hM(s),i=fM(e,o);return n=i.registrationPromise,i.installationEntry});return r.fid===Pf?{installationEntry:await n}:{installationEntry:r,registrationPromise:n}}function hM(e){const n=e||{fid:oM(),registrationStatus:0};return Oj(n)}function fM(e,n){if(n.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(da.create("app-offline"));return{installationEntry:n,registrationPromise:o}}const r={fid:n.fid,registrationStatus:1,registrationTime:Date.now()},s=pM(e,r);return{installationEntry:r,registrationPromise:s}}else return n.registrationStatus===1?{installationEntry:n,registrationPromise:mM(e)}:{installationEntry:n}}async function pM(e,n){try{const r=await nM(e,n);return rd(e.appConfig,r)}catch(r){throw wj(r)&&r.customData.serverCode===409?await _j(e.appConfig):await rd(e.appConfig,{fid:n.fid,registrationStatus:0}),r}}async function mM(e){let n=await Ny(e.appConfig);for(;n.registrationStatus===1;)await Dj(100),n=await Ny(e.appConfig);if(n.registrationStatus===0){const{installationEntry:r,registrationPromise:s}=await xp(e);return s||r}return n}function Ny(e){return Fd(e,n=>{if(!n)throw da.create("installation-not-found");return Oj(n)})}function Oj(e){return xM(e)?{fid:e.fid,registrationStatus:0}:e}function xM(e){return e.registrationStatus===1&&e.registrationTime+vj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM({appConfig:e,heartbeatServiceProvider:n},r){const s=bM(e,r),o=ZO(e,r),i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const l={installation:{sdkVersion:jj,appId:e.appId}},d={method:"POST",headers:o,body:JSON.stringify(l)},u=await Tj(()=>fetch(s,d));if(u.ok){const h=await u.json();return Pj(h)}else throw await Ej("Generate Auth Token",u)}function bM(e,{fid:n}){return`${Cj(e)}/${n}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(e,n=!1){let r;const s=await Fd(e.appConfig,i=>{if(!Mj(i))throw da.create("not-registered");const l=i.authToken;if(!n&&jM(l))return i;if(l.requestStatus===1)return r=yM(e,n),i;{if(!navigator.onLine)throw da.create("app-offline");const d=wM(i);return r=vM(e,d),d}});return r?await r:s.authToken}async function yM(e,n){let r=await Ly(e.appConfig);for(;r.authToken.requestStatus===1;)await Dj(100),r=await Ly(e.appConfig);const s=r.authToken;return s.requestStatus===0?gp(e,n):s}function Ly(e){return Fd(e,n=>{if(!Mj(n))throw da.create("not-registered");const r=n.authToken;return CM(r)?Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}):n})}async function vM(e,n){try{const r=await gM(e,n),s=Object.assign(Object.assign({},n),{authToken:r});return await rd(e.appConfig,s),r}catch(r){if(wj(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await _j(e.appConfig);else{const s=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}});await rd(e.appConfig,s)}throw r}}function Mj(e){return e!==void 0&&e.registrationStatus===2}function jM(e){return e.requestStatus===2&&!SM(e)}function SM(e){const n=Date.now();return n<e.creationTime||e.creationTime+e.expiresIn<n+KO}function wM(e){const n={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:n})}function CM(e){return e.requestStatus===1&&e.requestTime+vj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(e){const n=e,{installationEntry:r,registrationPromise:s}=await xp(n);return s?s.catch(console.error):gp(n).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(e,n=!1){const r=e;return await IM(r),(await gp(r,n)).token}async function IM(e){const{registrationPromise:n}=await xp(e);n&&await n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(e){if(!e||!e.options)throw Bh("App Configuration");if(!e.name)throw Bh("App Name");const n=["projectId","apiKey","appId"];for(const r of n)if(!e.options[r])throw Bh(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Bh(e){return da.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="installations",DM="installations-internal",AM=e=>{const n=e.getProvider("app").getImmediate(),r=TM(n),s=sp(n,"heartbeat");return{app:n,appConfig:r,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},RM=e=>{const n=e.getProvider("app").getImmediate(),r=sp(n,Nj).getImmediate();return{getId:()=>PM(r),getToken:o=>EM(r,o)}};function kM(){Yc(new qc(Nj,AM,"PUBLIC")),Yc(new qc(DM,RM,"PRIVATE"))}kM();Gc(yj,pp);Gc(yj,pp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="/firebase-messaging-sw.js",OM="/firebase-cloud-messaging-push-scope",Lj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",MM="https://fcmregistrations.googleapis.com/v1",$j="google.c.a.c_id",NM="google.c.a.c_l",LM="google.c.a.ts",$M="google.c.a.e";var $y;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})($y||($y={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var nl;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(nl||(nl={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(e){const n=new Uint8Array(e);return btoa(String.fromCharCode(...n)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function FM(e){const n="=".repeat((4-e.length%4)%4),r=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(r),o=new Uint8Array(s.length);for(let i=0;i<s.length;++i)o[i]=s.charCodeAt(i);return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="fcm_token_details_db",WM=5,Fy="fcm_token_object_Store";async function BM(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Vh))return null;let n=null;return(await op(Vh,WM,{upgrade:async(s,o,i,l)=>{var d;if(o<2||!s.objectStoreNames.contains(Fy))return;const u=l.objectStore(Fy),h=await u.index("fcmSenderId").get(e);if(await u.clear(),!!h){if(o===2){const f=h;if(!f.auth||!f.p256dh||!f.endpoint)return;n={token:f.fcmToken,createTime:(d=f.createTime)!==null&&d!==void 0?d:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:no(f.vapidKey)}}}else if(o===3){const f=h;n={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:no(f.auth),p256dh:no(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:no(f.vapidKey)}}}else if(o===4){const f=h;n={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:no(f.auth),p256dh:no(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:no(f.vapidKey)}}}}}})).close(),await Oh(Vh),await Oh("fcm_vapid_details_db"),await Oh("undefined"),VM(n)?n:null}function VM(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:n}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof n.auth=="string"&&n.auth.length>0&&typeof n.p256dh=="string"&&n.p256dh.length>0&&typeof n.endpoint=="string"&&n.endpoint.length>0&&typeof n.swScope=="string"&&n.swScope.length>0&&typeof n.vapidKey=="string"&&n.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="firebase-messaging-database",zM=1,rl="firebase-messaging-store";let Uh=null;function Fj(){return Uh||(Uh=op(UM,zM,{upgrade:(e,n)=>{switch(n){case 0:e.createObjectStore(rl)}}})),Uh}async function HM(e){const n=Wj(e),s=await(await Fj()).transaction(rl).objectStore(rl).get(n);if(s)return s;{const o=await BM(e.appConfig.senderId);if(o)return await bp(e,o),o}}async function bp(e,n){const r=Wj(e),o=(await Fj()).transaction(rl,"readwrite");return await o.objectStore(rl).put(n,r),await o.done,n}function Wj({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},lr=new Gv("messaging","Messaging",GM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(e,n){const r=await vp(e),s=Bj(n),o={method:"POST",headers:r,body:JSON.stringify(s)};let i;try{i=await(await fetch(yp(e.appConfig),o)).json()}catch(l){throw lr.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(i.error){const l=i.error.message;throw lr.create("token-subscribe-failed",{errorInfo:l})}if(!i.token)throw lr.create("token-subscribe-no-token");return i.token}async function qM(e,n){const r=await vp(e),s=Bj(n.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(s)};let i;try{i=await(await fetch(`${yp(e.appConfig)}/${n.token}`,o)).json()}catch(l){throw lr.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(i.error){const l=i.error.message;throw lr.create("token-update-failed",{errorInfo:l})}if(!i.token)throw lr.create("token-update-no-token");return i.token}async function KM(e,n){const s={method:"DELETE",headers:await vp(e)};try{const i=await(await fetch(`${yp(e.appConfig)}/${n}`,s)).json();if(i.error){const l=i.error.message;throw lr.create("token-unsubscribe-failed",{errorInfo:l})}}catch(o){throw lr.create("token-unsubscribe-failed",{errorInfo:o==null?void 0:o.toString()})}}function yp({projectId:e}){return`${MM}/projects/${e}/registrations`}async function vp({appConfig:e,installations:n}){const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function Bj({p256dh:e,auth:n,endpoint:r,vapidKey:s}){const o={web:{endpoint:r,auth:n,p256dh:e}};return s!==Lj&&(o.web.applicationPubKey=s),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=7*24*60*60*1e3;async function XM(e){const n=await ZM(e.swRegistration,e.vapidKey),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:n.endpoint,auth:no(n.getKey("auth")),p256dh:no(n.getKey("p256dh"))},s=await HM(e.firebaseDependencies);if(s){if(eN(s.subscriptionOptions,r))return Date.now()>=s.createTime+JM?QM(e,{token:s.token,createTime:Date.now(),subscriptionOptions:r}):s.token;try{await KM(e.firebaseDependencies,s.token)}catch(o){console.warn(o)}return Wy(e.firebaseDependencies,r)}else return Wy(e.firebaseDependencies,r)}async function QM(e,n){try{const r=await qM(e.firebaseDependencies,n),s=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()});return await bp(e.firebaseDependencies,s),r}catch(r){throw r}}async function Wy(e,n){const s={token:await YM(e,n),createTime:Date.now(),subscriptionOptions:n};return await bp(e,s),s.token}async function ZM(e,n){const r=await e.pushManager.getSubscription();return r||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:FM(n)})}function eN(e,n){const r=n.vapidKey===e.vapidKey,s=n.endpoint===e.endpoint,o=n.auth===e.auth,i=n.p256dh===e.p256dh;return r&&s&&o&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(e){const n={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return tN(n,e),nN(n,e),rN(n,e),n}function tN(e,n){if(!n.notification)return;e.notification={};const r=n.notification.title;r&&(e.notification.title=r);const s=n.notification.body;s&&(e.notification.body=s);const o=n.notification.image;o&&(e.notification.image=o);const i=n.notification.icon;i&&(e.notification.icon=i)}function nN(e,n){n.data&&(e.data=n.data)}function rN(e,n){var r,s,o,i,l;if(!n.fcmOptions&&!(!((r=n.notification)===null||r===void 0)&&r.click_action))return;e.fcmOptions={};const d=(o=(s=n.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&o!==void 0?o:(i=n.notification)===null||i===void 0?void 0:i.click_action;d&&(e.fcmOptions.link=d);const u=(l=n.fcmOptions)===null||l===void 0?void 0:l.analytics_label;u&&(e.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(e){return typeof e=="object"&&!!e&&$j in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vj("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Vj("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Vj(e,n){const r=[];for(let s=0;s<e.length;s++)r.push(e.charAt(s)),s<n.length&&r.push(n.charAt(s));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(e){if(!e||!e.options)throw zh("App Configuration Object");if(!e.name)throw zh("App Name");const n=["projectId","apiKey","appId","messagingSenderId"],{options:r}=e;for(const s of n)if(!r[s])throw zh(s);return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function zh(e){return lr.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(n,r,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=oN(n);this.firebaseDependencies={app:n,appConfig:o,installations:r,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(e){try{e.swRegistration=await navigator.serviceWorker.register(_M,{scope:OM}),e.swRegistration.update().catch(()=>{})}catch(n){throw lr.create("failed-service-worker-registration",{browserErrorMessage:n==null?void 0:n.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(e,n){if(!n&&!e.swRegistration&&await iN(e),!(!n&&e.swRegistration)){if(!(n instanceof ServiceWorkerRegistration))throw lr.create("invalid-sw-registration");e.swRegistration=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(e,n){n?e.vapidKey=n:e.vapidKey||(e.vapidKey=Lj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(e,n){if(!navigator)throw lr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw lr.create("permission-blocked");return await cN(e,n==null?void 0:n.vapidKey),await lN(e,n==null?void 0:n.serviceWorkerRegistration),XM(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(e,n,r){const s=uN(n);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:r[$j],message_name:r[NM],message_time:r[LM],message_device_time:Math.floor(Date.now()/1e3)})}function uN(e){switch(e){case nl.NOTIFICATION_CLICKED:return"notification_open";case nl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(e,n){const r=n.data;if(!r.isFirebaseMessaging)return;e.onMessageHandler&&r.messageType===nl.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(By(r)):e.onMessageHandler.next(By(r)));const s=r.data;sN(s)&&s[$M]==="1"&&await dN(e,r.messageType,s)}const Vy="@firebase/messaging",Uy="0.12.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=e=>{const n=new aN(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>hN(n,r)),n},pN=e=>{const n=e.getProvider("messaging").getImmediate();return{getToken:s=>Uj(n,s)}};function mN(){Yc(new qc("messaging",fN,"PUBLIC")),Yc(new qc("messaging-internal",pN,"PRIVATE")),Gc(Vy,Uy),Gc(Vy,Uy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(){try{await mk()}catch{return!1}return typeof window<"u"&&xk()&&gk()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(e,n){if(!navigator)throw lr.create("only-available-in-window");return e.onMessageHandler=n,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(e=pk()){return xN().then(n=>{if(!n)throw lr.create("unsupported-browser")},n=>{throw lr.create("indexed-db-unsupported")}),sp(ap(e),"messaging").getImmediate()}async function yN(e,n){return e=ap(e),Uj(e,n)}function vN(e,n){return e=ap(e),gN(e,n)}mN();const jN={apiKey:"AIzaSyAsiLj2G16z35SAYVVo79_EJh3qy9X8zFE",authDomain:"journalist-2bf9e.firebaseapp.com",projectId:"journalist-2bf9e",storageBucket:"journalist-2bf9e.firebasestorage.app",messagingSenderId:"1048434393409",appId:"1:1048434393409:web:aca11459895da9872ca1c0",measurementId:"G-23KLS9XB70"},zj=bk(jN),SN=yk(zj),Hj=new vk;new jk;new Sk;new wk("apple.com");let $a=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{$a=bN(zj)}catch(e){console.error("[Firebase] FCM initialization failed:",e)}function Wd(){const e=x.createContext(null);function n(){const r=x.useContext(e);if(!r)throw new Error("Context must be used within provider");return r}return[e,n]}const[wN,cs]=Wd(),CN=({children:e})=>{const n=YO(SN);return t.jsx(wN.Provider,{value:n,children:e})},Gj=x.createContext(null),Ye=()=>x.useContext(Gj),PN=({children:e})=>{const n=cs();if(!n)throw new Error("ApiProvider must be used within AuthProvider. Please wrap ApiProvider with AuthProvider in your component tree.");const[r,s]=x.useState({api:new HO,isAuthenticated:!1,isLoading:!0}),o=x.useCallback(async(i=!1)=>{if(n.user){const l=await n.getToken(i);l&&s(d=>{const u=d.api.setAuthHeader(l).setApis();return{...d,api:u,isAuthenticated:!0,isLoading:!1}})}else s(l=>{const d=l.api.setAuthHeader(null).setApis();return{...l,api:d,isAuthenticated:!1,isLoading:!1}})},[n]);return x.useEffect(()=>{o(!1)},[n.user,n.isAuthenticated,o]),x.useEffect(()=>{console.log("Subscribing to Firebase token refresh events...");const i=n.onTokenRefresh(async()=>{try{console.log("Firebase token refreshed - updating API authorization header..."),await o(!1)}catch(l){console.error("Error updating API token after Firebase refresh:",l)}});return()=>{console.log("Unsubscribing from Firebase token refresh events..."),i()}},[n,o]),t.jsx(Gj.Provider,{value:r,children:e})},EN=" BKFcSPG4h0WTfkz1F5siTwfoHHaBsT-MjwVP1OcRvNjWGYY5ywTG0BARQpTmrprsfus4O8xHBc1Wlo8fIpC4eAQ ",IN=()=>{const[e,n]=x.useState(null),[r,s]=x.useState("default"),[o,i]=x.useState(null),{api:l}=Ye(),d=x.useCallback(async()=>{try{if(!$a){console.warn("[FCM] Messaging not supported in this browser");return}if(Notification.permission==="granted"){console.log("[FCM] Permission already granted"),s("granted"),await u();return}if(Notification.permission==="denied"){console.warn("[FCM] Permission denied by user"),s("denied"),i("Notification permission denied. Please enable it in browser settings.");return}const p=await Notification.requestPermission();s(p),p==="granted"?(console.log("[FCM] Permission granted"),await u()):(console.warn("[FCM] Permission not granted:",p),i("Notification permission not granted"))}catch(p){console.error("[FCM] Error requesting permission:",p),i("Failed to request notification permission")}},[]),u=x.useCallback(async()=>{try{if(!$a){console.warn("[FCM] Messaging not initialized");return}const p=await navigator.serviceWorker.ready,g=await yN($a,{vapidKey:EN,serviceWorkerRegistration:p});g?(console.log("[FCM] Token obtained:",g.substring(0,20)+"..."),n(g),await h(g)):(console.warn("[FCM] No token obtained"),i("Failed to get FCM token"))}catch(p){console.error("[FCM] Error getting token:",p),i("Failed to get FCM token. Make sure VAPID key is configured.")}},[]),h=x.useCallback(async p=>{try{await l.app.notification.registerDeviceToken(p),console.log("[FCM] Token registered with backend")}catch(g){console.error("[FCM] Error registering token with backend:",g)}},[l]),f=x.useCallback(async()=>{if(e)try{await l.app.notification.unregisterDeviceToken(e),console.log("[FCM] Token unregistered from backend"),n(null)}catch(p){console.error("[FCM] Error unregistering token:",p)}},[l,e]);return x.useEffect(()=>{if(!$a)return;const p=vN($a,g=>{var b,y,S,j;if(console.log("[FCM] Foreground message received:",g),Notification.permission==="granted"){const P=((b=g.notification)==null?void 0:b.title)||"New Notification",w={body:((y=g.notification)==null?void 0:y.body)||"",icon:((S=g.notification)==null?void 0:S.icon)||"/vite.svg",badge:"/vite.svg",data:g.data,tag:((j=g.data)==null?void 0:j.notificationId)||"default"};new Notification(P,w)}window.dispatchEvent(new CustomEvent("fcm-notification-received",{detail:g}))});return()=>{p()}},[]),x.useEffect(()=>{Notification.permission==="granted"&&!e&&u()},[]),{fcmToken:e,permission:r,error:o,requestPermission:d,unregisterToken:f}},[TN,xa]=Wd(),DN=({children:e})=>{const n=cs(),{isLoading:r,isAuthenticated:s}=Ye(),{requestPermission:o}=IN(),[i,l]=x.useState({isLoading:!0,isAuthenticated:!1}),d=x.useCallback(async()=>{await n.signOut()},[n]);x.useEffect(()=>{if(!!n.isLoading||!!r){l({isLoading:!0,isAuthenticated:!1});return}const p=!!n.user&&s;l({isLoading:!1,isAuthenticated:p}),p&&o()},[n.isLoading,n.user,r,s,o]);const u={...i,actions:{signOut:d}};return t.jsx(TN.Provider,{value:u,children:e})};var jp={},Hh={};const AN=tR(nR);var zy;function Ze(){return zy||(zy=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=AN}(Hh)),Hh}var RN=Qe;Object.defineProperty(jp,"__esModule",{value:!0});var Bd=jp.default=void 0,kN=RN(Ze()),_N=t;Bd=jp.default=(0,kN.default)((0,_N.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Sp={},ON=Qe;Object.defineProperty(Sp,"__esModule",{value:!0});var Vd=Sp.default=void 0,MN=ON(Ze()),NN=t;Vd=Sp.default=(0,MN.default)((0,NN.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var wp={},LN=Qe;Object.defineProperty(wp,"__esModule",{value:!0});var wl=wp.default=void 0,$N=LN(Ze()),FN=t;wl=wp.default=(0,$N.default)((0,FN.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");var Cp={},WN=Qe;Object.defineProperty(Cp,"__esModule",{value:!0});var Yj=Cp.default=void 0,BN=WN(Ze()),VN=t;Yj=Cp.default=(0,BN.default)((0,VN.jsx)("path",{d:"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m2.19 12.19L6 18l3.81-8.19L18 6z"}),"Explore");var Pp={},UN=Qe;Object.defineProperty(Pp,"__esModule",{value:!0});var Ep=Pp.default=void 0,zN=UN(Ze()),Hy=t;Ep=Pp.default=(0,zN.default)([(0,Hy.jsx)("circle",{cx:"6.18",cy:"17.82",r:"2.18"},"0"),(0,Hy.jsx)("path",{d:"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56m0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9"},"1")],"RssFeed");var Ip={},HN=Qe;Object.defineProperty(Ip,"__esModule",{value:!0});var Qa=Ip.default=void 0,GN=HN(Ze()),YN=t;Qa=Ip.default=(0,GN.default)((0,YN.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var Tp={},qN=Qe;Object.defineProperty(Tp,"__esModule",{value:!0});var Ud=Tp.default=void 0,KN=qN(Ze()),JN=t;Ud=Tp.default=(0,KN.default)((0,JN.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Poll");var Dp={},XN=Qe;Object.defineProperty(Dp,"__esModule",{value:!0});var hi=Dp.default=void 0,QN=XN(Ze()),ZN=t;hi=Dp.default=(0,QN.default)((0,ZN.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2"}),"Bookmark");const qj=x.createContext(null),Ap=()=>{const e=x.useContext(qj);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e},eL=({children:e})=>{const[n,r]=x.useState({open:!1,message:"",severity:"info",autoHideDuration:6e3}),s=x.useCallback((p,g="info",b=6e3)=>{r({open:!0,message:p,severity:g,autoHideDuration:b})},[]),o=x.useCallback(p=>{s(p,"success")},[s]),i=x.useCallback(p=>{s(p,"error")},[s]),l=x.useCallback(p=>{s(p,"warning")},[s]),d=x.useCallback(p=>{s(p,"info")},[s]),u=x.useCallback(p=>{if(p.length===0)return;const g=(S,j="")=>{const P=Object.values(S.constraints||{}),w=`${j}${S.property}: ${P.join(", ")}`;if(S.children&&S.children.length>0){const I=S.children.map(T=>g(T,"  "));return`${w}
${I.join(`
`)}`}return w},b=p.map(S=>g(S)),y=b.length===1?b[0]:`Validation errors:
${b.map(S=>` ${S}`).join(`
`)}`;s(y,"error",1e4)},[s]),h=x.useCallback(()=>{r(p=>({...p,open:!1}))},[]),f={showNotification:s,showSuccess:o,showError:i,showWarning:l,showInfo:d,showValidationErrors:u,hideNotification:h};return t.jsxs(qj.Provider,{value:f,children:[e,t.jsx(Dv,{open:n.open,autoHideDuration:n.autoHideDuration,onClose:h,anchorOrigin:{vertical:"top",horizontal:"right"},children:t.jsx(lt,{onClose:h,severity:n.severity,variant:"filled",sx:{width:"100%",whiteSpace:"pre-line"},children:n.message})})]})},tL=e=>{var n,r,s;return((n=e==null?void 0:e.response)==null?void 0:n.status)===400&&((r=e.response.data)==null?void 0:r.status)==="error"&&((s=e.response.data)==null?void 0:s.errors)},nL=e=>{var n;return((n=e==null?void 0:e.response)==null?void 0:n.status)===401},rL=e=>{var n;return(((n=e==null?void 0:e.response)==null?void 0:n.status)||0)>=500},sL=e=>!(e!=null&&e.response),Ke=()=>{const[e,n]=x.useState(!1),[r,s]=x.useState(null),{showSuccess:o,showError:i,showValidationErrors:l}=Ap(),d=x.useCallback(async(h,f={})=>{var S,j;const{showSuccessMessage:p=!1,successMessage:g="Operation completed successfully",showErrorToast:b=!0,customErrorHandler:y}=f;try{n(!0),s(null);const P=await h();return p&&o(g),P}catch(P){if(y&&y(P))return null;const w=P;let I="An error occurred",T=b;if(tL(w)){const D=(S=w.response)==null?void 0:S.data;I=D.message||"Validation failed",s(I),T&&l&&(l(D.errors),T=!1)}else if(nL(w))I="Unauthorized access. Please log in again.",s(I),T&&i(I);else if(rL(w))I="Server error. Please try again later.",s(I),T&&i(I);else if(sL(w))I="Network error. Please check your connection.",s(I),T&&i(I);else{const D=(j=w.response)==null?void 0:j.data;I=(D==null?void 0:D.message)||w.message||"An error occurred",s(I),T&&i(I)}return null}finally{n(!1)}},[o,i,l]),u=x.useCallback(()=>{s(null)},[]);return{loading:e,error:r,execute:d,clearError:u}},Gy=({isOpen:e})=>{const n=ma(),{api:r}=Ye(),{execute:s}=Ke(),[o,i]=x.useState([]),l=[{path:`${fe.APP_NEWS_MY_FEED}`,icon:t.jsx(Qa,{}),label:"For you"},{path:`${fe.APP_NEWS_DISCOVER}`,icon:t.jsx(Yj,{}),label:"Discover"},{path:`${fe.APP_POLLS}`,icon:t.jsx(Ud,{}),label:"Polls"},{path:`${fe.APP_CHANNELS}`,icon:t.jsx(Ep,{}),label:"Channels"},{path:`${fe.APP_BOOKMARKS}`,icon:t.jsx(hi,{}),label:"Bookmarks"}],d=[{path:`${fe.APP_NEWS_TRENDING}`,icon:t.jsx(wl,{}),label:"Trending"}];return x.useEffect(()=>{e&&(async()=>{const h=await s(()=>r==null?void 0:r.app.channel.getChannels({},{page:1,limit:5}),{showErrorToast:!1});h&&i(h.items)})()},[e]),e?t.jsxs(C,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"auto",p:2},children:[t.jsx(br,{sx:{pt:0,pb:0},children:l.map(u=>t.jsxs(ir,{button:!0,component:er,to:u.path,selected:n.pathname===u.path,sx:{borderRadius:1,mx:1,mb:.5,py:1,"&.Mui-selected":{backgroundColor:"action.selected",fontWeight:600},"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40},children:u.icon}),t.jsx(Bt,{primary:u.label,primaryTypographyProps:{fontWeight:n.pathname===u.path?600:400,fontSize:"0.95rem"}})]},u.path))}),t.jsx(Mt,{sx:{my:1}}),t.jsx(C,{sx:{px:2,py:1},children:t.jsx(v,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",textTransform:"uppercase",fontSize:"0.75rem",letterSpacing:"0.5px"},children:"Categories"})}),t.jsx(br,{sx:{pt:0,pb:1},children:d.map(u=>t.jsxs(ir,{button:!0,component:er,to:u.path,sx:{borderRadius:1,mx:1,mb:.5,py:.75,"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40},children:u.icon}),t.jsx(Bt,{primary:u.label,primaryTypographyProps:{fontSize:"0.9rem"}})]},u.path))}),t.jsx(Mt,{sx:{my:1}}),t.jsx(C,{sx:{px:2,py:1},children:t.jsx(v,{variant:"caption",sx:{fontWeight:600,color:"text.secondary",textTransform:"uppercase",fontSize:"0.75rem",letterSpacing:"0.5px"},children:"Popular"})}),t.jsx(br,{sx:{pt:0,pb:1,flexGrow:1},children:o.map(u=>t.jsxs(ir,{button:!0,component:er,to:`${fe.APP_CHANNELS}/${u.id}`,sx:{borderRadius:1,mx:1,mb:.5,py:1,"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Sn,{src:u.logoUrl,sx:{width:32,height:32,mr:1.5},children:u.name.charAt(0).toUpperCase()}),t.jsx(C,{sx:{flexGrow:1,minWidth:0},children:t.jsx(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:t.jsx(v,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u.name})})})]},u.id))})]}):t.jsx(C,{sx:{height:"100%",display:"flex",flexDirection:"column",py:1},children:t.jsx(br,{sx:{flexGrow:1},children:l.map(u=>t.jsx(ir,{button:!0,component:er,to:u.path,selected:n.pathname===u.path,sx:{borderRadius:1,mx:.5,justifyContent:"center",minHeight:48,"&.Mui-selected":{backgroundColor:"action.selected"}},children:t.jsx(Xt,{sx:{minWidth:"auto"},children:u.icon})},u.path))})})};var Rp={},oL=Qe;Object.defineProperty(Rp,"__esModule",{value:!0});var Kj=Rp.default=void 0,aL=oL(Ze()),iL=t;Kj=Rp.default=(0,aL.default)((0,iL.jsx)("path",{d:"M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1"}),"MenuRounded");var kp={},lL=Qe;Object.defineProperty(kp,"__esModule",{value:!0});var zd=kp.default=void 0,cL=lL(Ze()),dL=t;zd=kp.default=(0,cL.default)((0,dL.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");var _p={},uL=Qe;Object.defineProperty(_p,"__esModule",{value:!0});var Cl=_p.default=void 0,hL=uL(Ze()),fL=t;Cl=_p.default=(0,hL.default)((0,fL.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var Op={},pL=Qe;Object.defineProperty(Op,"__esModule",{value:!0});var Jj=Op.default=void 0,mL=pL(Ze()),xL=t;Jj=Op.default=(0,mL.default)((0,xL.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary");var Mp={},gL=Qe;Object.defineProperty(Mp,"__esModule",{value:!0});var Xj=Mp.default=void 0,bL=gL(Ze()),yL=t;Xj=Mp.default=(0,bL.default)((0,yL.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var Np={},vL=Qe;Object.defineProperty(Np,"__esModule",{value:!0});var Qj=Np.default=void 0,jL=vL(Ze()),SL=t;Qj=Np.default=(0,jL.default)((0,SL.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");var sd={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */sd.exports;(function(e,n){(function(){var r,s="4.17.21",o=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,g=2,b=4,y=1,S=2,j=1,P=2,w=4,I=8,T=16,D=32,R=64,_=128,k=256,N=512,L=30,z="...",$=800,G=16,K=1,J=2,q=3,Q=1/0,Y=9007199254740991,oe=17976931348623157e292,V=NaN,Z=4294967295,Ee=Z-1,be=Z>>>1,ae=[["ary",_],["bind",j],["bindKey",P],["curry",I],["curryRight",T],["flip",N],["partial",D],["partialRight",R],["rearg",k]],ee="[object Arguments]",Ce="[object Array]",Ae="[object AsyncFunction]",We="[object Boolean]",ye="[object Date]",ie="[object DOMException]",le="[object Error]",se="[object Function]",ge="[object GeneratorFunction]",pe="[object Map]",ke="[object Number]",ne="[object Null]",_e="[object Object]",de="[object Promise]",Se="[object Proxy]",Pe="[object RegExp]",B="[object Set]",Me="[object String]",qe="[object Symbol]",Cn="[object Undefined]",tn="[object WeakMap]",Nt="[object WeakSet]",hn="[object ArrayBuffer]",Un="[object DataView]",ft="[object Float32Array]",vt="[object Float64Array]",kt="[object Int8Array]",Jt="[object Int16Array]",On="[object Int32Array]",mn="[object Uint8Array]",nr="[object Uint8ClampedArray]",yn="[object Uint16Array]",It="[object Uint32Array]",Mn=/\b__p \+= '';/g,qn=/\b(__p \+=) '' \+/g,Tr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bo=/&(?:amp|lt|gt|quot|#39);/g,ur=/[&<>"']/g,gu=RegExp(Bo.source),bu=RegExp(ur.source),yu=/<%-([\s\S]+?)%>/g,Vx=/<%([\s\S]+?)%>/g,vu=/<%=([\s\S]+?)%>/g,vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dr=/^\w*$/,kl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ju=/[\\^$.*+?()[\]{}|]/g,AC=RegExp(ju.source),Su=/^\s+/,RC=/\s/,kC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_C=/\{\n\/\* \[wrapped with (.+)\] \*/,OC=/,? & /,MC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,NC=/[()=,{}\[\]\/\s]/,LC=/\\(\\)?/g,$C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ux=/\w*$/,FC=/^[-+]0x[0-9a-f]+$/i,WC=/^0b[01]+$/i,BC=/^\[object .+?Constructor\]$/,VC=/^0o[0-7]+$/i,UC=/^(?:0|[1-9]\d*)$/,zC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_l=/($^)/,HC=/['\n\r\u2028\u2029\\]/g,Ol="\\ud800-\\udfff",GC="\\u0300-\\u036f",YC="\\ufe20-\\ufe2f",qC="\\u20d0-\\u20ff",zx=GC+YC+qC,Hx="\\u2700-\\u27bf",Gx="a-z\\xdf-\\xf6\\xf8-\\xff",KC="\\xac\\xb1\\xd7\\xf7",JC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",XC="\\u2000-\\u206f",QC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yx="A-Z\\xc0-\\xd6\\xd8-\\xde",qx="\\ufe0e\\ufe0f",Kx=KC+JC+XC+QC,wu="[']",ZC="["+Ol+"]",Jx="["+Kx+"]",Ml="["+zx+"]",Xx="\\d+",e2="["+Hx+"]",Qx="["+Gx+"]",Zx="[^"+Ol+Kx+Xx+Hx+Gx+Yx+"]",Cu="\\ud83c[\\udffb-\\udfff]",t2="(?:"+Ml+"|"+Cu+")",eg="[^"+Ol+"]",Pu="(?:\\ud83c[\\udde6-\\uddff]){2}",Eu="[\\ud800-\\udbff][\\udc00-\\udfff]",va="["+Yx+"]",tg="\\u200d",ng="(?:"+Qx+"|"+Zx+")",n2="(?:"+va+"|"+Zx+")",rg="(?:"+wu+"(?:d|ll|m|re|s|t|ve))?",sg="(?:"+wu+"(?:D|LL|M|RE|S|T|VE))?",og=t2+"?",ag="["+qx+"]?",r2="(?:"+tg+"(?:"+[eg,Pu,Eu].join("|")+")"+ag+og+")*",s2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ig=ag+og+r2,a2="(?:"+[e2,Pu,Eu].join("|")+")"+ig,i2="(?:"+[eg+Ml+"?",Ml,Pu,Eu,ZC].join("|")+")",l2=RegExp(wu,"g"),c2=RegExp(Ml,"g"),Iu=RegExp(Cu+"(?="+Cu+")|"+i2+ig,"g"),d2=RegExp([va+"?"+Qx+"+"+rg+"(?="+[Jx,va,"$"].join("|")+")",n2+"+"+sg+"(?="+[Jx,va+ng,"$"].join("|")+")",va+"?"+ng+"+"+rg,va+"+"+sg,o2,s2,Xx,a2].join("|"),"g"),u2=RegExp("["+tg+Ol+zx+qx+"]"),h2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,f2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],p2=-1,on={};on[ft]=on[vt]=on[kt]=on[Jt]=on[On]=on[mn]=on[nr]=on[yn]=on[It]=!0,on[ee]=on[Ce]=on[hn]=on[We]=on[Un]=on[ye]=on[le]=on[se]=on[pe]=on[ke]=on[_e]=on[Pe]=on[B]=on[Me]=on[tn]=!1;var sn={};sn[ee]=sn[Ce]=sn[hn]=sn[Un]=sn[We]=sn[ye]=sn[ft]=sn[vt]=sn[kt]=sn[Jt]=sn[On]=sn[pe]=sn[ke]=sn[_e]=sn[Pe]=sn[B]=sn[Me]=sn[qe]=sn[mn]=sn[nr]=sn[yn]=sn[It]=!0,sn[le]=sn[se]=sn[tn]=!1;var m2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},x2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},b2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},y2=parseFloat,v2=parseInt,lg=typeof _i=="object"&&_i&&_i.Object===Object&&_i,j2=typeof self=="object"&&self&&self.Object===Object&&self,Kn=lg||j2||Function("return this")(),Tu=n&&!n.nodeType&&n,Vo=Tu&&!0&&e&&!e.nodeType&&e,cg=Vo&&Vo.exports===Tu,Du=cg&&lg.process,Hr=function(){try{var X=Vo&&Vo.require&&Vo.require("util").types;return X||Du&&Du.binding&&Du.binding("util")}catch{}}(),dg=Hr&&Hr.isArrayBuffer,ug=Hr&&Hr.isDate,hg=Hr&&Hr.isMap,fg=Hr&&Hr.isRegExp,pg=Hr&&Hr.isSet,mg=Hr&&Hr.isTypedArray;function Ar(X,we,xe){switch(xe.length){case 0:return X.call(we);case 1:return X.call(we,xe[0]);case 2:return X.call(we,xe[0],xe[1]);case 3:return X.call(we,xe[0],xe[1],xe[2])}return X.apply(we,xe)}function S2(X,we,xe,Je){for(var pt=-1,Lt=X==null?0:X.length;++pt<Lt;){var Wn=X[pt];we(Je,Wn,xe(Wn),X)}return Je}function Gr(X,we){for(var xe=-1,Je=X==null?0:X.length;++xe<Je&&we(X[xe],xe,X)!==!1;);return X}function w2(X,we){for(var xe=X==null?0:X.length;xe--&&we(X[xe],xe,X)!==!1;);return X}function xg(X,we){for(var xe=-1,Je=X==null?0:X.length;++xe<Je;)if(!we(X[xe],xe,X))return!1;return!0}function co(X,we){for(var xe=-1,Je=X==null?0:X.length,pt=0,Lt=[];++xe<Je;){var Wn=X[xe];we(Wn,xe,X)&&(Lt[pt++]=Wn)}return Lt}function Nl(X,we){var xe=X==null?0:X.length;return!!xe&&ja(X,we,0)>-1}function Au(X,we,xe){for(var Je=-1,pt=X==null?0:X.length;++Je<pt;)if(xe(we,X[Je]))return!0;return!1}function fn(X,we){for(var xe=-1,Je=X==null?0:X.length,pt=Array(Je);++xe<Je;)pt[xe]=we(X[xe],xe,X);return pt}function uo(X,we){for(var xe=-1,Je=we.length,pt=X.length;++xe<Je;)X[pt+xe]=we[xe];return X}function Ru(X,we,xe,Je){var pt=-1,Lt=X==null?0:X.length;for(Je&&Lt&&(xe=X[++pt]);++pt<Lt;)xe=we(xe,X[pt],pt,X);return xe}function C2(X,we,xe,Je){var pt=X==null?0:X.length;for(Je&&pt&&(xe=X[--pt]);pt--;)xe=we(xe,X[pt],pt,X);return xe}function ku(X,we){for(var xe=-1,Je=X==null?0:X.length;++xe<Je;)if(we(X[xe],xe,X))return!0;return!1}var P2=_u("length");function E2(X){return X.split("")}function I2(X){return X.match(MC)||[]}function gg(X,we,xe){var Je;return xe(X,function(pt,Lt,Wn){if(we(pt,Lt,Wn))return Je=Lt,!1}),Je}function Ll(X,we,xe,Je){for(var pt=X.length,Lt=xe+(Je?1:-1);Je?Lt--:++Lt<pt;)if(we(X[Lt],Lt,X))return Lt;return-1}function ja(X,we,xe){return we===we?F2(X,we,xe):Ll(X,bg,xe)}function T2(X,we,xe,Je){for(var pt=xe-1,Lt=X.length;++pt<Lt;)if(Je(X[pt],we))return pt;return-1}function bg(X){return X!==X}function yg(X,we){var xe=X==null?0:X.length;return xe?Mu(X,we)/xe:V}function _u(X){return function(we){return we==null?r:we[X]}}function Ou(X){return function(we){return X==null?r:X[we]}}function vg(X,we,xe,Je,pt){return pt(X,function(Lt,Wn,nn){xe=Je?(Je=!1,Lt):we(xe,Lt,Wn,nn)}),xe}function D2(X,we){var xe=X.length;for(X.sort(we);xe--;)X[xe]=X[xe].value;return X}function Mu(X,we){for(var xe,Je=-1,pt=X.length;++Je<pt;){var Lt=we(X[Je]);Lt!==r&&(xe=xe===r?Lt:xe+Lt)}return xe}function Nu(X,we){for(var xe=-1,Je=Array(X);++xe<X;)Je[xe]=we(xe);return Je}function A2(X,we){return fn(we,function(xe){return[xe,X[xe]]})}function jg(X){return X&&X.slice(0,Pg(X)+1).replace(Su,"")}function Rr(X){return function(we){return X(we)}}function Lu(X,we){return fn(we,function(xe){return X[xe]})}function bi(X,we){return X.has(we)}function Sg(X,we){for(var xe=-1,Je=X.length;++xe<Je&&ja(we,X[xe],0)>-1;);return xe}function wg(X,we){for(var xe=X.length;xe--&&ja(we,X[xe],0)>-1;);return xe}function R2(X,we){for(var xe=X.length,Je=0;xe--;)X[xe]===we&&++Je;return Je}var k2=Ou(m2),_2=Ou(x2);function O2(X){return"\\"+b2[X]}function M2(X,we){return X==null?r:X[we]}function Sa(X){return u2.test(X)}function N2(X){return h2.test(X)}function L2(X){for(var we,xe=[];!(we=X.next()).done;)xe.push(we.value);return xe}function $u(X){var we=-1,xe=Array(X.size);return X.forEach(function(Je,pt){xe[++we]=[pt,Je]}),xe}function Cg(X,we){return function(xe){return X(we(xe))}}function ho(X,we){for(var xe=-1,Je=X.length,pt=0,Lt=[];++xe<Je;){var Wn=X[xe];(Wn===we||Wn===f)&&(X[xe]=f,Lt[pt++]=xe)}return Lt}function $l(X){var we=-1,xe=Array(X.size);return X.forEach(function(Je){xe[++we]=Je}),xe}function $2(X){var we=-1,xe=Array(X.size);return X.forEach(function(Je){xe[++we]=[Je,Je]}),xe}function F2(X,we,xe){for(var Je=xe-1,pt=X.length;++Je<pt;)if(X[Je]===we)return Je;return-1}function W2(X,we,xe){for(var Je=xe+1;Je--;)if(X[Je]===we)return Je;return Je}function wa(X){return Sa(X)?V2(X):P2(X)}function ds(X){return Sa(X)?U2(X):E2(X)}function Pg(X){for(var we=X.length;we--&&RC.test(X.charAt(we)););return we}var B2=Ou(g2);function V2(X){for(var we=Iu.lastIndex=0;Iu.test(X);)++we;return we}function U2(X){return X.match(Iu)||[]}function z2(X){return X.match(d2)||[]}var H2=function X(we){we=we==null?Kn:Ca.defaults(Kn.Object(),we,Ca.pick(Kn,f2));var xe=we.Array,Je=we.Date,pt=we.Error,Lt=we.Function,Wn=we.Math,nn=we.Object,Fu=we.RegExp,G2=we.String,Yr=we.TypeError,Fl=xe.prototype,Y2=Lt.prototype,Pa=nn.prototype,Wl=we["__core-js_shared__"],Bl=Y2.toString,zt=Pa.hasOwnProperty,q2=0,Eg=function(){var a=/[^.]+$/.exec(Wl&&Wl.keys&&Wl.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Vl=Pa.toString,K2=Bl.call(nn),J2=Kn._,X2=Fu("^"+Bl.call(zt).replace(ju,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ul=cg?we.Buffer:r,fo=we.Symbol,zl=we.Uint8Array,Ig=Ul?Ul.allocUnsafe:r,Hl=Cg(nn.getPrototypeOf,nn),Tg=nn.create,Dg=Pa.propertyIsEnumerable,Gl=Fl.splice,Ag=fo?fo.isConcatSpreadable:r,yi=fo?fo.iterator:r,Uo=fo?fo.toStringTag:r,Yl=function(){try{var a=qo(nn,"defineProperty");return a({},"",{}),a}catch{}}(),Q2=we.clearTimeout!==Kn.clearTimeout&&we.clearTimeout,Z2=Je&&Je.now!==Kn.Date.now&&Je.now,eP=we.setTimeout!==Kn.setTimeout&&we.setTimeout,ql=Wn.ceil,Kl=Wn.floor,Wu=nn.getOwnPropertySymbols,tP=Ul?Ul.isBuffer:r,Rg=we.isFinite,nP=Fl.join,rP=Cg(nn.keys,nn),Bn=Wn.max,rr=Wn.min,sP=Je.now,oP=we.parseInt,kg=Wn.random,aP=Fl.reverse,Bu=qo(we,"DataView"),vi=qo(we,"Map"),Vu=qo(we,"Promise"),Ea=qo(we,"Set"),ji=qo(we,"WeakMap"),Si=qo(nn,"create"),Jl=ji&&new ji,Ia={},iP=Ko(Bu),lP=Ko(vi),cP=Ko(Vu),dP=Ko(Ea),uP=Ko(ji),Xl=fo?fo.prototype:r,wi=Xl?Xl.valueOf:r,_g=Xl?Xl.toString:r;function O(a){if(jn(a)&&!gt(a)&&!(a instanceof At)){if(a instanceof qr)return a;if(zt.call(a,"__wrapped__"))return Ob(a)}return new qr(a)}var Ta=function(){function a(){}return function(c){if(!xn(c))return{};if(Tg)return Tg(c);a.prototype=c;var m=new a;return a.prototype=r,m}}();function Ql(){}function qr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}O.templateSettings={escape:yu,evaluate:Vx,interpolate:vu,variable:"",imports:{_:O}},O.prototype=Ql.prototype,O.prototype.constructor=O,qr.prototype=Ta(Ql.prototype),qr.prototype.constructor=qr;function At(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function hP(){var a=new At(this.__wrapped__);return a.__actions__=vr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=vr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=vr(this.__views__),a}function fP(){if(this.__filtered__){var a=new At(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function pP(){var a=this.__wrapped__.value(),c=this.__dir__,m=gt(a),E=c<0,A=m?a.length:0,M=EE(0,A,this.__views__),W=M.start,H=M.end,te=H-W,Ie=E?H:W-1,Te=this.__iteratees__,Re=Te.length,Be=0,tt=rr(te,this.__takeCount__);if(!m||!E&&A==te&&tt==te)return rb(a,this.__actions__);var dt=[];e:for(;te--&&Be<tt;){Ie+=c;for(var wt=-1,ut=a[Ie];++wt<Re;){var Tt=Te[wt],Rt=Tt.iteratee,Or=Tt.type,pr=Rt(ut);if(Or==J)ut=pr;else if(!pr){if(Or==K)continue e;break e}}dt[Be++]=ut}return dt}At.prototype=Ta(Ql.prototype),At.prototype.constructor=At;function zo(a){var c=-1,m=a==null?0:a.length;for(this.clear();++c<m;){var E=a[c];this.set(E[0],E[1])}}function mP(){this.__data__=Si?Si(null):{},this.size=0}function xP(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function gP(a){var c=this.__data__;if(Si){var m=c[a];return m===u?r:m}return zt.call(c,a)?c[a]:r}function bP(a){var c=this.__data__;return Si?c[a]!==r:zt.call(c,a)}function yP(a,c){var m=this.__data__;return this.size+=this.has(a)?0:1,m[a]=Si&&c===r?u:c,this}zo.prototype.clear=mP,zo.prototype.delete=xP,zo.prototype.get=gP,zo.prototype.has=bP,zo.prototype.set=yP;function zs(a){var c=-1,m=a==null?0:a.length;for(this.clear();++c<m;){var E=a[c];this.set(E[0],E[1])}}function vP(){this.__data__=[],this.size=0}function jP(a){var c=this.__data__,m=Zl(c,a);if(m<0)return!1;var E=c.length-1;return m==E?c.pop():Gl.call(c,m,1),--this.size,!0}function SP(a){var c=this.__data__,m=Zl(c,a);return m<0?r:c[m][1]}function wP(a){return Zl(this.__data__,a)>-1}function CP(a,c){var m=this.__data__,E=Zl(m,a);return E<0?(++this.size,m.push([a,c])):m[E][1]=c,this}zs.prototype.clear=vP,zs.prototype.delete=jP,zs.prototype.get=SP,zs.prototype.has=wP,zs.prototype.set=CP;function Hs(a){var c=-1,m=a==null?0:a.length;for(this.clear();++c<m;){var E=a[c];this.set(E[0],E[1])}}function PP(){this.size=0,this.__data__={hash:new zo,map:new(vi||zs),string:new zo}}function EP(a){var c=uc(this,a).delete(a);return this.size-=c?1:0,c}function IP(a){return uc(this,a).get(a)}function TP(a){return uc(this,a).has(a)}function DP(a,c){var m=uc(this,a),E=m.size;return m.set(a,c),this.size+=m.size==E?0:1,this}Hs.prototype.clear=PP,Hs.prototype.delete=EP,Hs.prototype.get=IP,Hs.prototype.has=TP,Hs.prototype.set=DP;function Ho(a){var c=-1,m=a==null?0:a.length;for(this.__data__=new Hs;++c<m;)this.add(a[c])}function AP(a){return this.__data__.set(a,u),this}function RP(a){return this.__data__.has(a)}Ho.prototype.add=Ho.prototype.push=AP,Ho.prototype.has=RP;function us(a){var c=this.__data__=new zs(a);this.size=c.size}function kP(){this.__data__=new zs,this.size=0}function _P(a){var c=this.__data__,m=c.delete(a);return this.size=c.size,m}function OP(a){return this.__data__.get(a)}function MP(a){return this.__data__.has(a)}function NP(a,c){var m=this.__data__;if(m instanceof zs){var E=m.__data__;if(!vi||E.length<o-1)return E.push([a,c]),this.size=++m.size,this;m=this.__data__=new Hs(E)}return m.set(a,c),this.size=m.size,this}us.prototype.clear=kP,us.prototype.delete=_P,us.prototype.get=OP,us.prototype.has=MP,us.prototype.set=NP;function Og(a,c){var m=gt(a),E=!m&&Jo(a),A=!m&&!E&&bo(a),M=!m&&!E&&!A&&ka(a),W=m||E||A||M,H=W?Nu(a.length,G2):[],te=H.length;for(var Ie in a)(c||zt.call(a,Ie))&&!(W&&(Ie=="length"||A&&(Ie=="offset"||Ie=="parent")||M&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||Ks(Ie,te)))&&H.push(Ie);return H}function Mg(a){var c=a.length;return c?a[Zu(0,c-1)]:r}function LP(a,c){return hc(vr(a),Go(c,0,a.length))}function $P(a){return hc(vr(a))}function Uu(a,c,m){(m!==r&&!hs(a[c],m)||m===r&&!(c in a))&&Gs(a,c,m)}function Ci(a,c,m){var E=a[c];(!(zt.call(a,c)&&hs(E,m))||m===r&&!(c in a))&&Gs(a,c,m)}function Zl(a,c){for(var m=a.length;m--;)if(hs(a[m][0],c))return m;return-1}function FP(a,c,m,E){return po(a,function(A,M,W){c(E,A,m(A),W)}),E}function Ng(a,c){return a&&Ds(c,zn(c),a)}function WP(a,c){return a&&Ds(c,Sr(c),a)}function Gs(a,c,m){c=="__proto__"&&Yl?Yl(a,c,{configurable:!0,enumerable:!0,value:m,writable:!0}):a[c]=m}function zu(a,c){for(var m=-1,E=c.length,A=xe(E),M=a==null;++m<E;)A[m]=M?r:Ch(a,c[m]);return A}function Go(a,c,m){return a===a&&(m!==r&&(a=a<=m?a:m),c!==r&&(a=a>=c?a:c)),a}function Kr(a,c,m,E,A,M){var W,H=c&p,te=c&g,Ie=c&b;if(m&&(W=A?m(a,E,A,M):m(a)),W!==r)return W;if(!xn(a))return a;var Te=gt(a);if(Te){if(W=TE(a),!H)return vr(a,W)}else{var Re=sr(a),Be=Re==se||Re==ge;if(bo(a))return ab(a,H);if(Re==_e||Re==ee||Be&&!A){if(W=te||Be?{}:Pb(a),!H)return te?gE(a,WP(W,a)):xE(a,Ng(W,a))}else{if(!sn[Re])return A?a:{};W=DE(a,Re,H)}}M||(M=new us);var tt=M.get(a);if(tt)return tt;M.set(a,W),ey(a)?a.forEach(function(ut){W.add(Kr(ut,c,m,ut,a,M))}):Qb(a)&&a.forEach(function(ut,Tt){W.set(Tt,Kr(ut,c,m,Tt,a,M))});var dt=Ie?te?dh:ch:te?Sr:zn,wt=Te?r:dt(a);return Gr(wt||a,function(ut,Tt){wt&&(Tt=ut,ut=a[Tt]),Ci(W,Tt,Kr(ut,c,m,Tt,a,M))}),W}function BP(a){var c=zn(a);return function(m){return Lg(m,a,c)}}function Lg(a,c,m){var E=m.length;if(a==null)return!E;for(a=nn(a);E--;){var A=m[E],M=c[A],W=a[A];if(W===r&&!(A in a)||!M(W))return!1}return!0}function $g(a,c,m){if(typeof a!="function")throw new Yr(l);return Ri(function(){a.apply(r,m)},c)}function Pi(a,c,m,E){var A=-1,M=Nl,W=!0,H=a.length,te=[],Ie=c.length;if(!H)return te;m&&(c=fn(c,Rr(m))),E?(M=Au,W=!1):c.length>=o&&(M=bi,W=!1,c=new Ho(c));e:for(;++A<H;){var Te=a[A],Re=m==null?Te:m(Te);if(Te=E||Te!==0?Te:0,W&&Re===Re){for(var Be=Ie;Be--;)if(c[Be]===Re)continue e;te.push(Te)}else M(c,Re,E)||te.push(Te)}return te}var po=ub(Ts),Fg=ub(Gu,!0);function VP(a,c){var m=!0;return po(a,function(E,A,M){return m=!!c(E,A,M),m}),m}function ec(a,c,m){for(var E=-1,A=a.length;++E<A;){var M=a[E],W=c(M);if(W!=null&&(H===r?W===W&&!_r(W):m(W,H)))var H=W,te=M}return te}function UP(a,c,m,E){var A=a.length;for(m=jt(m),m<0&&(m=-m>A?0:A+m),E=E===r||E>A?A:jt(E),E<0&&(E+=A),E=m>E?0:ny(E);m<E;)a[m++]=c;return a}function Wg(a,c){var m=[];return po(a,function(E,A,M){c(E,A,M)&&m.push(E)}),m}function Jn(a,c,m,E,A){var M=-1,W=a.length;for(m||(m=RE),A||(A=[]);++M<W;){var H=a[M];c>0&&m(H)?c>1?Jn(H,c-1,m,E,A):uo(A,H):E||(A[A.length]=H)}return A}var Hu=hb(),Bg=hb(!0);function Ts(a,c){return a&&Hu(a,c,zn)}function Gu(a,c){return a&&Bg(a,c,zn)}function tc(a,c){return co(c,function(m){return Js(a[m])})}function Yo(a,c){c=xo(c,a);for(var m=0,E=c.length;a!=null&&m<E;)a=a[As(c[m++])];return m&&m==E?a:r}function Vg(a,c,m){var E=c(a);return gt(a)?E:uo(E,m(a))}function hr(a){return a==null?a===r?Cn:ne:Uo&&Uo in nn(a)?PE(a):$E(a)}function Yu(a,c){return a>c}function zP(a,c){return a!=null&&zt.call(a,c)}function HP(a,c){return a!=null&&c in nn(a)}function GP(a,c,m){return a>=rr(c,m)&&a<Bn(c,m)}function qu(a,c,m){for(var E=m?Au:Nl,A=a[0].length,M=a.length,W=M,H=xe(M),te=1/0,Ie=[];W--;){var Te=a[W];W&&c&&(Te=fn(Te,Rr(c))),te=rr(Te.length,te),H[W]=!m&&(c||A>=120&&Te.length>=120)?new Ho(W&&Te):r}Te=a[0];var Re=-1,Be=H[0];e:for(;++Re<A&&Ie.length<te;){var tt=Te[Re],dt=c?c(tt):tt;if(tt=m||tt!==0?tt:0,!(Be?bi(Be,dt):E(Ie,dt,m))){for(W=M;--W;){var wt=H[W];if(!(wt?bi(wt,dt):E(a[W],dt,m)))continue e}Be&&Be.push(dt),Ie.push(tt)}}return Ie}function YP(a,c,m,E){return Ts(a,function(A,M,W){c(E,m(A),M,W)}),E}function Ei(a,c,m){c=xo(c,a),a=Db(a,c);var E=a==null?a:a[As(Xr(c))];return E==null?r:Ar(E,a,m)}function Ug(a){return jn(a)&&hr(a)==ee}function qP(a){return jn(a)&&hr(a)==hn}function KP(a){return jn(a)&&hr(a)==ye}function Ii(a,c,m,E,A){return a===c?!0:a==null||c==null||!jn(a)&&!jn(c)?a!==a&&c!==c:JP(a,c,m,E,Ii,A)}function JP(a,c,m,E,A,M){var W=gt(a),H=gt(c),te=W?Ce:sr(a),Ie=H?Ce:sr(c);te=te==ee?_e:te,Ie=Ie==ee?_e:Ie;var Te=te==_e,Re=Ie==_e,Be=te==Ie;if(Be&&bo(a)){if(!bo(c))return!1;W=!0,Te=!1}if(Be&&!Te)return M||(M=new us),W||ka(a)?Sb(a,c,m,E,A,M):wE(a,c,te,m,E,A,M);if(!(m&y)){var tt=Te&&zt.call(a,"__wrapped__"),dt=Re&&zt.call(c,"__wrapped__");if(tt||dt){var wt=tt?a.value():a,ut=dt?c.value():c;return M||(M=new us),A(wt,ut,m,E,M)}}return Be?(M||(M=new us),CE(a,c,m,E,A,M)):!1}function XP(a){return jn(a)&&sr(a)==pe}function Ku(a,c,m,E){var A=m.length,M=A,W=!E;if(a==null)return!M;for(a=nn(a);A--;){var H=m[A];if(W&&H[2]?H[1]!==a[H[0]]:!(H[0]in a))return!1}for(;++A<M;){H=m[A];var te=H[0],Ie=a[te],Te=H[1];if(W&&H[2]){if(Ie===r&&!(te in a))return!1}else{var Re=new us;if(E)var Be=E(Ie,Te,te,a,c,Re);if(!(Be===r?Ii(Te,Ie,y|S,E,Re):Be))return!1}}return!0}function zg(a){if(!xn(a)||_E(a))return!1;var c=Js(a)?X2:BC;return c.test(Ko(a))}function QP(a){return jn(a)&&hr(a)==Pe}function ZP(a){return jn(a)&&sr(a)==B}function eE(a){return jn(a)&&bc(a.length)&&!!on[hr(a)]}function Hg(a){return typeof a=="function"?a:a==null?wr:typeof a=="object"?gt(a)?qg(a[0],a[1]):Yg(a):fy(a)}function Ju(a){if(!Ai(a))return rP(a);var c=[];for(var m in nn(a))zt.call(a,m)&&m!="constructor"&&c.push(m);return c}function tE(a){if(!xn(a))return LE(a);var c=Ai(a),m=[];for(var E in a)E=="constructor"&&(c||!zt.call(a,E))||m.push(E);return m}function Xu(a,c){return a<c}function Gg(a,c){var m=-1,E=jr(a)?xe(a.length):[];return po(a,function(A,M,W){E[++m]=c(A,M,W)}),E}function Yg(a){var c=hh(a);return c.length==1&&c[0][2]?Ib(c[0][0],c[0][1]):function(m){return m===a||Ku(m,a,c)}}function qg(a,c){return ph(a)&&Eb(c)?Ib(As(a),c):function(m){var E=Ch(m,a);return E===r&&E===c?Ph(m,a):Ii(c,E,y|S)}}function nc(a,c,m,E,A){a!==c&&Hu(c,function(M,W){if(A||(A=new us),xn(M))nE(a,c,W,m,nc,E,A);else{var H=E?E(xh(a,W),M,W+"",a,c,A):r;H===r&&(H=M),Uu(a,W,H)}},Sr)}function nE(a,c,m,E,A,M,W){var H=xh(a,m),te=xh(c,m),Ie=W.get(te);if(Ie){Uu(a,m,Ie);return}var Te=M?M(H,te,m+"",a,c,W):r,Re=Te===r;if(Re){var Be=gt(te),tt=!Be&&bo(te),dt=!Be&&!tt&&ka(te);Te=te,Be||tt||dt?gt(H)?Te=H:Pn(H)?Te=vr(H):tt?(Re=!1,Te=ab(te,!0)):dt?(Re=!1,Te=ib(te,!0)):Te=[]:ki(te)||Jo(te)?(Te=H,Jo(H)?Te=ry(H):(!xn(H)||Js(H))&&(Te=Pb(te))):Re=!1}Re&&(W.set(te,Te),A(Te,te,E,M,W),W.delete(te)),Uu(a,m,Te)}function Kg(a,c){var m=a.length;if(m)return c+=c<0?m:0,Ks(c,m)?a[c]:r}function Jg(a,c,m){c.length?c=fn(c,function(M){return gt(M)?function(W){return Yo(W,M.length===1?M[0]:M)}:M}):c=[wr];var E=-1;c=fn(c,Rr(ct()));var A=Gg(a,function(M,W,H){var te=fn(c,function(Ie){return Ie(M)});return{criteria:te,index:++E,value:M}});return D2(A,function(M,W){return mE(M,W,m)})}function rE(a,c){return Xg(a,c,function(m,E){return Ph(a,E)})}function Xg(a,c,m){for(var E=-1,A=c.length,M={};++E<A;){var W=c[E],H=Yo(a,W);m(H,W)&&Ti(M,xo(W,a),H)}return M}function sE(a){return function(c){return Yo(c,a)}}function Qu(a,c,m,E){var A=E?T2:ja,M=-1,W=c.length,H=a;for(a===c&&(c=vr(c)),m&&(H=fn(a,Rr(m)));++M<W;)for(var te=0,Ie=c[M],Te=m?m(Ie):Ie;(te=A(H,Te,te,E))>-1;)H!==a&&Gl.call(H,te,1),Gl.call(a,te,1);return a}function Qg(a,c){for(var m=a?c.length:0,E=m-1;m--;){var A=c[m];if(m==E||A!==M){var M=A;Ks(A)?Gl.call(a,A,1):nh(a,A)}}return a}function Zu(a,c){return a+Kl(kg()*(c-a+1))}function oE(a,c,m,E){for(var A=-1,M=Bn(ql((c-a)/(m||1)),0),W=xe(M);M--;)W[E?M:++A]=a,a+=m;return W}function eh(a,c){var m="";if(!a||c<1||c>Y)return m;do c%2&&(m+=a),c=Kl(c/2),c&&(a+=a);while(c);return m}function Et(a,c){return gh(Tb(a,c,wr),a+"")}function aE(a){return Mg(_a(a))}function iE(a,c){var m=_a(a);return hc(m,Go(c,0,m.length))}function Ti(a,c,m,E){if(!xn(a))return a;c=xo(c,a);for(var A=-1,M=c.length,W=M-1,H=a;H!=null&&++A<M;){var te=As(c[A]),Ie=m;if(te==="__proto__"||te==="constructor"||te==="prototype")return a;if(A!=W){var Te=H[te];Ie=E?E(Te,te,H):r,Ie===r&&(Ie=xn(Te)?Te:Ks(c[A+1])?[]:{})}Ci(H,te,Ie),H=H[te]}return a}var Zg=Jl?function(a,c){return Jl.set(a,c),a}:wr,lE=Yl?function(a,c){return Yl(a,"toString",{configurable:!0,enumerable:!1,value:Ih(c),writable:!0})}:wr;function cE(a){return hc(_a(a))}function Jr(a,c,m){var E=-1,A=a.length;c<0&&(c=-c>A?0:A+c),m=m>A?A:m,m<0&&(m+=A),A=c>m?0:m-c>>>0,c>>>=0;for(var M=xe(A);++E<A;)M[E]=a[E+c];return M}function dE(a,c){var m;return po(a,function(E,A,M){return m=c(E,A,M),!m}),!!m}function rc(a,c,m){var E=0,A=a==null?E:a.length;if(typeof c=="number"&&c===c&&A<=be){for(;E<A;){var M=E+A>>>1,W=a[M];W!==null&&!_r(W)&&(m?W<=c:W<c)?E=M+1:A=M}return A}return th(a,c,wr,m)}function th(a,c,m,E){var A=0,M=a==null?0:a.length;if(M===0)return 0;c=m(c);for(var W=c!==c,H=c===null,te=_r(c),Ie=c===r;A<M;){var Te=Kl((A+M)/2),Re=m(a[Te]),Be=Re!==r,tt=Re===null,dt=Re===Re,wt=_r(Re);if(W)var ut=E||dt;else Ie?ut=dt&&(E||Be):H?ut=dt&&Be&&(E||!tt):te?ut=dt&&Be&&!tt&&(E||!wt):tt||wt?ut=!1:ut=E?Re<=c:Re<c;ut?A=Te+1:M=Te}return rr(M,Ee)}function eb(a,c){for(var m=-1,E=a.length,A=0,M=[];++m<E;){var W=a[m],H=c?c(W):W;if(!m||!hs(H,te)){var te=H;M[A++]=W===0?0:W}}return M}function tb(a){return typeof a=="number"?a:_r(a)?V:+a}function kr(a){if(typeof a=="string")return a;if(gt(a))return fn(a,kr)+"";if(_r(a))return _g?_g.call(a):"";var c=a+"";return c=="0"&&1/a==-Q?"-0":c}function mo(a,c,m){var E=-1,A=Nl,M=a.length,W=!0,H=[],te=H;if(m)W=!1,A=Au;else if(M>=o){var Ie=c?null:jE(a);if(Ie)return $l(Ie);W=!1,A=bi,te=new Ho}else te=c?[]:H;e:for(;++E<M;){var Te=a[E],Re=c?c(Te):Te;if(Te=m||Te!==0?Te:0,W&&Re===Re){for(var Be=te.length;Be--;)if(te[Be]===Re)continue e;c&&te.push(Re),H.push(Te)}else A(te,Re,m)||(te!==H&&te.push(Re),H.push(Te))}return H}function nh(a,c){return c=xo(c,a),a=Db(a,c),a==null||delete a[As(Xr(c))]}function nb(a,c,m,E){return Ti(a,c,m(Yo(a,c)),E)}function sc(a,c,m,E){for(var A=a.length,M=E?A:-1;(E?M--:++M<A)&&c(a[M],M,a););return m?Jr(a,E?0:M,E?M+1:A):Jr(a,E?M+1:0,E?A:M)}function rb(a,c){var m=a;return m instanceof At&&(m=m.value()),Ru(c,function(E,A){return A.func.apply(A.thisArg,uo([E],A.args))},m)}function rh(a,c,m){var E=a.length;if(E<2)return E?mo(a[0]):[];for(var A=-1,M=xe(E);++A<E;)for(var W=a[A],H=-1;++H<E;)H!=A&&(M[A]=Pi(M[A]||W,a[H],c,m));return mo(Jn(M,1),c,m)}function sb(a,c,m){for(var E=-1,A=a.length,M=c.length,W={};++E<A;){var H=E<M?c[E]:r;m(W,a[E],H)}return W}function sh(a){return Pn(a)?a:[]}function oh(a){return typeof a=="function"?a:wr}function xo(a,c){return gt(a)?a:ph(a,c)?[a]:_b(Wt(a))}var uE=Et;function go(a,c,m){var E=a.length;return m=m===r?E:m,!c&&m>=E?a:Jr(a,c,m)}var ob=Q2||function(a){return Kn.clearTimeout(a)};function ab(a,c){if(c)return a.slice();var m=a.length,E=Ig?Ig(m):new a.constructor(m);return a.copy(E),E}function ah(a){var c=new a.constructor(a.byteLength);return new zl(c).set(new zl(a)),c}function hE(a,c){var m=c?ah(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.byteLength)}function fE(a){var c=new a.constructor(a.source,Ux.exec(a));return c.lastIndex=a.lastIndex,c}function pE(a){return wi?nn(wi.call(a)):{}}function ib(a,c){var m=c?ah(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.length)}function lb(a,c){if(a!==c){var m=a!==r,E=a===null,A=a===a,M=_r(a),W=c!==r,H=c===null,te=c===c,Ie=_r(c);if(!H&&!Ie&&!M&&a>c||M&&W&&te&&!H&&!Ie||E&&W&&te||!m&&te||!A)return 1;if(!E&&!M&&!Ie&&a<c||Ie&&m&&A&&!E&&!M||H&&m&&A||!W&&A||!te)return-1}return 0}function mE(a,c,m){for(var E=-1,A=a.criteria,M=c.criteria,W=A.length,H=m.length;++E<W;){var te=lb(A[E],M[E]);if(te){if(E>=H)return te;var Ie=m[E];return te*(Ie=="desc"?-1:1)}}return a.index-c.index}function cb(a,c,m,E){for(var A=-1,M=a.length,W=m.length,H=-1,te=c.length,Ie=Bn(M-W,0),Te=xe(te+Ie),Re=!E;++H<te;)Te[H]=c[H];for(;++A<W;)(Re||A<M)&&(Te[m[A]]=a[A]);for(;Ie--;)Te[H++]=a[A++];return Te}function db(a,c,m,E){for(var A=-1,M=a.length,W=-1,H=m.length,te=-1,Ie=c.length,Te=Bn(M-H,0),Re=xe(Te+Ie),Be=!E;++A<Te;)Re[A]=a[A];for(var tt=A;++te<Ie;)Re[tt+te]=c[te];for(;++W<H;)(Be||A<M)&&(Re[tt+m[W]]=a[A++]);return Re}function vr(a,c){var m=-1,E=a.length;for(c||(c=xe(E));++m<E;)c[m]=a[m];return c}function Ds(a,c,m,E){var A=!m;m||(m={});for(var M=-1,W=c.length;++M<W;){var H=c[M],te=E?E(m[H],a[H],H,m,a):r;te===r&&(te=a[H]),A?Gs(m,H,te):Ci(m,H,te)}return m}function xE(a,c){return Ds(a,fh(a),c)}function gE(a,c){return Ds(a,wb(a),c)}function oc(a,c){return function(m,E){var A=gt(m)?S2:FP,M=c?c():{};return A(m,a,ct(E,2),M)}}function Da(a){return Et(function(c,m){var E=-1,A=m.length,M=A>1?m[A-1]:r,W=A>2?m[2]:r;for(M=a.length>3&&typeof M=="function"?(A--,M):r,W&&fr(m[0],m[1],W)&&(M=A<3?r:M,A=1),c=nn(c);++E<A;){var H=m[E];H&&a(c,H,E,M)}return c})}function ub(a,c){return function(m,E){if(m==null)return m;if(!jr(m))return a(m,E);for(var A=m.length,M=c?A:-1,W=nn(m);(c?M--:++M<A)&&E(W[M],M,W)!==!1;);return m}}function hb(a){return function(c,m,E){for(var A=-1,M=nn(c),W=E(c),H=W.length;H--;){var te=W[a?H:++A];if(m(M[te],te,M)===!1)break}return c}}function bE(a,c,m){var E=c&j,A=Di(a);function M(){var W=this&&this!==Kn&&this instanceof M?A:a;return W.apply(E?m:this,arguments)}return M}function fb(a){return function(c){c=Wt(c);var m=Sa(c)?ds(c):r,E=m?m[0]:c.charAt(0),A=m?go(m,1).join(""):c.slice(1);return E[a]()+A}}function Aa(a){return function(c){return Ru(uy(dy(c).replace(l2,"")),a,"")}}function Di(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var m=Ta(a.prototype),E=a.apply(m,c);return xn(E)?E:m}}function yE(a,c,m){var E=Di(a);function A(){for(var M=arguments.length,W=xe(M),H=M,te=Ra(A);H--;)W[H]=arguments[H];var Ie=M<3&&W[0]!==te&&W[M-1]!==te?[]:ho(W,te);if(M-=Ie.length,M<m)return bb(a,c,ac,A.placeholder,r,W,Ie,r,r,m-M);var Te=this&&this!==Kn&&this instanceof A?E:a;return Ar(Te,this,W)}return A}function pb(a){return function(c,m,E){var A=nn(c);if(!jr(c)){var M=ct(m,3);c=zn(c),m=function(H){return M(A[H],H,A)}}var W=a(c,m,E);return W>-1?A[M?c[W]:W]:r}}function mb(a){return qs(function(c){var m=c.length,E=m,A=qr.prototype.thru;for(a&&c.reverse();E--;){var M=c[E];if(typeof M!="function")throw new Yr(l);if(A&&!W&&dc(M)=="wrapper")var W=new qr([],!0)}for(E=W?E:m;++E<m;){M=c[E];var H=dc(M),te=H=="wrapper"?uh(M):r;te&&mh(te[0])&&te[1]==(_|I|D|k)&&!te[4].length&&te[9]==1?W=W[dc(te[0])].apply(W,te[3]):W=M.length==1&&mh(M)?W[H]():W.thru(M)}return function(){var Ie=arguments,Te=Ie[0];if(W&&Ie.length==1&&gt(Te))return W.plant(Te).value();for(var Re=0,Be=m?c[Re].apply(this,Ie):Te;++Re<m;)Be=c[Re].call(this,Be);return Be}})}function ac(a,c,m,E,A,M,W,H,te,Ie){var Te=c&_,Re=c&j,Be=c&P,tt=c&(I|T),dt=c&N,wt=Be?r:Di(a);function ut(){for(var Tt=arguments.length,Rt=xe(Tt),Or=Tt;Or--;)Rt[Or]=arguments[Or];if(tt)var pr=Ra(ut),Mr=R2(Rt,pr);if(E&&(Rt=cb(Rt,E,A,tt)),M&&(Rt=db(Rt,M,W,tt)),Tt-=Mr,tt&&Tt<Ie){var En=ho(Rt,pr);return bb(a,c,ac,ut.placeholder,m,Rt,En,H,te,Ie-Tt)}var fs=Re?m:this,Qs=Be?fs[a]:a;return Tt=Rt.length,H?Rt=FE(Rt,H):dt&&Tt>1&&Rt.reverse(),Te&&te<Tt&&(Rt.length=te),this&&this!==Kn&&this instanceof ut&&(Qs=wt||Di(Qs)),Qs.apply(fs,Rt)}return ut}function xb(a,c){return function(m,E){return YP(m,a,c(E),{})}}function ic(a,c){return function(m,E){var A;if(m===r&&E===r)return c;if(m!==r&&(A=m),E!==r){if(A===r)return E;typeof m=="string"||typeof E=="string"?(m=kr(m),E=kr(E)):(m=tb(m),E=tb(E)),A=a(m,E)}return A}}function ih(a){return qs(function(c){return c=fn(c,Rr(ct())),Et(function(m){var E=this;return a(c,function(A){return Ar(A,E,m)})})})}function lc(a,c){c=c===r?" ":kr(c);var m=c.length;if(m<2)return m?eh(c,a):c;var E=eh(c,ql(a/wa(c)));return Sa(c)?go(ds(E),0,a).join(""):E.slice(0,a)}function vE(a,c,m,E){var A=c&j,M=Di(a);function W(){for(var H=-1,te=arguments.length,Ie=-1,Te=E.length,Re=xe(Te+te),Be=this&&this!==Kn&&this instanceof W?M:a;++Ie<Te;)Re[Ie]=E[Ie];for(;te--;)Re[Ie++]=arguments[++H];return Ar(Be,A?m:this,Re)}return W}function gb(a){return function(c,m,E){return E&&typeof E!="number"&&fr(c,m,E)&&(m=E=r),c=Xs(c),m===r?(m=c,c=0):m=Xs(m),E=E===r?c<m?1:-1:Xs(E),oE(c,m,E,a)}}function cc(a){return function(c,m){return typeof c=="string"&&typeof m=="string"||(c=Qr(c),m=Qr(m)),a(c,m)}}function bb(a,c,m,E,A,M,W,H,te,Ie){var Te=c&I,Re=Te?W:r,Be=Te?r:W,tt=Te?M:r,dt=Te?r:M;c|=Te?D:R,c&=~(Te?R:D),c&w||(c&=~(j|P));var wt=[a,c,A,tt,Re,dt,Be,H,te,Ie],ut=m.apply(r,wt);return mh(a)&&Ab(ut,wt),ut.placeholder=E,Rb(ut,a,c)}function lh(a){var c=Wn[a];return function(m,E){if(m=Qr(m),E=E==null?0:rr(jt(E),292),E&&Rg(m)){var A=(Wt(m)+"e").split("e"),M=c(A[0]+"e"+(+A[1]+E));return A=(Wt(M)+"e").split("e"),+(A[0]+"e"+(+A[1]-E))}return c(m)}}var jE=Ea&&1/$l(new Ea([,-0]))[1]==Q?function(a){return new Ea(a)}:Ah;function yb(a){return function(c){var m=sr(c);return m==pe?$u(c):m==B?$2(c):A2(c,a(c))}}function Ys(a,c,m,E,A,M,W,H){var te=c&P;if(!te&&typeof a!="function")throw new Yr(l);var Ie=E?E.length:0;if(Ie||(c&=~(D|R),E=A=r),W=W===r?W:Bn(jt(W),0),H=H===r?H:jt(H),Ie-=A?A.length:0,c&R){var Te=E,Re=A;E=A=r}var Be=te?r:uh(a),tt=[a,c,m,E,A,Te,Re,M,W,H];if(Be&&NE(tt,Be),a=tt[0],c=tt[1],m=tt[2],E=tt[3],A=tt[4],H=tt[9]=tt[9]===r?te?0:a.length:Bn(tt[9]-Ie,0),!H&&c&(I|T)&&(c&=~(I|T)),!c||c==j)var dt=bE(a,c,m);else c==I||c==T?dt=yE(a,c,H):(c==D||c==(j|D))&&!A.length?dt=vE(a,c,m,E):dt=ac.apply(r,tt);var wt=Be?Zg:Ab;return Rb(wt(dt,tt),a,c)}function vb(a,c,m,E){return a===r||hs(a,Pa[m])&&!zt.call(E,m)?c:a}function jb(a,c,m,E,A,M){return xn(a)&&xn(c)&&(M.set(c,a),nc(a,c,r,jb,M),M.delete(c)),a}function SE(a){return ki(a)?r:a}function Sb(a,c,m,E,A,M){var W=m&y,H=a.length,te=c.length;if(H!=te&&!(W&&te>H))return!1;var Ie=M.get(a),Te=M.get(c);if(Ie&&Te)return Ie==c&&Te==a;var Re=-1,Be=!0,tt=m&S?new Ho:r;for(M.set(a,c),M.set(c,a);++Re<H;){var dt=a[Re],wt=c[Re];if(E)var ut=W?E(wt,dt,Re,c,a,M):E(dt,wt,Re,a,c,M);if(ut!==r){if(ut)continue;Be=!1;break}if(tt){if(!ku(c,function(Tt,Rt){if(!bi(tt,Rt)&&(dt===Tt||A(dt,Tt,m,E,M)))return tt.push(Rt)})){Be=!1;break}}else if(!(dt===wt||A(dt,wt,m,E,M))){Be=!1;break}}return M.delete(a),M.delete(c),Be}function wE(a,c,m,E,A,M,W){switch(m){case Un:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case hn:return!(a.byteLength!=c.byteLength||!M(new zl(a),new zl(c)));case We:case ye:case ke:return hs(+a,+c);case le:return a.name==c.name&&a.message==c.message;case Pe:case Me:return a==c+"";case pe:var H=$u;case B:var te=E&y;if(H||(H=$l),a.size!=c.size&&!te)return!1;var Ie=W.get(a);if(Ie)return Ie==c;E|=S,W.set(a,c);var Te=Sb(H(a),H(c),E,A,M,W);return W.delete(a),Te;case qe:if(wi)return wi.call(a)==wi.call(c)}return!1}function CE(a,c,m,E,A,M){var W=m&y,H=ch(a),te=H.length,Ie=ch(c),Te=Ie.length;if(te!=Te&&!W)return!1;for(var Re=te;Re--;){var Be=H[Re];if(!(W?Be in c:zt.call(c,Be)))return!1}var tt=M.get(a),dt=M.get(c);if(tt&&dt)return tt==c&&dt==a;var wt=!0;M.set(a,c),M.set(c,a);for(var ut=W;++Re<te;){Be=H[Re];var Tt=a[Be],Rt=c[Be];if(E)var Or=W?E(Rt,Tt,Be,c,a,M):E(Tt,Rt,Be,a,c,M);if(!(Or===r?Tt===Rt||A(Tt,Rt,m,E,M):Or)){wt=!1;break}ut||(ut=Be=="constructor")}if(wt&&!ut){var pr=a.constructor,Mr=c.constructor;pr!=Mr&&"constructor"in a&&"constructor"in c&&!(typeof pr=="function"&&pr instanceof pr&&typeof Mr=="function"&&Mr instanceof Mr)&&(wt=!1)}return M.delete(a),M.delete(c),wt}function qs(a){return gh(Tb(a,r,Lb),a+"")}function ch(a){return Vg(a,zn,fh)}function dh(a){return Vg(a,Sr,wb)}var uh=Jl?function(a){return Jl.get(a)}:Ah;function dc(a){for(var c=a.name+"",m=Ia[c],E=zt.call(Ia,c)?m.length:0;E--;){var A=m[E],M=A.func;if(M==null||M==a)return A.name}return c}function Ra(a){var c=zt.call(O,"placeholder")?O:a;return c.placeholder}function ct(){var a=O.iteratee||Th;return a=a===Th?Hg:a,arguments.length?a(arguments[0],arguments[1]):a}function uc(a,c){var m=a.__data__;return kE(c)?m[typeof c=="string"?"string":"hash"]:m.map}function hh(a){for(var c=zn(a),m=c.length;m--;){var E=c[m],A=a[E];c[m]=[E,A,Eb(A)]}return c}function qo(a,c){var m=M2(a,c);return zg(m)?m:r}function PE(a){var c=zt.call(a,Uo),m=a[Uo];try{a[Uo]=r;var E=!0}catch{}var A=Vl.call(a);return E&&(c?a[Uo]=m:delete a[Uo]),A}var fh=Wu?function(a){return a==null?[]:(a=nn(a),co(Wu(a),function(c){return Dg.call(a,c)}))}:Rh,wb=Wu?function(a){for(var c=[];a;)uo(c,fh(a)),a=Hl(a);return c}:Rh,sr=hr;(Bu&&sr(new Bu(new ArrayBuffer(1)))!=Un||vi&&sr(new vi)!=pe||Vu&&sr(Vu.resolve())!=de||Ea&&sr(new Ea)!=B||ji&&sr(new ji)!=tn)&&(sr=function(a){var c=hr(a),m=c==_e?a.constructor:r,E=m?Ko(m):"";if(E)switch(E){case iP:return Un;case lP:return pe;case cP:return de;case dP:return B;case uP:return tn}return c});function EE(a,c,m){for(var E=-1,A=m.length;++E<A;){var M=m[E],W=M.size;switch(M.type){case"drop":a+=W;break;case"dropRight":c-=W;break;case"take":c=rr(c,a+W);break;case"takeRight":a=Bn(a,c-W);break}}return{start:a,end:c}}function IE(a){var c=a.match(_C);return c?c[1].split(OC):[]}function Cb(a,c,m){c=xo(c,a);for(var E=-1,A=c.length,M=!1;++E<A;){var W=As(c[E]);if(!(M=a!=null&&m(a,W)))break;a=a[W]}return M||++E!=A?M:(A=a==null?0:a.length,!!A&&bc(A)&&Ks(W,A)&&(gt(a)||Jo(a)))}function TE(a){var c=a.length,m=new a.constructor(c);return c&&typeof a[0]=="string"&&zt.call(a,"index")&&(m.index=a.index,m.input=a.input),m}function Pb(a){return typeof a.constructor=="function"&&!Ai(a)?Ta(Hl(a)):{}}function DE(a,c,m){var E=a.constructor;switch(c){case hn:return ah(a);case We:case ye:return new E(+a);case Un:return hE(a,m);case ft:case vt:case kt:case Jt:case On:case mn:case nr:case yn:case It:return ib(a,m);case pe:return new E;case ke:case Me:return new E(a);case Pe:return fE(a);case B:return new E;case qe:return pE(a)}}function AE(a,c){var m=c.length;if(!m)return a;var E=m-1;return c[E]=(m>1?"& ":"")+c[E],c=c.join(m>2?", ":" "),a.replace(kC,`{
/* [wrapped with `+c+`] */
`)}function RE(a){return gt(a)||Jo(a)||!!(Ag&&a&&a[Ag])}function Ks(a,c){var m=typeof a;return c=c??Y,!!c&&(m=="number"||m!="symbol"&&UC.test(a))&&a>-1&&a%1==0&&a<c}function fr(a,c,m){if(!xn(m))return!1;var E=typeof c;return(E=="number"?jr(m)&&Ks(c,m.length):E=="string"&&c in m)?hs(m[c],a):!1}function ph(a,c){if(gt(a))return!1;var m=typeof a;return m=="number"||m=="symbol"||m=="boolean"||a==null||_r(a)?!0:Dr.test(a)||!vn.test(a)||c!=null&&a in nn(c)}function kE(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function mh(a){var c=dc(a),m=O[c];if(typeof m!="function"||!(c in At.prototype))return!1;if(a===m)return!0;var E=uh(m);return!!E&&a===E[0]}function _E(a){return!!Eg&&Eg in a}var OE=Wl?Js:kh;function Ai(a){var c=a&&a.constructor,m=typeof c=="function"&&c.prototype||Pa;return a===m}function Eb(a){return a===a&&!xn(a)}function Ib(a,c){return function(m){return m==null?!1:m[a]===c&&(c!==r||a in nn(m))}}function ME(a){var c=xc(a,function(E){return m.size===h&&m.clear(),E}),m=c.cache;return c}function NE(a,c){var m=a[1],E=c[1],A=m|E,M=A<(j|P|_),W=E==_&&m==I||E==_&&m==k&&a[7].length<=c[8]||E==(_|k)&&c[7].length<=c[8]&&m==I;if(!(M||W))return a;E&j&&(a[2]=c[2],A|=m&j?0:w);var H=c[3];if(H){var te=a[3];a[3]=te?cb(te,H,c[4]):H,a[4]=te?ho(a[3],f):c[4]}return H=c[5],H&&(te=a[5],a[5]=te?db(te,H,c[6]):H,a[6]=te?ho(a[5],f):c[6]),H=c[7],H&&(a[7]=H),E&_&&(a[8]=a[8]==null?c[8]:rr(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=A,a}function LE(a){var c=[];if(a!=null)for(var m in nn(a))c.push(m);return c}function $E(a){return Vl.call(a)}function Tb(a,c,m){return c=Bn(c===r?a.length-1:c,0),function(){for(var E=arguments,A=-1,M=Bn(E.length-c,0),W=xe(M);++A<M;)W[A]=E[c+A];A=-1;for(var H=xe(c+1);++A<c;)H[A]=E[A];return H[c]=m(W),Ar(a,this,H)}}function Db(a,c){return c.length<2?a:Yo(a,Jr(c,0,-1))}function FE(a,c){for(var m=a.length,E=rr(c.length,m),A=vr(a);E--;){var M=c[E];a[E]=Ks(M,m)?A[M]:r}return a}function xh(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var Ab=kb(Zg),Ri=eP||function(a,c){return Kn.setTimeout(a,c)},gh=kb(lE);function Rb(a,c,m){var E=c+"";return gh(a,AE(E,WE(IE(E),m)))}function kb(a){var c=0,m=0;return function(){var E=sP(),A=G-(E-m);if(m=E,A>0){if(++c>=$)return arguments[0]}else c=0;return a.apply(r,arguments)}}function hc(a,c){var m=-1,E=a.length,A=E-1;for(c=c===r?E:c;++m<c;){var M=Zu(m,A),W=a[M];a[M]=a[m],a[m]=W}return a.length=c,a}var _b=ME(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(kl,function(m,E,A,M){c.push(A?M.replace(LC,"$1"):E||m)}),c});function As(a){if(typeof a=="string"||_r(a))return a;var c=a+"";return c=="0"&&1/a==-Q?"-0":c}function Ko(a){if(a!=null){try{return Bl.call(a)}catch{}try{return a+""}catch{}}return""}function WE(a,c){return Gr(ae,function(m){var E="_."+m[0];c&m[1]&&!Nl(a,E)&&a.push(E)}),a.sort()}function Ob(a){if(a instanceof At)return a.clone();var c=new qr(a.__wrapped__,a.__chain__);return c.__actions__=vr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function BE(a,c,m){(m?fr(a,c,m):c===r)?c=1:c=Bn(jt(c),0);var E=a==null?0:a.length;if(!E||c<1)return[];for(var A=0,M=0,W=xe(ql(E/c));A<E;)W[M++]=Jr(a,A,A+=c);return W}function VE(a){for(var c=-1,m=a==null?0:a.length,E=0,A=[];++c<m;){var M=a[c];M&&(A[E++]=M)}return A}function UE(){var a=arguments.length;if(!a)return[];for(var c=xe(a-1),m=arguments[0],E=a;E--;)c[E-1]=arguments[E];return uo(gt(m)?vr(m):[m],Jn(c,1))}var zE=Et(function(a,c){return Pn(a)?Pi(a,Jn(c,1,Pn,!0)):[]}),HE=Et(function(a,c){var m=Xr(c);return Pn(m)&&(m=r),Pn(a)?Pi(a,Jn(c,1,Pn,!0),ct(m,2)):[]}),GE=Et(function(a,c){var m=Xr(c);return Pn(m)&&(m=r),Pn(a)?Pi(a,Jn(c,1,Pn,!0),r,m):[]});function YE(a,c,m){var E=a==null?0:a.length;return E?(c=m||c===r?1:jt(c),Jr(a,c<0?0:c,E)):[]}function qE(a,c,m){var E=a==null?0:a.length;return E?(c=m||c===r?1:jt(c),c=E-c,Jr(a,0,c<0?0:c)):[]}function KE(a,c){return a&&a.length?sc(a,ct(c,3),!0,!0):[]}function JE(a,c){return a&&a.length?sc(a,ct(c,3),!0):[]}function XE(a,c,m,E){var A=a==null?0:a.length;return A?(m&&typeof m!="number"&&fr(a,c,m)&&(m=0,E=A),UP(a,c,m,E)):[]}function Mb(a,c,m){var E=a==null?0:a.length;if(!E)return-1;var A=m==null?0:jt(m);return A<0&&(A=Bn(E+A,0)),Ll(a,ct(c,3),A)}function Nb(a,c,m){var E=a==null?0:a.length;if(!E)return-1;var A=E-1;return m!==r&&(A=jt(m),A=m<0?Bn(E+A,0):rr(A,E-1)),Ll(a,ct(c,3),A,!0)}function Lb(a){var c=a==null?0:a.length;return c?Jn(a,1):[]}function QE(a){var c=a==null?0:a.length;return c?Jn(a,Q):[]}function ZE(a,c){var m=a==null?0:a.length;return m?(c=c===r?1:jt(c),Jn(a,c)):[]}function eI(a){for(var c=-1,m=a==null?0:a.length,E={};++c<m;){var A=a[c];E[A[0]]=A[1]}return E}function $b(a){return a&&a.length?a[0]:r}function tI(a,c,m){var E=a==null?0:a.length;if(!E)return-1;var A=m==null?0:jt(m);return A<0&&(A=Bn(E+A,0)),ja(a,c,A)}function nI(a){var c=a==null?0:a.length;return c?Jr(a,0,-1):[]}var rI=Et(function(a){var c=fn(a,sh);return c.length&&c[0]===a[0]?qu(c):[]}),sI=Et(function(a){var c=Xr(a),m=fn(a,sh);return c===Xr(m)?c=r:m.pop(),m.length&&m[0]===a[0]?qu(m,ct(c,2)):[]}),oI=Et(function(a){var c=Xr(a),m=fn(a,sh);return c=typeof c=="function"?c:r,c&&m.pop(),m.length&&m[0]===a[0]?qu(m,r,c):[]});function aI(a,c){return a==null?"":nP.call(a,c)}function Xr(a){var c=a==null?0:a.length;return c?a[c-1]:r}function iI(a,c,m){var E=a==null?0:a.length;if(!E)return-1;var A=E;return m!==r&&(A=jt(m),A=A<0?Bn(E+A,0):rr(A,E-1)),c===c?W2(a,c,A):Ll(a,bg,A,!0)}function lI(a,c){return a&&a.length?Kg(a,jt(c)):r}var cI=Et(Fb);function Fb(a,c){return a&&a.length&&c&&c.length?Qu(a,c):a}function dI(a,c,m){return a&&a.length&&c&&c.length?Qu(a,c,ct(m,2)):a}function uI(a,c,m){return a&&a.length&&c&&c.length?Qu(a,c,r,m):a}var hI=qs(function(a,c){var m=a==null?0:a.length,E=zu(a,c);return Qg(a,fn(c,function(A){return Ks(A,m)?+A:A}).sort(lb)),E});function fI(a,c){var m=[];if(!(a&&a.length))return m;var E=-1,A=[],M=a.length;for(c=ct(c,3);++E<M;){var W=a[E];c(W,E,a)&&(m.push(W),A.push(E))}return Qg(a,A),m}function bh(a){return a==null?a:aP.call(a)}function pI(a,c,m){var E=a==null?0:a.length;return E?(m&&typeof m!="number"&&fr(a,c,m)?(c=0,m=E):(c=c==null?0:jt(c),m=m===r?E:jt(m)),Jr(a,c,m)):[]}function mI(a,c){return rc(a,c)}function xI(a,c,m){return th(a,c,ct(m,2))}function gI(a,c){var m=a==null?0:a.length;if(m){var E=rc(a,c);if(E<m&&hs(a[E],c))return E}return-1}function bI(a,c){return rc(a,c,!0)}function yI(a,c,m){return th(a,c,ct(m,2),!0)}function vI(a,c){var m=a==null?0:a.length;if(m){var E=rc(a,c,!0)-1;if(hs(a[E],c))return E}return-1}function jI(a){return a&&a.length?eb(a):[]}function SI(a,c){return a&&a.length?eb(a,ct(c,2)):[]}function wI(a){var c=a==null?0:a.length;return c?Jr(a,1,c):[]}function CI(a,c,m){return a&&a.length?(c=m||c===r?1:jt(c),Jr(a,0,c<0?0:c)):[]}function PI(a,c,m){var E=a==null?0:a.length;return E?(c=m||c===r?1:jt(c),c=E-c,Jr(a,c<0?0:c,E)):[]}function EI(a,c){return a&&a.length?sc(a,ct(c,3),!1,!0):[]}function II(a,c){return a&&a.length?sc(a,ct(c,3)):[]}var TI=Et(function(a){return mo(Jn(a,1,Pn,!0))}),DI=Et(function(a){var c=Xr(a);return Pn(c)&&(c=r),mo(Jn(a,1,Pn,!0),ct(c,2))}),AI=Et(function(a){var c=Xr(a);return c=typeof c=="function"?c:r,mo(Jn(a,1,Pn,!0),r,c)});function RI(a){return a&&a.length?mo(a):[]}function kI(a,c){return a&&a.length?mo(a,ct(c,2)):[]}function _I(a,c){return c=typeof c=="function"?c:r,a&&a.length?mo(a,r,c):[]}function yh(a){if(!(a&&a.length))return[];var c=0;return a=co(a,function(m){if(Pn(m))return c=Bn(m.length,c),!0}),Nu(c,function(m){return fn(a,_u(m))})}function Wb(a,c){if(!(a&&a.length))return[];var m=yh(a);return c==null?m:fn(m,function(E){return Ar(c,r,E)})}var OI=Et(function(a,c){return Pn(a)?Pi(a,c):[]}),MI=Et(function(a){return rh(co(a,Pn))}),NI=Et(function(a){var c=Xr(a);return Pn(c)&&(c=r),rh(co(a,Pn),ct(c,2))}),LI=Et(function(a){var c=Xr(a);return c=typeof c=="function"?c:r,rh(co(a,Pn),r,c)}),$I=Et(yh);function FI(a,c){return sb(a||[],c||[],Ci)}function WI(a,c){return sb(a||[],c||[],Ti)}var BI=Et(function(a){var c=a.length,m=c>1?a[c-1]:r;return m=typeof m=="function"?(a.pop(),m):r,Wb(a,m)});function Bb(a){var c=O(a);return c.__chain__=!0,c}function VI(a,c){return c(a),a}function fc(a,c){return c(a)}var UI=qs(function(a){var c=a.length,m=c?a[0]:0,E=this.__wrapped__,A=function(M){return zu(M,a)};return c>1||this.__actions__.length||!(E instanceof At)||!Ks(m)?this.thru(A):(E=E.slice(m,+m+(c?1:0)),E.__actions__.push({func:fc,args:[A],thisArg:r}),new qr(E,this.__chain__).thru(function(M){return c&&!M.length&&M.push(r),M}))});function zI(){return Bb(this)}function HI(){return new qr(this.value(),this.__chain__)}function GI(){this.__values__===r&&(this.__values__=ty(this.value()));var a=this.__index__>=this.__values__.length,c=a?r:this.__values__[this.__index__++];return{done:a,value:c}}function YI(){return this}function qI(a){for(var c,m=this;m instanceof Ql;){var E=Ob(m);E.__index__=0,E.__values__=r,c?A.__wrapped__=E:c=E;var A=E;m=m.__wrapped__}return A.__wrapped__=a,c}function KI(){var a=this.__wrapped__;if(a instanceof At){var c=a;return this.__actions__.length&&(c=new At(this)),c=c.reverse(),c.__actions__.push({func:fc,args:[bh],thisArg:r}),new qr(c,this.__chain__)}return this.thru(bh)}function JI(){return rb(this.__wrapped__,this.__actions__)}var XI=oc(function(a,c,m){zt.call(a,m)?++a[m]:Gs(a,m,1)});function QI(a,c,m){var E=gt(a)?xg:VP;return m&&fr(a,c,m)&&(c=r),E(a,ct(c,3))}function ZI(a,c){var m=gt(a)?co:Wg;return m(a,ct(c,3))}var eT=pb(Mb),tT=pb(Nb);function nT(a,c){return Jn(pc(a,c),1)}function rT(a,c){return Jn(pc(a,c),Q)}function sT(a,c,m){return m=m===r?1:jt(m),Jn(pc(a,c),m)}function Vb(a,c){var m=gt(a)?Gr:po;return m(a,ct(c,3))}function Ub(a,c){var m=gt(a)?w2:Fg;return m(a,ct(c,3))}var oT=oc(function(a,c,m){zt.call(a,m)?a[m].push(c):Gs(a,m,[c])});function aT(a,c,m,E){a=jr(a)?a:_a(a),m=m&&!E?jt(m):0;var A=a.length;return m<0&&(m=Bn(A+m,0)),yc(a)?m<=A&&a.indexOf(c,m)>-1:!!A&&ja(a,c,m)>-1}var iT=Et(function(a,c,m){var E=-1,A=typeof c=="function",M=jr(a)?xe(a.length):[];return po(a,function(W){M[++E]=A?Ar(c,W,m):Ei(W,c,m)}),M}),lT=oc(function(a,c,m){Gs(a,m,c)});function pc(a,c){var m=gt(a)?fn:Gg;return m(a,ct(c,3))}function cT(a,c,m,E){return a==null?[]:(gt(c)||(c=c==null?[]:[c]),m=E?r:m,gt(m)||(m=m==null?[]:[m]),Jg(a,c,m))}var dT=oc(function(a,c,m){a[m?0:1].push(c)},function(){return[[],[]]});function uT(a,c,m){var E=gt(a)?Ru:vg,A=arguments.length<3;return E(a,ct(c,4),m,A,po)}function hT(a,c,m){var E=gt(a)?C2:vg,A=arguments.length<3;return E(a,ct(c,4),m,A,Fg)}function fT(a,c){var m=gt(a)?co:Wg;return m(a,gc(ct(c,3)))}function pT(a){var c=gt(a)?Mg:aE;return c(a)}function mT(a,c,m){(m?fr(a,c,m):c===r)?c=1:c=jt(c);var E=gt(a)?LP:iE;return E(a,c)}function xT(a){var c=gt(a)?$P:cE;return c(a)}function gT(a){if(a==null)return 0;if(jr(a))return yc(a)?wa(a):a.length;var c=sr(a);return c==pe||c==B?a.size:Ju(a).length}function bT(a,c,m){var E=gt(a)?ku:dE;return m&&fr(a,c,m)&&(c=r),E(a,ct(c,3))}var yT=Et(function(a,c){if(a==null)return[];var m=c.length;return m>1&&fr(a,c[0],c[1])?c=[]:m>2&&fr(c[0],c[1],c[2])&&(c=[c[0]]),Jg(a,Jn(c,1),[])}),mc=Z2||function(){return Kn.Date.now()};function vT(a,c){if(typeof c!="function")throw new Yr(l);return a=jt(a),function(){if(--a<1)return c.apply(this,arguments)}}function zb(a,c,m){return c=m?r:c,c=a&&c==null?a.length:c,Ys(a,_,r,r,r,r,c)}function Hb(a,c){var m;if(typeof c!="function")throw new Yr(l);return a=jt(a),function(){return--a>0&&(m=c.apply(this,arguments)),a<=1&&(c=r),m}}var vh=Et(function(a,c,m){var E=j;if(m.length){var A=ho(m,Ra(vh));E|=D}return Ys(a,E,c,m,A)}),Gb=Et(function(a,c,m){var E=j|P;if(m.length){var A=ho(m,Ra(Gb));E|=D}return Ys(c,E,a,m,A)});function Yb(a,c,m){c=m?r:c;var E=Ys(a,I,r,r,r,r,r,c);return E.placeholder=Yb.placeholder,E}function qb(a,c,m){c=m?r:c;var E=Ys(a,T,r,r,r,r,r,c);return E.placeholder=qb.placeholder,E}function Kb(a,c,m){var E,A,M,W,H,te,Ie=0,Te=!1,Re=!1,Be=!0;if(typeof a!="function")throw new Yr(l);c=Qr(c)||0,xn(m)&&(Te=!!m.leading,Re="maxWait"in m,M=Re?Bn(Qr(m.maxWait)||0,c):M,Be="trailing"in m?!!m.trailing:Be);function tt(En){var fs=E,Qs=A;return E=A=r,Ie=En,W=a.apply(Qs,fs),W}function dt(En){return Ie=En,H=Ri(Tt,c),Te?tt(En):W}function wt(En){var fs=En-te,Qs=En-Ie,py=c-fs;return Re?rr(py,M-Qs):py}function ut(En){var fs=En-te,Qs=En-Ie;return te===r||fs>=c||fs<0||Re&&Qs>=M}function Tt(){var En=mc();if(ut(En))return Rt(En);H=Ri(Tt,wt(En))}function Rt(En){return H=r,Be&&E?tt(En):(E=A=r,W)}function Or(){H!==r&&ob(H),Ie=0,E=te=A=H=r}function pr(){return H===r?W:Rt(mc())}function Mr(){var En=mc(),fs=ut(En);if(E=arguments,A=this,te=En,fs){if(H===r)return dt(te);if(Re)return ob(H),H=Ri(Tt,c),tt(te)}return H===r&&(H=Ri(Tt,c)),W}return Mr.cancel=Or,Mr.flush=pr,Mr}var jT=Et(function(a,c){return $g(a,1,c)}),ST=Et(function(a,c,m){return $g(a,Qr(c)||0,m)});function wT(a){return Ys(a,N)}function xc(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Yr(l);var m=function(){var E=arguments,A=c?c.apply(this,E):E[0],M=m.cache;if(M.has(A))return M.get(A);var W=a.apply(this,E);return m.cache=M.set(A,W)||M,W};return m.cache=new(xc.Cache||Hs),m}xc.Cache=Hs;function gc(a){if(typeof a!="function")throw new Yr(l);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function CT(a){return Hb(2,a)}var PT=uE(function(a,c){c=c.length==1&&gt(c[0])?fn(c[0],Rr(ct())):fn(Jn(c,1),Rr(ct()));var m=c.length;return Et(function(E){for(var A=-1,M=rr(E.length,m);++A<M;)E[A]=c[A].call(this,E[A]);return Ar(a,this,E)})}),jh=Et(function(a,c){var m=ho(c,Ra(jh));return Ys(a,D,r,c,m)}),Jb=Et(function(a,c){var m=ho(c,Ra(Jb));return Ys(a,R,r,c,m)}),ET=qs(function(a,c){return Ys(a,k,r,r,r,c)});function IT(a,c){if(typeof a!="function")throw new Yr(l);return c=c===r?c:jt(c),Et(a,c)}function TT(a,c){if(typeof a!="function")throw new Yr(l);return c=c==null?0:Bn(jt(c),0),Et(function(m){var E=m[c],A=go(m,0,c);return E&&uo(A,E),Ar(a,this,A)})}function DT(a,c,m){var E=!0,A=!0;if(typeof a!="function")throw new Yr(l);return xn(m)&&(E="leading"in m?!!m.leading:E,A="trailing"in m?!!m.trailing:A),Kb(a,c,{leading:E,maxWait:c,trailing:A})}function AT(a){return zb(a,1)}function RT(a,c){return jh(oh(c),a)}function kT(){if(!arguments.length)return[];var a=arguments[0];return gt(a)?a:[a]}function _T(a){return Kr(a,b)}function OT(a,c){return c=typeof c=="function"?c:r,Kr(a,b,c)}function MT(a){return Kr(a,p|b)}function NT(a,c){return c=typeof c=="function"?c:r,Kr(a,p|b,c)}function LT(a,c){return c==null||Lg(a,c,zn(c))}function hs(a,c){return a===c||a!==a&&c!==c}var $T=cc(Yu),FT=cc(function(a,c){return a>=c}),Jo=Ug(function(){return arguments}())?Ug:function(a){return jn(a)&&zt.call(a,"callee")&&!Dg.call(a,"callee")},gt=xe.isArray,WT=dg?Rr(dg):qP;function jr(a){return a!=null&&bc(a.length)&&!Js(a)}function Pn(a){return jn(a)&&jr(a)}function BT(a){return a===!0||a===!1||jn(a)&&hr(a)==We}var bo=tP||kh,VT=ug?Rr(ug):KP;function UT(a){return jn(a)&&a.nodeType===1&&!ki(a)}function zT(a){if(a==null)return!0;if(jr(a)&&(gt(a)||typeof a=="string"||typeof a.splice=="function"||bo(a)||ka(a)||Jo(a)))return!a.length;var c=sr(a);if(c==pe||c==B)return!a.size;if(Ai(a))return!Ju(a).length;for(var m in a)if(zt.call(a,m))return!1;return!0}function HT(a,c){return Ii(a,c)}function GT(a,c,m){m=typeof m=="function"?m:r;var E=m?m(a,c):r;return E===r?Ii(a,c,r,m):!!E}function Sh(a){if(!jn(a))return!1;var c=hr(a);return c==le||c==ie||typeof a.message=="string"&&typeof a.name=="string"&&!ki(a)}function YT(a){return typeof a=="number"&&Rg(a)}function Js(a){if(!xn(a))return!1;var c=hr(a);return c==se||c==ge||c==Ae||c==Se}function Xb(a){return typeof a=="number"&&a==jt(a)}function bc(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Y}function xn(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function jn(a){return a!=null&&typeof a=="object"}var Qb=hg?Rr(hg):XP;function qT(a,c){return a===c||Ku(a,c,hh(c))}function KT(a,c,m){return m=typeof m=="function"?m:r,Ku(a,c,hh(c),m)}function JT(a){return Zb(a)&&a!=+a}function XT(a){if(OE(a))throw new pt(i);return zg(a)}function QT(a){return a===null}function ZT(a){return a==null}function Zb(a){return typeof a=="number"||jn(a)&&hr(a)==ke}function ki(a){if(!jn(a)||hr(a)!=_e)return!1;var c=Hl(a);if(c===null)return!0;var m=zt.call(c,"constructor")&&c.constructor;return typeof m=="function"&&m instanceof m&&Bl.call(m)==K2}var wh=fg?Rr(fg):QP;function eD(a){return Xb(a)&&a>=-Y&&a<=Y}var ey=pg?Rr(pg):ZP;function yc(a){return typeof a=="string"||!gt(a)&&jn(a)&&hr(a)==Me}function _r(a){return typeof a=="symbol"||jn(a)&&hr(a)==qe}var ka=mg?Rr(mg):eE;function tD(a){return a===r}function nD(a){return jn(a)&&sr(a)==tn}function rD(a){return jn(a)&&hr(a)==Nt}var sD=cc(Xu),oD=cc(function(a,c){return a<=c});function ty(a){if(!a)return[];if(jr(a))return yc(a)?ds(a):vr(a);if(yi&&a[yi])return L2(a[yi]());var c=sr(a),m=c==pe?$u:c==B?$l:_a;return m(a)}function Xs(a){if(!a)return a===0?a:0;if(a=Qr(a),a===Q||a===-Q){var c=a<0?-1:1;return c*oe}return a===a?a:0}function jt(a){var c=Xs(a),m=c%1;return c===c?m?c-m:c:0}function ny(a){return a?Go(jt(a),0,Z):0}function Qr(a){if(typeof a=="number")return a;if(_r(a))return V;if(xn(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=xn(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=jg(a);var m=WC.test(a);return m||VC.test(a)?v2(a.slice(2),m?2:8):FC.test(a)?V:+a}function ry(a){return Ds(a,Sr(a))}function aD(a){return a?Go(jt(a),-Y,Y):a===0?a:0}function Wt(a){return a==null?"":kr(a)}var iD=Da(function(a,c){if(Ai(c)||jr(c)){Ds(c,zn(c),a);return}for(var m in c)zt.call(c,m)&&Ci(a,m,c[m])}),sy=Da(function(a,c){Ds(c,Sr(c),a)}),vc=Da(function(a,c,m,E){Ds(c,Sr(c),a,E)}),lD=Da(function(a,c,m,E){Ds(c,zn(c),a,E)}),cD=qs(zu);function dD(a,c){var m=Ta(a);return c==null?m:Ng(m,c)}var uD=Et(function(a,c){a=nn(a);var m=-1,E=c.length,A=E>2?c[2]:r;for(A&&fr(c[0],c[1],A)&&(E=1);++m<E;)for(var M=c[m],W=Sr(M),H=-1,te=W.length;++H<te;){var Ie=W[H],Te=a[Ie];(Te===r||hs(Te,Pa[Ie])&&!zt.call(a,Ie))&&(a[Ie]=M[Ie])}return a}),hD=Et(function(a){return a.push(r,jb),Ar(oy,r,a)});function fD(a,c){return gg(a,ct(c,3),Ts)}function pD(a,c){return gg(a,ct(c,3),Gu)}function mD(a,c){return a==null?a:Hu(a,ct(c,3),Sr)}function xD(a,c){return a==null?a:Bg(a,ct(c,3),Sr)}function gD(a,c){return a&&Ts(a,ct(c,3))}function bD(a,c){return a&&Gu(a,ct(c,3))}function yD(a){return a==null?[]:tc(a,zn(a))}function vD(a){return a==null?[]:tc(a,Sr(a))}function Ch(a,c,m){var E=a==null?r:Yo(a,c);return E===r?m:E}function jD(a,c){return a!=null&&Cb(a,c,zP)}function Ph(a,c){return a!=null&&Cb(a,c,HP)}var SD=xb(function(a,c,m){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),a[c]=m},Ih(wr)),wD=xb(function(a,c,m){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),zt.call(a,c)?a[c].push(m):a[c]=[m]},ct),CD=Et(Ei);function zn(a){return jr(a)?Og(a):Ju(a)}function Sr(a){return jr(a)?Og(a,!0):tE(a)}function PD(a,c){var m={};return c=ct(c,3),Ts(a,function(E,A,M){Gs(m,c(E,A,M),E)}),m}function ED(a,c){var m={};return c=ct(c,3),Ts(a,function(E,A,M){Gs(m,A,c(E,A,M))}),m}var ID=Da(function(a,c,m){nc(a,c,m)}),oy=Da(function(a,c,m,E){nc(a,c,m,E)}),TD=qs(function(a,c){var m={};if(a==null)return m;var E=!1;c=fn(c,function(M){return M=xo(M,a),E||(E=M.length>1),M}),Ds(a,dh(a),m),E&&(m=Kr(m,p|g|b,SE));for(var A=c.length;A--;)nh(m,c[A]);return m});function DD(a,c){return ay(a,gc(ct(c)))}var AD=qs(function(a,c){return a==null?{}:rE(a,c)});function ay(a,c){if(a==null)return{};var m=fn(dh(a),function(E){return[E]});return c=ct(c),Xg(a,m,function(E,A){return c(E,A[0])})}function RD(a,c,m){c=xo(c,a);var E=-1,A=c.length;for(A||(A=1,a=r);++E<A;){var M=a==null?r:a[As(c[E])];M===r&&(E=A,M=m),a=Js(M)?M.call(a):M}return a}function kD(a,c,m){return a==null?a:Ti(a,c,m)}function _D(a,c,m,E){return E=typeof E=="function"?E:r,a==null?a:Ti(a,c,m,E)}var iy=yb(zn),ly=yb(Sr);function OD(a,c,m){var E=gt(a),A=E||bo(a)||ka(a);if(c=ct(c,4),m==null){var M=a&&a.constructor;A?m=E?new M:[]:xn(a)?m=Js(M)?Ta(Hl(a)):{}:m={}}return(A?Gr:Ts)(a,function(W,H,te){return c(m,W,H,te)}),m}function MD(a,c){return a==null?!0:nh(a,c)}function ND(a,c,m){return a==null?a:nb(a,c,oh(m))}function LD(a,c,m,E){return E=typeof E=="function"?E:r,a==null?a:nb(a,c,oh(m),E)}function _a(a){return a==null?[]:Lu(a,zn(a))}function $D(a){return a==null?[]:Lu(a,Sr(a))}function FD(a,c,m){return m===r&&(m=c,c=r),m!==r&&(m=Qr(m),m=m===m?m:0),c!==r&&(c=Qr(c),c=c===c?c:0),Go(Qr(a),c,m)}function WD(a,c,m){return c=Xs(c),m===r?(m=c,c=0):m=Xs(m),a=Qr(a),GP(a,c,m)}function BD(a,c,m){if(m&&typeof m!="boolean"&&fr(a,c,m)&&(c=m=r),m===r&&(typeof c=="boolean"?(m=c,c=r):typeof a=="boolean"&&(m=a,a=r)),a===r&&c===r?(a=0,c=1):(a=Xs(a),c===r?(c=a,a=0):c=Xs(c)),a>c){var E=a;a=c,c=E}if(m||a%1||c%1){var A=kg();return rr(a+A*(c-a+y2("1e-"+((A+"").length-1))),c)}return Zu(a,c)}var VD=Aa(function(a,c,m){return c=c.toLowerCase(),a+(m?cy(c):c)});function cy(a){return Eh(Wt(a).toLowerCase())}function dy(a){return a=Wt(a),a&&a.replace(zC,k2).replace(c2,"")}function UD(a,c,m){a=Wt(a),c=kr(c);var E=a.length;m=m===r?E:Go(jt(m),0,E);var A=m;return m-=c.length,m>=0&&a.slice(m,A)==c}function zD(a){return a=Wt(a),a&&bu.test(a)?a.replace(ur,_2):a}function HD(a){return a=Wt(a),a&&AC.test(a)?a.replace(ju,"\\$&"):a}var GD=Aa(function(a,c,m){return a+(m?"-":"")+c.toLowerCase()}),YD=Aa(function(a,c,m){return a+(m?" ":"")+c.toLowerCase()}),qD=fb("toLowerCase");function KD(a,c,m){a=Wt(a),c=jt(c);var E=c?wa(a):0;if(!c||E>=c)return a;var A=(c-E)/2;return lc(Kl(A),m)+a+lc(ql(A),m)}function JD(a,c,m){a=Wt(a),c=jt(c);var E=c?wa(a):0;return c&&E<c?a+lc(c-E,m):a}function XD(a,c,m){a=Wt(a),c=jt(c);var E=c?wa(a):0;return c&&E<c?lc(c-E,m)+a:a}function QD(a,c,m){return m||c==null?c=0:c&&(c=+c),oP(Wt(a).replace(Su,""),c||0)}function ZD(a,c,m){return(m?fr(a,c,m):c===r)?c=1:c=jt(c),eh(Wt(a),c)}function eA(){var a=arguments,c=Wt(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var tA=Aa(function(a,c,m){return a+(m?"_":"")+c.toLowerCase()});function nA(a,c,m){return m&&typeof m!="number"&&fr(a,c,m)&&(c=m=r),m=m===r?Z:m>>>0,m?(a=Wt(a),a&&(typeof c=="string"||c!=null&&!wh(c))&&(c=kr(c),!c&&Sa(a))?go(ds(a),0,m):a.split(c,m)):[]}var rA=Aa(function(a,c,m){return a+(m?" ":"")+Eh(c)});function sA(a,c,m){return a=Wt(a),m=m==null?0:Go(jt(m),0,a.length),c=kr(c),a.slice(m,m+c.length)==c}function oA(a,c,m){var E=O.templateSettings;m&&fr(a,c,m)&&(c=r),a=Wt(a),c=vc({},c,E,vb);var A=vc({},c.imports,E.imports,vb),M=zn(A),W=Lu(A,M),H,te,Ie=0,Te=c.interpolate||_l,Re="__p += '",Be=Fu((c.escape||_l).source+"|"+Te.source+"|"+(Te===vu?$C:_l).source+"|"+(c.evaluate||_l).source+"|$","g"),tt="//# sourceURL="+(zt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++p2+"]")+`
`;a.replace(Be,function(ut,Tt,Rt,Or,pr,Mr){return Rt||(Rt=Or),Re+=a.slice(Ie,Mr).replace(HC,O2),Tt&&(H=!0,Re+=`' +
__e(`+Tt+`) +
'`),pr&&(te=!0,Re+=`';
`+pr+`;
__p += '`),Rt&&(Re+=`' +
((__t = (`+Rt+`)) == null ? '' : __t) +
'`),Ie=Mr+ut.length,ut}),Re+=`';
`;var dt=zt.call(c,"variable")&&c.variable;if(!dt)Re=`with (obj) {
`+Re+`
}
`;else if(NC.test(dt))throw new pt(d);Re=(te?Re.replace(Mn,""):Re).replace(qn,"$1").replace(Tr,"$1;"),Re="function("+(dt||"obj")+`) {
`+(dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Re+`return __p
}`;var wt=hy(function(){return Lt(M,tt+"return "+Re).apply(r,W)});if(wt.source=Re,Sh(wt))throw wt;return wt}function aA(a){return Wt(a).toLowerCase()}function iA(a){return Wt(a).toUpperCase()}function lA(a,c,m){if(a=Wt(a),a&&(m||c===r))return jg(a);if(!a||!(c=kr(c)))return a;var E=ds(a),A=ds(c),M=Sg(E,A),W=wg(E,A)+1;return go(E,M,W).join("")}function cA(a,c,m){if(a=Wt(a),a&&(m||c===r))return a.slice(0,Pg(a)+1);if(!a||!(c=kr(c)))return a;var E=ds(a),A=wg(E,ds(c))+1;return go(E,0,A).join("")}function dA(a,c,m){if(a=Wt(a),a&&(m||c===r))return a.replace(Su,"");if(!a||!(c=kr(c)))return a;var E=ds(a),A=Sg(E,ds(c));return go(E,A).join("")}function uA(a,c){var m=L,E=z;if(xn(c)){var A="separator"in c?c.separator:A;m="length"in c?jt(c.length):m,E="omission"in c?kr(c.omission):E}a=Wt(a);var M=a.length;if(Sa(a)){var W=ds(a);M=W.length}if(m>=M)return a;var H=m-wa(E);if(H<1)return E;var te=W?go(W,0,H).join(""):a.slice(0,H);if(A===r)return te+E;if(W&&(H+=te.length-H),wh(A)){if(a.slice(H).search(A)){var Ie,Te=te;for(A.global||(A=Fu(A.source,Wt(Ux.exec(A))+"g")),A.lastIndex=0;Ie=A.exec(Te);)var Re=Ie.index;te=te.slice(0,Re===r?H:Re)}}else if(a.indexOf(kr(A),H)!=H){var Be=te.lastIndexOf(A);Be>-1&&(te=te.slice(0,Be))}return te+E}function hA(a){return a=Wt(a),a&&gu.test(a)?a.replace(Bo,B2):a}var fA=Aa(function(a,c,m){return a+(m?" ":"")+c.toUpperCase()}),Eh=fb("toUpperCase");function uy(a,c,m){return a=Wt(a),c=m?r:c,c===r?N2(a)?z2(a):I2(a):a.match(c)||[]}var hy=Et(function(a,c){try{return Ar(a,r,c)}catch(m){return Sh(m)?m:new pt(m)}}),pA=qs(function(a,c){return Gr(c,function(m){m=As(m),Gs(a,m,vh(a[m],a))}),a});function mA(a){var c=a==null?0:a.length,m=ct();return a=c?fn(a,function(E){if(typeof E[1]!="function")throw new Yr(l);return[m(E[0]),E[1]]}):[],Et(function(E){for(var A=-1;++A<c;){var M=a[A];if(Ar(M[0],this,E))return Ar(M[1],this,E)}})}function xA(a){return BP(Kr(a,p))}function Ih(a){return function(){return a}}function gA(a,c){return a==null||a!==a?c:a}var bA=mb(),yA=mb(!0);function wr(a){return a}function Th(a){return Hg(typeof a=="function"?a:Kr(a,p))}function vA(a){return Yg(Kr(a,p))}function jA(a,c){return qg(a,Kr(c,p))}var SA=Et(function(a,c){return function(m){return Ei(m,a,c)}}),wA=Et(function(a,c){return function(m){return Ei(a,m,c)}});function Dh(a,c,m){var E=zn(c),A=tc(c,E);m==null&&!(xn(c)&&(A.length||!E.length))&&(m=c,c=a,a=this,A=tc(c,zn(c)));var M=!(xn(m)&&"chain"in m)||!!m.chain,W=Js(a);return Gr(A,function(H){var te=c[H];a[H]=te,W&&(a.prototype[H]=function(){var Ie=this.__chain__;if(M||Ie){var Te=a(this.__wrapped__),Re=Te.__actions__=vr(this.__actions__);return Re.push({func:te,args:arguments,thisArg:a}),Te.__chain__=Ie,Te}return te.apply(a,uo([this.value()],arguments))})}),a}function CA(){return Kn._===this&&(Kn._=J2),this}function Ah(){}function PA(a){return a=jt(a),Et(function(c){return Kg(c,a)})}var EA=ih(fn),IA=ih(xg),TA=ih(ku);function fy(a){return ph(a)?_u(As(a)):sE(a)}function DA(a){return function(c){return a==null?r:Yo(a,c)}}var AA=gb(),RA=gb(!0);function Rh(){return[]}function kh(){return!1}function kA(){return{}}function _A(){return""}function OA(){return!0}function MA(a,c){if(a=jt(a),a<1||a>Y)return[];var m=Z,E=rr(a,Z);c=ct(c),a-=Z;for(var A=Nu(E,c);++m<a;)c(m);return A}function NA(a){return gt(a)?fn(a,As):_r(a)?[a]:vr(_b(Wt(a)))}function LA(a){var c=++q2;return Wt(a)+c}var $A=ic(function(a,c){return a+c},0),FA=lh("ceil"),WA=ic(function(a,c){return a/c},1),BA=lh("floor");function VA(a){return a&&a.length?ec(a,wr,Yu):r}function UA(a,c){return a&&a.length?ec(a,ct(c,2),Yu):r}function zA(a){return yg(a,wr)}function HA(a,c){return yg(a,ct(c,2))}function GA(a){return a&&a.length?ec(a,wr,Xu):r}function YA(a,c){return a&&a.length?ec(a,ct(c,2),Xu):r}var qA=ic(function(a,c){return a*c},1),KA=lh("round"),JA=ic(function(a,c){return a-c},0);function XA(a){return a&&a.length?Mu(a,wr):0}function QA(a,c){return a&&a.length?Mu(a,ct(c,2)):0}return O.after=vT,O.ary=zb,O.assign=iD,O.assignIn=sy,O.assignInWith=vc,O.assignWith=lD,O.at=cD,O.before=Hb,O.bind=vh,O.bindAll=pA,O.bindKey=Gb,O.castArray=kT,O.chain=Bb,O.chunk=BE,O.compact=VE,O.concat=UE,O.cond=mA,O.conforms=xA,O.constant=Ih,O.countBy=XI,O.create=dD,O.curry=Yb,O.curryRight=qb,O.debounce=Kb,O.defaults=uD,O.defaultsDeep=hD,O.defer=jT,O.delay=ST,O.difference=zE,O.differenceBy=HE,O.differenceWith=GE,O.drop=YE,O.dropRight=qE,O.dropRightWhile=KE,O.dropWhile=JE,O.fill=XE,O.filter=ZI,O.flatMap=nT,O.flatMapDeep=rT,O.flatMapDepth=sT,O.flatten=Lb,O.flattenDeep=QE,O.flattenDepth=ZE,O.flip=wT,O.flow=bA,O.flowRight=yA,O.fromPairs=eI,O.functions=yD,O.functionsIn=vD,O.groupBy=oT,O.initial=nI,O.intersection=rI,O.intersectionBy=sI,O.intersectionWith=oI,O.invert=SD,O.invertBy=wD,O.invokeMap=iT,O.iteratee=Th,O.keyBy=lT,O.keys=zn,O.keysIn=Sr,O.map=pc,O.mapKeys=PD,O.mapValues=ED,O.matches=vA,O.matchesProperty=jA,O.memoize=xc,O.merge=ID,O.mergeWith=oy,O.method=SA,O.methodOf=wA,O.mixin=Dh,O.negate=gc,O.nthArg=PA,O.omit=TD,O.omitBy=DD,O.once=CT,O.orderBy=cT,O.over=EA,O.overArgs=PT,O.overEvery=IA,O.overSome=TA,O.partial=jh,O.partialRight=Jb,O.partition=dT,O.pick=AD,O.pickBy=ay,O.property=fy,O.propertyOf=DA,O.pull=cI,O.pullAll=Fb,O.pullAllBy=dI,O.pullAllWith=uI,O.pullAt=hI,O.range=AA,O.rangeRight=RA,O.rearg=ET,O.reject=fT,O.remove=fI,O.rest=IT,O.reverse=bh,O.sampleSize=mT,O.set=kD,O.setWith=_D,O.shuffle=xT,O.slice=pI,O.sortBy=yT,O.sortedUniq=jI,O.sortedUniqBy=SI,O.split=nA,O.spread=TT,O.tail=wI,O.take=CI,O.takeRight=PI,O.takeRightWhile=EI,O.takeWhile=II,O.tap=VI,O.throttle=DT,O.thru=fc,O.toArray=ty,O.toPairs=iy,O.toPairsIn=ly,O.toPath=NA,O.toPlainObject=ry,O.transform=OD,O.unary=AT,O.union=TI,O.unionBy=DI,O.unionWith=AI,O.uniq=RI,O.uniqBy=kI,O.uniqWith=_I,O.unset=MD,O.unzip=yh,O.unzipWith=Wb,O.update=ND,O.updateWith=LD,O.values=_a,O.valuesIn=$D,O.without=OI,O.words=uy,O.wrap=RT,O.xor=MI,O.xorBy=NI,O.xorWith=LI,O.zip=$I,O.zipObject=FI,O.zipObjectDeep=WI,O.zipWith=BI,O.entries=iy,O.entriesIn=ly,O.extend=sy,O.extendWith=vc,Dh(O,O),O.add=$A,O.attempt=hy,O.camelCase=VD,O.capitalize=cy,O.ceil=FA,O.clamp=FD,O.clone=_T,O.cloneDeep=MT,O.cloneDeepWith=NT,O.cloneWith=OT,O.conformsTo=LT,O.deburr=dy,O.defaultTo=gA,O.divide=WA,O.endsWith=UD,O.eq=hs,O.escape=zD,O.escapeRegExp=HD,O.every=QI,O.find=eT,O.findIndex=Mb,O.findKey=fD,O.findLast=tT,O.findLastIndex=Nb,O.findLastKey=pD,O.floor=BA,O.forEach=Vb,O.forEachRight=Ub,O.forIn=mD,O.forInRight=xD,O.forOwn=gD,O.forOwnRight=bD,O.get=Ch,O.gt=$T,O.gte=FT,O.has=jD,O.hasIn=Ph,O.head=$b,O.identity=wr,O.includes=aT,O.indexOf=tI,O.inRange=WD,O.invoke=CD,O.isArguments=Jo,O.isArray=gt,O.isArrayBuffer=WT,O.isArrayLike=jr,O.isArrayLikeObject=Pn,O.isBoolean=BT,O.isBuffer=bo,O.isDate=VT,O.isElement=UT,O.isEmpty=zT,O.isEqual=HT,O.isEqualWith=GT,O.isError=Sh,O.isFinite=YT,O.isFunction=Js,O.isInteger=Xb,O.isLength=bc,O.isMap=Qb,O.isMatch=qT,O.isMatchWith=KT,O.isNaN=JT,O.isNative=XT,O.isNil=ZT,O.isNull=QT,O.isNumber=Zb,O.isObject=xn,O.isObjectLike=jn,O.isPlainObject=ki,O.isRegExp=wh,O.isSafeInteger=eD,O.isSet=ey,O.isString=yc,O.isSymbol=_r,O.isTypedArray=ka,O.isUndefined=tD,O.isWeakMap=nD,O.isWeakSet=rD,O.join=aI,O.kebabCase=GD,O.last=Xr,O.lastIndexOf=iI,O.lowerCase=YD,O.lowerFirst=qD,O.lt=sD,O.lte=oD,O.max=VA,O.maxBy=UA,O.mean=zA,O.meanBy=HA,O.min=GA,O.minBy=YA,O.stubArray=Rh,O.stubFalse=kh,O.stubObject=kA,O.stubString=_A,O.stubTrue=OA,O.multiply=qA,O.nth=lI,O.noConflict=CA,O.noop=Ah,O.now=mc,O.pad=KD,O.padEnd=JD,O.padStart=XD,O.parseInt=QD,O.random=BD,O.reduce=uT,O.reduceRight=hT,O.repeat=ZD,O.replace=eA,O.result=RD,O.round=KA,O.runInContext=X,O.sample=pT,O.size=gT,O.snakeCase=tA,O.some=bT,O.sortedIndex=mI,O.sortedIndexBy=xI,O.sortedIndexOf=gI,O.sortedLastIndex=bI,O.sortedLastIndexBy=yI,O.sortedLastIndexOf=vI,O.startCase=rA,O.startsWith=sA,O.subtract=JA,O.sum=XA,O.sumBy=QA,O.template=oA,O.times=MA,O.toFinite=Xs,O.toInteger=jt,O.toLength=ny,O.toLower=aA,O.toNumber=Qr,O.toSafeInteger=aD,O.toString=Wt,O.toUpper=iA,O.trim=lA,O.trimEnd=cA,O.trimStart=dA,O.truncate=uA,O.unescape=hA,O.uniqueId=LA,O.upperCase=fA,O.upperFirst=Eh,O.each=Vb,O.eachRight=Ub,O.first=$b,Dh(O,function(){var a={};return Ts(O,function(c,m){zt.call(O.prototype,m)||(a[m]=c)}),a}(),{chain:!1}),O.VERSION=s,Gr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){O[a].placeholder=O}),Gr(["drop","take"],function(a,c){At.prototype[a]=function(m){m=m===r?1:Bn(jt(m),0);var E=this.__filtered__&&!c?new At(this):this.clone();return E.__filtered__?E.__takeCount__=rr(m,E.__takeCount__):E.__views__.push({size:rr(m,Z),type:a+(E.__dir__<0?"Right":"")}),E},At.prototype[a+"Right"]=function(m){return this.reverse()[a](m).reverse()}}),Gr(["filter","map","takeWhile"],function(a,c){var m=c+1,E=m==K||m==q;At.prototype[a]=function(A){var M=this.clone();return M.__iteratees__.push({iteratee:ct(A,3),type:m}),M.__filtered__=M.__filtered__||E,M}}),Gr(["head","last"],function(a,c){var m="take"+(c?"Right":"");At.prototype[a]=function(){return this[m](1).value()[0]}}),Gr(["initial","tail"],function(a,c){var m="drop"+(c?"":"Right");At.prototype[a]=function(){return this.__filtered__?new At(this):this[m](1)}}),At.prototype.compact=function(){return this.filter(wr)},At.prototype.find=function(a){return this.filter(a).head()},At.prototype.findLast=function(a){return this.reverse().find(a)},At.prototype.invokeMap=Et(function(a,c){return typeof a=="function"?new At(this):this.map(function(m){return Ei(m,a,c)})}),At.prototype.reject=function(a){return this.filter(gc(ct(a)))},At.prototype.slice=function(a,c){a=jt(a);var m=this;return m.__filtered__&&(a>0||c<0)?new At(m):(a<0?m=m.takeRight(-a):a&&(m=m.drop(a)),c!==r&&(c=jt(c),m=c<0?m.dropRight(-c):m.take(c-a)),m)},At.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},At.prototype.toArray=function(){return this.take(Z)},Ts(At.prototype,function(a,c){var m=/^(?:filter|find|map|reject)|While$/.test(c),E=/^(?:head|last)$/.test(c),A=O[E?"take"+(c=="last"?"Right":""):c],M=E||/^find/.test(c);A&&(O.prototype[c]=function(){var W=this.__wrapped__,H=E?[1]:arguments,te=W instanceof At,Ie=H[0],Te=te||gt(W),Re=function(Tt){var Rt=A.apply(O,uo([Tt],H));return E&&Be?Rt[0]:Rt};Te&&m&&typeof Ie=="function"&&Ie.length!=1&&(te=Te=!1);var Be=this.__chain__,tt=!!this.__actions__.length,dt=M&&!Be,wt=te&&!tt;if(!M&&Te){W=wt?W:new At(this);var ut=a.apply(W,H);return ut.__actions__.push({func:fc,args:[Re],thisArg:r}),new qr(ut,Be)}return dt&&wt?a.apply(this,H):(ut=this.thru(Re),dt?E?ut.value()[0]:ut.value():ut)})}),Gr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Fl[a],m=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",E=/^(?:pop|shift)$/.test(a);O.prototype[a]=function(){var A=arguments;if(E&&!this.__chain__){var M=this.value();return c.apply(gt(M)?M:[],A)}return this[m](function(W){return c.apply(gt(W)?W:[],A)})}}),Ts(At.prototype,function(a,c){var m=O[c];if(m){var E=m.name+"";zt.call(Ia,E)||(Ia[E]=[]),Ia[E].push({name:c,func:m})}}),Ia[ac(r,P).name]=[{name:"wrapper",func:r}],At.prototype.clone=hP,At.prototype.reverse=fP,At.prototype.value=pP,O.prototype.at=UI,O.prototype.chain=zI,O.prototype.commit=HI,O.prototype.next=GI,O.prototype.plant=qI,O.prototype.reverse=KI,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=JI,O.prototype.first=O.prototype.head,yi&&(O.prototype[yi]=YI),O},Ca=H2();Vo?((Vo.exports=Ca)._=Ca,Tu._=Ca):Kn._=Ca}).call(_i)})(sd,sd.exports);var wL=sd.exports;const CL=()=>{const[e,n]=x.useState(null),[r,s]=x.useState(!1),{api:o}=Ye(),{execute:i}=Ke(),[l,d]=x.useState(null),u=x.useCallback(async(g,b={},y=1,S=20)=>{if(!g.trim()){d("Search query cannot be empty");return}s(!0),d(null);try{const j={};Object.entries(b).forEach(([I,T])=>{T!=null&&T!==""&&(j[I]=T)});const P={page:y,limit:S},w=await i(()=>o==null?void 0:o.app.search.search(g,j,P),{showSuccessMessage:!1});n(w)}catch(j){console.error("Search error:",j),d(j.message||"Search failed")}finally{s(!1)}},[i]),h=x.useCallback(async(g,b)=>{if(!g.trim()||g.length<2)return[];try{return(await i(()=>o==null?void 0:o.app.search.getSuggestions(g,b),{showSuccessMessage:!1})).suggestions||[]}catch(y){return console.error("Suggestions error:",y),[]}},[i]),f=x.useCallback(async(g,b)=>{if(!g.trim()||g.length<2)return[];if(!(o!=null&&o.app.search))return console.error("Search API not available"),[];try{const y=await i(()=>o.app.search.getStructuredSuggestions(g,b),{showSuccessMessage:!1});return(y==null?void 0:y.suggestions)||[]}catch(y){return console.error("Structured suggestions error:",y),[]}},[i,o==null?void 0:o.app.search]),p=x.useCallback(()=>{n(null),d(null)},[]);return{searchResults:e,loading:r,error:l,performSearch:u,getSuggestions:h,getStructuredSuggestions:f,clearResults:p}},PL=Ne(C,{shouldForwardProp:e=>e!=="isFocused"})(({theme:e,isFocused:n})=>({position:"relative",width:n?"600px":"480px",maxWidth:n?"600px":"480px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",[e.breakpoints.down("lg")]:{width:n?"560px":"460px",maxWidth:n?"560px":"460px"},[e.breakpoints.down("md")]:{width:n?"400px":"360px",maxWidth:n?"400px":"360px"},[e.breakpoints.down("sm")]:{width:n?"320px":"280px",maxWidth:n?"320px":"280px"}})),EL=Ne(rt)(({theme:e})=>({borderRadius:e.spacing(3),backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.04)",border:"none",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.08)"},"&:focus-within":{backgroundColor:e.palette.background.paper,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",border:`1px solid ${e.palette.primary.main}`}})),IL=Ne(C)(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1,2),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}})),Ef=({onSearch:e,onSuggestionSelect:n,placeholder:r="Search articles, channels, or journalists...",className:s,fullWidth:o=!1})=>{const[i,l]=x.useState(""),[d,u]=x.useState([]),[h,f]=x.useState(!1),[p,g]=x.useState(!1),[b,y]=x.useState(!1),{getStructuredSuggestions:S}=CL(),j=xt(),P=x.useCallback(wL.debounce(async _=>{if(_.length<2){u([]);return}f(!0);try{const k=await S(_);u(k)}catch(k){console.error("Error fetching suggestions:",k),u([])}finally{f(!1)}},300),[]);x.useEffect(()=>{P(i)},[i,P]);const w=()=>{i.trim()&&(g(!1),e?e(i):j(`${fe.APP_SEARCH}?q=${encodeURIComponent(i.trim())}`))},I=_=>{if(g(!1),l(""),n){const k={id:_.id,text:_.text,type:_.type,metadata:_.metadata};n(k);return}switch(_.type){case"news":j(fe.APP_NEWS_VIEW.replace(":id",_.id));break;case"channel":j(fe.APP_CHANNEL_VIEW.replace(":channelId",_.id));break;case"poll":j(fe.APP_POLL_VIEW.replace(":id",_.id));break;case"user":j(`${fe.APP_SEARCH}?q=${encodeURIComponent(_.text)}&type=users`);break;case"tag":j(`${fe.APP_SEARCH}?q=${encodeURIComponent(_.text)}&type=tags`);break;default:j(`${fe.APP_SEARCH}?q=${encodeURIComponent(_.text)}`);break}},T=_=>{_.key==="Enter"&&w()},D=_=>{switch(_){case"news":return t.jsx(ia,{fontSize:"small",color:"primary"});case"channel":return t.jsx(Xf,{fontSize:"small",color:"secondary"});case"user":return t.jsx(Jf,{fontSize:"small",color:"action"});default:return t.jsx(Ss,{fontSize:"small",color:"disabled"})}},R=(_,k)=>x.createElement(IL,{..._,key:k.id},t.jsx(C,{sx:{mr:2},children:D(k.type)}),t.jsxs(C,{sx:{flexGrow:1},children:[t.jsx(v,{variant:"body2",fontWeight:"medium",children:k.text}),k.metadata&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:[k.metadata.channelName&&`in ${k.metadata.channelName}`,k.metadata.handle&&`@${k.metadata.handle}`,k.metadata.voteCount&&`${k.metadata.voteCount} votes`,k.metadata.usageCount&&`${k.metadata.usageCount} uses`,k.metadata.publishedAt&&`${new Date(k.metadata.publishedAt).toLocaleDateString()}`]})]}),t.jsx(v,{variant:"caption",color:"text.secondary",sx:{ml:1},children:k.type}));return t.jsx(PL,{className:s,isFocused:b,sx:{width:o?"100%":void 0},children:t.jsx(EL,{elevation:0,children:t.jsx(rR,{freeSolo:!0,options:d,loading:h,inputValue:i,onInputChange:(_,k)=>{l(k),g(k.length>=2)},getOptionLabel:_=>typeof _=="string"?_:_.text,filterOptions:_=>_,isOptionEqualToValue:(_,k)=>{if(typeof _=="string"||typeof k=="string"){const N=typeof _=="string"?_:_.text,L=typeof k=="string"?k:k.text;return N===L}return _.id===k.id},renderOption:(_,k)=>R(_,k),noOptionsText:h?"Loading...":"No suggestions found",open:p,onOpen:()=>g(!0),onClose:()=>{g(!1),y(!1)},ListboxProps:{style:{maxHeight:400}},renderInput:_=>t.jsx(et,{..._,variant:"outlined",placeholder:b?r:"Search...",onKeyPress:T,onFocus:()=>y(!0),onBlur:()=>{setTimeout(()=>{p||y(!1)},200)},size:"medium",InputProps:{..._.InputProps,startAdornment:t.jsx(zr,{position:"start",children:t.jsx(Oe,{onClick:w,size:"small",sx:{color:"inherit"},children:t.jsx(yl,{})})}),endAdornment:t.jsxs(t.Fragment,{children:[h&&t.jsx(v,{variant:"caption",sx:{mr:1},children:"Loading..."}),i&&t.jsx(zr,{position:"end",children:t.jsx(Oe,{onClick:()=>l(""),size:"small",sx:{color:"inherit"},children:t.jsx(sR,{})})})]}),sx:{"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{border:"none"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{padding:"12px 8px",fontSize:"1rem"},"& .MuiInputBase-input::placeholder":{color:"inherit",opacity:.7}}}}),PaperComponent:({children:_,...k})=>t.jsx(rt,{...k,sx:{mt:.5,boxShadow:3,maxHeight:400,overflow:"auto",position:"absolute",width:"100%",zIndex:1300,borderRadius:3},children:_}),onChange:(_,k)=>{k&&typeof k=="object"&&I(k)}})})})},TL="journalist-material-client",DL="1.1.0",AL="module",RL="https://cantsdmr.github.io/journalist-material-client",kL={dev:"vite","dev:staging":"vite --mode staging",build:"tsc && vite build","build:dev":"tsc && vite build --mode dev","build:staging":"tsc && vite build --mode staging","build:prod":"tsc && vite build --mode production",lint:"eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",preview:"vite preview","preview:staging":"vite preview --mode staging",predeploy:"npm run build:staging",deploy:"gh-pages -d dist"},_L={"@editorjs/checklist":"^1.6.0","@editorjs/code":"^2.9.3","@editorjs/delimiter":"^1.4.2","@editorjs/editorjs":"^2.30.7","@editorjs/header":"^2.8.8","@editorjs/image":"^2.10.1","@editorjs/inline-code":"^1.5.1","@editorjs/link":"^2.6.2","@editorjs/list":"^2.0.2","@editorjs/marker":"^1.4.0","@editorjs/quote":"^2.7.6","@editorjs/table":"^2.4.3","@editorjs/warning":"^1.4.1","@emotion/react":"^11.11.4","@emotion/styled":"^11.11.5","@hello-pangea/dnd":"^17.0.0","@mui/icons-material":"^5.15.17","@mui/material":"^5.15.17","@mui/x-date-pickers":"^8.3.1","@paypal/react-paypal-js":"^8.9.2",axios:"^1.7.2","class-transformer":"^0.5.1","class-validator":"^0.14.2","date-fns":"^4.1.0",firebase:"^10.12.2",react:"^18.2.0","react-dom":"^18.2.0","react-infinite-scroll-component":"^6.1.0","react-router-dom":"^6.23.1",recharts:"^2.12.7"},OL={"@types/react":"^18.2.66","@types/react-dom":"^18.2.22","@typescript-eslint/eslint-plugin":"^7.2.0","@typescript-eslint/parser":"^7.2.0","@vitejs/plugin-react":"^4.2.1",eslint:"^8.57.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.6","gh-pages":"^6.3.0",typescript:"^5.2.2",vite:"^5.2.0"},ML={name:TL,private:!0,version:DL,type:AL,homepage:RL,scripts:kL,dependencies:_L,devDependencies:OL},NL=ML.version;var Lp={},LL=Qe;Object.defineProperty(Lp,"__esModule",{value:!0});var Zj=Lp.default=void 0,$L=LL(Ze()),FL=t;Zj=Lp.default=(0,$L.default)((0,FL.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications");function Oc({fetcher:e,initialFilters:n={},pageSize:r=20,autoFetch:s=!1}){const[o,i]=x.useState({items:[],isLoading:!1,hasMore:!0,nextCursor:void 0,prevCursor:void 0,error:void 0}),[l,d]=x.useState(n),u=x.useRef(l);u.current=l;const h=x.useRef(!0),f=x.useRef(!s),p=x.useRef(o);p.current=o;const g=x.useCallback(async T=>{const D=T!==void 0?T:u.current;i(R=>({...R,isLoading:!0,error:void 0}));try{const R=await e(D,void 0,r);h.current&&i({items:R.items,isLoading:!1,hasMore:R.metadata.hasMore,nextCursor:R.metadata.nextCursor,prevCursor:R.metadata.prevCursor,error:void 0})}catch(R){h.current&&i(_=>({..._,isLoading:!1,error:R instanceof Error?R:new Error("Failed to fetch data")}))}},[e,r]),b=x.useCallback(async()=>{const T=p.current;if(!(T.isLoading||!T.hasMore||!T.nextCursor)){i(D=>({...D,isLoading:!0,error:void 0}));try{const D=await e(u.current,T.nextCursor,r);h.current&&i(R=>({items:[...R.items,...D.items],isLoading:!1,hasMore:D.metadata.hasMore,nextCursor:D.metadata.nextCursor,prevCursor:D.metadata.prevCursor,error:void 0}))}catch(D){h.current&&i(R=>({...R,isLoading:!1,error:D instanceof Error?D:new Error("Failed to load more")}))}}},[e,r]),y=x.useCallback(async()=>{await g(u.current)},[g]),S=x.useCallback(async T=>{d(T),await g(T)},[g]),j=x.useCallback(()=>{i({items:[],isLoading:!1,hasMore:!0,nextCursor:void 0,prevCursor:void 0,error:void 0})},[]),P=x.useCallback(T=>{i(D=>({...D,items:[T,...D.items]}))},[]),w=x.useCallback(T=>{i(D=>({...D,items:D.items.filter(R=>!T(R))}))},[]),I=x.useCallback((T,D)=>{i(R=>({...R,items:R.items.map(_=>T(_)?D(_):_)}))},[]);return f.current&&s&&(f.current=!1,g()),h.current=!0,{items:o.items,isLoading:o.isLoading,hasMore:o.hasMore,error:o.error,nextCursor:o.nextCursor,prevCursor:o.prevCursor,filters:l,fetchInitial:g,loadMore:b,refresh:y,updateFilters:S,reset:j,prependItem:P,removeItem:w,updateItem:I}}const[WL,$p]=Wd(),Yy=20,BL=({children:e})=>{const{api:n}=Ye(),{user:r}=cs(),{isAuthenticated:s}=xa(),{execute:o}=Ke(),[i,l]=x.useState(0),[d,u]=x.useState(!1),h=x.useRef(r);h.current=r;const f=x.useRef(!1),p=x.useCallback(async(Y,oe,V)=>{const Z={...Y,limit:V||Yy,after:oe};return await n.app.notification.getNotificationFeed(Z)},[n]),{items:g,isLoading:b,hasMore:y,loadMore:S,fetchInitial:j,refresh:P,updateFilters:w,updateItem:I,removeItem:T}=Oc({fetcher:p,pageSize:Yy,autoFetch:!1}),D=x.useRef(b);D.current=b;const R=x.useRef(y);R.current=y;const _=x.useCallback(async(Y={})=>{h.current&&await w(Y)},[w]),k=x.useCallback(async()=>{!h.current||D.current||!R.current||await S()},[S]),N=x.useCallback(async()=>{if(!h.current)return;const Y=await o(()=>n.app.notification.getNewNotificationsCount(),{showErrorToast:!1});Y&&l(Y.count||0)},[n,o]),L=x.useCallback(async()=>{if(!h.current)return;l(0),await o(()=>n.app.notification.markAsChecked(),{showErrorToast:!1,showSuccessMessage:!1})||await N()},[n,o,N]),z=x.useCallback(async Y=>{if(!h.current)return;I(V=>V.id===Y,V=>({...V,isRead:!0,readAt:new Date().toISOString()})),await o(()=>n.app.notification.markAsRead(Y),{showErrorToast:!0,showSuccessMessage:!1})||I(V=>V.id===Y,V=>({...V,isRead:!1,readAt:void 0}))},[n,o,I]),$=x.useCallback(async()=>{if(!h.current)return;const Y=new Date().toISOString();I(()=>!0,V=>({...V,isRead:!0,readAt:Y})),await o(()=>n.app.notification.markAllAsRead(),{showErrorToast:!0,showSuccessMessage:!0,successMessage:"All notifications marked as read"})||await P()},[n,o,I,P]),G=x.useCallback(async Y=>{if(!h.current)return;T(V=>V.id===Y),await o(()=>n.app.notification.deleteNotification(Y),{showErrorToast:!0,showSuccessMessage:!1})||await P()},[n,o,T,P]),K=x.useCallback(async()=>{u(Y=>{const oe=!Y;return oe&&L(),oe})},[L]),J=x.useCallback(async()=>{u(!0),await L()},[L]),q=x.useCallback(()=>{u(!1)},[]);x.useEffect(()=>{const Y=()=>{N(),d&&P()};return window.addEventListener("fcm-notification-received",Y),()=>{window.removeEventListener("fcm-notification-received",Y)}},[d,P,N]),x.useEffect(()=>{r&&s?N():(l(0),u(!1))},[r,s,N]),x.useEffect(()=>{d&&!b?f.current||(f.current=!0,j()):d||(f.current=!1)},[d,b,j]);const Q={notifications:g,newCount:i,isOpen:d,isLoading:b,hasMore:y,actions:{fetchNotifications:_,loadMore:k,markAsRead:z,markAllAsRead:$,deleteNotification:G,refreshNewCount:N,markAsChecked:L,toggleDrawer:K,openDrawer:J,closeDrawer:q}};return t.jsx(WL.Provider,{value:Q,children:e})},VL=()=>{const{newCount:e,actions:n}=$p(),r=()=>{n.toggleDrawer()};return t.jsx(Oe,{color:"inherit",onClick:r,"aria-label":"notifications",sx:{"& .MuiBadge-badge":{right:5,top:5,fontSize:"0.75rem",height:18,minWidth:18,padding:"0 4px"}},children:t.jsx(oR,{badgeContent:e,color:"error",max:99,overlap:"circular",children:t.jsx(Zj,{})})})};var Fp={},UL=Qe;Object.defineProperty(Fp,"__esModule",{value:!0});var eS=Fp.default=void 0,zL=UL(Ze()),HL=t;eS=Fp.default=(0,zL.default)((0,HL.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var Wp={},GL=Qe;Object.defineProperty(Wp,"__esModule",{value:!0});var tS=Wp.default=void 0,YL=GL(Ze()),qL=t;tS=Wp.default=(0,YL.default)((0,qL.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone");/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var If=function(e,n){return If=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)s.hasOwnProperty(o)&&(r[o]=s[o])},If(e,n)};function KL(e,n){If(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Ji=function(){return Ji=Object.assign||function(n){for(var r,s=1,o=arguments.length;s<o;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Ji.apply(this,arguments)};function JL(e,n,r,s){var o,i=!1,l=0;function d(){o&&clearTimeout(o)}function u(){d(),i=!0}typeof n!="boolean"&&(s=r,r=n,n=void 0);function h(){var f=this,p=Date.now()-l,g=arguments;if(i)return;function b(){l=Date.now(),r.apply(f,g)}function y(){o=void 0}s&&!o&&b(),d(),s===void 0&&p>e?b():n!==!0&&(o=setTimeout(s?y:b,s===void 0?e-p:e))}return h.cancel=u,h}var Ua={Pixel:"Pixel",Percent:"Percent"},qy={unit:Ua.Percent,value:.8};function Ky(e){return typeof e=="number"?{unit:Ua.Percent,value:e*100}:typeof e=="string"?e.match(/^(\d*(\.\d+)?)px$/)?{unit:Ua.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:Ua.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),qy):(console.warn("scrollThreshold should be string or number"),qy)}var Cs=function(e){KL(n,e);function n(r){var s=e.call(this,r)||this;return s.lastScrollTop=0,s.actionTriggered=!1,s.startY=0,s.currentY=0,s.dragging=!1,s.maxPullDownDistance=0,s.getScrollableTarget=function(){return s.props.scrollableTarget instanceof HTMLElement?s.props.scrollableTarget:typeof s.props.scrollableTarget=="string"?document.getElementById(s.props.scrollableTarget):(s.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},s.onStart=function(o){s.lastScrollTop||(s.dragging=!0,o instanceof MouseEvent?s.startY=o.pageY:o instanceof TouchEvent&&(s.startY=o.touches[0].pageY),s.currentY=s.startY,s._infScroll&&(s._infScroll.style.willChange="transform",s._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},s.onMove=function(o){s.dragging&&(o instanceof MouseEvent?s.currentY=o.pageY:o instanceof TouchEvent&&(s.currentY=o.touches[0].pageY),!(s.currentY<s.startY)&&(s.currentY-s.startY>=Number(s.props.pullDownToRefreshThreshold)&&s.setState({pullToRefreshThresholdBreached:!0}),!(s.currentY-s.startY>s.maxPullDownDistance*1.5)&&s._infScroll&&(s._infScroll.style.overflow="visible",s._infScroll.style.transform="translate3d(0px, "+(s.currentY-s.startY)+"px, 0px)")))},s.onEnd=function(){s.startY=0,s.currentY=0,s.dragging=!1,s.state.pullToRefreshThresholdBreached&&(s.props.refreshFunction&&s.props.refreshFunction(),s.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){s._infScroll&&(s._infScroll.style.overflow="auto",s._infScroll.style.transform="none",s._infScroll.style.willChange="unset")})},s.onScrollListener=function(o){typeof s.props.onScroll=="function"&&setTimeout(function(){return s.props.onScroll&&s.props.onScroll(o)},0);var i=s.props.height||s._scrollableNode?o.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!s.actionTriggered){var l=s.props.inverse?s.isElementAtTop(i,s.props.scrollThreshold):s.isElementAtBottom(i,s.props.scrollThreshold);l&&s.props.hasMore&&(s.actionTriggered=!0,s.setState({showLoader:!0}),s.props.next&&s.props.next()),s.lastScrollTop=i.scrollTop}},s.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:r.dataLength},s.throttledOnScrollListener=JL(150,s.onScrollListener).bind(s),s.onStart=s.onStart.bind(s),s.onMove=s.onMove.bind(s),s.onEnd=s.onEnd.bind(s),s}return n.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},n.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},n.prototype.componentDidUpdate=function(r){this.props.dataLength!==r.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},n.getDerivedStateFromProps=function(r,s){var o=r.dataLength!==s.prevDataLength;return o?Ji(Ji({},s),{prevDataLength:r.dataLength}):null},n.prototype.isElementAtTop=function(r,s){s===void 0&&(s=.8);var o=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,i=Ky(s);return i.unit===Ua.Pixel?r.scrollTop<=i.value+o-r.scrollHeight+1:r.scrollTop<=i.value/100+o-r.scrollHeight+1},n.prototype.isElementAtBottom=function(r,s){s===void 0&&(s=.8);var o=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,i=Ky(s);return i.unit===Ua.Pixel?r.scrollTop+o>=r.scrollHeight-i.value:r.scrollTop+o>=i.value/100*r.scrollHeight},n.prototype.render=function(){var r=this,s=Ji({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),i=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return Dt.createElement("div",{style:i,className:"infinite-scroll-component__outerdiv"},Dt.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(l){return r._infScroll=l},style:s},this.props.pullDownToRefresh&&Dt.createElement("div",{style:{position:"relative"},ref:function(l){return r._pullDown=l}},Dt.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},n}(x.Component),Bp={},XL=Qe;Object.defineProperty(Bp,"__esModule",{value:!0});var nS=Bp.default=void 0,QL=XL(Ze()),ZL=t;nS=Bp.default=(0,QL.default)((0,ZL.jsx)("path",{d:"M20 8H4V6h16zm-2-6H6v2h12zm4 10v8c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2v-8c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2m-6 4-6-3.27v6.53z"}),"Subscriptions");var Vp={},e5=Qe;Object.defineProperty(Vp,"__esModule",{value:!0});var rS=Vp.default=void 0,t5=e5(Ze()),n5=t;rS=Vp.default=(0,t5.default)((0,n5.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"Payment");var Up={},r5=Qe;Object.defineProperty(Up,"__esModule",{value:!0});var Hd=Up.default=void 0,s5=r5(Ze()),o5=t;Hd=Up.default=(0,s5.default)((0,o5.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var zp={},a5=Qe;Object.defineProperty(zp,"__esModule",{value:!0});var sS=zp.default=void 0,i5=a5(Ze()),l5=t;sS=zp.default=(0,i5.default)((0,l5.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");const oS=6048e5,c5=864e5,aS=6e4,iS=36e5,d5=1e3,Pc=43200,Jy=1440,Xy=Symbol.for("constructDateFrom");function ln(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&Xy in e?e[Xy](n):e instanceof Date?new e.constructor(n):new Date(n)}function st(e,n){return ln(n||e,e)}function Gd(e,n,r){const s=st(e,r==null?void 0:r.in);return isNaN(n)?ln((r==null?void 0:r.in)||e,NaN):(n&&s.setDate(s.getDate()+n),s)}function lS(e,n,r){const s=st(e,r==null?void 0:r.in);if(isNaN(n))return ln(e,NaN);if(!n)return s;const o=s.getDate(),i=ln(e,s.getTime());i.setMonth(s.getMonth()+n+1,0);const l=i.getDate();return o>=l?i:(s.setFullYear(i.getFullYear(),i.getMonth(),o),s)}function cS(e,n,r){return ln(e,+st(e)+n)}function u5(e,n,r){return cS(e,n*iS)}let h5={};function No(){return h5}function io(e,n){var d,u,h,f;const r=No(),s=(n==null?void 0:n.weekStartsOn)??((u=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,o=st(e,n==null?void 0:n.in),i=o.getDay(),l=(i<s?7:0)+i-s;return o.setDate(o.getDate()-l),o.setHours(0,0,0,0),o}function Za(e,n){return io(e,{...n,weekStartsOn:1})}function dS(e,n){const r=st(e,n==null?void 0:n.in),s=r.getFullYear(),o=ln(r,0);o.setFullYear(s+1,0,4),o.setHours(0,0,0,0);const i=Za(o),l=ln(r,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const d=Za(l);return r.getTime()>=i.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function ei(e){const n=st(e),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),+e-+r}function Lo(e,...n){const r=ln.bind(null,e||n.find(s=>typeof s=="object"));return n.map(r)}function sl(e,n){const r=st(e,n==null?void 0:n.in);return r.setHours(0,0,0,0),r}function f5(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n),i=sl(s),l=sl(o),d=+i-ei(i),u=+l-ei(l);return Math.round((d-u)/c5)}function p5(e,n){const r=dS(e,n),s=ln(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Za(s)}function m5(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setTime(s.getTime()+n*aS),s}function x5(e,n,r){return cS(e,n*1e3)}function g5(e,n,r){return Gd(e,n*7,r)}function b5(e,n,r){return lS(e,n*12,r)}function Mc(e,n){const r=+st(e)-+st(n);return r<0?-1:r>0?1:r}function y5(e){return ln(e,Date.now())}function v5(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n);return+sl(s)==+sl(o)}function j5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uS(e){return!(!j5(e)&&typeof e!="number"||isNaN(+st(e)))}function S5(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n),i=s.getFullYear()-o.getFullYear(),l=s.getMonth()-o.getMonth();return i*12+l}function w5(e){return n=>{const s=(e?Math[e]:Math.trunc)(n);return s===0?0:s}}function C5(e,n){return+st(e)-+st(n)}function Tf(e,n){const r=st(e,n==null?void 0:n.in);return r.setHours(23,59,59,999),r}function hS(e,n){const r=st(e,n==null?void 0:n.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function P5(e,n){const r=st(e,n==null?void 0:n.in);return+Tf(r,n)==+hS(r,n)}function E5(e,n,r){const[s,o,i]=Lo(r==null?void 0:r.in,e,e,n),l=Mc(o,i),d=Math.abs(S5(o,i));if(d<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-l*d);let u=Mc(o,i)===-l;P5(s)&&d===1&&Mc(s,i)===1&&(u=!1);const h=l*(d-+u);return h===0?0:h}function I5(e,n,r){const s=C5(e,n)/1e3;return w5(r==null?void 0:r.roundingMethod)(s)}function T5(e,n){const r=st(e,n==null?void 0:n.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Qy(e,n){const r=st(e,n==null?void 0:n.in),s=r.getFullYear();return r.setFullYear(s+1,0,0),r.setHours(23,59,59,999),r}function fS(e,n){const r=st(e,n==null?void 0:n.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function D5(e,n){var d,u,h,f;const r=No(),s=(n==null?void 0:n.weekStartsOn)??((u=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,o=st(e,n==null?void 0:n.in),i=o.getDay(),l=(i<s?-7:0)+6-(i-s);return o.setDate(o.getDate()+l),o.setHours(23,59,59,999),o}const A5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},R5=(e,n,r)=>{let s;const o=A5[e];return typeof o=="string"?s=o:n===1?s=o.one:s=o.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Gh(e){return(n={})=>{const r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const k5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},O5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M5={date:Gh({formats:k5,defaultWidth:"full"}),time:Gh({formats:_5,defaultWidth:"full"}),dateTime:Gh({formats:O5,defaultWidth:"full"})},N5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},L5=(e,n,r,s)=>N5[e];function $i(e){return(n,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let o;if(s==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,d=r!=null&&r.width?String(r.width):l;o=e.formattingValues[d]||e.formattingValues[l]}else{const l=e.defaultWidth,d=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[d]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(n):n;return o[i]}}const $5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},W5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},U5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},z5=(e,n)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},H5={ordinalNumber:z5,era:$i({values:$5,defaultWidth:"wide"}),quarter:$i({values:F5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$i({values:W5,defaultWidth:"wide"}),day:$i({values:B5,defaultWidth:"wide"}),dayPeriod:$i({values:V5,defaultWidth:"wide",formattingValues:U5,defaultFormattingWidth:"wide"})};function Fi(e){return(n,r={})=>{const s=r.width,o=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=n.match(o);if(!i)return null;const l=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(d)?Y5(d,p=>p.test(l)):G5(d,p=>p.test(l));let h;h=e.valueCallback?e.valueCallback(u):u,h=r.valueCallback?r.valueCallback(h):h;const f=n.slice(l.length);return{value:h,rest:f}}}function G5(e,n){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return r}function Y5(e,n){for(let r=0;r<e.length;r++)if(n(e[r]))return r}function q5(e){return(n,r={})=>{const s=n.match(e.matchPattern);if(!s)return null;const o=s[0],i=n.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const d=n.slice(o.length);return{value:l,rest:d}}}const K5=/^(\d+)(th|st|nd|rd)?/i,J5=/\d+/i,X5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Q5={any:[/^b/i,/^(a|c)/i]},Z5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e$={any:[/1/i,/2/i,/3/i,/4/i]},t$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i$={ordinalNumber:q5({matchPattern:K5,parsePattern:J5,valueCallback:e=>parseInt(e,10)}),era:Fi({matchPatterns:X5,defaultMatchWidth:"wide",parsePatterns:Q5,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:e$,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Fi({matchPatterns:t$,defaultMatchWidth:"wide",parsePatterns:n$,defaultParseWidth:"any"}),day:Fi({matchPatterns:r$,defaultMatchWidth:"wide",parsePatterns:s$,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:o$,defaultMatchWidth:"any",parsePatterns:a$,defaultParseWidth:"any"})},Yd={code:"en-US",formatDistance:R5,formatLong:M5,formatRelative:L5,localize:H5,match:i$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function l$(e,n){const r=st(e,n==null?void 0:n.in);return f5(r,fS(r))+1}function pS(e,n){const r=st(e,n==null?void 0:n.in),s=+Za(r)-+p5(r);return Math.round(s/oS)+1}function Hp(e,n){var f,p,g,b;const r=st(e,n==null?void 0:n.in),s=r.getFullYear(),o=No(),i=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??o.firstWeekContainsDate??((b=(g=o.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,l=ln((n==null?void 0:n.in)||e,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=io(l,n),u=ln((n==null?void 0:n.in)||e,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const h=io(u,n);return+r>=+d?s+1:+r>=+h?s:s-1}function c$(e,n){var d,u,h,f;const r=No(),s=(n==null?void 0:n.firstWeekContainsDate)??((u=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=Hp(e,n),i=ln((n==null?void 0:n.in)||e,0);return i.setFullYear(o,0,s),i.setHours(0,0,0,0),io(i,n)}function Gp(e,n){const r=st(e,n==null?void 0:n.in),s=+io(r,n)-+c$(r,n);return Math.round(s/oS)+1}function Ht(e,n){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(n,"0");return r+s}const jo={y(e,n){const r=e.getFullYear(),s=r>0?r:1-r;return Ht(n==="yy"?s%100:s,n.length)},M(e,n){const r=e.getMonth();return n==="M"?String(r+1):Ht(r+1,2)},d(e,n){return Ht(e.getDate(),n.length)},a(e,n){const r=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,n){return Ht(e.getHours()%12||12,n.length)},H(e,n){return Ht(e.getHours(),n.length)},m(e,n){return Ht(e.getMinutes(),n.length)},s(e,n){return Ht(e.getSeconds(),n.length)},S(e,n){const r=n.length,s=e.getMilliseconds(),o=Math.trunc(s*Math.pow(10,r-3));return Ht(o,n.length)}},Ma={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zy={G:function(e,n,r){const s=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){const s=e.getFullYear(),o=s>0?s:1-s;return r.ordinalNumber(o,{unit:"year"})}return jo.y(e,n)},Y:function(e,n,r,s){const o=Hp(e,s),i=o>0?o:1-o;if(n==="YY"){const l=i%100;return Ht(l,2)}return n==="Yo"?r.ordinalNumber(i,{unit:"year"}):Ht(i,n.length)},R:function(e,n){const r=dS(e);return Ht(r,n.length)},u:function(e,n){const r=e.getFullYear();return Ht(r,n.length)},Q:function(e,n,r){const s=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ht(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){const s=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ht(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){const s=e.getMonth();switch(n){case"M":case"MM":return jo.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){const s=e.getMonth();switch(n){case"L":return String(s+1);case"LL":return Ht(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){const o=Gp(e,s);return n==="wo"?r.ordinalNumber(o,{unit:"week"}):Ht(o,n.length)},I:function(e,n,r){const s=pS(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ht(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):jo.d(e,n)},D:function(e,n,r){const s=l$(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ht(s,n.length)},E:function(e,n,r){const s=e.getDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){const o=e.getDay(),i=(o-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Ht(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){const o=e.getDay(),i=(o-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Ht(i,n.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,r){const s=e.getDay(),o=s===0?7:s;switch(n){case"i":return String(o);case"ii":return Ht(o,n.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){const o=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,r){const s=e.getHours();let o;switch(s===12?o=Ma.noon:s===0?o=Ma.midnight:o=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,r){const s=e.getHours();let o;switch(s>=17?o=Ma.evening:s>=12?o=Ma.afternoon:s>=4?o=Ma.morning:o=Ma.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return jo.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):jo.H(e,n)},K:function(e,n,r){const s=e.getHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ht(s,n.length)},k:function(e,n,r){let s=e.getHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ht(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):jo.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):jo.s(e,n)},S:function(e,n){return jo.S(e,n)},X:function(e,n,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return t0(s);case"XXXX":case"XX":return na(s);case"XXXXX":case"XXX":default:return na(s,":")}},x:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"x":return t0(s);case"xxxx":case"xx":return na(s);case"xxxxx":case"xxx":default:return na(s,":")}},O:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+e0(s,":");case"OOOO":default:return"GMT"+na(s,":")}},z:function(e,n,r){const s=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+e0(s,":");case"zzzz":default:return"GMT"+na(s,":")}},t:function(e,n,r){const s=Math.trunc(+e/1e3);return Ht(s,n.length)},T:function(e,n,r){return Ht(+e,n.length)}};function e0(e,n=""){const r=e>0?"-":"+",s=Math.abs(e),o=Math.trunc(s/60),i=s%60;return i===0?r+String(o):r+String(o)+n+Ht(i,2)}function t0(e,n){return e%60===0?(e>0?"-":"+")+Ht(Math.abs(e)/60,2):na(e,n)}function na(e,n=""){const r=e>0?"-":"+",s=Math.abs(e),o=Ht(Math.trunc(s/60),2),i=Ht(s%60,2);return r+o+n+i}const n0=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},mS=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},d$=(e,n)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],o=r[2];if(!o)return n0(e,n);let i;switch(s){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",n0(s,n)).replace("{{time}}",mS(o,n))},od={p:mS,P:d$},u$=/^D+$/,h$=/^Y+$/,f$=["D","DD","YY","YYYY"];function xS(e){return u$.test(e)}function gS(e){return h$.test(e)}function Df(e,n,r){const s=p$(e,n,r);if(console.warn(s),f$.includes(e))throw new RangeError(s)}function p$(e,n,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const m$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g$=/^'([^]*?)'?$/,b$=/''/g,y$=/[a-zA-Z]/;function Yp(e,n,r){var f,p,g,b,y,S,j,P;const s=No(),o=(r==null?void 0:r.locale)??s.locale??Yd,i=(r==null?void 0:r.firstWeekContainsDate)??((p=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(g=s.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((S=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:S.weekStartsOn)??s.weekStartsOn??((P=(j=s.locale)==null?void 0:j.options)==null?void 0:P.weekStartsOn)??0,d=st(e,r==null?void 0:r.in);if(!uS(d))throw new RangeError("Invalid time value");let u=n.match(x$).map(w=>{const I=w[0];if(I==="p"||I==="P"){const T=od[I];return T(w,o.formatLong)}return w}).join("").match(m$).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const I=w[0];if(I==="'")return{isToken:!1,value:v$(w)};if(Zy[I])return{isToken:!0,value:w};if(I.match(y$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:w}});o.localize.preprocessor&&(u=o.localize.preprocessor(d,u));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:o};return u.map(w=>{if(!w.isToken)return w.value;const I=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&gS(I)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&xS(I))&&Df(I,n,String(e));const T=Zy[I[0]];return T(d,I,o.localize,h)}).join("")}function v$(e){const n=e.match(g$);return n?n[1].replace(b$,"'"):e}function j$(e,n,r){const s=No(),o=(r==null?void 0:r.locale)??s.locale??Yd,i=2520,l=Mc(e,n);if(isNaN(l))throw new RangeError("Invalid time value");const d=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l}),[u,h]=Lo(r==null?void 0:r.in,...l>0?[n,e]:[e,n]),f=I5(h,u),p=(ei(h)-ei(u))/1e3,g=Math.round((f-p)/60);let b;if(g<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,d):f<10?o.formatDistance("lessThanXSeconds",10,d):f<20?o.formatDistance("lessThanXSeconds",20,d):f<40?o.formatDistance("halfAMinute",0,d):f<60?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",1,d):g===0?o.formatDistance("lessThanXMinutes",1,d):o.formatDistance("xMinutes",g,d);if(g<45)return o.formatDistance("xMinutes",g,d);if(g<90)return o.formatDistance("aboutXHours",1,d);if(g<Jy){const y=Math.round(g/60);return o.formatDistance("aboutXHours",y,d)}else{if(g<i)return o.formatDistance("xDays",1,d);if(g<Pc){const y=Math.round(g/Jy);return o.formatDistance("xDays",y,d)}else if(g<Pc*2)return b=Math.round(g/Pc),o.formatDistance("aboutXMonths",b,d)}if(b=E5(h,u),b<12){const y=Math.round(g/Pc);return o.formatDistance("xMonths",y,d)}else{const y=b%12,S=Math.trunc(b/12);return y<3?o.formatDistance("aboutXYears",S,d):y<9?o.formatDistance("overXYears",S,d):o.formatDistance("almostXYears",S+1,d)}}function $r(e,n){return j$(e,y5(e),n)}function S$(e,n){return st(e,n==null?void 0:n.in).getDate()}function bS(e,n){const r=st(e,n==null?void 0:n.in),s=r.getFullYear(),o=r.getMonth(),i=ln(r,0);return i.setFullYear(s,o+1,0),i.setHours(0,0,0,0),i.getDate()}function w$(){return Object.assign({},No())}function C$(e,n){return st(e,n==null?void 0:n.in).getHours()}function P$(e,n){const r=st(e,n==null?void 0:n.in).getDay();return r===0?7:r}function E$(e){return st(e).getMilliseconds()}function I$(e,n){return st(e,n==null?void 0:n.in).getMinutes()}function T$(e,n){return st(e,n==null?void 0:n.in).getMonth()}function D$(e){return st(e).getSeconds()}function A$(e,n){return st(e,n==null?void 0:n.in).getFullYear()}function Yh(e,n){return+st(e)>+st(n)}function qh(e,n){return+st(e)<+st(n)}function R$(e,n){return+st(e)==+st(n)}function k$(e,n){const r=_$(n)?new n(0):ln(n,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function _$(e){var n;return typeof e=="function"&&((n=e.prototype)==null?void 0:n.constructor)===e}const O$=10;class yS{constructor(){De(this,"subPriority",0)}validate(n,r){return!0}}class M$ extends yS{constructor(n,r,s,o,i){super(),this.value=n,this.validateValue=r,this.setValue=s,this.priority=o,i&&(this.subPriority=i)}validate(n,r){return this.validateValue(n,this.value,r)}set(n,r,s){return this.setValue(n,r,this.value,s)}}class N$ extends yS{constructor(r,s){super();De(this,"priority",O$);De(this,"subPriority",-1);this.context=r||(o=>ln(s,o))}set(r,s){return s.timestampIsSet?r:ln(r,k$(r,this.context))}}class Ft{run(n,r,s,o){const i=this.parse(n,r,s,o);return i?{setter:new M$(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(n,r,s){return!0}}class L$ extends Ft{constructor(){super(...arguments);De(this,"priority",140);De(this,"incompatibleTokens",["R","u","t","T"])}parse(r,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"})}}set(r,s,o){return s.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}const Rn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Os={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function kn(e,n){return e&&{value:n(e.value),rest:e.rest}}function bn(e,n){const r=n.match(e);return r?{value:parseInt(r[0],10),rest:n.slice(r[0].length)}:null}function Ms(e,n){const r=n.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:n.slice(1)};const s=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,l=r[5]?parseInt(r[5],10):0;return{value:s*(o*iS+i*aS+l*d5),rest:n.slice(r[0].length)}}function vS(e){return bn(Rn.anyDigitsSigned,e)}function wn(e,n){switch(e){case 1:return bn(Rn.singleDigit,n);case 2:return bn(Rn.twoDigits,n);case 3:return bn(Rn.threeDigits,n);case 4:return bn(Rn.fourDigits,n);default:return bn(new RegExp("^\\d{1,"+e+"}"),n)}}function ad(e,n){switch(e){case 1:return bn(Rn.singleDigitSigned,n);case 2:return bn(Rn.twoDigitsSigned,n);case 3:return bn(Rn.threeDigitsSigned,n);case 4:return bn(Rn.fourDigitsSigned,n);default:return bn(new RegExp("^-?\\d{1,"+e+"}"),n)}}function qp(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function jS(e,n){const r=n>0,s=r?n:1-n;let o;if(s<=50)o=e||100;else{const i=s+50,l=Math.trunc(i/100)*100,d=e>=i%100;o=e+l-(d?100:0)}return r?o:1-o}function SS(e){return e%400===0||e%4===0&&e%100!==0}class $$ extends Ft{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,s,o){const i=l=>({year:l,isTwoDigitYear:s==="yy"});switch(s){case"y":return kn(wn(4,r),i);case"yo":return kn(o.ordinalNumber(r,{unit:"year"}),i);default:return kn(wn(s.length,r),i)}}validate(r,s){return s.isTwoDigitYear||s.year>0}set(r,s,o){const i=r.getFullYear();if(o.isTwoDigitYear){const d=jS(o.year,i);return r.setFullYear(d,0,1),r.setHours(0,0,0,0),r}const l=!("era"in s)||s.era===1?o.year:1-o.year;return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}}class F$ extends Ft{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,s,o){const i=l=>({year:l,isTwoDigitYear:s==="YY"});switch(s){case"Y":return kn(wn(4,r),i);case"Yo":return kn(o.ordinalNumber(r,{unit:"year"}),i);default:return kn(wn(s.length,r),i)}}validate(r,s){return s.isTwoDigitYear||s.year>0}set(r,s,o,i){const l=Hp(r,i);if(o.isTwoDigitYear){const u=jS(o.year,l);return r.setFullYear(u,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),io(r,i)}const d=!("era"in s)||s.era===1?o.year:1-o.year;return r.setFullYear(d,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),io(r,i)}}class W$ extends Ft{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,s){return ad(s==="R"?4:s.length,r)}set(r,s,o){const i=ln(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Za(i)}}class B$ extends Ft{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,s){return ad(s==="u"?4:s.length,r)}set(r,s,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class V$ extends Ft{constructor(){super(...arguments);De(this,"priority",120);De(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,s,o){switch(s){case"Q":case"QQ":return wn(s.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=1&&s<=4}set(r,s,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}}class U$ extends Ft{constructor(){super(...arguments);De(this,"priority",120);De(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,s,o){switch(s){case"q":case"qq":return wn(s.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=1&&s<=4}set(r,s,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}}class z$ extends Ft{constructor(){super(...arguments);De(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);De(this,"priority",110)}parse(r,s,o){const i=l=>l-1;switch(s){case"M":return kn(bn(Rn.month,r),i);case"MM":return kn(wn(2,r),i);case"Mo":return kn(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=11}set(r,s,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}}class H$ extends Ft{constructor(){super(...arguments);De(this,"priority",110);De(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,s,o){const i=l=>l-1;switch(s){case"L":return kn(bn(Rn.month,r),i);case"LL":return kn(wn(2,r),i);case"Lo":return kn(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=0&&s<=11}set(r,s,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}}function G$(e,n,r){const s=st(e,r==null?void 0:r.in),o=Gp(s,r)-n;return s.setDate(s.getDate()-o*7),st(s,r==null?void 0:r.in)}class Y$ extends Ft{constructor(){super(...arguments);De(this,"priority",100);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,s,o){switch(s){case"w":return bn(Rn.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return wn(s.length,r)}}validate(r,s){return s>=1&&s<=53}set(r,s,o,i){return io(G$(r,o,i),i)}}function q$(e,n,r){const s=st(e,r==null?void 0:r.in),o=pS(s,r)-n;return s.setDate(s.getDate()-o*7),s}class K$ extends Ft{constructor(){super(...arguments);De(this,"priority",100);De(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,s,o){switch(s){case"I":return bn(Rn.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return wn(s.length,r)}}validate(r,s){return s>=1&&s<=53}set(r,s,o){return Za(q$(r,o))}}const J$=[31,28,31,30,31,30,31,31,30,31,30,31],X$=[31,29,31,30,31,30,31,31,30,31,30,31];class Q$ extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"subPriority",1);De(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,s,o){switch(s){case"d":return bn(Rn.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return wn(s.length,r)}}validate(r,s){const o=r.getFullYear(),i=SS(o),l=r.getMonth();return i?s>=1&&s<=X$[l]:s>=1&&s<=J$[l]}set(r,s,o){return r.setDate(o),r.setHours(0,0,0,0),r}}class Z$ extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"subpriority",1);De(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,s,o){switch(s){case"D":case"DD":return bn(Rn.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return wn(s.length,r)}}validate(r,s){const o=r.getFullYear();return SS(o)?s>=1&&s<=366:s>=1&&s<=365}set(r,s,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}}function Kp(e,n,r){var p,g,b,y;const s=No(),o=(r==null?void 0:r.weekStartsOn)??((g=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((y=(b=s.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,i=st(e,r==null?void 0:r.in),l=i.getDay(),u=(n%7+7)%7,h=7-o,f=n<0||n>6?n-(l+h)%7:(u+h)%7-(l+h)%7;return Gd(i,f,r)}class eF extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=6}set(r,s,o,i){return r=Kp(r,o,i),r.setHours(0,0,0,0),r}}class tF extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,s,o,i){const l=d=>{const u=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+u};switch(s){case"e":case"ee":return kn(wn(s.length,r),l);case"eo":return kn(o.ordinalNumber(r,{unit:"day"}),l);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,s){return s>=0&&s<=6}set(r,s,o,i){return r=Kp(r,o,i),r.setHours(0,0,0,0),r}}class nF extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,s,o,i){const l=d=>{const u=Math.floor((d-1)/7)*7;return(d+i.weekStartsOn+6)%7+u};switch(s){case"c":case"cc":return kn(wn(s.length,r),l);case"co":return kn(o.ordinalNumber(r,{unit:"day"}),l);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"})}}validate(r,s){return s>=0&&s<=6}set(r,s,o,i){return r=Kp(r,o,i),r.setHours(0,0,0,0),r}}function rF(e,n,r){const s=st(e,r==null?void 0:r.in),o=P$(s,r),i=n-o;return Gd(s,i,r)}class sF extends Ft{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,s,o){const i=l=>l===0?7:l;switch(s){case"i":case"ii":return wn(s.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return kn(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return kn(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return kn(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return kn(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,s){return s>=1&&s<=7}set(r,s,o){return r=rF(r,o),r.setHours(0,0,0,0),r}}class oF extends Ft{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,o){return r.setHours(qp(o),0,0,0),r}}class aF extends Ft{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,o){return r.setHours(qp(o),0,0,0),r}}class iF extends Ft{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["a","b","t","T"])}parse(r,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,s,o){return r.setHours(qp(o),0,0,0),r}}class lF extends Ft{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,s,o){switch(s){case"h":return bn(Rn.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return wn(s.length,r)}}validate(r,s){return s>=1&&s<=12}set(r,s,o){const i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}}class cF extends Ft{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,s,o){switch(s){case"H":return bn(Rn.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return wn(s.length,r)}}validate(r,s){return s>=0&&s<=23}set(r,s,o){return r.setHours(o,0,0,0),r}}class dF extends Ft{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,s,o){switch(s){case"K":return bn(Rn.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return wn(s.length,r)}}validate(r,s){return s>=0&&s<=11}set(r,s,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}}class uF extends Ft{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,s,o){switch(s){case"k":return bn(Rn.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return wn(s.length,r)}}validate(r,s){return s>=1&&s<=24}set(r,s,o){const i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}}class hF extends Ft{constructor(){super(...arguments);De(this,"priority",60);De(this,"incompatibleTokens",["t","T"])}parse(r,s,o){switch(s){case"m":return bn(Rn.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return wn(s.length,r)}}validate(r,s){return s>=0&&s<=59}set(r,s,o){return r.setMinutes(o,0,0),r}}class fF extends Ft{constructor(){super(...arguments);De(this,"priority",50);De(this,"incompatibleTokens",["t","T"])}parse(r,s,o){switch(s){case"s":return bn(Rn.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return wn(s.length,r)}}validate(r,s){return s>=0&&s<=59}set(r,s,o){return r.setSeconds(o,0),r}}class pF extends Ft{constructor(){super(...arguments);De(this,"priority",30);De(this,"incompatibleTokens",["t","T"])}parse(r,s){const o=i=>Math.trunc(i*Math.pow(10,-s.length+3));return kn(wn(s.length,r),o)}set(r,s,o){return r.setMilliseconds(o),r}}class mF extends Ft{constructor(){super(...arguments);De(this,"priority",10);De(this,"incompatibleTokens",["t","T","x"])}parse(r,s){switch(s){case"X":return Ms(Os.basicOptionalMinutes,r);case"XX":return Ms(Os.basic,r);case"XXXX":return Ms(Os.basicOptionalSeconds,r);case"XXXXX":return Ms(Os.extendedOptionalSeconds,r);case"XXX":default:return Ms(Os.extended,r)}}set(r,s,o){return s.timestampIsSet?r:ln(r,r.getTime()-ei(r)-o)}}class xF extends Ft{constructor(){super(...arguments);De(this,"priority",10);De(this,"incompatibleTokens",["t","T","X"])}parse(r,s){switch(s){case"x":return Ms(Os.basicOptionalMinutes,r);case"xx":return Ms(Os.basic,r);case"xxxx":return Ms(Os.basicOptionalSeconds,r);case"xxxxx":return Ms(Os.extendedOptionalSeconds,r);case"xxx":default:return Ms(Os.extended,r)}}set(r,s,o){return s.timestampIsSet?r:ln(r,r.getTime()-ei(r)-o)}}class gF extends Ft{constructor(){super(...arguments);De(this,"priority",40);De(this,"incompatibleTokens","*")}parse(r){return vS(r)}set(r,s,o){return[ln(r,o*1e3),{timestampIsSet:!0}]}}class bF extends Ft{constructor(){super(...arguments);De(this,"priority",20);De(this,"incompatibleTokens","*")}parse(r){return vS(r)}set(r,s,o){return[ln(r,o),{timestampIsSet:!0}]}}const yF={G:new L$,y:new $$,Y:new F$,R:new W$,u:new B$,Q:new V$,q:new U$,M:new z$,L:new H$,w:new Y$,I:new K$,d:new Q$,D:new Z$,E:new eF,e:new tF,c:new nF,i:new sF,a:new oF,b:new aF,B:new iF,h:new lF,H:new cF,K:new dF,k:new uF,m:new hF,s:new fF,S:new pF,X:new mF,x:new xF,t:new gF,T:new bF},vF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SF=/^'([^]*?)'?$/,wF=/''/g,CF=/\S/,PF=/[a-zA-Z]/;function EF(e,n,r,s){var j,P,w,I,T,D,R,_;const o=()=>ln((s==null?void 0:s.in)||r,NaN),i=w$(),l=(s==null?void 0:s.locale)??i.locale??Yd,d=(s==null?void 0:s.firstWeekContainsDate)??((P=(j=s==null?void 0:s.locale)==null?void 0:j.options)==null?void 0:P.firstWeekContainsDate)??i.firstWeekContainsDate??((I=(w=i.locale)==null?void 0:w.options)==null?void 0:I.firstWeekContainsDate)??1,u=(s==null?void 0:s.weekStartsOn)??((D=(T=s==null?void 0:s.locale)==null?void 0:T.options)==null?void 0:D.weekStartsOn)??i.weekStartsOn??((_=(R=i.locale)==null?void 0:R.options)==null?void 0:_.weekStartsOn)??0;if(!n)return e?o():st(r,s==null?void 0:s.in);const h={firstWeekContainsDate:d,weekStartsOn:u,locale:l},f=[new N$(s==null?void 0:s.in,r)],p=n.match(jF).map(k=>{const N=k[0];if(N in od){const L=od[N];return L(k,l.formatLong)}return k}).join("").match(vF),g=[];for(let k of p){!(s!=null&&s.useAdditionalWeekYearTokens)&&gS(k)&&Df(k,n,e),!(s!=null&&s.useAdditionalDayOfYearTokens)&&xS(k)&&Df(k,n,e);const N=k[0],L=yF[N];if(L){const{incompatibleTokens:z}=L;if(Array.isArray(z)){const G=g.find(K=>z.includes(K.token)||K.token===N);if(G)throw new RangeError(`The format string mustn't contain \`${G.fullToken}\` and \`${k}\` at the same time`)}else if(L.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);g.push({token:N,fullToken:k});const $=L.run(e,k,l.match,h);if(!$)return o();f.push($.setter),e=$.rest}else{if(N.match(PF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(k==="''"?k="'":N==="'"&&(k=IF(k)),e.indexOf(k)===0)e=e.slice(k.length);else return o()}}if(e.length>0&&CF.test(e))return o();const b=f.map(k=>k.priority).sort((k,N)=>N-k).filter((k,N,L)=>L.indexOf(k)===N).map(k=>f.filter(N=>N.priority===k).sort((N,L)=>L.subPriority-N.subPriority)).map(k=>k[0]);let y=st(r,s==null?void 0:s.in);if(isNaN(+y))return o();const S={};for(const k of b){if(!k.validate(y,h))return o();const N=k.set(y,S,h);Array.isArray(N)?(y=N[0],Object.assign(S,N[1])):y=N}return y}function IF(e){return e.match(SF)[1].replace(wF,"'")}function r0(e,n){const r=st(e,n==null?void 0:n.in);return r.setMinutes(0,0,0),r}function TF(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n);return+r0(s)==+r0(o)}function DF(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n);return s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()}function AF(e,n,r){const[s,o]=Lo(r==null?void 0:r.in,e,n);return s.getFullYear()===o.getFullYear()}function RF(e,n,r){const s=+st(e,r==null?void 0:r.in),[o,i]=[+st(n.start,r==null?void 0:r.in),+st(n.end,r==null?void 0:r.in)].sort((l,d)=>l-d);return s>=o&&s<=i}function kF(e,n,r){const s=st(e,r==null?void 0:r.in),o=s.getFullYear(),i=s.getDate(),l=ln(e,0);l.setFullYear(o,n,15),l.setHours(0,0,0,0);const d=bS(l);return s.setMonth(n,Math.min(i,d)),s}function _F(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setDate(n),s}function OF(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setHours(n),s}function MF(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setMilliseconds(n),s}function NF(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setMinutes(n),s}function LF(e,n,r){const s=st(e,r==null?void 0:r.in);return s.setSeconds(n),s}function $F(e,n,r){const s=st(e,r==null?void 0:r.in);return isNaN(+s)?ln(e,NaN):(s.setFullYear(n),s)}const So={SUBSCRIPTION:"SUBSCRIPTION",PAYMENT:"PAYMENT",PAYOUT:"PAYOUT",CHANNEL:"CHANNEL",SYSTEM:"SYSTEM"},FF=({notification:e})=>{const n=cn(),r=xt(),{actions:s}=$p(),o=()=>{switch(e.categoryId){case So.SUBSCRIPTION:return t.jsx(nS,{});case So.PAYMENT:case So.PAYOUT:return t.jsx(rS,{});default:return t.jsx(Hd,{})}},i=()=>{switch(e.categoryId){case So.SUBSCRIPTION:return n.palette.primary.main;case So.PAYMENT:case So.PAYOUT:return n.palette.success.main;case So.CHANNEL:return n.palette.secondary.main;case So.SYSTEM:return n.palette.warning.main;default:return n.palette.info.main}},l=async()=>{var u;e.isRead||await s.markAsRead(e.id),(u=e.data)!=null&&u.url&&(r(e.data.url),s.closeDrawer())},d=()=>{try{return $r(new Date(e.createdAt),{addSuffix:!0})}catch{return"Recently"}};return t.jsxs(ir,{onClick:l,sx:{cursor:"pointer",bgcolor:e.isRead?"transparent":n.palette.action.hover,borderBottom:`1px solid ${n.palette.divider}`,py:2,px:2,"&:hover":{bgcolor:n.palette.action.selected},position:"relative"},children:[!e.isRead&&t.jsx(sS,{sx:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",fontSize:12,color:n.palette.primary.main,zIndex:1}}),t.jsx(aR,{children:t.jsx(Sn,{sx:{bgcolor:i(),width:40,height:40},children:o()})}),t.jsx(Bt,{primary:t.jsx(v,{variant:"body2",sx:{fontWeight:e.isRead?400:600,color:n.palette.text.primary,mb:.5},children:e.title}),secondary:t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{color:n.palette.text.secondary,fontSize:"0.875rem",mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.message}),t.jsx(v,{variant:"caption",sx:{color:n.palette.text.disabled,fontSize:"0.75rem"},children:d()})]})})]})},WF=()=>{const e=cn(),n=vl(e.breakpoints.down("sm")),{notifications:r,isOpen:s,isLoading:o,hasMore:i,actions:l}=$p(),d=n?"100%":400,u=()=>{l.closeDrawer()},h=async()=>{await l.markAllAsRead()},f=()=>t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",px:3},children:[t.jsx(tS,{sx:{fontSize:80,color:e.palette.text.disabled,mb:2}}),t.jsx(v,{variant:"h6",sx:{color:e.palette.text.secondary,mb:1},children:"No notifications"}),t.jsx(v,{variant:"body2",sx:{color:e.palette.text.disabled,textAlign:"center"},children:"You're all caught up! Check back later for new updates."})]}),p=()=>t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:3},children:t.jsx(Zt,{size:32})});return t.jsxs(la,{anchor:"right",open:s,onClose:u,PaperProps:{sx:{width:d,bgcolor:"background.default"}},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:2,borderBottom:`1px solid ${e.palette.divider}`,position:"sticky",top:0,bgcolor:"background.default",zIndex:1},children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600},children:"Notifications"}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ce,{size:"small",onClick:h,sx:{textTransform:"none",fontSize:"0.875rem",color:e.palette.primary.main},children:"Mark all read"}),t.jsx(Oe,{onClick:u,size:"small",children:t.jsx(eS,{})})]})]}),t.jsx(C,{sx:{height:"calc(100vh - 65px)",overflow:"auto"},id:"notification-scroll-container",children:o&&r.length===0?p():r.length===0?f():t.jsx(Cs,{dataLength:r.length,next:l.loadMore,hasMore:i,loader:p(),scrollableTarget:"notification-scroll-container",endMessage:t.jsxs(C,{sx:{py:2,textAlign:"center"},children:[t.jsx(Mt,{sx:{mb:2}}),t.jsx(v,{variant:"caption",sx:{color:e.palette.text.disabled},children:"You've reached the end"})]}),children:t.jsx(br,{sx:{py:0},children:r.map(g=>t.jsx(FF,{notification:g},g.id))})})})]})},BF=()=>{const e=vl("(max-width:600px)"),[n,r]=x.useState(!e),s=cn(),{isLoading:o,isAuthenticated:i}=xa(),[l,d]=x.useState(!1),[u,h]=x.useState(null),f=xt(),p=cs();x.useEffect(()=>{e&&r(!1)},[e]);const g=()=>{r(!n)},b=D=>{f(`${fe.APP_SEARCH}?q=${encodeURIComponent(D)}`),d(!1)},y=()=>{d(!l)},S=D=>{h(D.currentTarget)},j=()=>{h(null)},P=()=>{j(),f(fe.APP_ACCOUNT)},w=()=>{j(),f(fe.APP_ACCOUNT_SETTINGS)},I=()=>{j(),f(fe.STUDIO_ROOT)},T=async()=>{j();try{await(p==null?void 0:p.signOut()),f(fe.LOGIN)}catch(D){console.error("Logout error:",D)}};return o?null:i?t.jsxs(C,{sx:{display:"flex",minHeight:"100vh",bgcolor:"background.default",overflow:"hidden"},children:[t.jsx(Ed,{position:"fixed",elevation:0,sx:{zIndex:s.zIndex.drawer+1,bgcolor:"background.default",color:"text.primary",boxShadow:"none",borderBottom:"none"},children:t.jsx(so,{sx:{px:"8px"},children:l&&e?t.jsxs(C,{sx:{display:"flex",alignItems:"center",width:"100%",gap:1},children:[t.jsx(Oe,{color:"inherit",onClick:y,sx:{flexShrink:0},children:t.jsx(Vd,{})}),t.jsx(C,{sx:{flexGrow:1,mt:.5},children:t.jsx(Ef,{onSearch:b,placeholder:"Search",className:"app-search-bar"})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",position:"absolute",left:0},children:[t.jsx(Oe,{color:"inherit","aria-label":"toggle sidebar",onClick:g,sx:{minWidth:40,ml:.5,mr:1.5,"& .MuiSvgIcon-root":{fontSize:24,filter:"drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))"}},children:t.jsx(Kj,{})}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(v,{variant:"h6",sx:{fontWeight:700,display:"block",letterSpacing:".1rem",fontFamily:"'Inter', -apple-system, sans-serif"},children:[t.jsxs(C,{sx:{display:{xs:"none",sm:"block"}},children:[t.jsx("span",{style:{color:"#2196F3",textTransform:"uppercase",fontWeight:800},children:"Meta"}),t.jsx("span",{style:{color:"#1976D2",fontWeight:600},children:"Journo"})]}),t.jsxs(C,{sx:{display:{xs:"block",sm:"none"}},children:[t.jsx("span",{style:{color:"#2196F3",textTransform:"uppercase",fontWeight:800},children:"M"}),t.jsx("span",{style:{color:"#1976D2",fontWeight:600},children:"Journo"})]})]}),t.jsxs(v,{variant:"caption",sx:{opacity:.7,fontWeight:500,fontSize:"0.75rem",display:{xs:"none",sm:"block"}},children:["v",NL]})]})]}),t.jsx(C,{sx:{position:"absolute",left:"50%",transform:"translateX(-50%)",display:{xs:"none",md:"flex"}},children:t.jsx(Ef,{onSearch:b,placeholder:"Search articles, channels, journalists...",className:"app-search-bar"})}),t.jsx(C,{sx:{flexGrow:1}}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Oe,{onClick:y,color:"inherit",sx:{display:{xs:"flex",md:"none"}},children:t.jsx(Bd,{})}),t.jsx(VL,{}),t.jsx(Oe,{onClick:S,color:"inherit","aria-controls":u?"profile-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,children:t.jsx(zd,{})})]})]})})}),t.jsx(WF,{}),t.jsxs(Oo,{id:"profile-menu",anchorEl:u,open:!!u,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{elevation:3,sx:{mt:1.5,minWidth:200,borderRadius:2,overflow:"visible","& .MuiMenuItem-root":{py:1.5,px:2}}},children:[t.jsxs(je,{onClick:P,children:[t.jsx(Xt,{children:t.jsx(Cl,{fontSize:"small"})}),t.jsx(Bt,{children:"Account"})]}),t.jsxs(je,{onClick:w,children:[t.jsx(Xt,{children:t.jsx(Xj,{fontSize:"small"})}),t.jsx(Bt,{children:"Settings"})]}),t.jsxs(je,{onClick:I,children:[t.jsx(Xt,{children:t.jsx(Jj,{fontSize:"small"})}),t.jsx(Bt,{children:"Creator Studio"})]}),t.jsx(Mt,{}),t.jsxs(je,{onClick:T,children:[t.jsx(Xt,{children:t.jsx(Qj,{fontSize:"small"})}),t.jsx(Bt,{children:"Logout"})]})]}),e?t.jsxs(la,{variant:"temporary",open:n,onClose:g,ModalProps:{keepMounted:!0},PaperProps:{sx:{height:"100%",bgcolor:"background.default"}},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{width:240,border:"none"}},children:[t.jsx(so,{}),t.jsx(C,{sx:{height:"calc(100% - 64px)",overflow:"auto"},children:t.jsx(Gy,{isOpen:!0,toggleSidebar:g})})]}):t.jsxs(la,{variant:"permanent",PaperProps:{sx:{height:"100%",bgcolor:"background.default"}},sx:{width:n?240:72,flexShrink:0,"& .MuiDrawer-paper":{width:n?240:72,transition:"width 0.2s",overflowX:"hidden",border:"none",borderRight:"none"}},children:[t.jsx(so,{}),t.jsx(C,{sx:{height:"calc(100% - 64px)",overflow:"auto",overflowX:"hidden",width:"100%"},children:t.jsx(Gy,{isOpen:n,toggleSidebar:g})})]}),t.jsx(C,{component:"main",sx:{flexGrow:1,pt:8,minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default",overflow:"hidden",width:"100%"},children:t.jsx(C,{sx:{flexGrow:1,py:3,px:{xs:2,sm:3},overflowY:"auto",overflowX:"hidden",width:"100%",marginLeft:0,marginRight:"auto"},children:t.jsx(ip,{})})})]}):t.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:t.jsx(Zt,{})})};var Jp={},VF=Qe;Object.defineProperty(Jp,"__esModule",{value:!0});var Xp=Jp.default=void 0,UF=VF(Ze()),zF=t;Xp=Jp.default=(0,UF.default)((0,zF.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Qp={},HF=Qe;Object.defineProperty(Qp,"__esModule",{value:!0});var Zp=Qp.default=void 0,GF=HF(Ze()),YF=t;Zp=Qp.default=(0,GF.default)((0,YF.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var em={},qF=Qe;Object.defineProperty(em,"__esModule",{value:!0});var tm=em.default=void 0,KF=qF(Ze()),JF=t;tm=em.default=(0,KF.default)((0,JF.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");const XF=Av({palette:{mode:"light",primary:{main:"#2196f3"},background:{default:"#ffffff",paper:"#f8f9fa"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)"}},typography:{fontFamily:"'Poppins', 'Inter', sans-serif",h6:{fontWeight:700,letterSpacing:.5}}}),QF=Av({palette:{mode:"dark",background:{default:"#121212",paper:"#1e1e1e"},text:{primary:"rgba(255, 255, 255, 0.87)",secondary:"rgba(255, 255, 255, 0.6)"}},typography:{fontFamily:"'Poppins', 'Inter', sans-serif",h6:{fontWeight:700,letterSpacing:.5}}}),wS=x.createContext(null),ZF=({children:e})=>{const[n,r]=x.useState(null),[s,o]=x.useState(!0),[i,l]=x.useState(null),{api:d}=Ye(),{isAuthenticated:u}=xa(),{user:h}=cs(),f=x.useCallback(async()=>{if(!(!h||!u))try{o(!0),l(null);const b=await d.app.account.getUserPreference();r(b)}catch(b){console.error("Error fetching user preferences:",b),l(b.message||"Failed to load preferences"),r({id:null,userId:h.uid,themeInfo:{mode:"light"},createdAt:null,updatedAt:null})}finally{o(!1)}},[h,u,d]);x.useEffect(()=>{f()},[f]);const p=x.useCallback(async b=>{if(!h)throw new Error("User not authenticated");try{l(null);const y=await d.app.account.updateUserPreference(b);r(y)}catch(y){throw console.error("Error updating user preference:",y),l(y.message||"Failed to update preference"),y}},[h,d]),g=x.useCallback(async()=>{await f()},[f]);return t.jsx(wS.Provider,{value:{preference:n,loading:s,error:i,updatePreference:p,refreshPreferences:g},children:e})},e4=()=>{const e=x.useContext(wS);if(!e)throw new Error("useUserPreferences must be used within UserPreferencesProvider");return e},CS=x.createContext({}),t4=({children:e})=>{var u;const{preference:n,loading:r,updatePreference:s}=e4(),[o,i]=x.useState(()=>{var h;return(h=n==null?void 0:n.themeInfo)!=null&&h.mode?n.themeInfo.mode==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{var h;!r&&((h=n==null?void 0:n.themeInfo)!=null&&h.mode)&&i(n.themeInfo.mode==="dark")},[(u=n==null?void 0:n.themeInfo)==null?void 0:u.mode,r]);const l=async()=>{const h=!o;i(h);try{await s({themeInfo:{mode:h?"dark":"light"}})}catch(f){console.error("Failed to save theme preference:",f)}},d=x.useMemo(()=>o?QF:XF,[o]);return t.jsx(CS.Provider,{value:{isDarkMode:o,toggleTheme:l},children:t.jsxs(iR,{theme:d,children:[t.jsx(lR,{}),e]})})},nm=()=>x.useContext(CS);var rm={},n4=Qe;Object.defineProperty(rm,"__esModule",{value:!0});var PS=rm.default=void 0,r4=n4(Ze()),s4=t;PS=rm.default=(0,r4.default)((0,s4.jsx)("path",{d:"m22 3-1.67 1.67L18.67 3 17 4.67 15.33 3l-1.66 1.67L12 3l-1.67 1.67L8.67 3 7 4.67 5.33 3 3.67 4.67 2 3v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zM11 19H4v-6h7zm9 0h-7v-2h7zm0-4h-7v-2h7zm0-4H4V8h16z"}),"Newspaper");var sm={},o4=Qe;Object.defineProperty(sm,"__esModule",{value:!0});var om=sm.default=void 0,a4=o4(Ze()),s0=t;om=sm.default=(0,a4.default)([(0,s0.jsx)("path",{d:"M17 19.22H5V7h7V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-7h-2z"},"0"),(0,s0.jsx)("path",{d:"M19 2h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V7h3V5h-3zM7 9h8v2H7zm0 3v2h8v-2h-3zm0 3h8v2H7z"},"1")],"PostAdd");var am={},i4=Qe;Object.defineProperty(am,"__esModule",{value:!0});var Pl=am.default=void 0,l4=i4(Ze()),c4=t;Pl=am.default=(0,l4.default)((0,c4.jsx)("path",{d:"M21 3H3c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.11-.9-2-2-2m0 14H3V5h18zm-5-7v2h-3v3h-2v-3H8v-2h3V7h2v3z"}),"AddToQueue");var im={},d4=Qe;Object.defineProperty(im,"__esModule",{value:!0});var lm=im.default=void 0,u4=d4(Ze()),h4=t;lm=im.default=(0,u4.default)((0,h4.jsx)("path",{d:"M22 5v2h-3v3h-2V7h-3V5h3V2h2v3zm-3 14H5V5h6V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6h-2zm-4-6v4h2v-4zm-4 4h2V9h-2zm-2 0v-6H7v6z"}),"Addchart");var cm={},f4=Qe;Object.defineProperty(cm,"__esModule",{value:!0});var ES=cm.default=void 0,p4=f4(Ze()),m4=t;ES=cm.default=(0,p4.default)((0,m4.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt");var dm={},x4=Qe;Object.defineProperty(dm,"__esModule",{value:!0});var qd=dm.default=void 0,g4=x4(Ze()),b4=t;qd=dm.default=(0,g4.default)((0,b4.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney");const y4=({mobileOpen:e,onDrawerToggle:n})=>{const r=ma(),s=window.innerWidth<=600,o={news:[{path:fe.STUDIO_NEWS,icon:t.jsx(PS,{}),label:"My News"},{path:fe.STUDIO_NEWS_CREATE,icon:t.jsx(om,{}),label:"Create News"}],channels:[{path:fe.STUDIO_CHANNELS,icon:t.jsx(Ep,{}),label:"My Channels"},{path:fe.STUDIO_CHANNEL_CREATE,icon:t.jsx(Pl,{}),label:"Create Channel"}],polls:[{path:fe.STUDIO_POLLS,icon:t.jsx(Ud,{}),label:"My Polls"},{path:fe.STUDIO_POLL_CREATE,icon:t.jsx(lm,{}),label:"Create Poll"}],payouts:[{path:fe.STUDIO_EXPENSE_ORDERS,icon:t.jsx(ES,{}),label:"My Payouts"},{path:fe.STUDIO_EXPENSE_ORDER_CREATE,icon:t.jsx(qd,{}),label:"Request Payout"}]},i=t.jsxs(C,{children:[t.jsx(so,{}),t.jsxs(br,{sx:{px:2},children:[t.jsx(v,{variant:"overline",sx:{fontSize:"0.75rem",fontWeight:700,color:"text.secondary",ml:1,mb:1},children:"News Management"}),o.news.map(l=>t.jsxs(ir,{button:!0,component:er,to:l.path,selected:r.pathname===l.path,sx:{borderRadius:1,mb:.5,"&.Mui-selected":{backgroundColor:"action.selected"},"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40,color:r.pathname===l.path?"primary.main":"inherit"},children:l.icon}),t.jsx(Bt,{primary:l.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:r.pathname===l.path?600:400}})]},l.path)),t.jsx(Mt,{sx:{my:2}}),t.jsx(v,{variant:"overline",sx:{fontSize:"0.75rem",fontWeight:700,color:"text.secondary",ml:1,mb:1},children:"Channel Management"}),o.channels.map(l=>t.jsxs(ir,{button:!0,component:er,to:l.path,selected:r.pathname===l.path,sx:{borderRadius:1,mb:.5,"&.Mui-selected":{backgroundColor:"action.selected"},"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40,color:r.pathname===l.path?"primary.main":"inherit"},children:l.icon}),t.jsx(Bt,{primary:l.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:r.pathname===l.path?600:400}})]},l.path))]}),t.jsx(Mt,{sx:{my:2}}),t.jsxs(br,{sx:{px:2},children:[t.jsx(v,{variant:"overline",sx:{fontSize:"0.75rem",fontWeight:700,color:"text.secondary",ml:1,mb:1},children:"Poll Management"}),o.polls.map(l=>t.jsxs(ir,{button:!0,component:er,to:l.path,selected:r.pathname===l.path,sx:{borderRadius:1,mb:.5,"&.Mui-selected":{backgroundColor:"action.selected"},"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40,color:r.pathname===l.path?"primary.main":"inherit"},children:l.icon}),t.jsx(Bt,{primary:l.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:r.pathname===l.path?600:400}})]},l.path))]}),t.jsx(Mt,{sx:{my:2}}),t.jsxs(br,{sx:{px:2},children:[t.jsx(v,{variant:"overline",sx:{fontSize:"0.75rem",fontWeight:700,color:"text.secondary",ml:1,mb:1},children:"Payout Management"}),o.payouts.map(l=>t.jsxs(ir,{button:!0,component:er,to:l.path,selected:r.pathname===l.path,sx:{borderRadius:1,mb:.5,"&.Mui-selected":{backgroundColor:"action.selected"},"&:hover":{backgroundColor:"action.hover"}},children:[t.jsx(Xt,{sx:{minWidth:40,color:r.pathname===l.path?"primary.main":"inherit"},children:l.icon}),t.jsx(Bt,{primary:l.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:r.pathname===l.path?600:400}})]},l.path))]})]});return t.jsx(t.Fragment,{children:s?t.jsx(la,{variant:"temporary",open:e,onClose:n,ModalProps:{keepMounted:!0},PaperProps:{sx:{height:"100%",bgcolor:"background.default"}},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{width:240,border:"none"}},children:i}):t.jsx(la,{variant:"permanent",PaperProps:{sx:{height:"100%",bgcolor:"background.default"}},sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,transition:"width 0.2s",overflowX:"hidden",border:"none",borderRight:"none"}},children:i})})},v4=()=>{const[e,n]=x.useState(!1),[r,s]=x.useState(null),o=xt(),i=cn(),{isDarkMode:l,toggleTheme:d}=nm(),{isLoading:u,isAuthenticated:h}=xa(),f=()=>{n(!e)},p=j=>{s(j.currentTarget)},g=()=>{s(null)},b=j=>{o(j),g()},y=j=>{o(`${fe.STUDIO_SEARCH}?q=${encodeURIComponent(j)}`)},S=j=>{o(`${fe.STUDIO_SEARCH}?q=${encodeURIComponent(j.text)}`)};return u||!h?null:t.jsxs(C,{sx:{display:"flex",minHeight:"100vh",bgcolor:"background.default"},children:[t.jsx(Ed,{position:"fixed",elevation:0,sx:{zIndex:i.zIndex.drawer+1,bgcolor:"background.default",color:"text.primary",boxShadow:"none",borderBottom:"none"},children:t.jsxs(so,{sx:{px:"8px"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",minWidth:200},children:[t.jsx(Oe,{color:"inherit","aria-label":"toggle sidebar",onClick:f,sx:{minWidth:40,ml:.5,mr:1.5,"& .MuiSvgIcon-root":{fontSize:24,filter:"drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))"}},children:t.jsx(Xp,{})}),t.jsxs(v,{variant:"h6",sx:{fontWeight:700,display:"block",letterSpacing:".1rem",fontFamily:"'Inter', -apple-system, sans-serif"},children:[t.jsx(C,{sx:{display:{xs:"none",sm:"block"}},children:"Creator Studio"}),t.jsx(C,{sx:{display:{xs:"block",sm:"none"}},children:"Studio"})]})]}),t.jsx(C,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:t.jsx(Ef,{onSearch:y,onSuggestionSelect:S,placeholder:"Search your content and analytics...",className:"studio-search-bar"})}),t.jsx(Oe,{onClick:d,color:"inherit",children:l?t.jsx(tm,{}):t.jsx(Zp,{})}),t.jsx(Oe,{onClick:()=>o(fe.APP_ROOT),color:"inherit",sx:{ml:2},children:t.jsx(Qa,{})}),t.jsx(Oe,{onClick:p,color:"inherit",sx:{ml:2},children:t.jsx(zd,{})}),t.jsx(Oo,{anchorEl:r,open:!!r,onClose:g,PaperProps:{sx:{width:220}},children:[{path:fe.APP_ROOT,icon:t.jsx(Qa,{fontSize:"small"}),label:"Exit Studio"}].map(j=>t.jsxs(je,{onClick:()=>b(j.path),children:[t.jsx(Xt,{children:j.icon}),t.jsx(Bt,{children:j.label})]},j.path))})]})}),t.jsx(y4,{mobileOpen:e,onDrawerToggle:f}),t.jsx(C,{component:"main",sx:{flexGrow:1,pt:8,width:0,minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:t.jsx(C,{sx:{flexGrow:1,py:3,px:{xs:2,sm:3},maxWidth:1200,mx:"auto",width:"100%"},children:t.jsx(ip,{})})})]})};var um={},j4=Qe;Object.defineProperty(um,"__esModule",{value:!0});var Af=um.default=void 0,S4=j4(Ze()),w4=t;Af=um.default=(0,S4.default)((0,w4.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security");const Kh=280,C4=({mobileOpen:e,onDrawerToggle:n})=>{const r=xt(),s=ma(),o=[{text:"Dashboard",icon:t.jsx(Rv,{}),path:fe.ADMIN_ROOT,exact:!0},{text:"News Management",icon:t.jsx(ia,{}),path:fe.ADMIN_NEWS},{text:"Poll Management",icon:t.jsx(Qf,{}),path:fe.ADMIN_POLLS},{text:"Channel Management",icon:t.jsx(Xf,{}),path:fe.ADMIN_CHANNELS},{text:"User Management",icon:t.jsx(Ao,{}),path:fe.ADMIN_USERS},{text:"Expense Orders",icon:t.jsx(oo,{}),path:fe.ADMIN_EXPENSE_ORDERS},{text:"Payout Management",icon:t.jsx(qa,{}),path:fe.ADMIN_PAYOUTS},{text:"Tag Management",icon:t.jsx(Zf,{}),path:fe.ADMIN_TAGS},{text:"Subscriptions",icon:t.jsx(Ka,{}),path:fe.ADMIN_SUBSCRIPTIONS},{text:"Analytics",icon:t.jsx(gs,{}),path:fe.ADMIN_ANALYTICS},{text:"Settings",icon:t.jsx(Fc,{}),path:fe.ADMIN_SETTINGS}],i=u=>u.exact?s.pathname===u.path||s.pathname==="/admin"&&u.path===fe.ADMIN_ROOT:s.pathname.startsWith(u.path),l=u=>{r(u),e&&n()},d=t.jsxs(C,{children:[t.jsx(so,{sx:{px:3,py:2,bgcolor:"error.main",color:"error.contrastText"},children:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[t.jsx(v,{variant:"h6",noWrap:!0,component:"div",sx:{fontWeight:700,flexGrow:1,fontFamily:"'Inter', -apple-system, sans-serif"},children:"Admin Panel"}),t.jsx(Xe,{label:"Admin",size:"small",sx:{bgcolor:"error.contrastText",color:"error.main",fontWeight:600}})]})}),t.jsx(Mt,{}),t.jsx(br,{sx:{pt:2,px:2},children:o.map(u=>{const h=i(u);return t.jsx(ir,{disablePadding:!0,sx:{mb:.5},children:t.jsxs(pf,{onClick:()=>l(u.path),sx:{borderRadius:2,px:2,py:1.5,minHeight:48,bgcolor:h?"error.main":"transparent",color:h?"error.contrastText":"text.primary","&:hover":{bgcolor:h?"error.dark":"action.hover"},"& .MuiListItemIcon-root":{color:h?"error.contrastText":"text.secondary",minWidth:36},transition:"all 0.2s ease-in-out"},children:[t.jsx(Xt,{children:u.icon}),t.jsx(Bt,{primary:u.text,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:h?600:500,fontFamily:"'Inter', -apple-system, sans-serif"}})]})},u.text)})}),t.jsx(Mt,{sx:{my:2}}),t.jsx(br,{sx:{px:2},children:t.jsx(ir,{disablePadding:!0,children:t.jsxs(pf,{onClick:()=>l(fe.APP_ROOT),sx:{borderRadius:2,px:2,py:1.5,minHeight:48,color:"text.secondary","&:hover":{bgcolor:"action.hover"}},children:[t.jsx(Xt,{sx:{color:"text.secondary",minWidth:36},children:t.jsx(cR,{})}),t.jsx(Bt,{primary:"Back to App",primaryTypographyProps:{fontSize:"0.875rem",fontWeight:500,fontFamily:"'Inter', -apple-system, sans-serif"}})]})})})]});return t.jsxs(C,{component:"nav",sx:{width:{sm:Kh},flexShrink:{sm:0}},children:[t.jsx(la,{variant:"temporary",open:e,onClose:n,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Kh,bgcolor:"background.paper",borderRight:"1px solid",borderRightColor:"divider"}},children:d}),t.jsx(la,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Kh,bgcolor:"background.paper",borderRight:"1px solid",borderRightColor:"divider"}},open:!0,children:d})]})},P4=()=>{const[e,n]=x.useState(!1),[r,s]=x.useState(null),o=xt(),i=cn(),{isDarkMode:l,toggleTheme:d}=nm(),{isLoading:u,isAuthenticated:h}=xa(),{user:f}=cs(),p=()=>{n(!e)},g=S=>{s(S.currentTarget)},b=()=>{s(null)},y=S=>{o(S),b()};return u?null:f&&!h?t.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:t.jsx(Zt,{})}):t.jsxs(C,{sx:{display:"flex",minHeight:"100vh",bgcolor:"background.default"},children:[t.jsx(Ed,{position:"fixed",elevation:0,sx:{zIndex:i.zIndex.drawer+1,bgcolor:"background.default",color:"text.primary",boxShadow:"none",borderBottom:"1px solid",borderBottomColor:"divider"},children:t.jsxs(so,{sx:{px:"8px"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",minWidth:200},children:[t.jsx(Oe,{color:"inherit","aria-label":"toggle sidebar",onClick:p,sx:{minWidth:40,ml:.5,mr:1.5,"& .MuiSvgIcon-root":{fontSize:24,filter:"drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))"}},children:t.jsx(Xp,{})}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Af,{sx:{color:"error.main"}}),t.jsxs(v,{variant:"h6",sx:{fontWeight:700,display:"block",letterSpacing:".1rem",fontFamily:"'Inter', -apple-system, sans-serif",color:"error.main"},children:[t.jsx(C,{sx:{display:{xs:"none",sm:"block"}},children:"Admin Panel"}),t.jsx(C,{sx:{display:{xs:"block",sm:"none"}},children:"Admin"})]})]})]}),t.jsx(C,{sx:{flexGrow:1}}),t.jsx(Oe,{onClick:d,color:"inherit",children:l?t.jsx(tm,{}):t.jsx(Zp,{})}),t.jsx(Oe,{onClick:()=>o(fe.APP_ROOT),color:"inherit",sx:{ml:2},children:t.jsx(Qa,{})}),t.jsx(Oe,{onClick:g,color:"inherit",sx:{ml:2},children:t.jsx(zd,{})}),t.jsx(Oo,{anchorEl:r,open:!!r,onClose:b,PaperProps:{sx:{width:220}},children:[{path:fe.APP_ROOT,icon:t.jsx(Qa,{fontSize:"small"}),label:"Exit Admin"},{path:fe.STUDIO_ROOT,icon:t.jsx(Af,{fontSize:"small"}),label:"Creator Studio"}].map(S=>t.jsxs(je,{onClick:()=>y(S.path),children:[t.jsx(Xt,{children:S.icon}),t.jsx(Bt,{children:S.label})]},S.path))})]})}),t.jsx(C4,{mobileOpen:e,onDrawerToggle:p}),t.jsx(C,{component:"main",sx:{flexGrow:1,pt:8,width:0,minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:t.jsx(C,{sx:{flexGrow:1,py:3,px:{xs:2,sm:3},maxWidth:1400,mx:"auto",width:"100%"},children:t.jsx(ip,{})})})]})},[E4,Es]=Wd(),I4=({children:e})=>{const{api:n}=Ye(),{user:r}=cs(),{execute:s}=Ke(),[o,i]=x.useState(null),[l,d]=x.useState(!1),[u,h]=x.useState(!1),[f,p]=x.useState(!1),g=x.useRef(r==null?void 0:r.uid);g.current=r==null?void 0:r.uid;const b=x.useCallback(async()=>{if(!g.current)return;d(!0),p(!1);const S=await s(()=>n.app.account.getProfile(),{showErrorToast:!1});S?i(S):p(!0),d(!1),h(!0)},[n,s]);x.useEffect(()=>{r||(i(null),d(!1),h(!1),p(!1))},[r]);const y={profile:o,isLoading:l,isInitialized:u,hasServerError:f,channelRelations:{getSubscription:S=>{var j;return((j=o==null?void 0:o.subscriptions)==null?void 0:j.find(P=>P.channelId===S))??null},getSubscriptions:()=>(o==null?void 0:o.subscriptions)??[],hasSubscription:S=>{var j;return((j=o==null?void 0:o.subscriptions)==null?void 0:j.some(P=>P.channelId===S))??!1},hasChannel:()=>{var S;return((S=o==null?void 0:o.staffChannels)==null?void 0:S.length)&&o.staffChannels.length>0},getSubscriptionTier:S=>{var j,P;return((P=(j=o==null?void 0:o.subscriptions)==null?void 0:j.find(w=>w.channelId===S))==null?void 0:P.tier)??null}},actions:{refreshProfile:b}};return t.jsx(E4.Provider,{value:y,children:e})},Jh=({children:e})=>{const{isLoading:n,isAuthenticated:r,actions:s}=xa(),{isLoading:o,isInitialized:i,hasServerError:l,actions:d}=Es();return x.useEffect(()=>{r&&!i&&!o&&!l&&d.refreshProfile()},[r,i,o,l,d]),x.useEffect(()=>{l&&r&&s.signOut()},[l,r,s]),n||o||!i?null:r?l?t.jsx(gy,{to:fe.LOGIN}):t.jsx(t.Fragment,{children:e}):t.jsx(gy,{to:fe.LOGIN})};var hm={},T4=Qe;Object.defineProperty(hm,"__esModule",{value:!0});var fm=hm.default=void 0;R4(x);var D4=T4(Ze()),A4=t;function IS(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(IS=function(s){return s?r:n})(e)}function R4(e,n){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=IS(n);if(r&&r.has(e))return r.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(s,i,l):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}fm=hm.default=(0,D4.default)((0,A4.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");const k4=Ne(ce)(({theme:e,bgcolor:n})=>({color:"#fff",backgroundColor:n,boxShadow:`0 2px 4px 0 ${n}80`,"&:hover":{backgroundColor:e.palette.augmentColor({color:{main:n}}).dark},"& .MuiButton-startIcon":{marginRight:e.spacing(1)}})),_4=()=>{const[e,n]=x.useState(""),[r,s]=x.useState(""),[o,i]=x.useState(""),[l,d]=x.useState(!1),u=cs(),{api:h}=Ye(),f=xt(),{execute:p}=Ke(),g=async y=>{y.preventDefault(),i(""),d(!0);try{const S=await(u==null?void 0:u.signIn(e,r));if(S)if(!await p(()=>h==null?void 0:h.auth.signIn({idToken:S}),{showSuccessMessage:!0,successMessage:"Successfully logged in!"}))await(u==null?void 0:u.signOut()),i("Failed to connect to server. Please try again.");else{const P=localStorage.getItem("pending_invitation_token");P?(localStorage.removeItem("pending_invitation_token"),f(`${fe.ACCEPT_INVITATION}?token=${P}`)):f(fe.APP_NEWS_TRENDING)}}catch(S){const j=S instanceof Error?S.message:"Failed to login with email and password";i(j)}finally{d(!1)}},b=async y=>{i(""),d(!0);try{const S=await(u==null?void 0:u.signInWithProvider(y));if(S)if(!await p(()=>h==null?void 0:h.auth.signIn({idToken:S}),{showSuccessMessage:!0,successMessage:"Successfully logged in!"}))await(u==null?void 0:u.signOut()),i("Failed to connect to server. Please try again.");else{const P=localStorage.getItem("pending_invitation_token");P?(localStorage.removeItem("pending_invitation_token"),f(`${fe.ACCEPT_INVITATION}?token=${P}`)):f(fe.APP_NEWS_TRENDING)}}catch(S){const j=S instanceof Error?S.message:"Failed to login with Google";i(j)}finally{d(!1)}};return t.jsxs(St,{maxWidth:"xs",sx:{mt:8},children:[t.jsx(C,{sx:{textAlign:"center",mb:4},children:t.jsx(v,{variant:"h4",gutterBottom:!0,children:"Welcome back!"})}),o&&t.jsx(lt,{severity:"error",sx:{mb:2},children:o}),t.jsxs(C,{component:"form",onSubmit:g,sx:{mb:2},children:[t.jsx(et,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",type:"email",autoComplete:"email",value:e,onChange:y=>n(y.target.value),disabled:l}),t.jsx(et,{label:"Password",variant:"outlined",fullWidth:!0,type:"password",margin:"normal",autoComplete:"current-password",value:r,onChange:y=>s(y.target.value),disabled:l}),t.jsx(C,{sx:{textAlign:"right",mb:2},children:t.jsx(Id,{href:"#",variant:"caption",children:"Did you forget your password?"})}),t.jsx(ce,{type:"submit",variant:"outlined",color:"secondary",fullWidth:!0,sx:{mb:2},disabled:l,children:l?"Logging in...":"Log In"})]}),t.jsx(Mt,{sx:{my:2},children:"OR"}),t.jsx(C,{sx:{textAlign:"center",mb:2},children:t.jsx(v,{variant:"body2",gutterBottom:!0,children:"You can sign in or sign up our application with following providers"})}),t.jsx(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:t.jsx(k4,{variant:"contained",startIcon:t.jsx(fm,{}),bgcolor:"#DB4437",onClick:()=>b(Hj),disabled:l,children:"Sign in with Google"})}),t.jsx(Mt,{sx:{my:3}}),t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Don't have an account?"}),t.jsxs(C,{sx:{display:"flex",justifyContent:"center",gap:2},children:[t.jsx(ce,{variant:"outlined",size:"small",onClick:()=>f(`${fe.SIGNUP}?role=journalist`),disabled:l,children:"Sign up as Journalist"}),t.jsx(ce,{variant:"outlined",size:"small",onClick:()=>f(`${fe.SIGNUP}?role=reader`),disabled:l,children:"Sign up as Reader"})]})]})]})},Xn={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",PENDING:"PENDING",BLOCKED:"BLOCKED",SUSPENDED:"SUSPENDED",BANNED:"BANNED",DELETED:"DELETED",NOT_VERIFIED:"NOT_VERIFIED"},an={SUPER_ADMIN:"SUPER_ADMIN",ADMIN:"ADMIN",MODERATOR:"MODERATOR",REGULAR_USER:"REGULAR_USER",GUEST:"GUEST",JOURNALIST:"JOURNALIST",EDITOR:"EDITOR",EVALUATOR:"EVALUATOR",FINANCE_MANAGER:"FINANCE_MANAGER"},O4=Ne(ce)(({theme:e,bgcolor:n})=>({color:"#fff",backgroundColor:n,boxShadow:`0 2px 4px 0 ${n}80`,"&:hover":{backgroundColor:e.palette.augmentColor({color:{main:n}}).dark},"& .MuiButton-startIcon":{marginRight:e.spacing(1)}})),M4=()=>{const[e]=lp(),[n,r]=x.useState({displayName:"",email:"",password:"",confirmPassword:""}),[s,o]=x.useState({}),[i,l]=x.useState(""),[d,u]=x.useState(!1),h=cs(),{api:f}=Ye(),{execute:p}=Ke(),g=xt(),b=e.get("role"),y=x.useMemo(()=>b==="journalist"?an.JOURNALIST:an.REGULAR_USER,[b]),S=x.useMemo(()=>b==="journalist"?{title:"Join as a Journalist",subtitle:"Create and share your stories with the world",benefits:["Publish articles and build your readership","Monetize your content","Access analytics and insights","Connect with your audience"]}:{title:"Join as a Reader",subtitle:"Discover and support independent journalism",benefits:["Access quality journalism","Support journalists you trust","Personalized news feed","Engage with content"]},[b]),j=x.useCallback(T=>D=>{const R=D.target.value;r(_=>({..._,[T]:R})),s[T]&&o(_=>({..._,[T]:void 0})),i&&l("")},[s,i]),P=x.useCallback(()=>{const T={};return n.displayName.trim()?n.displayName.trim().length<2?T.displayName="Display name must be at least 2 characters":n.displayName.trim().length>50&&(T.displayName="Display name must be less than 50 characters"):T.displayName="Display name is required",n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(T.email="Please enter a valid email address"):T.email="Email is required",n.password?n.password.length<6&&(T.password="Password must be at least 6 characters"):T.password="Password is required",n.confirmPassword?n.password!==n.confirmPassword&&(T.confirmPassword="Passwords do not match"):T.confirmPassword="Please confirm your password",o(T),Object.keys(T).length===0},[n]),w=x.useCallback(async T=>{if(T.preventDefault(),l(""),!!P()){u(!0);try{const D=await(h==null?void 0:h.signUp(n.email,n.password));if(D)if(!await p(()=>f==null?void 0:f.auth.signUp({externalId:D.uid,email:D.email,displayName:n.displayName.trim(),photoUrl:D.photoURL??"",roleId:y}),{showSuccessMessage:!0,successMessage:"Account created successfully!"}))await(h==null?void 0:h.signOut()),l("Failed to connect to server. Please try again.");else{const _=localStorage.getItem("pending_invitation_token");_?(localStorage.removeItem("pending_invitation_token"),g(`${fe.ACCEPT_INVITATION}?token=${_}`)):g(`${fe.POST_SIGNUP}?role=${b||"reader"}`)}}catch(D){const R=D instanceof Error?D.message:"Failed to sign up with email and password";l(R)}finally{u(!1)}}},[n,h,f,p,P,y,g,b]),I=x.useCallback(async T=>{l(""),u(!0);try{const D=await(h==null?void 0:h.signInWithProvider(T));if(D&&(h!=null&&h.user))if(await p(()=>f==null?void 0:f.auth.signIn({idToken:D}),{showErrorToast:!1})){const _=localStorage.getItem("pending_invitation_token");_?(localStorage.removeItem("pending_invitation_token"),g(`${fe.ACCEPT_INVITATION}?token=${_}`)):g(fe.APP_NEWS_TRENDING);return}else if(!await p(()=>f==null?void 0:f.auth.signUp({externalId:h.user.uid,email:h.user.email||"",displayName:h.user.displayName||"",photoUrl:h.user.photoURL||"",roleId:y}),{showSuccessMessage:!0,successMessage:"Account created successfully!"}))await(h==null?void 0:h.signOut()),l("Failed to connect to server. Please try again.");else{const k=localStorage.getItem("pending_invitation_token");k?(localStorage.removeItem("pending_invitation_token"),g(`${fe.ACCEPT_INVITATION}?token=${k}`)):g(`${fe.POST_SIGNUP}?role=${b||"reader"}`)}}catch(D){const R=D instanceof Error?D.message:"Failed to login with social provider";l(R)}finally{u(!1)}},[h,f,p,y,g,b]);return t.jsxs(St,{maxWidth:"xs",sx:{mt:8},children:[t.jsxs(C,{sx:{textAlign:"center",mb:4},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,children:S.title}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{mb:2},children:S.subtitle}),b&&t.jsx(Xe,{label:b==="journalist"?"Journalist Account":"Reader Account",color:"primary",variant:"outlined",sx:{mb:2}})]}),i&&t.jsx(lt,{severity:"error",sx:{mb:2},children:i}),t.jsxs(C,{component:"form",onSubmit:w,noValidate:!0,children:[t.jsx(et,{label:"Display Name",variant:"outlined",fullWidth:!0,margin:"normal",type:"text",autoComplete:"name",value:n.displayName,onChange:j("displayName"),error:!!s.displayName,helperText:s.displayName,disabled:d,required:!0}),t.jsx(et,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",type:"email",autoComplete:"email",value:n.email,onChange:j("email"),error:!!s.email,helperText:s.email,disabled:d,required:!0}),t.jsx(et,{label:"Password",variant:"outlined",fullWidth:!0,type:"password",margin:"normal",autoComplete:"new-password",value:n.password,onChange:j("password"),error:!!s.password,helperText:s.password,disabled:d,required:!0}),t.jsx(et,{label:"Confirm Password",variant:"outlined",fullWidth:!0,type:"password",margin:"normal",autoComplete:"new-password",value:n.confirmPassword,onChange:j("confirmPassword"),error:!!s.confirmPassword,helperText:s.confirmPassword,disabled:d,required:!0}),t.jsx(ce,{type:"submit",variant:"outlined",color:"secondary",fullWidth:!0,sx:{mt:3,mb:2},disabled:d,children:d?"Creating Account...":"Sign Up"})]}),t.jsx(Mt,{sx:{my:2},children:"OR"}),t.jsx(C,{sx:{textAlign:"center",mb:2},children:t.jsx(v,{variant:"body2",color:"text.secondary",children:"You can sign up with the following providers"})}),t.jsx(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:t.jsx(O4,{variant:"contained",startIcon:t.jsx(fm,{}),bgcolor:"#DB4437",onClick:()=>I(Hj),disabled:d,children:"Sign up with Google"})})]})},N4=()=>{const[e]=lp(),[n,r]=x.useState(0),[s,o]=x.useState(!1),[i,l]=x.useState({primaryRole:"",interests:[],experience:"",goals:[]}),d=xt(),{api:u}=Ye(),{execute:h}=Ke(),f=e.get("role"),p=!!f,g=p?["Welcome","Your interests","Get started"]:["Welcome","Tell us about yourself","Your interests","Get started"];x.useEffect(()=>{f&&!i.primaryRole&&l(k=>({...k,primaryRole:f}))},[f,i.primaryRole]);const b=[{role:"journalist",title:"I want to write and publish",description:"Create articles, investigate stories, and build your readership",features:["Article editor","Story planning tools","Reader analytics","Revenue sharing"],userRole:an.JOURNALIST},{role:"editor",title:"I want to manage content",description:"Review, edit, and oversee publication workflows",features:["Editorial dashboard","Content review tools","Team management","Quality control"],userRole:an.EDITOR},{role:"reader",title:"I want to read and discover",description:"Follow journalists, discover stories, and engage with content",features:["Personalized feed","Bookmarking","Comment system","Newsletter subscriptions"],userRole:an.REGULAR_USER}],y=["Politics","Technology","Science","Sports","Business","Culture","Health","Environment","Entertainment","Education","Travel","Food"],S=(k,N)=>{l(L=>({...L,primaryRole:k})),P(N),r(1)},j=()=>{n>0&&r(n-1)},P=async k=>{o(!0),console.log("PostSignUpFlow: Updating user role to:",k),await h(()=>u==null?void 0:u.app.account.updateProfile({roleId:k}),{showSuccessMessage:!1,showErrorToast:!1}),console.log("PostSignUpFlow: User role update completed"),o(!1)},w=k=>{l(N=>({...N,interests:N.interests.includes(k)?N.interests.filter(L=>L!==k):[...N.interests,k]}))},I=async()=>{o(!0);try{localStorage.setItem("userInterests",JSON.stringify(i.interests)),d(fe.APP_NEWS_MY_FEED)}catch(k){console.error("Error saving profile:",k),d(fe.APP_NEWS_MY_FEED)}finally{o(!1)}},T=()=>{d(fe.APP_NEWS_MY_FEED)},D=()=>{if(p){const k=f==="journalist"?"Journalist":"Reader";return t.jsxs(C,{sx:{textAlign:"center",py:4},children:[t.jsxs(v,{variant:"h4",gutterBottom:!0,children:["Welcome, ",k,"! "]}),t.jsx(v,{variant:"body1",sx:{mb:4,maxWidth:600,mx:"auto"},children:f==="journalist"?"You're all set to start creating and publishing your stories. Let's personalize your experience.":"You're all set to discover and support independent journalism. Let's personalize your feed."}),t.jsxs(C,{sx:{textAlign:"center",mt:4},children:[t.jsx(ce,{variant:"contained",size:"large",onClick:()=>r(1),sx:{px:4},children:"Continue"}),t.jsx(ce,{variant:"text",onClick:T,sx:{display:"block",mt:2,mx:"auto",color:"text.secondary"},children:"Skip for now"})]})]})}return t.jsxs(C,{sx:{textAlign:"center",py:4},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,children:"Welcome to the Journalist Platform! "}),t.jsx(v,{variant:"body1",sx:{mb:4,maxWidth:600,mx:"auto"},children:"Let's personalize your experience. What brings you here today?"}),t.jsx(v,{variant:"body2",sx:{mb:4,textAlign:"center",color:"text.secondary"},children:"Don't worry, you can always change this later in your settings."}),t.jsx(F,{container:!0,spacing:3,sx:{mt:2},children:b.map(k=>t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(Fe,{sx:{cursor:"pointer","&:hover":{boxShadow:6},height:"100%",transition:"box-shadow 0.3s"},onClick:()=>S(k.role,k.userRole),children:t.jsxs(Ve,{sx:{p:3,textAlign:"center"},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:k.title}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:k.description}),t.jsx(C,{sx:{textAlign:"left"},children:k.features.map((N,L)=>t.jsxs(v,{variant:"caption",display:"block",sx:{mb:.5},children:[" ",N]},L))})]})})},k.role))}),t.jsx(C,{sx:{textAlign:"center",mt:4},children:t.jsx(ce,{variant:"text",onClick:T,sx:{color:"text.secondary"},children:"Skip for now"})})]})},R=()=>t.jsxs(C,{sx:{py:4},children:[t.jsx(v,{variant:"h5",gutterBottom:!0,textAlign:"center",children:"What topics interest you most?"}),t.jsx(v,{variant:"body1",textAlign:"center",sx:{mb:4},children:"Select any that apply - we'll use this to personalize your experience"}),t.jsx(F,{container:!0,spacing:2,sx:{maxWidth:600,mx:"auto"},children:y.map(k=>t.jsx(F,{item:!0,xs:6,sm:4,children:t.jsx(ce,{variant:i.interests.includes(k)?"contained":"outlined",fullWidth:!0,onClick:()=>w(k),sx:{py:1.5},children:k})},k))}),t.jsxs(C,{sx:{textAlign:"center",mt:4},children:[!p&&t.jsx(ce,{variant:"outlined",onClick:j,sx:{mr:2},children:"Back"}),t.jsx(ce,{variant:"contained",size:"large",onClick:()=>r(2),disabled:i.interests.length===0,children:"Continue"}),t.jsx(ce,{variant:"text",onClick:T,sx:{display:"block",mt:2,mx:"auto",color:"text.secondary"},children:"Skip for now"})]})]}),_=()=>t.jsxs(C,{sx:{textAlign:"center",py:4},children:[t.jsx(v,{variant:"h5",gutterBottom:!0,children:"You're all set! "}),t.jsx(v,{variant:"body1",sx:{mb:4},children:"Based on your preferences, we've customized your experience. Ready to get started?"}),t.jsx(ce,{variant:"contained",size:"large",onClick:I,disabled:s,sx:{px:4},children:s?"Setting up...":"Enter Platform"})]});return t.jsxs(St,{maxWidth:"lg",sx:{mt:4,mb:8},children:[t.jsx(dR,{activeStep:n,sx:{mb:6},children:g.map(k=>t.jsx(uR,{children:t.jsx(hR,{children:k})},k))}),p?t.jsxs(t.Fragment,{children:[n===0&&D(),n===1&&R(),n===2&&_()]}):t.jsxs(t.Fragment,{children:[n===0&&D(),n===1&&R(),n===2&&_()]})]})};function L4(){const[e]=lp(),n=xt(),{api:r}=Ye(),{loading:s,execute:o}=Ke(),{isAuthenticated:i}=cs(),[l,d]=x.useState(!1),[u,h]=x.useState(""),[f,p]=x.useState(""),[g,b]=x.useState(null),y=e.get("token");x.useEffect(()=>{if(!y){b("Invalid invitation link. No token provided.");return}if(!i){localStorage.setItem("pending_invitation_token",y),n(fe.LOGIN);return}S()},[y,i]);const S=async()=>{if(!y)return;b(null);const j=await o(()=>r.app.channel.acceptInvitation({token:y}),{customErrorHandler:P=>{var I,T;const w=((T=(I=P==null?void 0:P.response)==null?void 0:I.data)==null?void 0:T.error)||(P==null?void 0:P.message);return w!=null&&w.includes("already been accepted")?b("This invitation has already been accepted."):w!=null&&w.includes("expired")?b("This invitation has expired. Please request a new invitation."):w!=null&&w.includes("Invalid invitation")?b("Invalid invitation link. Please check the link and try again."):w!=null&&w.includes("already a member")?b("You are already a member of this channel."):b("Failed to accept invitation. Please try again or contact support."),!0}});j&&(d(!0),h(j.channelName),p(j.role))};return!y||g?t.jsx(St,{maxWidth:"sm",sx:{mt:8},children:t.jsx(rt,{sx:{p:4},children:t.jsx(lt,{severity:"error",children:g||"Invalid invitation link. No token provided."})})}):s?t.jsx(St,{maxWidth:"sm",sx:{mt:8},children:t.jsx(rt,{sx:{p:4},children:t.jsxs(C,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[t.jsx(Zt,{}),t.jsx(v,{children:"Processing invitation..."})]})})}):l?t.jsx(St,{maxWidth:"sm",sx:{mt:8},children:t.jsx(rt,{sx:{p:4},children:t.jsxs(C,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[t.jsx(pa,{color:"success",sx:{fontSize:64}}),t.jsx(v,{variant:"h5",align:"center",children:"Invitation Accepted!"}),t.jsxs(v,{variant:"body1",align:"center",color:"text.secondary",children:["You have joined ",t.jsx("strong",{children:u})," as a ",t.jsx("strong",{children:f}),"."]}),t.jsx(ce,{variant:"contained",onClick:()=>n("/dashboard"),sx:{mt:2},children:"Go to Dashboard"})]})})}):null}const $4="/journalist-material-client/assets/landing_page_compiled-BSuH_rh0.gif",F4=()=>{const e=cs(),[n,r]=x.useState(!1),s=async()=>{await(e==null?void 0:e.signOut()),r(!1)};return x.useEffect(()=>{r(!!(e!=null&&e.user))},[e==null?void 0:e.user]),t.jsxs(t.Fragment,{children:[t.jsx(C,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:0,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1}},children:t.jsx(C,{component:"img",src:$4,alt:"Background",sx:{width:"100%",height:"100%",objectFit:"cover",position:"relative",zIndex:0}})}),t.jsx(Ed,{position:"absolute",elevation:0,sx:{background:"rgba(255, 255, 255, 0.01)",zIndex:2},children:t.jsxs(so,{sx:{justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0},py:{xs:2,sm:1.5},px:{xs:2,sm:4}},children:[t.jsx(C,{sx:{display:"flex",alignItems:"center",gap:1.5},children:t.jsxs(C,{sx:{position:"relative","&::after":{content:'""',position:"absolute",bottom:-4,left:0,width:"100%",height:"2px",background:"linear-gradient(90deg, #2196F3 0%, transparent 100%)",borderRadius:"2px"}},children:[t.jsx("span",{style:{color:"#1565C0",textTransform:"uppercase",fontWeight:800,fontSize:"1.6rem",letterSpacing:"1px"},children:"Meta"}),t.jsx("span",{style:{color:"#0D47A1",fontWeight:600,fontSize:"1.6rem"},children:"Journo"})]})}),t.jsx(C,{sx:{display:"flex",alignItems:"center",order:{xs:3,sm:3},width:{xs:"100%",sm:"auto"},justifyContent:{xs:"center",sm:"flex-end"},gap:2},children:n?t.jsxs(t.Fragment,{children:[t.jsx(ce,{color:"primary",variant:"outlined",size:"large",component:er,to:fe.APP_NEWS_MY_FEED,sx:{width:{xs:"45%",sm:"auto"},fontSize:{xs:"0.875rem",sm:"1rem"},px:4,py:1.2,borderRadius:"12px",borderWidth:"2px",textTransform:"none",fontWeight:600,transition:"all 0.3s ease","&:hover":{borderWidth:"2px",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(33, 150, 243, 0.2)"}},children:"My Feed"}),t.jsx(ce,{color:"error",variant:"contained",size:"large",onClick:s,sx:{width:{xs:"45%",sm:"auto"},fontSize:{xs:"0.875rem",sm:"1rem"},px:4,py:1.2,borderRadius:"12px",textTransform:"none",fontWeight:600,background:"linear-gradient(135deg, #f44336 0%, #e53935 50%, #c62828 100%)",boxShadow:"0 8px 16px -4px rgba(244, 67, 54, 0.5)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, #e53935 0%, #d32f2f 50%, #b71c1c 100%)",transform:"translateY(-2px)",boxShadow:"0 12px 20px -4px rgba(244, 67, 54, 0.6)"}},children:"Log out"})]}):t.jsxs(t.Fragment,{children:[t.jsx(ce,{color:"primary",variant:"outlined",size:"large",component:er,to:fe.LOGIN,sx:{width:{xs:"45%",sm:"auto"},fontSize:{xs:"0.875rem",sm:"1rem"},px:4,py:1.2,borderRadius:"12px",borderWidth:"2px",textTransform:"none",fontWeight:600,transition:"all 0.3s ease","&:hover":{borderWidth:"2px",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(33, 150, 243, 0.2)"}},children:"Log in"}),t.jsx(ce,{color:"primary",variant:"contained",size:"large",component:er,to:fe.SIGNUP,sx:{width:{xs:"45%",sm:"auto"},fontSize:{xs:"0.875rem",sm:"1rem"},px:4,py:1.2,borderRadius:"12px",textTransform:"none",fontWeight:600,background:"linear-gradient(135deg, #2196F3 0%, #1976D2 50%, #0D47A1 100%)",boxShadow:"0 8px 16px -4px rgba(33, 150, 243, 0.5)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(135deg, #1E88E5 0%, #1565C0 50%, #0D47A1 100%)",transform:"translateY(-2px)",boxShadow:"0 12px 20px -4px rgba(33, 150, 243, 0.6)"}},children:"Get Started"})]})})]})})]})},W4=()=>{const e=xt(),n=()=>{e(`${fe.SIGNUP}?role=journalist`)},r=()=>{e(`${fe.SIGNUP}?role=reader`)},s=()=>{e(fe.APP_NEWS_TRENDING)};return t.jsxs(C,{sx:{minHeight:"100vh",bgcolor:"background.default"},children:[t.jsx(F4,{}),t.jsx(C,{sx:{minHeight:"90vh",display:"flex",alignItems:"center",background:"transparent",position:"relative",overflow:"hidden"},children:t.jsx(St,{maxWidth:"lg",children:t.jsx(F,{container:!0,justifyContent:"center",children:t.jsxs(F,{item:!0,xs:12,md:8,textAlign:"center",children:[t.jsxs(v,{variant:"h1",component:"h1",sx:{fontWeight:700,color:"white",fontSize:{xs:"2.5rem",sm:"3.2rem",md:"3.8rem"},mb:4,lineHeight:1.3,textShadow:"2px 2px 4px rgba(0,0,0,0.7)"},children:["Discover Journalism You Can Trust.",t.jsx("br",{}),"Fund Stories That Deserve Attention."]}),t.jsx(v,{variant:"h5",sx:{color:"rgba(255, 255, 255, 0.95)",mb:5,lineHeight:1.7,fontSize:{xs:"1.1rem",sm:"1.25rem"},fontWeight:400,textShadow:"1px 1px 2px rgba(0,0,0,0.7)"},children:"MetaJourno connects readers directly to independent journalists  no paywalls, no content hosting, just verified trust and transparent funding."}),t.jsxs(me,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",children:[t.jsx(ce,{variant:"contained",size:"large",startIcon:t.jsx(yl,{}),onClick:s,sx:{bgcolor:"white",color:"#1e3c72",px:4,py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:1,textTransform:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)","&:hover":{bgcolor:"#f8f9fa",transform:"translateY(-1px)",boxShadow:"0 6px 20px rgba(0,0,0,0.2)"},transition:"all 0.2s ease"},children:"Browse Stories"}),t.jsx(ce,{variant:"outlined",size:"large",startIcon:t.jsx(ia,{}),onClick:n,sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white",px:4,py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:1,textTransform:"none","&:hover":{borderColor:"white",bgcolor:"rgba(255, 255, 255, 0.1)"},transition:"all 0.2s ease"},children:"Join as a Journalist"}),t.jsx(ce,{variant:"contained",size:"large",startIcon:t.jsx(ia,{}),onClick:r,sx:{bgcolor:"rgba(255, 255, 255, 0.15)",borderColor:"rgba(255, 255, 255, 0.5)",color:"white",px:4,py:1.5,fontSize:"1rem",fontWeight:600,borderRadius:1,textTransform:"none","&:hover":{bgcolor:"rgba(255, 255, 255, 0.25)",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(255,255,255,0.2)"},transition:"all 0.2s ease"},children:"Join as a Reader"})]})]})})})})]})};var pm={},B4=Qe;Object.defineProperty(pm,"__esModule",{value:!0});var mm=pm.default=void 0,V4=B4(Ze()),U4=t;mm=pm.default=(0,V4.default)((0,U4.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");const Dn={DRAFT:"DRAFT",PENDING_REVIEW:"PENDING_REVIEW",PUBLISHED:"PUBLISHED",REJECTED:"REJECTED",ARCHIVED:"ARCHIVED",DELETED:"DELETED",PRIVATE:"PRIVATE"},El={COVER:"COVER",SUMMARY:"SUMMARY",AVATAR:"AVATAR",TEASER:"TEASER",INTRO:"INTRO",OUTRO:"OUTRO",OTHER:"OTHER"},id={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",DOCUMENT:"DOCUMENT",URL:"URL",ARTICLE:"ARTICLE",OTHER:"OTHER"};function z4(e){switch(e){case Dn.DRAFT:return"default";case Dn.PENDING_REVIEW:return"info";case Dn.PUBLISHED:return"success";case Dn.REJECTED:return"error";case Dn.ARCHIVED:return"secondary";case Dn.DELETED:return"error";case Dn.PRIVATE:return"warning";default:return"default"}}const Kd="/journalist-material-client/assets/BG_journo-DMUT4Pey.png";var xm={},H4=Qe;Object.defineProperty(xm,"__esModule",{value:!0});var gm=xm.default=void 0,G4=H4(Ze()),Y4=t;gm=xm.default=(0,G4.default)((0,Y4.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var bm={},q4=Qe;Object.defineProperty(bm,"__esModule",{value:!0});var ga=bm.default=void 0,K4=q4(Ze()),J4=t;ga=bm.default=(0,K4.default)((0,J4.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var ym={},X4=Qe;Object.defineProperty(ym,"__esModule",{value:!0});var vm=ym.default=void 0,Q4=X4(Ze()),Z4=t;vm=ym.default=(0,Q4.default)((0,Z4.jsx)("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"}),"Verified");var jm={},e3=Qe;Object.defineProperty(jm,"__esModule",{value:!0});var Jd=jm.default=void 0,t3=e3(Ze()),n3=t;Jd=jm.default=(0,t3.default)((0,n3.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2m0 15-5-2.18L7 18V5h10z"}),"BookmarkBorder");const ld=({news:e,mode:n="scroll"})=>{var S,j;const r=xt(),s=cn(),{api:o}=Ye(),{showNotification:i}=Ap(),{execute:l}=Ke(),d=(S=e.media)==null?void 0:S.find(P=>P.type===El.COVER),[u,h]=x.useState(e.isBookmarked||!1),[f,p]=x.useState(!1);x.useEffect(()=>{h(e.isBookmarked||!1)},[e.isBookmarked]);const g=P=>{P.target.closest(".action-button")||r(fe.APP_NEWS_VIEW.replace(":id",e.id))},b=P=>{P.stopPropagation(),r(fe.APP_CHANNEL_VIEW.replace(":channelId",e.channel.id))},y=async P=>{if(P.stopPropagation(),f)return;const w=u;h(!u),p(!0);try{w?(await l(()=>o.app.bookmark.unbookmarkNews(String(e.id)),{showErrorToast:!0}),i("Bookmark removed","success")):(await l(()=>o.app.bookmark.bookmarkNews(String(e.id)),{showErrorToast:!0}),i("News bookmarked","success"))}catch{h(w),i("Failed to update bookmark","error")}finally{p(!1)}};return t.jsxs(C,{onClick:g,sx:{position:"relative",width:"100%",height:n==="grid"?"auto":"90vh",maxWidth:n==="scroll"?"480px":"100%",margin:n==="scroll"?"0 auto":0,aspectRatio:n==="grid"?"4/5":void 0,borderRadius:n==="grid"?3:4,overflow:"hidden",bgcolor:s.palette.mode==="dark"?"#000":"#111",boxShadow:"none",cursor:"pointer",transition:"opacity 0.2s ease","&:hover":{opacity:.95}},children:[t.jsxs(C,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0},children:[(d==null?void 0:d.format)===id.VIDEO?t.jsx(C,{component:"video",src:d.url,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,sx:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.7)"}}):t.jsx(C,{component:"img",src:(d==null?void 0:d.url)||Kd,alt:e.title,sx:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.7)"}}),t.jsx(C,{sx:{position:"absolute",top:0,left:0,right:0,height:"30%",background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)",zIndex:1}}),t.jsx(C,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"70%",background:"linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0) 100%)",zIndex:1}})]}),t.jsx(C,{sx:{position:"relative",zIndex:2,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",p:2.5},children:n==="grid"?t.jsxs(t.Fragment,{children:[t.jsx(C,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:((j=e.qualityMetrics)==null?void 0:j.overallQualityScore)&&t.jsx(Xe,{icon:t.jsx(vm,{sx:{fontSize:"0.875rem"}}),label:e.qualityMetrics.overallQualityScore.toFixed(1),size:"small",sx:{height:24,bgcolor:he(s.palette.success.main,.9),color:"white",fontWeight:700,fontSize:"0.7rem",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:700,fontSize:"1.1rem",color:"white",textShadow:"0 2px 8px rgba(0,0,0,0.9)",mb:1.5,lineHeight:1.2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.title}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(ga,{sx:{fontSize:"1.1rem",mr:.5,color:"white",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))"}}),t.jsx(v,{variant:"body2",sx:{fontWeight:700,fontSize:"0.875rem",color:"white",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"12K"})]}),t.jsxs(C,{sx:{display:"flex",gap:1},children:[t.jsx(Oe,{className:"action-button",size:"small",onClick:y,disabled:f,sx:{bgcolor:he("#fff",.2),backdropFilter:"blur(10px)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)","&:hover":{bgcolor:he(s.palette.primary.main,.8),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:f?t.jsx(Zt,{size:16,sx:{color:"white"}}):u?t.jsx(hi,{sx:{fontSize:"1rem",color:s.palette.primary.light}}):t.jsx(Jd,{sx:{fontSize:"1rem"}})}),t.jsx(Oe,{className:"action-button",size:"small",onClick:P=>{P.stopPropagation()},sx:{bgcolor:he("#fff",.2),backdropFilter:"blur(10px)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)","&:hover":{bgcolor:he(s.palette.error.main,.8),transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t.jsx(gm,{sx:{fontSize:"1rem"}})})]})]})]})]}):t.jsx(t.Fragment,{children:t.jsx(C,{sx:{display:"flex",height:"100%",position:"relative"},children:t.jsxs(C,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[t.jsxs(C,{onClick:b,className:"action-button",sx:{display:"flex",alignItems:"center",mb:1.5,cursor:"pointer","&:hover":{"& .channel-avatar":{transform:"scale(1.1)"}}},children:[t.jsx(Sn,{src:e.channel.logoUrl,alt:e.channel.name,className:"channel-avatar",sx:{width:40,height:40,bgcolor:s.palette.primary.main,border:"2px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",transition:"transform 0.2s ease"}}),t.jsxs(C,{sx:{ml:1.5},children:[t.jsx(v,{variant:"body2",sx:{fontWeight:700,fontSize:"0.95rem",color:"white",textShadow:"0 1px 3px rgba(0,0,0,0.8)"},children:e.channel.name}),t.jsx(v,{variant:"caption",sx:{fontSize:"0.75rem",color:"rgba(255,255,255,0.9)",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:$r(new Date(e.publishedAt),{addSuffix:!0})})]})]}),t.jsx(v,{variant:"h6",sx:{fontWeight:800,fontSize:"1.2rem",color:"white",textShadow:"0 2px 8px rgba(0,0,0,0.9)",mb:.5,lineHeight:1.2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.title}),t.jsx(v,{variant:"body2",sx:{fontSize:"0.875rem",color:"rgba(255,255,255,0.95)",textShadow:"0 1px 4px rgba(0,0,0,0.9)",lineHeight:1.4,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:1.5},children:e.content}),e.tags&&e.tags.length>0&&t.jsx(me,{direction:"row",spacing:.5,sx:{flexWrap:"wrap",gap:.5},children:e.tags.slice(0,3).map(P=>t.jsx(Xe,{label:`#${P.title}`,size:"small",sx:{height:22,fontSize:"0.7rem",fontWeight:600,bgcolor:he("#fff",.15),backdropFilter:"blur(10px)",color:"white",border:"1px solid",borderColor:he("#fff",.2),textShadow:"0 1px 2px rgba(0,0,0,0.5)","&:hover":{bgcolor:he("#fff",.25)}}},P.id))})]})})})})]})};var Sm={},r3=Qe;Object.defineProperty(Sm,"__esModule",{value:!0});var TS=Sm.default=void 0,s3=r3(Ze()),o3=t;TS=Sm.default=(0,s3.default)((0,o3.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox");const Us=({title:e,description:n,icon:r=t.jsx(TS,{sx:{fontSize:48}}),action:s})=>t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4,borderRadius:2,bgcolor:o=>o.palette.mode==="dark"?he(o.palette.common.white,.05):he(o.palette.common.black,.02),textAlign:"center"},children:[t.jsx(C,{sx:{color:"text.secondary",mb:2},children:r}),t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:1},children:e}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:s?3:0},children:n}),s&&t.jsx(ce,{variant:"contained",onClick:s.onClick,sx:{textTransform:"none",fontWeight:600},children:s.label})]});var wm={},a3=Qe;Object.defineProperty(wm,"__esModule",{value:!0});var Xd=wm.default=void 0,i3=a3(Ze()),l3=t;Xd=wm.default=(0,i3.default)((0,l3.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share");const o0=({count:e=2})=>t.jsx(me,{spacing:2,sx:{mt:2},children:[...Array(e)].map((n,r)=>t.jsxs(C,{sx:{p:2,borderRadius:2,bgcolor:s=>s.palette.mode==="dark"?he(s.palette.common.white,.05):he(s.palette.common.black,.03)},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(C,{sx:{width:32,height:32,borderRadius:1,bgcolor:s=>s.palette.mode==="dark"?he(s.palette.common.white,.1):he(s.palette.common.black,.1),mr:1}}),t.jsx(C,{sx:{height:20,width:"30%",borderRadius:.5,bgcolor:"grey.300"}})]}),t.jsx(C,{sx:{height:24,width:"60%",mb:2,borderRadius:.5,bgcolor:"grey.300"}}),t.jsx(C,{sx:{height:100,width:"100%",borderRadius:1,bgcolor:"grey.200",mb:2}}),t.jsx(C,{sx:{height:16,width:"40%",borderRadius:.5,bgcolor:"grey.200"}})]},r))}),DS=({filters:e={},emptyTitle:n="No news found",emptyDescription:r="No news articles available at the moment",itemsPerPage:s=12,mode:o="scroll"})=>{const[i,l]=x.useState([]),[d,u]=x.useState(!0),[h,f]=x.useState(1),[p,g]=x.useState(!0),{api:b}=Ye(),{execute:y}=Ke(),S=cn(),j=async(w=h)=>{try{u(!0);const I=await y(()=>b==null?void 0:b.app.news.getNews(e,{page:w,limit:s}),{showErrorToast:!0});I&&(l(w===1?I.items:T=>[...T,...I.items]),g(I.metadata.hasNext),f(I.metadata.currentPage))}finally{u(!1)}};x.useEffect(()=>{l([]),f(1),j(1)},[JSON.stringify(e)]);const P=()=>{!d&&p&&j(h+1)};return i.length===0&&!d?t.jsx(Us,{title:n,description:r}):o==="grid"?t.jsx(C,{sx:{width:"100%"},children:d&&i.length===0?t.jsx(o0,{}):t.jsx(Cs,{dataLength:i.length,next:P,hasMore:p,loader:t.jsx(C,{}),endMessage:t.jsx(C,{sx:{textAlign:"center",py:4,color:"text.secondary",fontSize:"0.875rem"},children:"No more news to display"}),children:t.jsx(F,{container:!0,spacing:3,children:i.map(w=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(ld,{news:w,mode:"grid"})},w.id))})})}):t.jsx(C,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",overflowY:"scroll",scrollSnapType:"y mandatory",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none",px:{xs:2,sm:0}},children:t.jsx(C,{sx:{width:"100%",maxWidth:480},children:d&&i.length===0?t.jsx(o0,{}):t.jsx(Cs,{dataLength:i.length,next:P,hasMore:p,loader:t.jsx(C,{}),endMessage:t.jsx(C,{sx:{textAlign:"center",py:4,color:"text.secondary",fontSize:"0.875rem",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:"No more news to display"}),style:{overflow:"visible",paddingBottom:"64px"},children:i.map(w=>{var I;return t.jsxs(C,{sx:{position:"relative",scrollSnapAlign:"start",scrollSnapStop:"always",height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"},children:[t.jsx(ld,{news:w}),t.jsxs(C,{sx:{position:"absolute",right:{xs:8,sm:-60},bottom:"5vh",display:"flex",flexDirection:"column",alignItems:"center",gap:2.5,zIndex:10},children:[((I=w.qualityMetrics)==null?void 0:I.overallQualityScore)&&t.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(Xe,{icon:t.jsx(vm,{sx:{fontSize:"0.875rem"}}),label:w.qualityMetrics.overallQualityScore.toFixed(1),size:"small",sx:{height:28,bgcolor:he(S.palette.success.main,.9),color:"white",fontWeight:700,fontSize:"0.75rem",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(Oe,{className:"action-button",size:"medium",onClick:T=>{T.stopPropagation()},sx:{bgcolor:S.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",color:"white",boxShadow:S.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)","&:hover":{bgcolor:he(S.palette.error.main,.8),transform:"scale(1.1)"},transition:"all 0.2s ease",width:48,height:48},children:t.jsx(gm,{sx:{fontSize:"1.5rem"}})}),t.jsx(v,{variant:"caption",sx:{color:"white",fontWeight:700,fontSize:"0.75rem",mt:.5,textShadow:"0 1px 2px rgba(0,0,0,0.8)"}})]}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(Oe,{className:"action-button",size:"medium",onClick:T=>{T.stopPropagation()},sx:{bgcolor:S.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",color:"white",boxShadow:S.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)","&:hover":{bgcolor:S.palette.mode==="dark"?he("#fff",.3):he("#000",.7),transform:"scale(1.1)"},transition:"all 0.2s ease",width:48,height:48},children:t.jsx(Xd,{sx:{fontSize:"1.5rem"}})}),t.jsx(v,{variant:"caption",sx:{color:"white",fontWeight:700,fontSize:"0.75rem",mt:.5,textShadow:"0 1px 2px rgba(0,0,0,0.8)"}})]}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(C,{sx:{bgcolor:S.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",borderRadius:"50%",width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:S.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)"},children:t.jsx(ga,{sx:{fontSize:"1.5rem",color:"white",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))"}})}),t.jsx(v,{variant:"caption",sx:{color:"white",fontWeight:700,fontSize:"0.75rem",mt:.5,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"12K"})]})]})]},w.id)})})})})},c3=(e={})=>{if(e.feed)return{title:"Your Feed",description:"Latest news from your personalized feed",emptyTitle:"Your feed is empty",emptyDescription:"Follow some journalists to see their latest news here"};if(e.trending)return{title:"Trending News",description:"Discover the most popular news from our community",emptyTitle:"No trending news",emptyDescription:"There are no trending news articles at the moment"};if(e.subscribed)return{title:"Subscribed Channels",description:"Latest news from your subscribed channels",emptyTitle:"No news from subscriptions",emptyDescription:"Subscribe to channels to see their latest news here"};if(e.premium)return{title:"Premium News",description:"Exclusive premium content",emptyTitle:"No premium news",emptyDescription:"No premium news articles available at the moment"};if(e.channel)return{title:"Channel News",description:"News from this channel",emptyTitle:"No news in this channel",emptyDescription:"This channel has not published any news yet"};if(e.creator)return{title:"Creator News",description:"News from this creator",emptyTitle:"No news from this creator",emptyDescription:"This creator has not published any news yet"};if(e.tags&&e.tags.length>0){const n=e.tags.length===1?"tag":"tags";return{title:`News by ${n.charAt(0).toUpperCase()+n.slice(1)}`,description:`News tagged with: ${e.tags.join(", ")}`,emptyTitle:`No news with these ${n}`,emptyDescription:`No news articles found with the selected ${n}`}}return{title:"All News",description:"Latest news from our community",emptyTitle:"No news found",emptyDescription:"No news articles available at the moment"}},Rf=({filters:e={},emptyTitle:n,emptyDescription:r,showSearch:s=!1,mode:o="scroll"})=>{const i=ma(),l=xt(),[d,u]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{const w=new URLSearchParams(i.search).get("q");if(w){const I=decodeURIComponent(w);u(I),f(I)}},[i.search]);const p=c3(e),g=n||p.emptyTitle,b=r||p.emptyDescription,y={...e,query:d||void 0},S=P=>{P.preventDefault();const w=h.trim();u(w);const I=new URLSearchParams(i.search);w?I.set("q",encodeURIComponent(w)):I.delete("q");const T=`${i.pathname}?${I.toString()}`;l(T,{replace:!0})},j=()=>{f(""),u("");const P=new URLSearchParams(i.search);P.delete("q");const w=`${i.pathname}?${P.toString()}`;l(w,{replace:!0})};return t.jsxs(C,{sx:{width:"100%",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",...o==="scroll"&&{position:"fixed",top:64,left:0,right:0,bottom:0,margin:0,padding:0,zIndex:1}},children:[s&&o==="grid"&&t.jsx(C,{sx:{flexShrink:0,mb:2},children:t.jsx("form",{onSubmit:S,children:t.jsx(et,{fullWidth:!0,placeholder:"Search news by title or content...",value:h,onChange:P=>f(P.target.value),InputProps:{startAdornment:t.jsx(zr,{position:"start",children:t.jsx(Bd,{color:"action"})}),endAdornment:h&&t.jsx(zr,{position:"end",children:t.jsx(Oe,{size:"small",onClick:j,edge:"end",children:t.jsx(mm,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"background.paper"}}})})}),t.jsx(C,{sx:{flex:1,overflow:"hidden"},children:t.jsx(DS,{filters:y,emptyTitle:g,emptyDescription:b,mode:o})})]})},d3=e=>{switch(e){case"INSTAGRAM":return yR;case"TWITTER":return bR;case"YOUTUBE":return gR;case"TIKTOK":return xR;case"FACEBOOK":return mR;case"LINKEDIN":return pR;case"OTHER":default:return fR}},u3=e=>{switch(e){case"INSTAGRAM":return"#E4405F";case"TWITTER":return"#1DA1F2";case"YOUTUBE":return"#FF0000";case"TIKTOK":return"#000000";case"FACEBOOK":return"#1877F2";case"LINKEDIN":return"#0A66C2";default:return"#757575"}},h3=e=>{switch(e){case"INSTAGRAM":return"Instagram";case"TWITTER":return"Twitter";case"YOUTUBE":return"YouTube";case"TIKTOK":return"TikTok";case"FACEBOOK":return"Facebook";case"LINKEDIN":return"LinkedIn";case"OTHER":return"Other";default:return"Other"}};var Cm={},f3=Qe;Object.defineProperty(Cm,"__esModule",{value:!0});var AS=Cm.default=void 0,p3=f3(Ze()),m3=t;AS=Cm.default=(0,p3.default)((0,m3.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public");var Pm={},x3=Qe;Object.defineProperty(Pm,"__esModule",{value:!0});var RS=Pm.default=void 0,g3=x3(Ze()),b3=t;RS=Pm.default=(0,g3.default)((0,b3.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch");const Em=({links:e})=>e.length?t.jsxs(rt,{variant:"outlined",sx:{p:2,bgcolor:"background.paper",borderRadius:2,width:"100%"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(AS,{sx:{mr:1,color:"primary.main"}}),t.jsx(v,{variant:"h6",component:"div",children:"Read More On"})]}),t.jsx(Mt,{sx:{mb:2}}),t.jsx(me,{spacing:1.5,children:e.map(n=>t.jsx(Id,{href:n.url,target:"_blank",rel:"noopener noreferrer",underline:"none",sx:{color:"inherit",display:"block","&:hover":{"& .MuiPaper-root":{bgcolor:"action.hover",borderColor:"primary.main"},"& .launch-icon":{color:"primary.main"}}},children:t.jsxs(rt,{variant:"outlined",sx:{p:1.5,display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease-in-out"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(C,{sx:{color:u3(n.platform),display:"flex",mr:1.5},children:Dt.createElement(d3(n.platform))}),t.jsx(v,{variant:"body2",children:h3(n.platform)})]}),t.jsx(RS,{fontSize:"small",className:"launch-icon",sx:{color:"text.secondary",transition:"color 0.2s ease-in-out"}})]})},n.id))})]}):null;var Im={},y3=Qe;Object.defineProperty(Im,"__esModule",{value:!0});var Il=Im.default=void 0,v3=y3(Ze()),j3=t;Il=Im.default=(0,v3.default)((0,j3.jsx)("path",{d:"M18 11v2h4v-2zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61M20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4M4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34"}),"Campaign");var Tm={},S3=Qe;Object.defineProperty(Tm,"__esModule",{value:!0});var Dm=Tm.default=void 0,w3=S3(Ze()),C3=t;Dm=Tm.default=(0,w3.default)((0,C3.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");const P3={header:{class:Ik,config:{levels:[1,2,3,4],defaultLevel:2,placeholder:""}},list:{class:Tk,inlineToolbar:!0,config:{placeholder:""}},checklist:{class:Dk,inlineToolbar:!0,config:{placeholder:""}},quote:{class:Ak,inlineToolbar:!0,config:{quotePlaceholder:"",captionPlaceholder:""}},code:Rk,inlineCode:{class:kk},marker:{class:_k},image:{class:Ok,config:{endpoints:{byFile:"/api/upload/image",byUrl:"/api/fetch/image"}}},linkTool:{class:Mk,config:{endpoint:"/api/fetch/link"}},table:{class:Nk,inlineToolbar:!0},warning:{class:Lk,inlineToolbar:!0,config:{titlePlaceholder:"Title",messagePlaceholder:"Message"}},delimiter:$k},Qd=({data:e,onChange:n,readOnly:r=!1,placeholder:s="Start writing your content...",borderColor:o})=>{const i=cn(),l=x.useRef(null),d=x.useRef(`editor-${Math.random().toString(36).slice(2,7)}`);return x.useEffect(()=>((async()=>{if(l.current){try{await l.current.isReady,await l.current.destroy()}catch(f){console.error("Editor cleanup failed:",f)}l.current=null}const h=new Ek({holder:d.current,tools:P3,data:e,placeholder:s,readOnly:r,onChange:async f=>{const p=await f.saver.save();n==null||n(p)},autofocus:!1});l.current=h})().catch(console.error),()=>{l.current&&l.current.destroy&&l.current.isReady.then(()=>{var h;(h=l.current)!=null&&h.destroy&&l.current.destroy(),l.current=null}).catch(console.error)}),[]),t.jsx(C,{id:d.current,sx:{minHeight:300,border:"1px solid",borderColor:typeof o=="function"?o(i):o||i.palette.divider,borderRadius:1,p:2,"& .ce-toolbar__plus, & .ce-toolbar__settings-btn, & .cdx-button":{color:u=>u.palette.mode==="dark"?he(u.palette.common.white,.7):he(u.palette.common.black,.7),backgroundColor:"transparent"},"& .ce-toolbar__plus:hover, & .ce-toolbar__settings-btn:hover, & .cdx-button:hover":{backgroundColor:u=>u.palette.mode==="dark"?he(u.palette.common.white,.1):he(u.palette.common.black,.1)},"& ::selection":{backgroundColor:u=>u.palette.mode==="dark"?he(u.palette.primary.main,.3):he(u.palette.primary.main,.3),color:u=>u.palette.mode==="dark"?u.palette.common.white:u.palette.common.black},"& ::-moz-selection":{backgroundColor:u=>u.palette.mode==="dark"?he(u.palette.primary.main,.3):he(u.palette.primary.main,.3),color:u=>u.palette.mode==="dark"?u.palette.common.white:u.palette.common.black},"& .ce-block--selected":{backgroundColor:u=>u.palette.mode==="dark"?he(u.palette.primary.main,.1):he(u.palette.primary.main,.05),color:u=>u.palette.mode==="dark"?u.palette.common.white:u.palette.text.primary},"& .ce-block--selected .ce-block__content":{color:u=>u.palette.mode==="dark"?u.palette.common.white:u.palette.text.primary}}})},kS=e=>{if(e)try{return JSON.parse(e)}catch{return{blocks:[{type:"paragraph",data:{text:e}}]}}},nt={DRAFT:"DRAFT",SUBMITTED:"SUBMITTED",UNDER_REVIEW:"UNDER_REVIEW",APPROVED:"APPROVED",REJECTED:"REJECTED",PAID:"PAID",CANCELLED:"CANCELLED"};function Po(e){switch(e){case nt.DRAFT:return"Draft";case nt.SUBMITTED:return"Submitted";case nt.UNDER_REVIEW:return"Under Review";case nt.APPROVED:return"Approved";case nt.REJECTED:return"Rejected";case nt.PAID:return"Paid";case nt.CANCELLED:return"Cancelled";default:return e}}function E3(e){switch(e){case nt.DRAFT:return"default";case nt.SUBMITTED:return"info";case nt.UNDER_REVIEW:return"warning";case nt.APPROVED:return"success";case nt.REJECTED:return"error";case nt.PAID:return"success";case nt.CANCELLED:return"secondary";default:return"default"}}function Qo(e){switch(e){case nt.DRAFT:return"#9e9e9e";case nt.SUBMITTED:return"#2196f3";case nt.UNDER_REVIEW:return"#ff9800";case nt.APPROVED:return"#4caf50";case nt.REJECTED:return"#f44336";case nt.PAID:return"#8bc34a";case nt.CANCELLED:return"#607d8b";default:return"#9e9e9e"}}const bt=nt,Nc={[nt.DRAFT]:Po(nt.DRAFT),[nt.SUBMITTED]:Po(nt.SUBMITTED),[nt.UNDER_REVIEW]:Po(nt.UNDER_REVIEW),[nt.APPROVED]:Po(nt.APPROVED),[nt.REJECTED]:Po(nt.REJECTED),[nt.PAID]:Po(nt.PAID),[nt.CANCELLED]:Po(nt.CANCELLED)},a0={[nt.DRAFT]:Qo(nt.DRAFT),[nt.SUBMITTED]:Qo(nt.SUBMITTED),[nt.UNDER_REVIEW]:Qo(nt.UNDER_REVIEW),[nt.APPROVED]:Qo(nt.APPROVED),[nt.REJECTED]:Qo(nt.REJECTED),[nt.PAID]:Qo(nt.PAID),[nt.CANCELLED]:Qo(nt.CANCELLED)},Na=(e,n="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:n,notation:"compact",maximumFractionDigits:2}).format(e),I3=({newsId:e,channelId:n,newsFund:r})=>{const{api:s}=Ye(),{execute:o}=Ke(),[i,l]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState([]),[p,g]=x.useState(null),[b,y]=x.useState(null);x.useEffect(()=>{(async()=>{var T,D,R;l(!0),y(null);try{const _=await o(()=>s==null?void 0:s.app.funding.getFundSummary("news",e),{showErrorToast:!1}),k=await o(()=>s==null?void 0:s.app.expenseOrder.getExpenseOrdersByChannel(n),{showErrorToast:!1});u(_||null),f((k==null?void 0:k.items)||[]);const N={totalFunding:((T=_==null?void 0:_.fund)==null?void 0:T.current_amount)||(r==null?void 0:r.amount)||0,totalExpenses:((D=k==null?void 0:k.items)==null?void 0:D.reduce((L,z)=>z.status===bt.PAID?L+z.amount:L,0))||0,netAmount:0,fundingContributions:(_==null?void 0:_.total_contributors)||0,expenseCount:((R=k==null?void 0:k.items)==null?void 0:R.length)||0,payoutAmount:0};N.netAmount=N.totalFunding-N.totalExpenses,g(N)}catch(_){y("Failed to load transaction data"),console.error("Transaction data fetch error:",_)}finally{l(!1)}})()},[e,n,r,s,o]);const S=()=>{if(!p)return null;const I=p.totalFunding>0?Math.min(p.totalFunding/((r==null?void 0:r.goal_amount)||p.totalFunding)*100,100):0;return t.jsx(Fe,{elevation:2,children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ss,{color:"success",sx:{mr:1}}),t.jsx(v,{variant:"h6",color:"success.main",children:"Funding Received"})]}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(v,{variant:"h3",color:"success.main",gutterBottom:!0,children:Na(p.totalFunding)}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Total Raised"})]})}),t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(me,{spacing:2,children:[t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsx(v,{variant:"body2",children:"Funding Progress"}),t.jsxs(v,{variant:"body2",children:[I.toFixed(1),"%"]})]}),t.jsx(Ja,{variant:"determinate",value:I,sx:{height:8,borderRadius:4},color:"success"})]}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Contributors: ",p.fundingContributions]}),(r==null?void 0:r.goal_amount)&&t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Goal: ",Na(r.goal_amount)]})]})]})})]})]})})},j=()=>{if(!p)return null;const I=h.filter(R=>R.status===bt.PAID),T=[bt.SUBMITTED,bt.UNDER_REVIEW,bt.APPROVED],D=h.filter(R=>T.includes(R.status));return t.jsx(Fe,{elevation:2,children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(kv,{color:"error",sx:{mr:1}}),t.jsx(v,{variant:"h6",color:"error.main",children:"Expenses & Payouts"})]}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(v,{variant:"h3",color:"error.main",gutterBottom:!0,children:Na(p.totalExpenses)}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Total Paid Out"})]})}),t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(me,{spacing:2,children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(v,{variant:"body2",children:"Paid Expenses:"}),t.jsx(v,{variant:"body2",color:"success.main",children:I.length})]}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(v,{variant:"body2",children:"Pending Expenses:"}),t.jsx(v,{variant:"body2",color:"warning.main",children:D.length})]}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(v,{variant:"body2",children:"Total Expense Orders:"}),t.jsx(v,{variant:"body2",children:p.expenseCount})]})]})})]})]})})},P=()=>{if(!p)return null;const I=p.netAmount>=0;return t.jsxs(rt,{elevation:2,sx:{p:3,bgcolor:I?"success.light":"warning.light",color:I?"success.contrastText":"warning.contrastText",textAlign:"center"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:[t.jsx(mf,{sx:{mr:1,fontSize:"2rem"}}),t.jsx(v,{variant:"h4",component:"div",children:Na(Math.abs(p.netAmount))})]}),t.jsx(v,{variant:"subtitle1",children:I?"Net Surplus":"Net Deficit"}),t.jsx(v,{variant:"body2",sx:{mt:1,opacity:.8},children:I?"Available for future expenses or reinvestment":"Additional funding may be needed"})]})},w=()=>t.jsxs(C,{children:[t.jsxs(Wc,{children:[t.jsx(Bc,{expandIcon:t.jsx(Vc,{}),children:t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(ep,{sx:{mr:1}}),t.jsx(v,{variant:"subtitle1",children:"Funding Contributions"}),d&&t.jsx(Xe,{label:`${d.contributions.length} contributions`,size:"small",sx:{ml:2}})]})}),t.jsx(Uc,{children:d!=null&&d.contributions.length?t.jsxs(br,{dense:!0,children:[d.contributions.slice(0,10).map(I=>{var T;return t.jsxs(ir,{children:[t.jsx(Xt,{children:t.jsx(ao,{color:"success"})}),t.jsx(Bt,{primary:`${Na(I.amount)} ${I.currency}`,secondary:I.isAnonymous?"Anonymous contributor":((T=I.user)==null?void 0:T.name)||"Unknown contributor"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:new Date(I.createdAt).toLocaleDateString()})]},I.id)}),d.contributions.length>10&&t.jsx(ir,{children:t.jsx(Bt,{primary:t.jsxs(v,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:["+",d.contributions.length-10," more contributions"]})})})]}):t.jsx(lt,{severity:"info",children:"No funding contributions found for this news article."})})]}),t.jsxs(Wc,{children:[t.jsx(Bc,{expandIcon:t.jsx(Vc,{}),children:t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(qa,{sx:{mr:1}}),t.jsx(v,{variant:"subtitle1",children:"Expense Orders"}),h.length>0&&t.jsx(Xe,{label:`${h.length} expenses`,size:"small",sx:{ml:2}})]})}),t.jsx(Uc,{children:h.length?t.jsx(br,{dense:!0,children:h.map(I=>t.jsxs(ir,{children:[t.jsx(Xt,{children:t.jsx(oo,{sx:{color:a0[I.status]}})}),t.jsx(Bt,{primary:I.title,secondary:t.jsxs(C,{children:[t.jsxs(v,{variant:"caption",display:"block",children:[I.journalist.displayName,"  ",I.type.name]}),t.jsx(v,{variant:"caption",color:"text.secondary",children:new Date(I.createdAt).toLocaleDateString()})]})}),t.jsxs(C,{sx:{textAlign:"right"},children:[t.jsxs(v,{variant:"body2",fontWeight:"medium",children:[Na(I.amount)," ",I.currency]}),t.jsx(Xe,{label:Nc[I.status],size:"small",sx:{bgcolor:a0[I.status],color:"white",fontSize:"0.7rem"}})]}),I.receiptUrl&&t.jsx(Pt,{title:"View Receipt",children:t.jsx(Oe,{size:"small",onClick:()=>window.open(I.receiptUrl,"_blank"),children:t.jsx(Ws,{fontSize:"small"})})})]},I.id))}):t.jsx(lt,{severity:"info",children:"No expense orders found for this channel."})})]})]});return i?t.jsx(Fe,{elevation:2,children:t.jsxs(Ve,{sx:{textAlign:"center",py:4},children:[t.jsx(Zt,{}),t.jsx(v,{variant:"body2",sx:{mt:2},children:"Loading transaction data..."})]})}):b?t.jsx(lt,{severity:"error",sx:{mb:2},children:b}):!p||p.totalFunding===0&&p.totalExpenses===0?t.jsx(lt,{severity:"info",sx:{mb:2},children:t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(vR,{sx:{mr:1}}),"No transaction data available for this news article."]})}):t.jsxs(C,{sx:{mb:4},children:[t.jsxs(v,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(mf,{sx:{mr:1}}),"Transaction Transparency"]}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,md:6,children:S()}),t.jsx(F,{item:!0,xs:12,md:6,children:j()}),t.jsx(F,{item:!0,xs:12,children:P()}),t.jsxs(F,{item:!0,xs:12,children:[t.jsx(Mt,{sx:{my:2}}),w()]})]})]})};var Am={},T3=Qe;Object.defineProperty(Am,"__esModule",{value:!0});var ol=Am.default=void 0,D3=T3(Ze()),A3=t;ol=Am.default=(0,D3.default)((0,A3.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var Rm={},R3=Qe;Object.defineProperty(Rm,"__esModule",{value:!0});var Zd=Rm.default=void 0,k3=R3(Ze()),_3=t;Zd=Rm.default=(0,k3.default)((0,_3.jsx)("path",{d:"M16 18v2H8v-2zM11 7.99V16h2V7.99h3L12 4 8 7.99z"}),"Upgrade");var km={},O3=Qe;Object.defineProperty(km,"__esModule",{value:!0});var ti=km.default=void 0,M3=O3(Ze()),N3=t;ti=km.default=(0,M3.default)((0,N3.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"})(Pr||(Pr={}));var Io;(function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Io||(Io={}));var i0;(function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"})(i0||(i0={}));var Ln=function(){return Ln=Object.assign||function(n){for(var r,s=1,o=arguments.length;s<o;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Ln.apply(this,arguments)};function _S(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r}function l0(e,n,r){if(r||arguments.length===2)for(var s=0,o=n.length,i;s<o;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return e.concat(i||Array.prototype.slice.call(n))}var al="data-react-paypal-script-id",oa={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},L3="Failed to load the PayPal JS SDK script.",OS="paypal",$3="usePayPalScriptReducer must be used within a PayPalScriptProvider";function F3(e){return e===void 0&&(e=OS),window[e]}function W3(e){for(var n="",r=0;r<e.length;r++){var s=e[r].charCodeAt(0)*r;e[r+1]&&(s+=e[r+1].charCodeAt(0)*(r-1)),n+=String.fromCharCode(97+Math.abs(s)%26)}return n}function B3(e){var n=e.reactComponentName,r=e.sdkComponentKey,s=e.sdkRequestedComponents,o=s===void 0?"":s,i=e.sdkDataNamespace,l=i===void 0?OS:i,d=r.charAt(0).toUpperCase().concat(r.substring(1)),u="Unable to render <".concat(n," /> because window.").concat(l,".").concat(d," is undefined."),h=typeof o=="string"?o:o.join(",");if(!h.includes(r)){var f=[h,r].filter(Boolean).join();u+=`
To fix the issue, add '`.concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(f,"'}}>`.")}return u}function MS(e){var n=e,r=al;n[r];var s=_S(n,[r+""]);return"react-paypal-js-".concat(W3(JSON.stringify(s)))}function V3(e){var n=self.document.querySelector("script[".concat(al,'="').concat(e,'"]'));n!=null&&n.parentNode&&n.parentNode.removeChild(n)}function U3(e,n){var r,s;switch(n.type){case Io.LOADING_STATUS:return typeof n.value=="object"?Ln(Ln({},e),{loadingStatus:n.value.state,loadingStatusErrorMessage:n.value.message}):Ln(Ln({},e),{loadingStatus:n.value});case Io.RESET_OPTIONS:return V3(e.options[al]),Ln(Ln({},e),{loadingStatus:Pr.PENDING,options:Ln(Ln((r={},r[oa.DATA_SDK_INTEGRATION_SOURCE]=oa.DATA_LIBRARY_VALUE,r),n.value),(s={},s[al]="".concat(MS(n.value)),s))});case Io.SET_BRAINTREE_INSTANCE:return Ln(Ln({},e),{braintreePayPalCheckoutInstance:n.value});default:return e}}var NS=x.createContext(null);function z3(e){if(typeof(e==null?void 0:e.dispatch)=="function"&&e.dispatch.length!==0)return e;throw new Error($3)}function H3(){var e=z3(x.useContext(NS)),n=Ln(Ln({},e),{isInitial:e.loadingStatus===Pr.INITIAL,isPending:e.loadingStatus===Pr.PENDING,isResolved:e.loadingStatus===Pr.RESOLVED,isRejected:e.loadingStatus===Pr.REJECTED});return[n,e.dispatch]}x.createContext({});function G3(e){var n=x.useRef(new Proxy({},{get:function(r,s,o){return typeof r[s]=="function"?function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return r[s].apply(r,i)}:Reflect.get(r,s,o)}}));return n.current=Object.assign(n.current,e),n.current}var eu=function(e){var n,r=e.className,s=r===void 0?"":r,o=e.disabled,i=o===void 0?!1:o,l=e.children,d=e.forceReRender,u=d===void 0?[]:d,h=_S(e,["className","disabled","children","forceReRender"]),f=i?{opacity:.38}:{},p="".concat(s," ").concat(i?"paypal-buttons-disabled":"").trim(),g=x.useRef(null),b=x.useRef(null),y=G3(h),S=H3()[0],j=S.isResolved,P=S.options,w=x.useState(null),I=w[0],T=w[1],D=x.useState(!0),R=D[0],_=D[1],k=x.useState(null),N=k[1];function L(){b.current!==null&&b.current.close().catch(function(){})}return!((n=b.current)===null||n===void 0)&&n.updateProps&&b.current.updateProps({message:h.message}),x.useEffect(function(){if(j===!1)return L;var z=F3(P.dataNamespace);if(z===void 0||z.Buttons===void 0)return N(function(){throw new Error(B3({reactComponentName:eu.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:P.components,sdkDataNamespace:P[oa.DATA_NAMESPACE]}))}),L;var $=function(G,K){T(K),typeof h.onInit=="function"&&h.onInit(G,K)};try{b.current=z.Buttons(Ln(Ln({},y),{onInit:$}))}catch(G){return N(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(G))})}return b.current.isEligible()===!1?(_(!1),L):(g.current&&b.current.render(g.current).catch(function(G){g.current===null||g.current.children.length===0||N(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(G))})}),L)},l0(l0([j],u,!0),[h.fundingSource],!1)),x.useEffect(function(){I!==null&&(i===!0?I.disable().catch(function(){}):I.enable().catch(function(){}))},[i,I]),Dt.createElement(Dt.Fragment,null,R?Dt.createElement("div",{ref:g,style:f,className:p}):l)};eu.displayName="PayPalButtons";function Y3(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(r[s[o]]=e[s[o]]);return r}function q3(e,n){var r=document.querySelector('script[src="'.concat(e,'"]'));if(r===null)return null;var s=LS(e,n),o=r.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var i=!0;return Object.keys(o.dataset).forEach(function(l){o.dataset[l]!==s.dataset[l]&&(i=!1)}),i?r:null}function K3(e){var n=e.url,r=e.attributes,s=e.onSuccess,o=e.onError,i=LS(n,r);i.onerror=o,i.onload=s,document.head.insertBefore(i,document.head.firstElementChild)}function J3(e){var n=e.sdkBaseUrl,r=e.environment,s=Y3(e,["sdkBaseUrl","environment"]),o=n||Z3(r),i=s,l=Object.keys(i).filter(function(h){return typeof i[h]<"u"&&i[h]!==null&&i[h]!==""}).reduce(function(h,f){var p=i[f].toString();return f=X3(f),f.substring(0,4)==="data"||f==="crossorigin"?h.attributes[f]=p:h.queryParams[f]=p,h},{queryParams:{},attributes:{}}),d=l.queryParams,u=l.attributes;return d["merchant-id"]&&d["merchant-id"].indexOf(",")!==-1&&(u["data-merchant-id"]=d["merchant-id"],d["merchant-id"]="*"),{url:"".concat(o,"?").concat(Q3(d)),attributes:u}}function X3(e){var n=function(r,s){return(s?"-":"")+r.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,n)}function Q3(e){var n="";return Object.keys(e).forEach(function(r){n.length!==0&&(n+="&"),n+=r+"="+e[r]}),n}function Z3(e){return e==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function LS(e,n){n===void 0&&(n={});var r=document.createElement("script");return r.src=e,Object.keys(n).forEach(function(s){r.setAttribute(s,n[s]),s==="data-csp-nonce"&&r.setAttribute("nonce",n["data-csp-nonce"])}),r}function eW(e,n){if(n===void 0&&(n=Promise),$S(e,n),typeof document>"u")return n.resolve(null);var r=J3(e),s=r.url,o=r.attributes,i=o["data-namespace"]||"paypal",l=c0(i);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),q3(s,o)&&l?n.resolve(l):tW({url:s,attributes:o},n).then(function(){var d=c0(i);if(d)return d;throw new Error("The window.".concat(i," global variable is not available."))})}function tW(e,n){n===void 0&&(n=Promise),$S(e,n);var r=e.url,s=e.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new n(function(o,i){if(typeof document>"u")return o();K3({url:r,attributes:s,onSuccess:function(){return o()},onError:function(){var l=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return i(l)}})})}function c0(e){return window[e]}function $S(e,n){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");var r=e.environment;if(r&&r!=="production"&&r!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof n<"u"&&typeof n!="function")throw new Error("Expected PromisePonyfill to be a function.")}var FS=function(e){var n,r=e.options,s=r===void 0?{clientId:"test"}:r,o=e.children,i=e.deferLoading,l=i===void 0?!1:i,d=x.useReducer(U3,{options:Ln(Ln({},s),(n={},n[oa.DATA_JS_SDK_LIBRARY]=oa.DATA_LIBRARY_VALUE,n[oa.DATA_SDK_INTEGRATION_SOURCE]=oa.DATA_LIBRARY_VALUE,n[al]="".concat(MS(s)),n)),loadingStatus:l?Pr.INITIAL:Pr.PENDING}),u=d[0],h=d[1];return x.useEffect(function(){if(l===!1&&u.loadingStatus===Pr.INITIAL)return h({type:Io.LOADING_STATUS,value:Pr.PENDING});if(u.loadingStatus===Pr.PENDING){var f=!0;return eW(u.options).then(function(){f&&h({type:Io.LOADING_STATUS,value:Pr.RESOLVED})}).catch(function(p){console.error("".concat(L3," ").concat(p)),f&&h({type:Io.LOADING_STATUS,value:{state:Pr.REJECTED,message:String(p)}})}),function(){f=!1}}},[u.options,l,u.loadingStatus]),Dt.createElement(NS.Provider,{value:Ln(Ln({},u),{dispatch:h})},o)};function d0(){}x.createContext({cardFieldsForm:null,fields:{},registerField:d0,unregisterField:d0});const nW=({contentType:e,contentId:n,amount:r,currency:s,comment:o,onSuccess:i,onError:l,onCancel:d,disabled:u=!1})=>{const[h,f]=Dt.useState(!0),[p,g]=Dt.useState(null),{api:b}=Ye();return t.jsx(C,{sx:{minHeight:50},children:t.jsxs(FS,{options:{clientId:"AUvVGkHGJD8OKekE_4XxFzzKL8a8yLtJ3ZG1woE3OobNy57zyofuPIiUo-zZag0O_L1KPB_u4TB0tuJp",currency:s.toUpperCase(),intent:"capture"},children:[h&&t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:2},children:t.jsx(Zt,{size:24})}),t.jsx(eu,{style:{layout:"vertical",color:"gold",shape:"rect",label:"pay"},disabled:u||r<=0,onInit:()=>{f(!1)},createOrder:async()=>{var S;console.log("Creating PayPal order for funding:",{contentType:e,contentId:n,amount:r,currency:s});try{const j=await((S=b==null?void 0:b.app.funding)==null?void 0:S.createPayPalOrder(e,n,{amount:r,currency:s,comment:o}));if(!(j!=null&&j.orderId))throw new Error("Failed to create PayPal order");return g({orderId:j.orderId,contributionId:j.contributionId}),j.orderId}catch(j){throw console.error("Failed to create PayPal order:",j),l(new Error("Failed to create payment order. Please try again.")),j}},onApprove:async S=>{var j;if(console.log("PayPal order approved:",{orderID:S.orderID,contributionId:p==null?void 0:p.contributionId}),!p){l(new Error("Order data not found"));return}try{const P=await((j=b==null?void 0:b.app.funding)==null?void 0:j.capturePayPalOrder(e,n,{orderId:S.orderID,contributionId:p.contributionId}));i(P)}catch(P){console.error("Failed to capture PayPal order:",P),l(new Error("Failed to complete payment. Please contact support."))}},onCancel:()=>{console.log("PayPal payment cancelled by user"),g(null),d==null||d()},onError:S=>{console.error("PayPal payment error:",S),g(null),l(new Error(typeof S=="string"?S:"PayPal payment failed"))}})]})})},rW=({currentAmount:e,goalAmount:n,contributorCount:r,currency:s,showDetailed:o=!0})=>{const i=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:2}).format(u),l=n?Math.min(e/n*100,100):0,d=n?Math.max(n-e,0):0;return o?t.jsx(Fe,{variant:"outlined",sx:{backgroundColor:"background.paper"},children:t.jsxs(Ve,{children:[t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,sm:n?4:6,children:t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(C,{sx:{display:"flex",justifyContent:"center",mb:1},children:t.jsx(ao,{color:"primary",fontSize:"large"})}),t.jsx(v,{variant:"h4",fontWeight:"bold",color:"primary",children:i(e)}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Raised so far"})]})}),n&&t.jsx(F,{item:!0,xs:12,sm:4,children:t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(C,{sx:{display:"flex",justifyContent:"center",mb:1},children:t.jsx(jR,{color:"action",fontSize:"large"})}),t.jsx(v,{variant:"h4",fontWeight:"bold",children:i(n)}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Funding goal"})]})}),t.jsx(F,{item:!0,xs:12,sm:n?4:6,children:t.jsxs(C,{sx:{textAlign:"center"},children:[t.jsx(C,{sx:{display:"flex",justifyContent:"center",mb:1},children:t.jsx(Ao,{color:"action",fontSize:"large"})}),t.jsx(v,{variant:"h4",fontWeight:"bold",children:r}),t.jsx(v,{variant:"body2",color:"text.secondary",children:r===1?"Supporter":"Supporters"})]})})]}),n&&t.jsxs(C,{sx:{mt:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsxs(v,{variant:"body2",fontWeight:"medium",children:["Progress: ",l.toFixed(1),"%"]}),d>0&&t.jsxs(v,{variant:"body2",color:"text.secondary",children:[i(d)," to go"]})]}),t.jsx(Ja,{variant:"determinate",value:l,sx:{height:12,borderRadius:6,backgroundColor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:6,background:l>=100?"linear-gradient(45deg, #4caf50 30%, #8bc34a 90%)":"linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)"}}}),l>=100&&t.jsx(C,{sx:{mt:2,p:2,bgcolor:"success.light",borderRadius:1,textAlign:"center"},children:t.jsx(v,{variant:"body2",fontWeight:"medium",color:"success.dark",children:" Funding goal reached! Thank you to all supporters!"})})]})]})}):t.jsxs(C,{children:[n&&t.jsxs(t.Fragment,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Funded: ",i(e)]}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Goal: ",i(n)]})]}),t.jsx(Ja,{variant:"determinate",value:l,sx:{height:8,borderRadius:4,backgroundColor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4}}})]}),!n&&t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ao,{fontSize:"small",color:"primary"}),t.jsxs(v,{variant:"body2",fontWeight:"medium",children:[i(e)," raised"]}),t.jsx(Ao,{fontSize:"small",color:"action"}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:[r," supporters"]})]})]})},sW=[5,10,25,50,100],WS=({open:e,onClose:n,onSuccess:r,contentType:s,contentId:o,fundingData:i})=>{const[l,d]=x.useState("amount"),[u,h]=x.useState({amount:0,currency:i.currency,comment:""}),[f,p]=x.useState(!1),[g,b]=x.useState(null),y=()=>{d("amount"),h({amount:0,currency:i.currency,comment:""}),b(null),n()},S=N=>{h(L=>({...L,amount:N}))},j=()=>{if(l==="amount"){if(u.amount<=0){b("Please enter a valid contribution amount");return}b(null),d("payment")}},P=()=>{l==="payment"&&(d("amount"),b(null))},w=N=>{r(N),y()},I=N=>{b(N.message||"Payment failed. Please try again."),p(!1)},T=()=>{b("Payment cancelled. You can try again when ready."),p(!1)},D=()=>t.jsxs(me,{spacing:3,children:[t.jsxs(C,{children:[t.jsxs(v,{variant:"h6",gutterBottom:!0,children:["Fund this ",s]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:i.description||`Support this ${s} with your contribution`})]}),t.jsx(rW,{currentAmount:i.currentAmount,goalAmount:i.goalAmount,contributorCount:i.contributorCount,currency:i.currency}),t.jsx(Mt,{}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",gutterBottom:!0,children:"Choose contribution amount"}),t.jsx(me,{direction:"row",spacing:1,flexWrap:"wrap",sx:{mb:2},children:sW.map(N=>t.jsx(Xe,{label:`${i.currency} ${N}`,onClick:()=>S(N),color:u.amount===N?"primary":"default",variant:u.amount===N?"filled":"outlined",sx:{mb:1}},N))}),t.jsx(et,{label:"Custom Amount",type:"number",value:u.amount||"",onChange:N=>h(L=>({...L,amount:Number(N.target.value)})),fullWidth:!0,InputProps:{startAdornment:t.jsx(zr,{position:"start",children:i.currency})},inputProps:{min:1,step:.01}})]}),t.jsx(et,{label:"Comment (Optional)",multiline:!0,rows:3,value:u.comment,onChange:N=>h(L=>({...L,comment:N.target.value})),fullWidth:!0,placeholder:"Leave a message of support..."})]}),R=()=>t.jsxs(me,{spacing:3,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Payment Details"}),t.jsxs(C,{sx:{p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"divider"},children:[t.jsxs(v,{variant:"body1",fontWeight:"medium",children:["Contribution: ",i.currency," ",u.amount]}),u.comment&&t.jsxs(v,{variant:"body2",color:"text.secondary",sx:{mt:1},children:['"',u.comment,'"']})]})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",gutterBottom:!0,children:"Complete payment with PayPal"}),t.jsx(nW,{contentType:s,contentId:o,amount:u.amount,currency:u.currency,comment:u.comment,onSuccess:w,onError:I,onCancel:T,disabled:f})]})]}),_=()=>t.jsxs(C,{sx:{textAlign:"center",py:4},children:[t.jsx(Ja,{sx:{mb:3}}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Processing your contribution..."}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Please wait while we process your payment"})]}),k=()=>{switch(l){case"amount":return t.jsxs(t.Fragment,{children:[t.jsx(ce,{onClick:y,disabled:f,children:"Cancel"}),t.jsx(ce,{onClick:j,variant:"contained",disabled:f||u.amount<=0,children:"Continue"})]});case"payment":return t.jsx(t.Fragment,{children:t.jsx(ce,{onClick:P,disabled:f,children:"Back"})});case"processing":return null;default:return null}};return t.jsxs(Gt,{open:e,onClose:f?void 0:y,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[t.jsxs(Qt,{sx:{fontWeight:600},children:["Fund ",i.title]}),t.jsxs(Yt,{children:[g&&t.jsx(lt,{severity:"error",sx:{mb:2},children:g}),l==="amount"&&D(),l==="payment"&&R(),l==="processing"&&_()]}),k()&&t.jsx(qt,{sx:{px:3,pb:2},children:k()})]})};var _m={},oW=Qe;Object.defineProperty(_m,"__esModule",{value:!0});var ni=_m.default=void 0,aW=oW(Ze()),iW=t;ni=_m.default=(0,aW.default)((0,iW.jsx)("path",{d:"M1 11h4v11H1zm15-7.75C16.65 2.49 17.66 2 18.7 2 20.55 2 22 3.45 22 5.3c0 2.27-2.91 4.9-6 7.7-3.09-2.81-6-5.44-6-7.7C10 3.45 11.45 2 13.3 2c1.04 0 2.05.49 2.7 1.25M20 17h-7l-2.09-.73.33-.94L13 16h2.82c.65 0 1.18-.53 1.18-1.18 0-.49-.31-.93-.77-1.11L8.97 11H7v9.02L14 22l8.01-3c-.01-1.1-.9-2-2.01-2"}),"VolunteerActivism");const lW=()=>t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsx(ue,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:2,mb:3}})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[t.jsx(ue,{variant:"text",width:"60%",height:40}),t.jsx(me,{direction:"row",spacing:1,children:[1,2,3].map(e=>t.jsx(ue,{variant:"circular",width:40,height:40},e))})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:300,sx:{mb:3,borderRadius:1}}),t.jsxs(me,{spacing:2,sx:{mb:3},children:[t.jsx(ue,{variant:"text",width:"100%"}),t.jsx(ue,{variant:"text",width:"95%"}),t.jsx(ue,{variant:"text",width:"90%"}),t.jsx(ue,{variant:"text",width:"85%"}),t.jsx(ue,{variant:"text",width:"95%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:80,sx:{mb:3,borderRadius:1}}),t.jsx(me,{direction:"row",spacing:1,children:[1,2,3,4].map(e=>t.jsx(ue,{variant:"rounded",width:80,height:32},e))})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"50%",height:32,sx:{mb:2}}),t.jsx(me,{spacing:2,children:[1,2,3,4,5].map(e=>t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[t.jsx(ue,{variant:"text",width:"40%"}),t.jsx(ue,{variant:"text",width:"20%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:8,sx:{borderRadius:1}})]},e))})]})})})]})}),cW=()=>{var D,R;const{id:e}=dr(),{api:n}=Ye(),{execute:r}=Ke(),[s,o]=x.useState(null),[i,l]=x.useState(!0),[d,u]=x.useState(!1),[h,f]=x.useState(!1),[p,g]=x.useState(null),[b,y]=x.useState(!1);x.useEffect(()=>{(async()=>{if(e){l(!0);const k=await r(()=>n==null?void 0:n.app.news.get(e),{showErrorToast:!0});k&&(o(k),k.accessInfo&&!k.accessInfo.canAccess&&u(!0),S(e)),l(!1)}})()},[e,r]);const S=async _=>{try{y(!0);const k=await(n==null?void 0:n.app.funding.getFund("news",_));g(k)}catch(k){console.error("Failed to load fund data:",k)}finally{y(!1)}},j=async()=>{f(!0)},P=async _=>{e&&await S(e),console.log("Contribution successful:",_)},w=()=>!s||!p?null:{id:p.id,title:s.title,currentAmount:p.currentAmount/100,goalAmount:p.goalAmount?p.goalAmount/100:void 0,currency:p.currency,contributorCount:0,description:"Support quality journalism by funding this article"};if(i)return t.jsx(lW,{});if(!s)return t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(v,{variant:"h4",children:"Entry not found"})});const I=s.media.find(_=>_.type===El.COVER),T=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(_);return t.jsxs(St,{maxWidth:"lg",sx:{mt:4},children:[t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsxs(C,{sx:{height:300,width:"100%",position:"relative",mb:3,borderRadius:2,overflow:"hidden"},children:[(I==null?void 0:I.format)===id.VIDEO?t.jsx(C,{component:"video",src:I.url,controls:!0,preload:"metadata",sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",bgcolor:"black"}}):t.jsx(C,{component:"img",src:(I==null?void 0:I.url)||Kd,alt:s.title,sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"}}),t.jsxs(C,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",p:3,color:"white"},children:[t.jsx(v,{variant:"h4",component:"h1",gutterBottom:!0,children:s.title}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(C,{component:er,to:fe.APP_CHANNEL_VIEW.replace(":channelId",s.channelId),sx:{display:"inline-flex",alignItems:"center",bgcolor:"rgba(255, 255, 255, 0.1)",color:"white",px:2,py:1,borderRadius:2,textDecoration:"none",transition:"all 0.2s ease-in-out",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px)"}},children:[t.jsx(Il,{sx:{mr:1}}),t.jsx(v,{variant:"subtitle2",children:s.channel.name})]}),t.jsxs(C,{sx:{display:"inline-flex",alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.3)",px:2,py:1,borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx(Cl,{sx:{mr:1,fontSize:"0.9rem"}}),t.jsx(v,{variant:"caption",children:s.creator.displayName})]})]}),t.jsx(v,{variant:"subtitle1",children:new Date(s.publishedAt).toLocaleDateString()})]})]})]})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsx(C,{sx:{p:3},children:d?t.jsxs(rt,{elevation:3,sx:{p:4,textAlign:"center",bgcolor:_=>he(_.palette.warning.main,.05),border:_=>`2px solid ${he(_.palette.warning.main,.3)}`,borderRadius:3},children:[t.jsx(C,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:_=>he(_.palette.warning.main,.1),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:2},children:t.jsx(ol,{sx:{fontSize:40,color:"warning.main"}})}),t.jsx(v,{variant:"h5",gutterBottom:!0,fontWeight:"bold",color:"warning.dark",children:"Premium Content"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:500,mx:"auto"},children:((D=s.accessInfo)==null?void 0:D.reason)||"Subscribe to unlock the full article and support quality journalism."}),((R=s.accessInfo)==null?void 0:R.requiredTierName)&&t.jsxs(lt,{severity:"info",sx:{mb:3,maxWidth:500,mx:"auto","& .MuiAlert-message":{width:"100%",textAlign:"center"}},children:["Required tier: ",t.jsx("strong",{children:s.accessInfo.requiredTierName})]}),t.jsxs(C,{sx:{mb:3,maxWidth:400,mx:"auto"},children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:2},children:"Subscribe to unlock:"}),t.jsx(br,{dense:!0,children:["Full article content","Quality metrics","Fund information","Social links","Transaction transparency"].map((_,k)=>t.jsxs(ir,{sx:{py:.5},children:[t.jsx(Xt,{sx:{minWidth:32},children:t.jsx(ti,{color:"success",fontSize:"small"})}),t.jsx(Bt,{primary:_,primaryTypographyProps:{variant:"body2"}})]},k))})]}),t.jsx(ce,{component:er,to:fe.APP_CHANNEL_VIEW.replace(":channelId",s.channelId),variant:"contained",color:"warning",size:"large",startIcon:t.jsx(Zd,{}),sx:{px:4,py:1.5,borderRadius:2,fontWeight:"bold",textTransform:"none",fontSize:"1rem"},children:"View Subscription Options"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Qd,{data:kS(s.content),readOnly:!0,borderColor:_=>_.palette.mode==="dark"?he(_.palette.common.white,.1):he(_.palette.common.black,.1)}),t.jsx(C,{sx:{mt:2},children:s.tags.map(_=>t.jsx(Xe,{label:_.title,variant:"outlined",sx:{mr:1,mb:1}},_.id))})]})})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(me,{spacing:3,children:[!d&&s.socialLinks&&s.socialLinks.length>0&&t.jsx(Em,{links:s.socialLinks}),!d&&s.qualityMetrics&&t.jsxs(rt,{elevation:0,sx:{p:2,bgcolor:"success.light",color:"success.contrastText",display:"flex",alignItems:"center",gap:2,borderRadius:2},children:[t.jsx(Dm,{fontSize:"large"}),t.jsxs(C,{children:[t.jsx(v,{variant:"overline",children:"Quality Score"}),t.jsxs(v,{variant:"h4",component:"div",children:[s.qualityMetrics.overallQualityScore.toFixed(1),"/10"]})]})]}),!d&&s.newsFund&&t.jsxs(rt,{elevation:0,sx:{p:2,bgcolor:"primary.light",color:"primary.contrastText",display:"flex",alignItems:"center",gap:2,borderRadius:2},children:[t.jsx(qd,{fontSize:"large"}),t.jsxs(C,{children:[t.jsx(v,{variant:"overline",children:"News Fund"}),t.jsx(v,{variant:"h4",component:"div",children:T(s.newsFund.amount)})]})]}),t.jsx(rt,{elevation:2,sx:{p:3,borderRadius:2,border:"2px solid",borderColor:"primary.main",bgcolor:_=>he(_.palette.primary.main,.05)},children:t.jsxs(me,{spacing:2,children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ni,{color:"primary",fontSize:"large"}),t.jsx(v,{variant:"h6",fontWeight:"bold",color:"primary",children:"Fund this Article"})]}),p&&!b?t.jsxs(C,{children:[t.jsx(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Funding"}),t.jsxs(v,{variant:"h5",fontWeight:"bold",color:"primary.main",children:[p.currency," ",(p.currentAmount/100).toFixed(2)]}),p.goalAmount&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Goal: ",p.currency," ",(p.goalAmount/100).toFixed(2)]})]}):b?t.jsx(ue,{variant:"rectangular",height:60}):t.jsx(v,{variant:"body2",color:"text.secondary",children:"Be the first to fund this article"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Support quality journalism by contributing to this article"}),t.jsx(ce,{variant:"contained",color:"primary",fullWidth:!0,size:"large",startIcon:t.jsx(ni,{}),onClick:j,disabled:!s,sx:{py:1.5,fontWeight:"bold",textTransform:"none",fontSize:"1rem"},children:"Fund Now"})]})})]})})]}),!d&&t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(I3,{newsId:s.id,channelId:s.channelId,newsFund:s.newsFund})}),s&&p&&t.jsx(WS,{open:h,onClose:()=>f(!1),onSuccess:P,contentType:"news",contentId:s.id,fundingData:w()})]})};var Om={},dW=Qe;Object.defineProperty(Om,"__esModule",{value:!0});var BS=Om.default=void 0,uW=dW(Ze()),hW=t;BS=Om.default=(0,uW.default)((0,hW.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");const Ec=Ne(Xe)(({theme:e})=>({borderRadius:e.spacing(.75),height:28,fontWeight:500,fontSize:"0.75rem",padding:"0 8px",transition:"all 0.2s ease",border:"1px solid transparent","&.selected":{backgroundColor:e.palette.mode==="dark"?e.palette.common.white:e.palette.grey[900],color:e.palette.mode==="dark"?e.palette.grey[900]:e.palette.common.white,fontWeight:600,borderColor:e.palette.mode==="dark"?e.palette.common.white:e.palette.grey[900],"&:hover":{backgroundColor:e.palette.mode==="dark"?e.palette.grey[100]:e.palette.grey[800],borderColor:e.palette.mode==="dark"?e.palette.grey[100]:e.palette.grey[800]}},"&:not(.selected)":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",color:e.palette.text.primary,"&:hover":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.1)",borderColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)"}}})),Xh=Ne(C)(({theme:e,horizontal:n})=>({display:"flex",flexDirection:n?"row":"column",gap:e.spacing(1),scrollBehavior:"smooth",...n&&{overflowX:"auto",overflowY:"hidden",paddingBottom:e.spacing(.5),scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none"}})),u0=Ne(Oe)(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",width:32,height:32,flexShrink:0,"&:hover":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.1)"}})),cd=({selectedTags:e=[],onTagsChange:n,contentType:r,maxTags:s=10,className:o,horizontal:i=!1})=>{const[l,d]=x.useState([]),[u,h]=x.useState(!0),[f,p]=x.useState(!1),[g,b]=x.useState(!1),y=Dt.useRef(null),{api:S}=Ye(),{execute:j}=Ke();x.useEffect(()=>{(async()=>{if(S!=null&&S.app.tag){h(!0);try{const[R,_,k]=await Promise.all([j(()=>S.app.tag.getTags({category:r==="channels"?void 0:r}),{showErrorToast:!1}),j(()=>S.app.tag.getTags({trending:!0,category:r==="channels"?void 0:r}),{showErrorToast:!1}),j(()=>S.app.tag.getTags({popular:!0,category:r==="channels"?void 0:r}),{showErrorToast:!1})]),N=new Map;R!=null&&R.items&&R.items.forEach(z=>{var $;N.set(z.id,{...z,count:(($=z.analytics)==null?void 0:$.usageCount)||0})}),_!=null&&_.items&&_.items.forEach(z=>{var G;const $=N.get(z.id);$?N.set(z.id,{...$,trending:!0}):N.set(z.id,{...z,count:((G=z.analytics)==null?void 0:G.usageCount)||0,trending:!0})}),k!=null&&k.items&&k.items.forEach(z=>{var G;const $=N.get(z.id);$&&!$.trending?N.set(z.id,{...$,popular:!0}):$||N.set(z.id,{...z,count:((G=z.analytics)==null?void 0:G.usageCount)||0,popular:!0})});const L=Array.from(N.values()).sort((z,$)=>($.count||0)-(z.count||0)).slice(0,20);d(L)}catch(R){console.error("Failed to fetch tags:",R),d([])}finally{h(!1)}}})()},[r,S,j]);const P=D=>{const R=e.includes(D);n(R?e.filter(_=>_!==D):[D])},w=()=>{if(i&&y.current){const{scrollLeft:D,scrollWidth:R,clientWidth:_}=y.current;p(D>0),b(D+_<R-1)}};x.useEffect(()=>{if(i){w();const D=y.current;if(D)return D.addEventListener("scroll",w),window.addEventListener("resize",w),()=>{D.removeEventListener("scroll",w),window.removeEventListener("resize",w)}}},[l,u,i]);const I=()=>{y.current&&y.current.scrollBy({left:-200,behavior:"smooth"})},T=()=>{y.current&&y.current.scrollBy({left:200,behavior:"smooth"})};return u?t.jsx(C,{className:o,children:t.jsx(Xh,{horizontal:i,children:[...Array(10)].map((D,R)=>t.jsx(ue,{variant:"rounded",width:i?100:"100%",height:28,sx:{borderRadius:.75,flexShrink:i?0:void 0}},R))})}):i?t.jsxs(C,{className:o,sx:{display:"flex",alignItems:"center",gap:1},children:[f&&t.jsx(u0,{onClick:I,size:"small",children:t.jsx(Vd,{fontSize:"small"})}),t.jsxs(Xh,{ref:y,horizontal:i,sx:{flex:1},children:[t.jsx(Ec,{label:"All",className:e.length===0?"selected":"",onClick:()=>n([]),clickable:!0,sx:{flexShrink:0}}),l.map(D=>{const R=e.includes(D.name);return t.jsx(Ec,{label:D.name,className:R?"selected":"",onClick:()=>P(D.name),clickable:!0,sx:{flexShrink:0}},D.id)})]}),g&&t.jsx(u0,{onClick:T,size:"small",children:t.jsx(BS,{fontSize:"small"})})]}):t.jsx(C,{className:o,children:t.jsxs(Xh,{ref:y,horizontal:i,children:[t.jsx(Ec,{label:"All",className:e.length===0?"selected":"",onClick:()=>n([]),clickable:!0,sx:{width:"100%",justifyContent:"flex-start"}}),l.map(D=>{const R=e.includes(D.name);return t.jsx(Ec,{label:D.name,className:R?"selected":"",onClick:()=>P(D.name),clickable:!0,sx:{width:"100%",justifyContent:"flex-start"}},D.id)})]})})},fW=()=>{const e=ma(),n=xt(),[r,s]=x.useState([]);x.useEffect(()=>{const l=new URLSearchParams(e.search).get("tags");if(l){const d=l.split(",").map(u=>decodeURIComponent(u.trim()));s(d)}},[e.search]);const o=i=>{s(i);const l=new URLSearchParams(e.search);i.length>0?l.set("tags",i.map(u=>encodeURIComponent(u)).join(",")):l.delete("tags");const d=`${e.pathname}?${l.toString()}`;n(d,{replace:!0})};return t.jsxs(C,{sx:{width:"100%",overflow:"hidden",pb:4},children:[t.jsx(C,{sx:{mb:3},children:t.jsx(cd,{selectedTags:r,onTagsChange:o,contentType:"news",maxTags:5,showCounts:!1,horizontal:!0})}),t.jsx(C,{children:t.jsx(DS,{filters:r.length>0?{tags:r}:{},emptyTitle:"No news found",emptyDescription:"No news articles available at the moment",mode:"grid"})})]})};var Mm={},pW=Qe;Object.defineProperty(Mm,"__esModule",{value:!0});var Nm=Mm.default=void 0,mW=pW(Ze()),xW=t;Nm=Mm.default=(0,mW.default)((0,xW.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var Lm={},gW=Qe;Object.defineProperty(Lm,"__esModule",{value:!0});var dd=Lm.default=void 0,bW=gW(Ze()),yW=t;dd=Lm.default=(0,bW.default)((0,yW.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28m-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6"}),"WorkspacePremium");const vW=({channel:e,hasSubscription:n,subscriptionTier:r,onJoin:s,onCancel:o})=>{var p,g,b,y;const i=xt(),l=n,d=r,u=(p=e.tiers)==null?void 0:p.find(S=>S.isDefault),h=()=>{i(fe.APP_CHANNEL_VIEW.replace(":channelId",e.id))},f=S=>{S.stopPropagation(),l?o(e.id):s(e.id,u==null?void 0:u.id)};return t.jsxs(C,{onClick:h,sx:{display:"flex",alignItems:"flex-start",gap:1.5,p:1.5,borderRadius:1.5,cursor:"pointer",transition:"all 0.2s ease-in-out",height:"100%",border:"1px solid",borderColor:"transparent","&:hover":{bgcolor:S=>S.palette.mode==="dark"?he(S.palette.common.white,.05):he(S.palette.common.black,.03),borderColor:"divider",transform:"translateX(4px)"}},children:[t.jsx(Sn,{src:e.logoUrl,sx:{width:48,height:48,borderRadius:1.5,bgcolor:"primary.main"}}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:600,color:"text.primary",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.9rem"},children:e.name}),l?t.jsx(Xe,{label:d==null?void 0:d.name,color:"primary",onDelete:f,size:"small",sx:{height:24}}):t.jsx(Oe,{size:"small",onClick:f,sx:{bgcolor:"primary.main",color:"white",width:32,height:32,"&:hover":{bgcolor:"primary.dark"}},children:t.jsx(dd,{sx:{fontSize:18}})})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:.5,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.8rem"},children:e.description}),t.jsxs(me,{direction:"row",spacing:2,sx:{color:"text.secondary",fontSize:"0.75rem"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(Nm,{sx:{fontSize:14}}),(b=(g=e.stats)==null?void 0:g.activeSubscriptionCount)==null?void 0:b.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:1})]}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(dd,{sx:{fontSize:14}}),((y=e.stats)==null?void 0:y.tierCount)||0," Tiers"]})]})]})]})},jW=({count:e=2})=>t.jsx(me,{spacing:2,sx:{mt:2},children:[...Array(e)].map((n,r)=>t.jsxs(C,{sx:{display:"flex",gap:2,p:2,borderRadius:2,bgcolor:s=>s.palette.mode==="dark"?he(s.palette.common.white,.05):he(s.palette.common.black,.03)},children:[t.jsx(C,{sx:{width:56,height:56,borderRadius:2,bgcolor:s=>s.palette.mode==="dark"?he(s.palette.common.white,.1):he(s.palette.common.black,.1)}}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsx(C,{sx:{height:24,width:"40%",mb:1,borderRadius:.5,bgcolor:"grey.300"}}),t.jsx(C,{sx:{height:16,width:"80%",mb:1,borderRadius:.5,bgcolor:"grey.200"}}),t.jsx(C,{sx:{height:16,width:"30%",borderRadius:.5,bgcolor:"grey.200"}})]})]},r))}),SW=({filters:e={},emptyTitle:n="No channels found",emptyDescription:r="No channels available at the moment",itemsPerPage:s=10,hasSubscription:o,getSubscriptionTier:i,onJoin:l,onCancel:d})=>{const[u,h]=x.useState([]),[f,p]=x.useState(!0),[g,b]=x.useState(1),[y,S]=x.useState(!0),{api:j}=Ye(),{execute:P}=Ke(),w=async(T=g)=>{try{p(!0);const D=await P(()=>j==null?void 0:j.app.channel.getChannels(e,{page:T,limit:s}),{showErrorToast:!0});D&&(h(T===1?D.items??[]:R=>[...R,...D.items??[]]),b(D.metadata.currentPage??1),S(D.metadata.hasNext===!0))}finally{p(!1)}};x.useEffect(()=>{h([]),b(1),w(1)},[JSON.stringify(e)]);const I=()=>{!f&&y&&w(g+1)};return u.length===0&&!f?t.jsx(Us,{title:n,description:r}):t.jsx(C,{sx:{width:"100%"},children:f&&u.length===0?t.jsx(jW,{}):t.jsx(Cs,{dataLength:u.length,next:I,hasMore:y,loader:t.jsx(C,{}),endMessage:t.jsx(C,{sx:{textAlign:"center",mt:4,color:"text.secondary",fontSize:"0.875rem"},children:"No more channels to display"}),children:t.jsx(F,{container:!0,spacing:3,children:u.map(T=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(vW,{channel:T,hasSubscription:(o==null?void 0:o(T.id))??!1,subscriptionTier:i==null?void 0:i(T.id),onJoin:l,onCancel:d})},T.id))})})})},wW=()=>{const e=ma(),n=xt(),[r,s]=x.useState([]),{actions:o,channelRelations:i}=Es(),{api:l}=Ye();x.useEffect(()=>{const p=new URLSearchParams(e.search).get("tags");if(p){const g=p.split(",").map(b=>decodeURIComponent(b.trim()));s(g)}},[e.search]);const d=async(f,p)=>{var g,b,y;if(p)try{const S=await((g=l==null?void 0:l.app.subscription)==null?void 0:g.createDirectSubscription(f,{tierId:p,paymentMethodId:"paypal_default"}));S!=null&&S.approvalUrl?window.open(S.approvalUrl,"paypal_payment","width=600,height=700,scrollbars=yes,resizable=yes")||alert("Popup blocked! Please allow popups and try again."):await o.refreshProfile()}catch(S){console.error("Subscription failed:",S);const j=((y=(b=S==null?void 0:S.response)==null?void 0:b.data)==null?void 0:y.message)||(S==null?void 0:S.message)||"";(j.includes("PAYMENT_METHOD_REQUIRED")||j.includes("PayPal payment method")||j.includes("No PayPal payment method found"))&&window.confirm("You need to add a PayPal payment method to subscribe to paid tiers. Would you like to add one now?")&&n("/app/account/payment-methods")}},u=async f=>{try{await(l==null?void 0:l.app.channel.unsubscribeFromChannel(f)),await o.refreshProfile()}catch(p){console.error("Error cancelling subscription:",p)}},h=f=>{s(f);const p=new URLSearchParams(e.search);f.length>0?p.set("tags",f.map(b=>encodeURIComponent(b)).join(",")):p.delete("tags");const g=`${e.pathname}?${p.toString()}`;n(g,{replace:!0})};return t.jsxs(C,{sx:{width:"100%",overflow:"hidden"},children:[t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:"Discover Channels"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Find and subscribe to channels from your favorite journalists"})]}),t.jsx(C,{sx:{mb:3},children:t.jsx(cd,{selectedTags:r,onTagsChange:h,contentType:"channels",maxTags:3,showCounts:!1,horizontal:!0})}),t.jsx(C,{children:t.jsx(SW,{filters:r.length>0?{tags:r}:{},emptyTitle:"No channels found",emptyDescription:"No channels available at the moment",hasSubscription:i.hasSubscription,getSubscriptionTier:i.getSubscriptionTier,onJoin:d,onCancel:u})})]})};var $m={},CW=Qe;Object.defineProperty($m,"__esModule",{value:!0});var VS=$m.default=void 0,PW=CW(Ze()),EW=t;VS=$m.default=(0,PW.default)((0,EW.jsx)("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers");var Fm={},IW=Qe;Object.defineProperty(Fm,"__esModule",{value:!0});var US=Fm.default=void 0,TW=IW(Ze()),DW=t;US=Fm.default=(0,TW.default)((0,DW.jsx)("path",{d:"M11 14H9c0-4.97 4.03-9 9-9v2c-3.87 0-7 3.13-7 7m7-3V9c-2.76 0-5 2.24-5 5h2c0-1.66 1.34-3 3-3M7 4c0-1.11-.89-2-2-2s-2 .89-2 2 .89 2 2 2 2-.89 2-2m4.45.5h-2C9.21 5.92 7.99 7 6.5 7h-3C2.67 7 2 7.67 2 8.5V11h6V8.74c1.86-.59 3.25-2.23 3.45-4.24M19 17c1.11 0 2-.89 2-2s-.89-2-2-2-2 .89-2 2 .89 2 2 2m1.5 1h-3c-1.49 0-2.71-1.08-2.95-2.5h-2c.2 2.01 1.59 3.65 3.45 4.24V22h6v-2.5c0-.83-.67-1.5-1.5-1.5"}),"ConnectWithoutContact");var Wm={},AW=Qe;Object.defineProperty(Wm,"__esModule",{value:!0});var zS=Wm.default=void 0,RW=AW(Ze()),kW=t;zS=Wm.default=(0,RW.default)((0,kW.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");var Bm={},_W=Qe;Object.defineProperty(Bm,"__esModule",{value:!0});var il=Bm.default=void 0,OW=_W(Ze()),MW=t;il=Bm.default=(0,OW.default)((0,MW.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");var Vm={},NW=Qe;Object.defineProperty(Vm,"__esModule",{value:!0});var HS=Vm.default=void 0,LW=NW(Ze()),$W=t;HS=Vm.default=(0,LW.default)((0,$W.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");const FW={ACTIVE:"ACTIVE",TRENDING:"TRENDING",CLAIMED:"CLAIMED",CONVERTED:"CONVERTED",CLOSED:"CLOSED",EXPIRED:"EXPIRED",FUNDED:"FUNDED",CANCELLED:"CANCELLED",ARCHIVED:"ARCHIVED"},h0={COVER:"COVER",SUMMARY:"SUMMARY",AVATAR:"AVATAR",TEASER:"TEASER",INTRO:"INTRO",OUTRO:"OUTRO",OTHER:"OTHER"},Eo={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",DOCUMENT:"DOCUMENT",URL:"URL",ARTICLE:"ARTICLE",OTHER:"OTHER"},ud=({poll:e,onVote:n,userVote:r,showResults:s=!1,disabled:o=!1,showAsPreview:i=!1,mode:l="scroll"})=>{var j,P,w,I,T,D,R;const d=cn(),u=xt(),[h,f]=x.useState(null),p=((j=e.stats)==null?void 0:j.totalVotes)||0,g=e.accessInfo&&!e.accessInfo.canAccess,b=e.media&&e.media.length>0?e.media[0]:null,y=_=>{o||f(_)},S=_=>{i&&!_.target.closest(".poll-option, .action-button")&&u(fe.APP_POLL_VIEW.replace(":id",String(e.id)))};return t.jsxs(C,{onClick:S,sx:{position:"relative",width:"100%",height:l==="grid"?"auto":"90vh",maxWidth:l==="scroll"?"480px":"100%",margin:l==="scroll"?"0 auto":0,aspectRatio:l==="grid"?"4/5":void 0,borderRadius:l==="grid"?3:4,overflow:"hidden",bgcolor:d.palette.mode==="dark"?"#000":"#111",boxShadow:"none",transition:"opacity 0.2s ease",cursor:i?"pointer":"default","&:hover":{opacity:i?.95:1}},children:[b&&t.jsxs(C,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0},children:[b.format===Eo.VIDEO?t.jsx(C,{component:"video",src:b.url,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,sx:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.7)"}}):t.jsx(C,{component:"img",src:b.url,alt:b.caption||e.title,sx:{width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.7)"}}),t.jsx(C,{sx:{position:"absolute",top:0,left:0,right:0,height:"30%",background:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)",zIndex:1}}),t.jsx(C,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"60%",background:"linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%)",zIndex:1}})]}),!b&&t.jsx(C,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(135deg, ${he(d.palette.primary.main,.8)} 0%, ${he(d.palette.secondary.main,.8)} 100%)`,zIndex:0}}),t.jsxs(C,{sx:{position:"relative",zIndex:2,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",p:2.5},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{sx:{width:40,height:40,bgcolor:d.palette.primary.main,border:"2px solid white",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:(w=(P=e.creator)==null?void 0:P.displayName)==null?void 0:w.charAt(0).toUpperCase()}),t.jsxs(C,{sx:{ml:.5},children:[t.jsx(v,{variant:"body2",sx:{fontWeight:700,fontSize:"0.95rem",color:"white",textShadow:"0 1px 3px rgba(0,0,0,0.8)"},children:(I=e.creator)==null?void 0:I.displayName}),t.jsx(v,{variant:"caption",sx:{fontSize:"0.75rem",color:"rgba(255,255,255,0.9)",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:$r(new Date(e.createdAt),{addSuffix:!0})})]})]}),t.jsxs(me,{direction:"row",spacing:.5,alignItems:"center",children:[((T=e.accessInfo)==null?void 0:T.requiresPremium)&&t.jsx(Xe,{icon:t.jsx(ol,{sx:{fontSize:"0.875rem"}}),label:"Premium",size:"small",sx:{height:24,bgcolor:he(d.palette.warning.main,.9),color:"white",fontWeight:700,fontSize:"0.7rem",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}}),e.isTrending&&t.jsx(Xe,{icon:t.jsx(wl,{sx:{fontSize:"0.875rem"}}),label:"Trending",size:"small",sx:{height:24,bgcolor:he(d.palette.error.main,.9),color:"white",fontWeight:700,fontSize:"0.7rem",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})]})]}),t.jsxs(C,{children:[t.jsx(C,{sx:{mb:2},children:t.jsx(v,{variant:"h5",sx:{fontWeight:800,fontSize:"1.5rem",color:"white",textShadow:"0 2px 8px rgba(0,0,0,0.9)",lineHeight:1.2},children:e.title})}),g?t.jsxs(rt,{elevation:3,sx:{p:3,textAlign:"center",bgcolor:he(d.palette.warning.main,.15),backdropFilter:"blur(20px)",border:`2px solid ${he(d.palette.warning.main,.4)}`,borderRadius:3,mb:2},children:[t.jsx(C,{sx:{width:60,height:60,borderRadius:"50%",bgcolor:he(d.palette.warning.main,.2),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:2},children:t.jsx(ol,{sx:{fontSize:30,color:"warning.light"}})}),t.jsx(v,{variant:"h6",gutterBottom:!0,fontWeight:"bold",color:"white",sx:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Premium Poll"}),t.jsx(v,{variant:"body2",color:"rgba(255,255,255,0.9)",sx:{mb:2,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:((D=e.accessInfo)==null?void 0:D.reason)||"Subscribe to participate in this poll and view results."}),((R=e.accessInfo)==null?void 0:R.requiredTierName)&&t.jsx(Xe,{label:`Required: ${e.accessInfo.requiredTierName}`,size:"small",sx:{mb:2,bgcolor:he(d.palette.info.main,.3),color:"white",fontWeight:600,backdropFilter:"blur(10px)",border:`1px solid ${he(d.palette.info.light,.4)}`}}),t.jsx(ce,{variant:"contained",color:"warning",size:"small",startIcon:t.jsx(Zd,{}),onClick:_=>{_.stopPropagation(),u(fe.APP_CHANNEL_VIEW.replace(":channelId",e.channelId))},sx:{px:3,py:1,borderRadius:2,fontWeight:"bold",textTransform:"none",fontSize:"0.875rem",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:"Subscribe Now"})]}):t.jsx(me,{spacing:1.5,sx:{mb:2},children:e.options.map(_=>{const k=_.voteCount||0,N=p>0?k/p*100:0,L=r===_.id,z=h===_.id;return t.jsx(C,{className:"poll-option",onClick:$=>{$.preventDefault(),$.stopPropagation(),!s&&!o&&n&&n(String(e.id),_.id)},onMouseEnter:()=>y(_.id),onMouseLeave:()=>y(null),sx:{position:"relative",cursor:s||o?"default":"pointer",transition:"all 0.2s ease",transform:z?"scale(1.03)":"scale(1)",opacity:o?.6:1},children:t.jsxs(C,{sx:{position:"relative",display:"flex",alignItems:"center",px:2,py:1.5,borderRadius:2,backdropFilter:"blur(20px)",bgcolor:L?he(d.palette.primary.main,.85):z?he("#fff",.25):he("#fff",.15),border:"1px solid",borderColor:L?he(d.palette.primary.light,.5):he("#fff",.3),boxShadow:L?"0 4px 20px rgba(0,0,0,0.4)":"0 2px 10px rgba(0,0,0,0.2)",overflow:"hidden",transition:"all 0.2s ease"},children:[s&&t.jsx(C,{sx:{position:"absolute",left:0,top:0,bottom:0,width:`${N}%`,bgcolor:he(d.palette.primary.main,.4),transition:"width 0.5s ease",zIndex:0}}),t.jsx(C,{sx:{position:"relative",zIndex:1,width:20,height:20,minWidth:20,minHeight:20,flexShrink:0,borderRadius:"50%",border:"2px solid white",mr:1.5,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:L?"white":"transparent",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:L&&t.jsx(C,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:d.palette.primary.main}})}),t.jsx(v,{variant:"body1",sx:{position:"relative",zIndex:1,flex:1,fontWeight:L?700:600,fontSize:"1rem",color:"white",textShadow:"0 1px 3px rgba(0,0,0,0.8)",wordBreak:"break-word"},children:_.text}),s&&t.jsxs(v,{variant:"body2",sx:{position:"relative",zIndex:1,fontWeight:700,fontSize:"0.95rem",color:"white",textShadow:"0 1px 3px rgba(0,0,0,0.8)",flexShrink:0,ml:1},children:[N.toFixed(0),"%"]}),L&&!s&&t.jsx(ti,{sx:{position:"relative",zIndex:1,ml:1,color:"white",fontSize:"1.25rem",flexShrink:0,filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))"}})]})},_.id)})}),e.tags&&e.tags.length>0&&t.jsx(me,{direction:"row",spacing:.5,sx:{mt:1.5,flexWrap:"wrap",gap:.5},children:e.tags.slice(0,3).map(_=>t.jsx(Xe,{label:`#${_.name}`,size:"small",sx:{height:22,fontSize:"0.7rem",fontWeight:600,bgcolor:he("#fff",.15),backdropFilter:"blur(10px)",color:"white",border:"1px solid",borderColor:he("#fff",.2),textShadow:"0 1px 2px rgba(0,0,0,0.5)","&:hover":{bgcolor:he("#fff",.25)}}},_.id))})]})]})]})};var Um={},WW=Qe;Object.defineProperty(Um,"__esModule",{value:!0});var GS=Um.default=void 0,BW=WW(Ze()),VW=t;GS=Um.default=(0,BW.default)((0,VW.jsx)("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"}),"ThumbUp");const UW=({count:e=2})=>t.jsx(me,{spacing:2,sx:{mt:2},children:[...Array(e)].map((n,r)=>t.jsxs(C,{sx:{p:2,borderRadius:2,bgcolor:s=>s.palette.mode==="dark"?he(s.palette.common.white,.05):he(s.palette.common.black,.03)},children:[t.jsx(C,{sx:{height:24,width:"40%",mb:2,borderRadius:.5,bgcolor:"grey.300"}}),t.jsx(me,{spacing:2,children:[...Array(4)].map((s,o)=>t.jsx(C,{sx:{height:40,borderRadius:1,bgcolor:i=>i.palette.mode==="dark"?he(i.palette.common.white,.1):he(i.palette.common.black,.1)}},o))})]},r))}),YS=({filters:e={},emptyTitle:n="No polls found",emptyDescription:r="No polls available at the moment",itemsPerPage:s=10,mode:o="scroll"})=>{const[i,l]=x.useState([]),[d,u]=x.useState(!0),[h,f]=x.useState(1),[p,g]=x.useState(!0),[b,y]=x.useState({}),[S,j]=x.useState({}),{api:P}=Ye(),{execute:w}=Ke(),{execute:I}=Ke(),{showNotification:T}=Ap(),D=cn(),R=async(N=h)=>{try{u(!0);const L=await w(()=>P==null?void 0:P.app.poll.getPolls(e,{page:N,limit:s}),{showErrorToast:!0});if(L){l(N===1?L.items:$=>[...$,...L.items]),f(L.metadata.currentPage),g(L.metadata.hasNext===!0);const z={};L.items.forEach($=>{z[String($.id)]=$.isBookmarked||!1}),y($=>({...$,...z}))}}finally{u(!1)}},_=async(N,L)=>{if(L.stopPropagation(),S[N])return;const z=b[N]||!1;y($=>({...$,[N]:!z})),j($=>({...$,[N]:!0}));try{z?(await I(()=>P.app.bookmark.unbookmarkPoll(N),{showErrorToast:!0}),T("Bookmark removed","success")):(await I(()=>P.app.bookmark.bookmarkPoll(N),{showErrorToast:!0}),T("Poll bookmarked","success"))}catch{y(G=>({...G,[N]:z})),T("Failed to update bookmark","error")}finally{j($=>({...$,[N]:!1}))}};x.useEffect(()=>{l([]),f(1),R(1)},[JSON.stringify(e)]);const k=()=>{!d&&p&&R(h+1)};return i.length===0&&!d?t.jsx(Us,{title:n,description:r}):o==="grid"?t.jsx(C,{sx:{width:"100%"},children:t.jsx(Cs,{dataLength:i.length,next:k,hasMore:p,loader:t.jsx(C,{}),children:t.jsx(F,{container:!0,spacing:3,children:i.map(N=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(ud,{poll:N,showAsPreview:!0,mode:"grid"})},N.id))})})}):t.jsx(C,{id:"polls-scroll-container",sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",overflowY:"scroll",scrollSnapType:"y mandatory",scrollBehavior:"smooth","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none",px:{xs:2,sm:0}},children:t.jsx(C,{sx:{width:"100%",maxWidth:480},children:d&&i.length===0?t.jsx(UW,{}):t.jsx(Cs,{dataLength:i.length,next:k,hasMore:p,loader:t.jsx(C,{}),scrollableTarget:"polls-scroll-container",endMessage:t.jsx(C,{sx:{textAlign:"center",py:4,color:"text.secondary",fontSize:"0.875rem",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:"No more polls to display"}),style:{overflow:"visible",paddingBottom:"64px"},children:i.map(N=>{var z,$,G;const L=((z=N.stats)==null?void 0:z.totalVotes)||0;return t.jsxs(C,{sx:{position:"relative",scrollSnapAlign:"start",scrollSnapStop:"always",height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"},children:[t.jsx(ud,{poll:N,showAsPreview:!0,mode:"scroll"}),t.jsxs(C,{sx:{position:"absolute",right:{xs:8,sm:-60},bottom:"5vh",display:"flex",flexDirection:"column",alignItems:"center",gap:2.5,zIndex:10},children:[N.isTrending&&t.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(Xe,{icon:t.jsx(wl,{sx:{fontSize:"0.875rem"}}),label:"Trending",size:"small",sx:{height:28,bgcolor:he(D.palette.error.main,.9),color:"white",fontWeight:700,fontSize:"0.75rem",backdropFilter:"blur(10px)",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}})}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(Oe,{className:"action-button",size:"medium",onClick:K=>{K.stopPropagation()},sx:{bgcolor:D.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",color:"white",boxShadow:D.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)","&:hover":{bgcolor:he(D.palette.primary.main,.8),transform:"scale(1.1)"},transition:"all 0.2s ease",width:48,height:48},children:t.jsx(GS,{sx:{fontSize:"1.5rem"}})}),t.jsx(v,{variant:"caption",sx:{color:"white",fontWeight:700,fontSize:"0.75rem",mt:.5,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:L>999?`${(L/1e3).toFixed(1)}K`:L})]}),t.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(Oe,{className:"action-button",size:"medium",onClick:K=>_(String(N.id),K),disabled:S[String(N.id)],sx:{bgcolor:D.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",color:"white",boxShadow:D.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)","&:hover":{bgcolor:he(D.palette.primary.main,.8),transform:"scale(1.1)"},"&:disabled":{bgcolor:D.palette.mode==="dark"?he("#fff",.1):he("#000",.4)},transition:"all 0.2s ease",width:48,height:48},children:S[String(N.id)]?t.jsx(Zt,{size:20,sx:{color:"white"}}):b[String(N.id)]?t.jsx(hi,{sx:{fontSize:"1.5rem",color:D.palette.primary.light}}):t.jsx(Jd,{sx:{fontSize:"1.5rem"}})})}),t.jsx(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:t.jsx(Oe,{className:"action-button",size:"medium",onClick:K=>{K.stopPropagation()},sx:{bgcolor:D.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",color:"white",boxShadow:D.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)","&:hover":{bgcolor:D.palette.mode==="dark"?he("#fff",.3):he("#000",.7),transform:"scale(1.1)"},transition:"all 0.2s ease",width:48,height:48},children:t.jsx(Xd,{sx:{fontSize:"1.5rem"}})})}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(C,{sx:{bgcolor:D.palette.mode==="dark"?he("#fff",.2):he("#000",.6),backdropFilter:"blur(10px)",borderRadius:"50%",width:48,height:48,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:D.palette.mode==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.5)"},children:t.jsx(ga,{sx:{fontSize:"1.5rem",color:"white",filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))"}})}),t.jsx(v,{variant:"caption",sx:{color:"white",fontWeight:700,fontSize:"0.75rem",mt:.5,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:(($=N.stats)==null?void 0:$.viewCount)>999?`${(N.stats.viewCount/1e3).toFixed(1)}K`:((G=N.stats)==null?void 0:G.viewCount)||0})]})]})]},N.id)})})})})},zW=({planId:e,channelId:n,tierName:r,tierId:s,onSuccess:o,onError:i,onCancel:l,disabled:d=!1})=>{const[u,h]=Dt.useState(!0),{api:f}=Ye(),p="AUvVGkHGJD8OKekE_4XxFzzKL8a8yLtJ3ZG1woE3OobNy57zyofuPIiUo-zZag0O_L1KPB_u4TB0tuJp";return e?t.jsx(C,{sx:{minHeight:50},children:t.jsxs(FS,{options:{clientId:p,vault:!0,intent:"subscription",currency:"USD"},children:[u&&t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:2},children:t.jsx(Zt,{size:24})}),t.jsx(eu,{style:{layout:"vertical",color:"gold",shape:"rect",label:"subscribe"},disabled:d,onInit:()=>{h(!1)},createSubscription:(g,b)=>(console.log("Creating PayPal subscription for plan:",e),b.subscription.create({plan_id:e,custom_id:`${n}_${s}`,application_context:{shipping_preference:"NO_SHIPPING",user_action:"SUBSCRIBE_NOW"}})),onApprove:async g=>{console.log("PayPal subscription approved:",{subscriptionID:g.subscriptionID,orderID:g.orderID,tierName:r});try{await(f==null?void 0:f.app.subscription.activatePayPalSubscription(n,{tierId:s,paypalSubscriptionId:g.subscriptionID})),o(r,s)}catch(b){console.error("Failed to activate subscription:",b),i(new Error("Failed to activate subscription. Please contact support."))}},onCancel:()=>{console.log("PayPal subscription cancelled by user"),l==null||l()},onError:g=>{console.error("PayPal subscription error:",g),i(new Error(typeof g=="string"?g:"PayPal subscription failed"))}})]})}):t.jsx(lt,{severity:"warning",sx:{borderRadius:2},children:"PayPal plan not configured for this tier. Please contact the channel owner."})},HW=()=>{var ee,Ce,Ae,We,ye,ie,le;const[e,n]=x.useState(null),[r,s]=x.useState(!0),[o,i]=x.useState(!1),[l,d]=x.useState([]),[u,h]=x.useState([]),[f,p]=x.useState(""),[g,b]=x.useState(""),[y,S]=x.useState(0),[j,P]=x.useState(!1),[w,I]=x.useState(null),{id:T}=dr(),D=xt(),{api:R}=Ye(),{profile:_,channelRelations:{hasSubscription:k,getSubscriptionTier:N},actions:{refreshProfile:L}}=Es(),{execute:z}=Ke(),$=k(T??""),G=(ee=N(T??""))==null?void 0:ee.id;console.log("ViewChannel Debug:",{channelId:T,isMember:$,currentTierId:G,subscriptions:_==null?void 0:_.subscriptions,profileLoaded:!!_}),x.useEffect(()=>{(async()=>{if(!T)return;const ge=await z(()=>R==null?void 0:R.app.channel.getChannel(T),{showErrorToast:!0});ge&&n(ge),s(!1)})()},[T,z,R==null?void 0:R.app.channel]);const K=se=>{d(se)},J=se=>{h(se)},q=se=>{se.preventDefault(),p(g.trim())},Q=()=>{b(""),p("")},Y=async se=>{var pe,ke;if(!e||!se)return;const ge=(pe=e.tiers)==null?void 0:pe.find(ne=>ne.id===se);if(ge&&ge.price===0){i(!0);try{await((ke=R==null?void 0:R.app.subscription)==null?void 0:ke.createDirectSubscription(e.id,{tierId:se}))&&await L(),i(!1)}catch(ne){console.error("Subscription failed:",ne),i(!1)}}},oe=se=>{se.price===0?Y(se.id):(I(se),P(!0))},V=async(se,ge)=>{console.log("PayPal subscription approved:",{tierName:se,tierId:ge}),await L(),P(!1),I(null)},Z=se=>{console.error("PayPal subscription error:",se),alert(`Subscription failed: ${se.message}`)},Ee=()=>{console.log("PayPal subscription cancelled")},be=async se=>{var ke,ne,_e;if(!e||!((ke=e.tiers)==null?void 0:ke.find(de=>de.id===se)))return;const pe=(ne=_==null?void 0:_.subscriptions)==null?void 0:ne.find(de=>de.channelId===e.id);if(pe)try{await((_e=R==null?void 0:R.app.subscription)==null?void 0:_e.cancelUserSubscription(pe.id))}catch(de){console.error("Failed to cancel existing subscription:",de)}await Y(se)},ae=async()=>{var pe;if(!e)return;const se=(pe=_==null?void 0:_.subscriptions)==null?void 0:pe.find(ke=>ke.channelId===e.id);if(!se){console.error("No active subscription found for this channel");return}await z(()=>R==null?void 0:R.app.subscription.cancelUserSubscription(se.id),{showSuccessMessage:!0,successMessage:"Membership cancelled successfully!"})&&(console.log("Cancellation successful, refreshing profile..."),await L())};return r?t.jsx(C,{sx:{bgcolor:"background.default",minHeight:"100vh"},children:t.jsxs(St,{maxWidth:"lg",children:[t.jsxs(C,{sx:{position:"relative",mb:8},children:[t.jsx(ue,{variant:"rectangular",sx:{height:{xs:150,md:200},borderRadius:3}}),t.jsx(C,{sx:{position:"absolute",bottom:-50,left:"50%",transform:"translateX(-50%)"},children:t.jsx(ue,{variant:"circular",sx:{width:{xs:100,md:128},height:{xs:100,md:128},border:"4px solid",borderColor:"background.paper"}})})]}),t.jsx(rt,{elevation:0,sx:{mb:4,p:4,borderRadius:3,border:"1px solid",borderColor:"divider"},children:t.jsxs(C,{sx:{textAlign:"center",pt:3},children:[t.jsx(ue,{variant:"text",width:"40%",sx:{mb:2,fontSize:"2.5rem"}}),t.jsxs(me,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:3},children:[t.jsx(ue,{variant:"rounded",width:150,height:32}),t.jsx(ue,{variant:"rounded",width:100,height:32})]}),t.jsx(ue,{variant:"text",width:"70%",sx:{mb:1}}),t.jsx(ue,{variant:"text",width:"60%",sx:{mb:4}}),t.jsx(ue,{variant:"rounded",width:180,height:48,sx:{borderRadius:50}})]})}),t.jsxs(C,{sx:{mb:6},children:[t.jsx(ue,{variant:"text",width:"40%",sx:{mb:4,fontSize:"2rem"}}),t.jsx(F,{container:!0,spacing:3,children:[...Array(3)].map((se,ge)=>t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(Fe,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:[t.jsx(ue,{variant:"rectangular",height:120}),t.jsxs(Ve,{sx:{p:3},children:[t.jsx(ue,{variant:"text",width:"60%",sx:{mx:"auto",mb:2,fontSize:"2rem"}}),t.jsx(ue,{variant:"text",width:"80%",sx:{mb:1}}),t.jsx(ue,{variant:"text",width:"70%",sx:{mb:1}}),t.jsx(ue,{variant:"text",width:"75%",sx:{mb:3}}),t.jsx(ue,{variant:"rounded",height:48,sx:{borderRadius:50}})]})]})},ge))})]})]})}):e?t.jsxs(C,{sx:{bgcolor:"background.default",minHeight:"100vh"},children:[t.jsxs(St,{maxWidth:"lg",children:[t.jsxs(C,{sx:{position:"relative",mb:8},children:[t.jsx(C,{sx:{height:{xs:150,md:200},backgroundImage:e!=null&&e.bannerUrl?`url(${e.bannerUrl})`:void 0,background:e!=null&&e.bannerUrl?void 0:se=>`linear-gradient(135deg, ${se.palette.primary.main} 0%, ${se.palette.primary.light} 100%)`,backgroundSize:"cover",backgroundPosition:"center",borderRadius:3,position:"relative"}}),t.jsx(C,{sx:{position:"absolute",bottom:-50,left:"50%",transform:"translateX(-50%)"},children:t.jsx(Sn,{src:e.logoUrl,sx:{width:{xs:100,md:128},height:{xs:100,md:128},border:"4px solid",borderColor:"background.paper",boxShadow:3}})})]}),t.jsx(rt,{elevation:0,sx:{mb:4,p:{xs:3,md:4},borderRadius:3,border:"1px solid",borderColor:"divider"},children:t.jsxs(C,{sx:{textAlign:"center",pt:3},children:[t.jsx(v,{variant:"h3",gutterBottom:!0,sx:{fontWeight:700,fontSize:{xs:"2rem",md:"2.5rem"},color:"text.primary",mb:1},children:e.name}),t.jsxs(me,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:3},children:[t.jsx(Xe,{icon:t.jsx(Nm,{}),label:`${(Ae=(Ce=e.stats)==null?void 0:Ce.activeSubscriptionCount)==null?void 0:Ae.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:1})} subscribers`,sx:{fontWeight:600,bgcolor:he("#0b6cff",.1),color:"#0b6cff","& .MuiChip-icon":{color:"#0b6cff"}}}),t.jsx(Xe,{icon:t.jsx(VS,{}),label:`${((We=e.tiers)==null?void 0:We.length)||0} tiers`,sx:{fontWeight:600,bgcolor:he("#589aff",.1),color:"#589aff","& .MuiChip-icon":{color:"#589aff"}}})]}),t.jsx(v,{variant:"body1",sx:{mb:4,maxWidth:800,color:"text.secondary",lineHeight:1.8,fontSize:"1.1rem"},children:e.description}),t.jsx(ce,{variant:$?"outlined":"contained",size:"large",onClick:()=>{var se,ge;return $?ae():Y((ge=(se=e==null?void 0:e.tiers)==null?void 0:se.find(pe=>pe.isDefault))==null?void 0:ge.id)},disabled:o,startIcon:o&&t.jsx(Zt,{size:20,color:"inherit"}),sx:{px:4,py:1.5,borderRadius:50,fontSize:"1rem",fontWeight:600,textTransform:"none",boxShadow:$?"none":"0 4px 14px 0 rgba(11, 108, 255, 0.39)","&:hover":{boxShadow:$?"none":"0 6px 20px rgba(11, 108, 255, 0.5)"}},children:o?"Processing...":$?"Cancel Membership":"Join Channel"})]})}),t.jsxs(rt,{elevation:0,sx:{mb:4,borderRadius:3,border:"1px solid",borderColor:"divider",overflow:"hidden"},children:[t.jsxs(Bs,{value:y,onChange:(se,ge)=>S(ge),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem",minHeight:64}},children:[t.jsx(An,{icon:t.jsx(il,{}),iconPosition:"start",label:"News"}),t.jsx(An,{icon:t.jsx(Ud,{}),iconPosition:"start",label:"Polls"}),t.jsx(An,{icon:t.jsx(ni,{}),iconPosition:"start",label:"Contribute"}),t.jsx(An,{icon:t.jsx(US,{}),iconPosition:"start",label:"Connect"}),t.jsx(An,{icon:t.jsx(zS,{}),iconPosition:"start",label:"Budget"}),t.jsx(An,{icon:t.jsx(Hd,{}),iconPosition:"start",label:"About"})]}),t.jsxs(C,{sx:{p:4},children:[y===0&&t.jsxs(C,{children:[t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:1},children:"Channel News"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Latest news from this channel"}),t.jsx(cd,{selectedTags:l,onTagsChange:K,contentType:"news",maxTags:5,showCounts:!1,horizontal:!0})]}),t.jsx(Rf,{filters:{channel:e==null?void 0:e.id,...l.length>0&&{tags:l}},emptyTitle:"No news published yet",emptyDescription:"This channel hasn't published any news articles yet",showSearch:!0,mode:"grid"})]}),y===1&&t.jsxs(C,{children:[t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:1},children:"Channel Polls"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Vote on polls from this channel"}),t.jsx(C,{sx:{mb:3},children:t.jsx("form",{onSubmit:q,children:t.jsx(et,{fullWidth:!0,placeholder:"Search polls by question or content...",value:g,onChange:se=>b(se.target.value),InputProps:{startAdornment:t.jsx(zr,{position:"start",children:t.jsx(Bd,{color:"action"})}),endAdornment:g&&t.jsx(zr,{position:"end",children:t.jsx(Oe,{size:"small",onClick:Q,edge:"end",children:t.jsx(mm,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"background.paper"}}})})}),t.jsx(cd,{selectedTags:u,onTagsChange:J,contentType:"polls",maxTags:5,showCounts:!1,horizontal:!0})]}),t.jsx(C,{children:t.jsx(YS,{filters:{channel:e==null?void 0:e.id,...u.length>0&&{tags:u},...f&&{query:f}},emptyTitle:"No polls found",emptyDescription:"This channel hasn't created any polls yet",mode:"grid"})})]}),y===2&&t.jsx(C,{children:t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Become a financial contributor"})}),y===3&&t.jsxs(C,{children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Connect with us"}),t.jsx(me,{spacing:2,children:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Oe,{color:"primary",size:"small",children:t.jsx(HS,{})}),t.jsx(v,{children:"Contact via membership"})]})})]}),y===4&&t.jsxs(C,{children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"Budget"}),t.jsx(v,{color:"text.secondary",children:"Financial information will be displayed here"})]}),y===5&&t.jsxs(C,{children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:3},children:"About"}),t.jsxs(me,{spacing:3,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"DESCRIPTION"}),t.jsx(v,{variant:"body1",sx:{lineHeight:1.8},children:e.description})]}),t.jsx(Mt,{}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"STATISTICS"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:6,md:3,children:t.jsxs(rt,{variant:"outlined",sx:{p:2,textAlign:"center"},children:[t.jsx(v,{variant:"h4",color:"primary",sx:{fontWeight:700},children:((ye=e.stats)==null?void 0:ye.activeSubscriptionCount)||0}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Subscribers"})]})}),t.jsx(F,{item:!0,xs:6,md:3,children:t.jsxs(rt,{variant:"outlined",sx:{p:2,textAlign:"center"},children:[t.jsx(v,{variant:"h4",color:"primary",sx:{fontWeight:700},children:((ie=e.tiers)==null?void 0:ie.length)||0}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Tiers"})]})})]})]})]})]})]})]}),y===2&&t.jsxs(C,{sx:{mb:6},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,sx:{fontSize:{xs:"1.75rem",md:"2rem"},fontWeight:700,mb:4,textAlign:"center"},children:"Membership Tiers"}),t.jsx(F,{container:!0,spacing:3,children:(le=e.tiers)==null?void 0:le.map(se=>t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(Fe,{elevation:G===se.id?8:2,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,overflow:"hidden",transition:"all 0.3s ease",border:G===se.id?"2px solid #0b6cff":"1px solid #e0e0e0","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(0,0,0,0.15)"}},children:[t.jsxs(C,{sx:{height:120,background:G===se.id?"linear-gradient(135deg, #0b6cff 0%, #589aff 100%)":"linear-gradient(135deg, #589aff 0%, #7bb0ff 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:[G===se.id&&t.jsx(Xe,{label:"CURRENT PLAN",size:"small",sx:{position:"absolute",top:12,right:12,bgcolor:"white",color:"#0b6cff",fontWeight:700,fontSize:"0.7rem"}}),!G&&se.isDefault&&t.jsx(Xe,{label:"POPULAR",size:"small",sx:{position:"absolute",top:12,right:12,bgcolor:"white",color:"#589aff",fontWeight:700,fontSize:"0.7rem"}}),t.jsx(v,{variant:"h5",sx:{color:"white",fontWeight:700,textAlign:"center"},children:se.name})]}),t.jsxs(Ve,{sx:{flexGrow:1,p:3,display:"flex",flexDirection:"column"},children:[t.jsx(C,{sx:{mb:3,textAlign:"center"},children:t.jsxs(v,{variant:"h3",sx:{fontWeight:700,color:"text.primary",display:"flex",alignItems:"baseline",justifyContent:"center",gap:.5},children:[t.jsx(v,{component:"span",sx:{fontSize:"1.5rem",fontWeight:500},children:"$"}),se.price,t.jsx(v,{component:"span",sx:{fontSize:"1rem",fontWeight:400,color:"text.secondary"},children:"/month"})]})}),t.jsx(Mt,{sx:{mb:3}}),t.jsx(v,{variant:"body2",sx:{mb:3,color:"text.secondary",minHeight:60,lineHeight:1.7,flexGrow:1},children:se.description}),G===se.id?t.jsx(ce,{variant:"outlined",fullWidth:!0,size:"large",disabled:!0,sx:{py:1.5,borderRadius:50,textTransform:"none",fontWeight:600,fontSize:"1rem"},children:"Current Plan"}):t.jsx(ce,{variant:"contained",fullWidth:!0,size:"large",onClick:()=>$?be(se.id):oe(se),disabled:o,sx:{py:1.5,borderRadius:50,textTransform:"none",fontWeight:600,fontSize:"1rem",boxShadow:"0 4px 12px rgba(11, 108, 255, 0.3)","&:hover":{boxShadow:"0 6px 16px rgba(11, 108, 255, 0.4)"}},startIcon:o&&t.jsx(Zt,{size:20,color:"inherit"}),children:o?"Processing...":$?"Switch to This Plan":se.price===0?"Join Free":"Subscribe"})]})]})},se.id))})]})]}),t.jsxs(Gt,{open:j,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Qt,{children:["Subscribe to ",w==null?void 0:w.name]}),t.jsx(Yt,{children:w&&t.jsxs(C,{children:[t.jsxs(C,{sx:{mb:3},children:[t.jsxs(v,{variant:"h5",sx:{fontWeight:600,mb:1},children:[new Intl.NumberFormat("en-US",{style:"currency",currency:w.currency.toUpperCase()}).format(w.price/100),t.jsx(v,{component:"span",variant:"body2",color:"text.secondary",children:"/month"})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:w.description})]}),t.jsx(Mt,{sx:{my:2}}),t.jsx(v,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"Select Payment Method:"}),w.paymentConfigs&&w.paymentConfigs.length>0?t.jsx(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:w.paymentConfigs.map(se=>{var ge;return((ge=se.provider)==null?void 0:ge.code)==="paypal"&&se.isActive?t.jsx(C,{children:t.jsx(zW,{planId:se.providerPlanId,channelId:e.id,tierName:w.name,tierId:w.id,onSuccess:V,onError:Z,onCancel:Ee,disabled:o})},se.id):null})}):t.jsx(v,{variant:"body2",color:"error",children:"No payment methods configured for this tier. Please contact the channel owner."})]})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>P(!1),children:"Cancel"})})]})]}):t.jsx(C,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(St,{maxWidth:"sm",children:t.jsxs(rt,{elevation:3,sx:{p:6,borderRadius:3,textAlign:"center"},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700,color:"text.primary"},children:"Channel not found"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"The channel you're looking for doesn't exist or has been removed."}),t.jsx(ce,{variant:"contained",onClick:()=>D("/app"),sx:{borderRadius:50,px:4,py:1.5,textTransform:"none",fontWeight:600},children:"Go Home"})]})})})},GW=()=>t.jsx(C,{sx:{width:"100%",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",position:"fixed",top:64,left:0,right:0,bottom:0,margin:0,padding:0,zIndex:1},children:t.jsx(C,{sx:{flex:1,overflow:"hidden"},children:t.jsx(YS,{filters:{},emptyTitle:"No polls found",emptyDescription:"There are no polls available at the moment.",mode:"scroll"})})}),YW=({poll:e,onVote:n,userVote:r,showResults:s=!1,disabled:o=!1})=>{var f;const i=cn(),[l,d]=x.useState(null),u=((f=e.stats)==null?void 0:f.totalVotes)||0,h=p=>{o||d(p)};return t.jsx(C,{children:t.jsx(me,{spacing:2,sx:{mb:2},children:e.options.map(p=>{const g=p.voteCount||0,b=u>0?g/u*100:0,y=r===p.id,S=l===p.id;return t.jsxs(C,{onClick:j=>{j.preventDefault(),j.stopPropagation(),!s&&!o&&n&&n(String(e.id),p.id)},onMouseEnter:()=>h(p.id),onMouseLeave:()=>h(null),sx:{position:"relative",cursor:s||o?"default":"pointer",transition:"all 0.2s ease",transform:S?"translateX(4px)":"none",opacity:o?.6:1},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:.5,px:2,py:1.5,border:"1px solid",borderColor:y?"primary.main":S?he(i.palette.primary.main,.5):"divider",borderRadius:1,bgcolor:y?he(i.palette.primary.main,.05):"transparent",transition:"all 0.2s ease","&:hover":!s&&!o&&{borderColor:"primary.main",boxShadow:`0 2px 8px ${he(i.palette.primary.main,.15)}`}},children:[t.jsx(C,{sx:{width:24,height:24,minWidth:24,minHeight:24,flexShrink:0,borderRadius:"50%",border:"2px solid",borderColor:y?"primary.main":S?he(i.palette.primary.main,.5):"divider",mr:2,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:y&&t.jsx(C,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"primary.main"}})}),t.jsx(v,{variant:"body1",sx:{flex:1,fontWeight:y?600:400,color:y?"primary.main":"text.primary",wordBreak:"break-word"},children:p.text}),s&&t.jsxs(C,{sx:{display:"flex",alignItems:"center",ml:2,minWidth:80,justifyContent:"flex-end",flexShrink:0},children:[t.jsxs(v,{variant:"body2",sx:{fontWeight:600,color:y?"primary.main":"text.secondary",mr:1},children:[b.toFixed(1),"%"]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["(",g,")"]})]}),y&&!s&&t.jsx(ti,{sx:{ml:1,color:"primary.main",fontSize:"1.2rem",flexShrink:0}})]}),s&&t.jsx(Ja,{variant:"determinate",value:b,sx:{height:8,borderRadius:4,bgcolor:he(i.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4,bgcolor:y?"primary.main":he(i.palette.primary.main,.6)}}})]},p.id)})})})};var zm={},qW=Qe;Object.defineProperty(zm,"__esModule",{value:!0});var qS=zm.default=void 0,KW=qW(Ze()),JW=t;qS=zm.default=(0,KW.default)((0,JW.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM18 14H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Comment");const XW=()=>t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[t.jsx(ue,{variant:"text",width:"60%",height:40}),t.jsx(me,{direction:"row",spacing:1,children:[1,2].map(e=>t.jsx(ue,{variant:"circular",width:40,height:40},e))})]}),t.jsxs(me,{spacing:2,sx:{mb:3},children:[t.jsx(ue,{variant:"text",width:"100%"}),t.jsx(ue,{variant:"text",width:"95%"}),t.jsx(ue,{variant:"text",width:"90%"})]}),t.jsx(me,{spacing:2,children:[1,2,3,4].map(e=>t.jsx(ue,{variant:"rectangular",height:60,sx:{borderRadius:1}},e))})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"50%",height:32,sx:{mb:2}}),t.jsx(me,{spacing:2,children:[1,2,3].map(e=>t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[t.jsx(ue,{variant:"text",width:"40%"}),t.jsx(ue,{variant:"text",width:"20%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:8,sx:{borderRadius:1}})]},e))})]})})})]})}),QW=()=>{var K,J,q;const{id:e}=dr(),{api:n}=Ye(),r=cn(),[s,o]=x.useState(null),[i,l]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState(!1),[p,g]=x.useState(null),[b,y]=x.useState(null),{execute:S}=Ke(),[j,P]=x.useState(!1),[w,I]=x.useState(null),[T,D]=x.useState(!1),R=(s==null?void 0:s.isPremium)&&(s==null?void 0:s.accessInfo)&&!s.accessInfo.canAccess,_=async Q=>{try{D(!0);const Y=await(n==null?void 0:n.app.funding.getFund("poll",Q));I(Y)}catch(Y){console.error("Failed to load fund data:",Y)}finally{D(!1)}};x.useEffect(()=>{(async()=>{if(!e)return;l(!0);const Y=await S(()=>n==null?void 0:n.app.poll.get(e),{showErrorToast:!0});if(Y){o(Y);const oe=await S(()=>n==null?void 0:n.app.poll.getUserVote(e),{showErrorToast:!1});oe!=null&&oe.optionId&&u(oe.optionId);const V=await S(()=>n==null?void 0:n.app.poll.checkVotingEligibility(e),{showErrorToast:!1});V&&y(V),_(e)}l(!1)})()},[e,S]);const k=async(Q,Y)=>{if(!(b!=null&&b.canVote)){g((b==null?void 0:b.reason)||"You cannot vote on this poll");return}if(await S(()=>n==null?void 0:n.app.poll.vote(Q,{optionId:Y}),{showSuccessMessage:!0,successMessage:"Vote recorded successfully!"})){u(Y);const V=await S(()=>n==null?void 0:n.app.poll.get(Q),{showErrorToast:!0});V&&o(V)}},N=()=>{navigator.share?navigator.share({title:s==null?void 0:s.title,text:s==null?void 0:s.description,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href)},L=()=>{f(!h)},z=async()=>{P(!0)},$=async Q=>{e&&await _(e),console.log("Contribution successful:",Q)},G=()=>!s||!w?null:{id:w.id,title:s.title,currentAmount:w.currentAmount/100,goalAmount:w.goalAmount?w.goalAmount/100:void 0,currency:w.currency,contributorCount:0,description:"Support quality journalism by funding this poll"};return i?t.jsx(XW,{}):s?t.jsxs(St,{maxWidth:"lg",sx:{mt:4},children:[t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsx(C,{sx:{mb:3},children:t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[t.jsxs(C,{component:er,to:fe.APP_CHANNEL_VIEW.replace(":channelId",s.channel.id),sx:{display:"inline-flex",alignItems:"center",bgcolor:"primary.main",color:"primary.contrastText",px:2,py:1,borderRadius:2,textDecoration:"none",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"primary.dark",transform:"translateY(-2px)"}},children:[t.jsx(Il,{sx:{mr:1}}),t.jsx(v,{variant:"subtitle2",children:s.channel.name})]}),t.jsxs(C,{sx:{display:"inline-flex",alignItems:"center",bgcolor:"background.paper",px:2,py:1,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[t.jsx(Cl,{sx:{mr:1,fontSize:"0.9rem"}}),t.jsx(v,{variant:"caption",children:s.creator.displayName})]})]}),t.jsxs(me,{direction:"row",spacing:1,children:[t.jsx(Oe,{onClick:N,sx:{color:"text.secondary","&:hover":{bgcolor:he(r.palette.primary.main,.05)}},children:t.jsx(Xd,{})}),t.jsx(Oe,{onClick:L,sx:{color:h?"primary.main":"text.secondary","&:hover":{bgcolor:he(r.palette.primary.main,.05)}},children:h?t.jsx(hi,{}):t.jsx(Jd,{})})]})]})})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsxs(Fe,{children:[s.media&&s.media.length>0&&t.jsxs(C,{sx:{position:"relative",width:"100%",paddingTop:"56.25%",overflow:"hidden",borderRadius:"4px 4px 0 0"},children:[t.jsx(C,{component:s.media[0].format===Eo.VIDEO?"video":"img",src:s.media[0].url,alt:s.media[0].caption||s.title,controls:s.media[0].format===Eo.VIDEO,autoPlay:s.media[0].format===Eo.VIDEO,loop:s.media[0].format===Eo.VIDEO,muted:s.media[0].format===Eo.VIDEO,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),s.media[0].caption&&t.jsx(C,{sx:{position:"absolute",bottom:0,left:0,right:0,bgcolor:he(r.palette.common.black,.7),color:"white",p:1,backdropFilter:"blur(4px)"},children:t.jsx(v,{variant:"caption",children:s.media[0].caption})})]}),t.jsxs(Ve,{children:[t.jsx(v,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700,mb:3},children:s.title}),b&&!b.canVote&&t.jsx(lt,{severity:d?"info":"warning",sx:{mb:3},icon:d?t.jsx(ti,{}):void 0,children:b.reason||(d?"You have already voted on this poll":"You are not eligible to vote on this poll")}),t.jsx(YW,{poll:s,onVote:k,userVote:d,showResults:!!d,disabled:!(b!=null&&b.canVote)})]})]})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(me,{spacing:3,children:[s.description&&t.jsxs(rt,{sx:{p:2},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"About this Poll"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:s.description})]}),R?t.jsxs(rt,{elevation:3,sx:{p:3,textAlign:"center",bgcolor:Q=>he(Q.palette.warning.main,.05),border:Q=>`2px solid ${he(Q.palette.warning.main,.3)}`,borderRadius:3},children:[t.jsx(C,{sx:{width:60,height:60,borderRadius:"50%",bgcolor:Q=>he(Q.palette.warning.main,.1),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",mb:2},children:t.jsx(ol,{sx:{fontSize:30,color:"warning.main"}})}),t.jsx(v,{variant:"h6",gutterBottom:!0,fontWeight:"bold",color:"warning.dark",children:"Premium Poll Statistics"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:((K=s.accessInfo)==null?void 0:K.reason)||"Subscribe to view detailed poll statistics and results."}),((J=s.accessInfo)==null?void 0:J.requiredTierName)&&t.jsxs(lt,{severity:"info",sx:{mb:2},children:["Required tier: ",t.jsx("strong",{children:s.accessInfo.requiredTierName})]}),t.jsxs(C,{sx:{mb:2},children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Subscribe to unlock:"}),t.jsx(me,{spacing:.5,alignItems:"flex-start",sx:{mx:"auto",display:"inline-flex"},children:["View vote counts","See poll results","Participate in voting","Access detailed statistics"].map((Q,Y)=>t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ti,{color:"success",fontSize:"small"}),t.jsx(v,{variant:"body2",children:Q})]},Y))})]}),t.jsx(ce,{component:er,to:fe.APP_CHANNEL_VIEW.replace(":channelId",s.channelId),variant:"contained",color:"warning",size:"medium",startIcon:t.jsx(Zd,{}),sx:{px:3,py:1.5,borderRadius:2,fontWeight:"bold",textTransform:"none",fontSize:"0.95rem"},children:"View Subscription Options"})]}):t.jsxs(rt,{sx:{p:2},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Poll Statistics"}),t.jsxs(me,{spacing:2,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Total Votes"}),t.jsx(v,{variant:"h4",children:((q=s.stats)==null?void 0:q.totalVotes)??0})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Time Remaining"}),t.jsx(v,{variant:"body1",children:s.endDate?$r(new Date(s.endDate),{addSuffix:!0}):"No end date"})]})]})]}),t.jsx(rt,{elevation:2,sx:{p:3,borderRadius:2,border:"2px solid",borderColor:"primary.main",bgcolor:Q=>he(Q.palette.primary.main,.05)},children:t.jsxs(me,{spacing:2,children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ni,{color:"primary",fontSize:"large"}),t.jsx(v,{variant:"h6",fontWeight:"bold",color:"primary",children:"Fund this Poll"})]}),w&&!T?t.jsxs(C,{children:[t.jsx(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Current Funding"}),t.jsxs(v,{variant:"h5",fontWeight:"bold",color:"primary.main",children:[w.currency," ",(w.currentAmount/100).toFixed(2)]}),w.goalAmount&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Goal: ",w.currency," ",(w.goalAmount/100).toFixed(2)]})]}):T?t.jsx(ue,{variant:"rectangular",height:60}):t.jsx(v,{variant:"body2",color:"text.secondary",children:"Be the first to fund this poll"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Support quality journalism by contributing to this poll"}),t.jsx(ce,{variant:"contained",color:"primary",fullWidth:!0,size:"large",startIcon:t.jsx(ni,{}),onClick:z,disabled:!s,sx:{py:1.5,fontWeight:"bold",textTransform:"none",fontSize:"1rem"},children:"Fund Now"})]})}),t.jsxs(rt,{sx:{p:2},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Comments"}),t.jsx(ce,{startIcon:t.jsx(qS,{}),variant:"outlined",fullWidth:!0,sx:{mt:1,textTransform:"none",borderRadius:2},children:"Add a Comment"})]})]})})]}),s&&w&&t.jsx(WS,{open:j,onClose:()=>P(!1),onSuccess:$,contentType:"poll",contentId:s.id,fundingData:G()}),t.jsx(Dv,{open:!!p,autoHideDuration:6e3,onClose:()=>g(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(lt,{onClose:()=>g(null),severity:"error",sx:{width:"100%"},children:p})})]}):t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(v,{variant:"h4",children:"Poll not found"})})},ZW=()=>{const[e,n]=x.useState(null),[r,s]=x.useState(!0),[o,i]=x.useState(!1),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState(null),[g,b]=x.useState({}),{api:y}=Ye(),{execute:S}=Ke();x.useEffect(()=>{j()},[]);const j=async()=>{s(!0),h(null);const D=await S(()=>y.app.account.getProfile(),{showErrorToast:!0});D&&(n(D),b({displayName:D.displayName,photoUrl:D.photoUrl})),s(!1)},P=()=>{d(!0),h(null),p(null)},w=()=>{d(!1),e&&b({displayName:e.displayName,photoUrl:e.photoUrl}),h(null),p(null)},I=async()=>{i(!0),h(null),p(null);const D=await S(()=>y.app.account.updateProfile(g),{showSuccessMessage:!0,successMessage:"Profile updated successfully"});D&&(n(D),d(!1)),i(!1)},T=D=>R=>{b(_=>({..._,[D]:R.target.value}))};return r?t.jsx(C,{sx:{p:3},children:t.jsxs(me,{spacing:3,alignItems:"center",children:[t.jsx(ue,{variant:"circular",width:120,height:120}),t.jsx(ue,{variant:"text",width:"50%",height:40}),t.jsx(ue,{variant:"rectangular",width:"100%",height:56}),t.jsx(ue,{variant:"rectangular",width:"100%",height:56})]})}):e?t.jsx(C,{sx:{p:3},children:t.jsxs(me,{spacing:3,children:[u&&t.jsx(lt,{severity:"error",children:u}),f&&t.jsx(lt,{severity:"success",children:f}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[t.jsx(Sn,{src:g.photoUrl||e.photoUrl,sx:{width:120,height:120,mb:2}}),t.jsx(v,{variant:"h6",children:e.email}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Joined ",new Date(e.createdAt||"").toLocaleDateString()]})]}),t.jsx(et,{label:"Display Name",value:g.displayName||"",onChange:T("displayName"),disabled:!l,fullWidth:!0,variant:"outlined"}),t.jsx(et,{label:"Photo URL",value:g.photoUrl||"",onChange:T("photoUrl"),disabled:!l,fullWidth:!0,variant:"outlined",placeholder:"https://example.com/photo.jpg"}),t.jsx(C,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:l?t.jsxs(t.Fragment,{children:[t.jsx(ce,{variant:"outlined",startIcon:t.jsx(Fs,{}),onClick:w,disabled:o,children:"Cancel"}),t.jsx(ce,{variant:"contained",startIcon:o?t.jsx(Zt,{size:20}):t.jsx(tp,{}),onClick:I,disabled:o,children:"Save Changes"})]}):t.jsx(ce,{variant:"contained",startIcon:t.jsx(ws,{}),onClick:P,children:"Edit Profile"})})]})}):t.jsx(C,{sx:{p:3},children:t.jsx(lt,{severity:"error",children:"Failed to load profile"})})},Lr={PAYPAL:"paypal",STRIPE:"stripe",IYZICO:"iyzico",BANK_TRANSFER:"bank_transfer",CREDIT_CARD:"credit_card",OTHER:"other"};var eB={VITE_API_URL:"https://api.metajourno.com",VITE_PAYPAL_CLIENT_ID:"AUvVGkHGJD8OKekE_4XxFzzKL8a8yLtJ3ZG1woE3OobNy57zyofuPIiUo-zZag0O_L1KPB_u4TB0tuJp",VITE_PAYPAL_MODE:"sandbox",VITE_ENV:"staging",VITE_PAYPAL_MERCHANT_ID:"4VNUQ7KFJXJG8",BASE_URL:"/journalist-material-client/",MODE:"staging",DEV:!1,PROD:!0,SSR:!1};const tB=({onSuccess:e,onError:n,disabled:r=!1})=>{const[s,o]=x.useState(!1),[i,l]=x.useState(!1),[d,u]=x.useState(null),h=x.useRef(null),{api:f}=Ye(),p="AUvVGkHGJD8OKekE_4XxFzzKL8a8yLtJ3ZG1woE3OobNy57zyofuPIiUo-zZag0O_L1KPB_u4TB0tuJp",g="4VNUQ7KFJXJG8",b=eB.VITE_PAYPAL_ENV||"sandbox";return x.useEffect(()=>{var S;if((S=window.paypal)!=null&&S.PayoutsAAC){o(!0);return}const y=document.createElement("script");return y.src="https://www.paypalobjects.com/payouts/js/payouts_aac.js",y.async=!0,y.onload=()=>{o(!0)},y.onerror=()=>{const j="Failed to load PayPal Payouts SDK";u(j),n(j)},document.head.appendChild(y),()=>{document.head.contains(y)&&document.head.removeChild(y)}},[n]),x.useEffect(()=>{var y;if(!(!s||r||!h.current||!((y=window.paypal)!=null&&y.PayoutsAAC))){h.current&&(h.current.innerHTML="");try{window.paypal.PayoutsAAC.render({env:b,clientId:{sandbox:p},merchantId:g,pageType:"login",onLogin:async S=>{if(S.err){console.error("PayPal AAC error:",S.err);const j="Failed to connect PayPal account";u(j),n(j),l(!1);return}try{l(!0),u(null);const j=S.body.code,P=await f.app.account.exchangePayPalAuthCode(j);if(!P.payerId||!P.email)throw new Error("Failed to retrieve payer information from PayPal");await f.app.account.savePayPalPayoutMethod({payerId:P.payerId,email:P.email}),e(P)}catch(j){const P=j.message||"Failed to save PayPal payout method";u(P),n(P)}finally{l(!1)}}},`#${h.current.id}`)}catch(S){console.error("Error rendering PayPal AAC:",S);const j="Failed to initialize PayPal connection";u(j),n(j)}}},[s,r,p,g,b,f,e,n]),s?t.jsxs(C,{sx:{textAlign:"center",py:3},children:[d&&t.jsx(lt,{severity:"error",sx:{mb:2},children:d}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Connect your PayPal account to receive payouts securely"}),t.jsx("div",{id:"paypal-payout-connect-container",ref:h,style:{minHeight:"50px"}}),i&&t.jsxs(C,{sx:{mt:2,display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t.jsx(Zt,{size:16}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Connecting to PayPal..."})]}),t.jsx(v,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:2},children:"Your PayPal email will be used to send you payouts"})]}):t.jsxs(C,{sx:{textAlign:"center",py:3},children:[t.jsx(Zt,{size:24}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Loading PayPal..."})]})},nB=({onSuccess:e,onError:n,disabled:r=!1})=>{const[s,o]=x.useState(!1),[i,l]=x.useState(null),[d,u]=x.useState(null),[h,f]=x.useState(null),{api:p}=Ye();x.useEffect(()=>{(async()=>{try{const j=await p.app.account.getProfile();if(j!=null&&j.displayName&&(j!=null&&j.email)){const P=j.displayName.trim().split(" "),w=P[0]||"User",I=P.length>1?P.slice(1).join(" "):"Name";f({name:w,surname:I,email:j.email})}else l("Unable to retrieve user information. Please ensure your profile is complete.")}catch(j){console.error("Failed to fetch user info:",j),l("Failed to retrieve user information")}})()},[p]);const g=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"127.0.0.1"}catch{return"127.0.0.1"}},b=async()=>{if(!h){l("User information is not available");return}try{o(!0),l(null);const S=await g(),j=await p.app.iyzicoToken.initializeTokenization({name:h.name,surname:h.surname,email:h.email,ip:S});if(!j.sessionToken)throw new Error("Failed to initialize Iyzico session");if(u(j.sessionToken),j.checkoutFormContent){const P=window.open("","IyzicoCheckout","width=800,height=600");if(P){P.document.write(j.checkoutFormContent),P.document.close(),window.addEventListener("message",y,!1);const w=setInterval(()=>{P.closed&&(clearInterval(w),window.removeEventListener("message",y,!1),o(!1),l("Payment window was closed"))},1e3)}else throw new Error("Failed to open payment window. Please allow popups.")}else if(j.paymentPageUrl)window.open(j.paymentPageUrl,"IyzicoCheckout","width=800,height=600");else throw new Error("No checkout method provided by Iyzico")}catch(S){const j=S.message||"Failed to initialize Iyzico payment";l(j),n(j),o(!1)}},y=async S=>{if(S.origin===window.location.origin)if(S.data&&S.data.type==="IYZICO_CHECKOUT_SUCCESS")try{if(!d||!h)throw new Error("Session information is missing");const j=await g(),P=await p.app.iyzicoToken.savePaymentMethod({sessionToken:d,name:h.name,surname:h.surname,email:h.email,ip:j});window.removeEventListener("message",y,!1),o(!1),e(P)}catch(j){const P=j.message||"Failed to save Iyzico payment method";l(P),n(P),o(!1)}else if(S.data&&S.data.type==="IYZICO_CHECKOUT_ERROR"){window.removeEventListener("message",y,!1),o(!1);const j=S.data.message||"Payment failed";l(j),n(j)}else S.data&&S.data.type==="IYZICO_CHECKOUT_CANCEL"&&(window.removeEventListener("message",y,!1),o(!1),console.log("Iyzico payment cancelled by user"))};return h?t.jsxs(C,{sx:{textAlign:"center",py:3},children:[i&&t.jsx(lt,{severity:"error",sx:{mb:2},children:i}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Kartnz gvenli bir ekilde Iyzico ile kaydedin"}),t.jsx(ce,{variant:"contained",onClick:b,disabled:r||s||!h,sx:{backgroundColor:"#1B4332",color:"white","&:hover":{backgroundColor:"#2D5A3D"},"&:disabled":{backgroundColor:"#ccc"},minHeight:"48px",minWidth:"200px",fontWeight:"bold"},children:s?"yzico ile Balanyor...":"yzico ile deme Ekle"}),s&&t.jsx(v,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:2},children:"Gvenli deme sayfasna ynlendiriliyorsunuz..."}),t.jsx(v,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:2},children:"Kart bilgileriniz Iyzico'nun gvenli sisteminde saklanr"}),t.jsx(v,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:1},children:"lem tamamlandktan sonra pop-up pencereyi kapatabilirsiniz"})]}):t.jsx(C,{sx:{textAlign:"center",py:2},children:t.jsx(v,{variant:"body2",color:"text.secondary",children:"Loading user information..."})})},rB=()=>{const e=cn(),[n,r]=x.useState([]),[s,o]=x.useState([]),[i,l]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState(null),[p,g]=x.useState(!1),[b,y]=x.useState(null),[S,j]=x.useState(!1),[P,w]=x.useState(!1),{api:I}=Ye(),{execute:T}=Ke();x.useEffect(()=>{D()},[]);const D=async()=>{l(!0),u(null);const[V,Z]=await Promise.all([T(()=>I.app.account.getPayoutMethods(),{showErrorToast:!0}),T(()=>I.app.account.getAvailablePayoutMethods(),{showErrorToast:!1})]);V&&r(V.items??[]),Z&&o(Z),l(!1)},R=async V=>{u(null),await T(()=>I.app.account.setDefaultPayoutMethod(V.id),{showSuccessMessage:!0,successMessage:"Default payout method updated"})&&await D()},_=async()=>{if(!b)return;u(null),await T(()=>I.app.account.deletePayoutMethod(b.id),{showSuccessMessage:!0,successMessage:"Payout method deleted successfully"})&&(await D(),g(!1),y(null))},k=V=>{y(V),g(!0)},N=()=>{g(!1),y(null)},L=async()=>{await D(),f("Payout method added successfully")},z=()=>{j(!0)},$=async()=>{try{j(!1),f("Connecting PayPal account..."),await D(),f("PayPal account connected successfully!")}catch(V){console.error("Error refreshing payout methods:",V),f("PayPal account connected successfully!")}},G=V=>{u(V),j(!1)},K=()=>{w(!0)},J=async()=>{w(!1),await L(),f("Iyzico card added successfully!")},q=V=>{u(V),w(!1)},Q=V=>{switch(V){case Lr.PAYPAL:return t.jsx(Sn,{sx:{bgcolor:"#0070ba",width:40,height:40,fontSize:"12px",fontWeight:"bold",color:"white"},children:"PayPal"});case Lr.IYZICO:return t.jsx(Sn,{sx:{bgcolor:"#00a650",width:40,height:40,fontSize:"11px",fontWeight:"bold",color:"white"},children:"iyzico"});default:return t.jsx(Sn,{sx:{bgcolor:e.palette.grey[400],width:40,height:40},children:t.jsx(_v,{})})}},Y=V=>{var Ee,be,ae,ee,Ce,Ae;switch((Ee=V.provider)==null?void 0:Ee.code){case Lr.PAYPAL:return((be=V.payoutDetails)==null?void 0:be.email)||V.payoutIdentifier;case Lr.IYZICO:{const We=((ae=V.payoutDetails)==null?void 0:ae.cardAssociation)||"Card",ye=((ee=V.payoutDetails)==null?void 0:ee.lastFourDigits)||"****";return`${We}  ${ye}`}case Lr.BANK_TRANSFER:return((Ce=V.payoutDetails)==null?void 0:Ce.iban)||((Ae=V.payoutDetails)==null?void 0:Ae.accountNumber)||V.payoutIdentifier;default:return V.payoutIdentifier||"Payout method"}},oe=V=>s.some(Z=>Z.code===V);return i?t.jsx(C,{sx:{p:3},children:t.jsx(me,{spacing:2,children:[...Array(3)].map((V,Z)=>t.jsx(Fe,{children:t.jsx(Ve,{children:t.jsxs(me,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(ue,{variant:"circular",width:40,height:40}),t.jsxs(C,{sx:{flex:1},children:[t.jsx(ue,{variant:"text",width:"60%"}),t.jsx(ue,{variant:"text",width:"40%"})]}),t.jsx(ue,{variant:"rectangular",width:100,height:32})]})})},Z))})}):t.jsxs(C,{children:[t.jsxs(me,{spacing:3,children:[d&&t.jsx(lt,{severity:"error",sx:{mb:2},children:d}),h&&t.jsx(lt,{severity:"success",sx:{mb:2},children:h}),t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Payout Methods"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Manage your payout methods for receiving earnings"})]}),t.jsxs(me,{spacing:0,divider:t.jsx(Mt,{}),sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden"},children:[oe(Lr.PAYPAL)&&t.jsxs(C,{sx:{p:2.5,display:"flex",alignItems:"center",gap:2.5,transition:"background-color 0.2s","&:hover":{bgcolor:e.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)"}},children:[t.jsx(C,{sx:{flexShrink:0},children:t.jsx(Sn,{sx:{bgcolor:"#0070ba",width:40,height:40,fontSize:"12px",fontWeight:"bold",color:"white"},children:"PayPal"})}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:600},children:"PayPal"}),n.some(V=>{var Z;return((Z=V.provider)==null?void 0:Z.code)===Lr.PAYPAL})&&t.jsx(Xe,{label:"Connected",size:"small",color:"success",sx:{height:20,fontSize:"0.7rem",fontWeight:600}})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Connect your PayPal account securely"})]}),t.jsx(C,{sx:{flexShrink:0,width:100},children:t.jsx(ce,{onClick:z,size:"small",variant:"outlined",fullWidth:!0,sx:{borderRadius:1.5,textTransform:"none",fontSize:"0.8rem",fontWeight:500},children:n.some(V=>{var Z;return((Z=V.provider)==null?void 0:Z.code)===Lr.PAYPAL})?"Add Another":"Connect"})})]}),oe(Lr.IYZICO)&&t.jsxs(C,{sx:{p:2.5,display:"flex",alignItems:"center",gap:2.5,transition:"background-color 0.2s","&:hover":{bgcolor:e.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)"}},children:[t.jsx(C,{sx:{flexShrink:0},children:t.jsx(Sn,{sx:{bgcolor:"#00a650",width:40,height:40,fontSize:"11px",fontWeight:"bold",color:"white"},children:"iyzico"})}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:600},children:"Credit/Debit Card"}),n.some(V=>{var Z;return((Z=V.provider)==null?void 0:Z.code)===Lr.IYZICO})&&t.jsx(Xe,{label:`${n.filter(V=>{var Z;return((Z=V.provider)==null?void 0:Z.code)===Lr.IYZICO}).length} Card(s)`,size:"small",color:"success",sx:{height:20,fontSize:"0.7rem",fontWeight:600}})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Gvenli kart deme sistemi"})]}),t.jsx(C,{sx:{flexShrink:0,width:100},children:t.jsx(ce,{onClick:K,size:"small",variant:"outlined",fullWidth:!0,sx:{borderRadius:1.5,textTransform:"none",fontSize:"0.8rem",fontWeight:500},children:"Add Card"})})]}),!oe(Lr.PAYPAL)&&!oe(Lr.IYZICO)&&t.jsx(C,{sx:{p:3,textAlign:"center"},children:t.jsx(v,{variant:"body2",color:"text.secondary",children:"No payout methods are currently available in your region."})})]}),n.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(C,{sx:{mt:4,mb:2},children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Connected Methods"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Your active payout methods"})]}),t.jsx(me,{spacing:0,divider:t.jsx(Mt,{}),sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden"},children:n.map((V,Z)=>{var Ee,be;return t.jsxs(C,{sx:{p:2.5,display:"flex",alignItems:"center",gap:2.5,bgcolor:Z%2===0?"transparent":e.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)",transition:"background-color 0.2s","&:hover":{bgcolor:e.palette.mode==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}},children:[t.jsx(C,{sx:{flexShrink:0},children:Q(((Ee=V.provider)==null?void 0:Ee.code)||"")}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:.5},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:600},children:((be=V.provider)==null?void 0:be.name)||"Payout Method"}),V.isDefault&&t.jsx(Xe,{label:"Default",size:"small",sx:{height:20,fontSize:"0.7rem",fontWeight:600,bgcolor:"primary.main",color:"primary.contrastText"}})]}),t.jsx(v,{variant:"body2",color:"text.primary",sx:{mb:.5,fontFamily:"monospace",fontSize:"0.875rem"},children:Y(V)}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[t.jsx(v,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:V.currency.toUpperCase()}),V.lastUsedAt&&t.jsxs(t.Fragment,{children:[t.jsx(C,{sx:{width:3,height:3,bgcolor:"text.secondary",borderRadius:"50%",opacity:.5}}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Last used ",new Date(V.lastUsedAt).toLocaleDateString()]})]})]})]}),t.jsxs(C,{sx:{display:"flex",gap:1,flexShrink:0},children:[!V.isDefault&&t.jsx(ce,{onClick:()=>R(V),size:"small",variant:"outlined",sx:{borderRadius:1.5,textTransform:"none",fontSize:"0.75rem",fontWeight:500,px:1.5,minWidth:"auto"},children:"Set default"}),t.jsx(Oe,{onClick:()=>k(V),size:"small",sx:{color:"text.secondary","&:hover":{color:"error.main",bgcolor:"error.main"}},children:t.jsx(el,{fontSize:"small"})})]})]},V.id)})})]})]}),t.jsxs(Gt,{open:p,onClose:N,children:[t.jsx(Qt,{children:"Delete Payout Method"}),t.jsx(Yt,{children:t.jsxs(v,{children:["Are you sure you want to delete this payout method?",(b==null?void 0:b.isDefault)&&t.jsx(lt,{severity:"warning",sx:{mt:2},children:"This is your default payout method. You'll need to set another payout method as default."})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:N,children:"Cancel"}),t.jsx(ce,{onClick:_,color:"error",variant:"contained",children:"Delete"})]})]}),t.jsxs(Gt,{open:S,onClose:()=>j(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Connect PayPal Account for Payouts"}),t.jsx(Yt,{children:t.jsx(tB,{onSuccess:$,onError:G,disabled:!1})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>j(!1),children:"Cancel"})})]}),t.jsxs(Gt,{open:P,onClose:()=>w(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Kart Ekleme"}),t.jsx(Yt,{children:t.jsx(nB,{onSuccess:J,onError:q,disabled:!1})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>w(!1),children:"ptal"})})]})]})},$n={ACTIVE:"ACTIVE",CANCELLED:"CANCELLED",EXPIRED:"EXPIRED",PENDING:"PENDING",SUSPENDED:"SUSPENDED"};function hd(e){switch(e){case $n.ACTIVE:return"Active";case $n.CANCELLED:return"Cancelled";case $n.EXPIRED:return"Expired";case $n.PENDING:return"Pending";case $n.SUSPENDED:return"Suspended";default:return e}}function fd(e){switch(e){case $n.ACTIVE:return"success";case $n.CANCELLED:return"warning";case $n.EXPIRED:return"error";case $n.PENDING:return"info";case $n.SUSPENDED:return"info";default:return"default"}}function sB(e){return e===$n.ACTIVE}function oB(e){return sB(e)}const aB=[{value:$n.ACTIVE,label:"Active"},{value:$n.CANCELLED,label:"Cancelled"},{value:$n.EXPIRED,label:"Expired"},{value:$n.PENDING,label:"Pending"},{value:$n.SUSPENDED,label:"Suspended"}],iB=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,i]=x.useState(null),[l,d]=x.useState(null),[u,h]=x.useState(!1),[f,p]=x.useState(null),[g,b]=x.useState(!1),{api:y}=Ye(),{execute:S}=Ke(),j=cn(),P=async()=>{s(!0),i(null);const G=await S(()=>y.app.account.getSubscriptions(),{showErrorToast:!0});G&&n(G.items??[]),s(!1)};x.useEffect(()=>{P()},[]);const w=async()=>{if(!f)return;b(!0),i(null),await S(()=>y.app.subscription.cancelUserSubscription(f.id),{showSuccessMessage:!0,successMessage:"Subscription canceled successfully"})&&(await P(),h(!1),p(null)),b(!1)},I=G=>{p(G),h(!0)},T=()=>{h(!1),p(null)},D=G=>fd(G),R=G=>hd(G),_=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),k=(G,K)=>new Intl.NumberFormat("en-US",{style:"currency",currency:K.toUpperCase()}).format(G/100),N=G=>oB(G.statusId),L=G=>{var K;return(K=G.paymentDetails)==null?void 0:K.some(J=>{var q;return((q=J.provider)==null?void 0:q.code)==="paypal"})};if(r)return t.jsx(C,{sx:{p:{xs:2,md:4}},children:t.jsxs(me,{spacing:3,children:[t.jsxs(C,{children:[t.jsx(ue,{variant:"text",sx:{fontSize:"1.5rem",width:"200px",mb:1}}),t.jsx(ue,{variant:"text",sx:{fontSize:"0.875rem",width:"150px"}})]}),t.jsx(F,{container:!0,spacing:3,children:[...Array(3)].map((G,K)=>t.jsx(F,{item:!0,xs:12,lg:6,children:t.jsxs(Fe,{sx:{height:"100%"},children:[t.jsx(Ve,{sx:{p:3},children:t.jsxs(me,{direction:"row",spacing:3,children:[t.jsx(ue,{variant:"circular",width:64,height:64}),t.jsxs(C,{sx:{flex:1},children:[t.jsx(ue,{variant:"text",sx:{fontSize:"1.25rem",width:"70%",mb:1}}),t.jsx(ue,{variant:"text",sx:{width:"50%",mb:2}}),t.jsx(me,{direction:"row",spacing:1,mb:2,children:t.jsx(ue,{variant:"rectangular",width:80,height:24,sx:{borderRadius:1}})}),t.jsxs(me,{spacing:1,children:[t.jsx(ue,{variant:"text",sx:{width:"60%"}}),t.jsx(ue,{variant:"text",sx:{width:"40%"}})]})]})]})}),t.jsxs(xf,{sx:{px:3,pb:3},children:[t.jsx(ue,{variant:"rectangular",width:100,height:36,sx:{borderRadius:1}}),t.jsx(ue,{variant:"rectangular",width:120,height:36,sx:{borderRadius:1,ml:1}})]})]})},K))})]})});const z=e.filter(G=>G.statusId===$n.ACTIVE),$=e.reduce((G,K)=>G+K.tier.price/100,0);return t.jsx(C,{sx:{p:{xs:2,md:4}},children:t.jsxs(me,{spacing:4,children:[o&&t.jsx(lt,{severity:"error",onClose:()=>i(null),sx:{borderRadius:2},children:o}),l&&t.jsx(lt,{severity:"success",onClose:()=>d(null),sx:{borderRadius:2},children:l}),t.jsxs(C,{children:[t.jsx(v,{variant:"h4",sx:{fontWeight:600,mb:1},children:"My Subscriptions"}),t.jsx(v,{variant:"body1",color:"text.secondary",children:"Manage your channel subscriptions and contributions"})]}),e.length>0&&t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(rt,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${j.palette.primary.main} 0%, ${j.palette.primary.dark} 100%)`,color:"white"},children:t.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h4",sx:{fontWeight:700,mb:.5},children:z.length}),t.jsx(v,{variant:"body2",sx:{opacity:.9},children:"Active"})]}),t.jsx(Ss,{sx:{fontSize:40,opacity:.8}})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(rt,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${j.palette.success.main} 0%, ${j.palette.success.dark} 100%)`,color:"white"},children:t.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsxs(C,{children:[t.jsxs(v,{variant:"h4",sx:{fontWeight:700,mb:.5},children:["$",$.toFixed(0)]}),t.jsx(v,{variant:"body2",sx:{opacity:.9},children:"Monthly Value"})]}),t.jsx(ep,{sx:{fontSize:40,opacity:.8}})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(rt,{sx:{p:3,borderRadius:3,border:`1px solid ${j.palette.divider}`},children:t.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h4",sx:{fontWeight:700,mb:.5,color:"text.primary"},children:e.length}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Total"})]}),t.jsx(Ka,{sx:{fontSize:40,color:"text.secondary"}})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(rt,{sx:{p:3,borderRadius:3,border:`1px solid ${j.palette.divider}`},children:t.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h4",sx:{fontWeight:700,mb:.5,color:"text.primary"},children:e.filter(G=>G.autoContribute).length}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Auto-contribute"})]}),t.jsx(SR,{sx:{fontSize:40,color:"text.secondary"}})]})})})]}),e.length===0?t.jsx(rt,{sx:{textAlign:"center",py:8,px:4,borderRadius:4,background:`linear-gradient(135deg, ${he(j.palette.primary.main,.02)} 0%, ${he(j.palette.primary.main,.05)} 100%)`,border:`1px solid ${he(j.palette.primary.main,.1)}`},children:t.jsxs(C,{sx:{maxWidth:400,mx:"auto"},children:[t.jsx(Ka,{sx:{fontSize:80,color:"primary.main",opacity:.6,mb:3}}),t.jsx(v,{variant:"h5",sx:{fontWeight:600,mb:2},children:"No Subscriptions Yet"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{mb:4,lineHeight:1.6},children:"Discover amazing channels and support creators by subscribing to their content. Your subscriptions will appear here."}),t.jsx(ce,{variant:"contained",size:"large",href:"/app/channels",sx:{borderRadius:2,py:1.5,px:4,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"Explore Channels"})]})}):t.jsx(F,{container:!0,spacing:3,children:e.map(G=>t.jsx(F,{item:!0,xs:12,lg:6,children:t.jsxs(Fe,{sx:{height:"100%",borderRadius:3,border:`1px solid ${j.palette.divider}`,transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:j.shadows[8]}},children:[t.jsx(Ve,{sx:{p:3},children:t.jsxs(me,{direction:"row",spacing:3,children:[t.jsx(Sn,{sx:{width:64,height:64,border:`2px solid ${j.palette.divider}`,fontSize:"1.5rem",fontWeight:600},src:`https://via.placeholder.com/64x64?text=${G.channel.name.charAt(0)}`,children:G.channel.name.charAt(0)}),t.jsxs(C,{sx:{flex:1,minWidth:0},children:[t.jsxs(me,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",mb:1,children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:G.channel.name}),t.jsx(Oe,{size:"small",sx:{ml:1},children:t.jsx(np,{fontSize:"small"})})]}),t.jsxs(me,{direction:"row",alignItems:"center",spacing:2,mb:2,children:[t.jsx(v,{variant:"body2",color:"text.secondary",children:G.tier.name}),t.jsxs(v,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:[k(G.tier.price,G.tier.currency),"/month"]})]}),t.jsxs(me,{direction:"row",spacing:1,mb:2,flexWrap:"wrap",children:[t.jsx(Xe,{label:R(G.statusId),color:D(G.statusId),size:"small",sx:{borderRadius:1}}),L(G)&&t.jsx(Xe,{label:"PayPal",variant:"outlined",size:"small",sx:{borderRadius:1,borderColor:"#0070BA",color:"#0070BA",fontWeight:600}}),G.autoContribute&&t.jsx(Xe,{label:"Auto-contribute",variant:"outlined",size:"small",sx:{borderRadius:1}})]}),t.jsxs(me,{spacing:.5,children:[t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Started: ",_(G.subscribedAt)]}),G.expiresAt&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Expires: ",_(G.expiresAt)]}),G.totalContributions>0&&t.jsxs(v,{variant:"caption",color:"success.main",children:["Total contributed: ",k(G.totalContributions,G.tier.currency)]})]})]})]})}),t.jsx(Mt,{}),t.jsxs(xf,{sx:{p:3,pt:2},children:[t.jsx(ce,{variant:"outlined",size:"small",href:`${fe.APP_CHANNEL_VIEW}`.replace(":id",G.channel.id),endIcon:t.jsx(wR,{}),sx:{borderRadius:1.5,textTransform:"none",fontWeight:500},children:"View Channel"}),N(G)&&t.jsx(ce,{variant:"text",color:"error",size:"small",startIcon:t.jsx(Fs,{}),onClick:()=>I(G),sx:{borderRadius:1.5,textTransform:"none",fontWeight:500,ml:"auto"},children:"Cancel"})]})]})},G.id))}),t.jsxs(Gt,{open:u,onClose:T,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,p:1}},children:[t.jsx(Qt,{sx:{pb:1},children:t.jsx(v,{variant:"h5",sx:{fontWeight:600},children:"Cancel Subscription"})}),t.jsx(Yt,{sx:{pb:2},children:t.jsxs(me,{spacing:2,children:[t.jsxs(v,{variant:"body1",children:["Are you sure you want to cancel your subscription to"," ",t.jsx(v,{component:"span",sx:{fontWeight:600,color:"primary.main"},children:f==null?void 0:f.channel.name}),"?"]}),f&&L(f)&&t.jsx(rt,{sx:{p:2,borderRadius:2,bgcolor:he(j.palette.info.main,.05),border:`1px solid ${he(j.palette.info.main,.2)}`},children:t.jsxs(v,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[t.jsx(v,{component:"span",sx:{fontWeight:600,color:"info.main"},children:"PayPal Subscription:"})," ","This will cancel your PayPal subscription automatically. Your PayPal recurring payment will be stopped."]})}),t.jsx(rt,{sx:{p:2,borderRadius:2,bgcolor:he(j.palette.warning.main,.05),border:`1px solid ${he(j.palette.warning.main,.2)}`},children:t.jsxs(v,{variant:"body2",color:"text.secondary",children:["You will continue to have access until your current billing period ends",(f==null?void 0:f.expiresAt)&&t.jsxs(v,{component:"span",sx:{fontWeight:500},children:[" ","on ",_(f.expiresAt)]}),"."]})})]})}),t.jsxs(qt,{sx:{p:3,pt:1},children:[t.jsx(ce,{onClick:T,disabled:g,variant:"outlined",sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:3},children:"Keep Subscription"}),t.jsx(ce,{onClick:w,color:"error",variant:"contained",disabled:g,sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:3},children:g?"Canceling...":"Cancel Subscription"})]})]})]})})},f0=Ne(Oe)(({theme:e})=>({position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:1,backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",width:32,height:32,"&:hover":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.08)"}})),lB=()=>{const[e,n]=x.useState("profile"),{user:r}=cs(),s=x.useRef(null),[o,i]=x.useState(!1),[l,d]=x.useState(!1),u=[{id:"profile",icon:t.jsx(CR,{}),label:"Profile"},{id:"payment",icon:t.jsx(qa,{}),label:"Payout Methods"},{id:"subscriptions",icon:t.jsx(Ka,{}),label:"Subscriptions"}],h=()=>{var y;const b=(y=s.current)==null?void 0:y.querySelector(".MuiTabs-scroller");if(b){const{scrollLeft:S,scrollWidth:j,clientWidth:P}=b;i(S>0),d(S+P<j-1)}};x.useEffect(()=>{var y;h();const b=(y=s.current)==null?void 0:y.querySelector(".MuiTabs-scroller");if(b)return b.addEventListener("scroll",h),window.addEventListener("resize",h),()=>{b.removeEventListener("scroll",h),window.removeEventListener("resize",h)}},[]);const f=()=>{var y;const b=(y=s.current)==null?void 0:y.querySelector(".MuiTabs-scroller");b&&b.scrollBy({left:-200,behavior:"smooth"})},p=()=>{var y;const b=(y=s.current)==null?void 0:y.querySelector(".MuiTabs-scroller");b&&b.scrollBy({left:200,behavior:"smooth"})},g=()=>{switch(e){case"profile":return t.jsx(ZW,{});case"payment":return t.jsx(rB,{});case"subscriptions":return t.jsx(iB,{});default:return null}};return t.jsxs(C,{sx:{width:"100%",overflow:"hidden"},children:[t.jsxs(C,{sx:{mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[t.jsx(v,{variant:"h5",sx:{fontWeight:600},children:(r==null?void 0:r.displayName)||"Account"}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["(",(r==null?void 0:r.email)||"user",")"]})]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Your personal account"})]}),t.jsxs(C,{sx:{position:"relative",mb:3},ref:s,children:[o&&t.jsx(f0,{onClick:f,sx:{left:0},children:t.jsx(Ls,{fontSize:"small"})}),t.jsx(Bs,{value:e,onChange:(b,y)=>n(y),variant:"scrollable",scrollButtons:!1,sx:{borderBottom:1,borderColor:"divider","& .MuiTabs-scroller":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},"& .MuiTabs-indicator":{height:2,borderRadius:"2px 2px 0 0"},"& .MuiTab-root":{minWidth:"auto",px:2.5,py:1.5,textTransform:"none",fontSize:"0.875rem",fontWeight:500,color:"text.secondary","&.Mui-selected":{color:"primary.main",fontWeight:600}}},children:u.map(b=>t.jsx(An,{value:b.id,label:b.label,icon:b.icon,iconPosition:"start",sx:{minHeight:48,gap:.75}},b.id))}),l&&t.jsx(f0,{onClick:p,sx:{right:0},children:t.jsx(Ov,{fontSize:"small"})})]}),t.jsx(C,{children:g()})]})},cB=()=>{const{isDarkMode:e,toggleTheme:n}=nm(),[r,s]=x.useState(e?"dark":"light"),o=i=>{const l=i.target.value;s(l),(l==="dark"&&!e||l==="light"&&e)&&n()};return t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Appearance"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Customize how MetaJourno looks on your device"}),t.jsx(rt,{elevation:0,sx:{p:3,border:"1px solid",borderColor:"divider",borderRadius:2},children:t.jsxs(ht,{component:"fieldset",children:[t.jsx(PR,{component:"legend",sx:{fontWeight:600,mb:2},children:"Theme mode"}),t.jsxs(ER,{value:r,onChange:o,children:[t.jsx(Ro,{value:"light",control:t.jsx(my,{}),label:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(IR,{fontSize:"small"}),t.jsxs(C,{children:[t.jsx(v,{variant:"body1",children:"Light"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Use light theme"})]})]}),sx:{mb:2,p:1.5,borderRadius:1,"&:hover":{bgcolor:"action.hover"}}}),t.jsx(Ro,{value:"dark",control:t.jsx(my,{}),label:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(TR,{fontSize:"small"}),t.jsxs(C,{children:[t.jsx(v,{variant:"body1",children:"Dark"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Use dark theme"})]})]}),sx:{p:1.5,borderRadius:1,"&:hover":{bgcolor:"action.hover"}}})]})]})})]})},dB={subscription:"Subscription Notifications",payout:"Payout Notifications",funding:"Funding Notifications",channel:"Channel Notifications",system:"System Notifications"},uB=["subscription","payout","funding","channel","system"],hB=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(!0),[o,i]=x.useState(!1),[l,d]=x.useState(null),[u,h]=x.useState(!1),{api:f}=Ye(),{execute:p}=Ke();x.useEffect(()=>{g()},[]);const g=async()=>{s(!0),d(null);try{const[P,w]=await Promise.all([p(()=>f.app.account.getNotificationPreferences(),{showErrorToast:!1}),p(()=>f.app.notification.getNotificationTypeMetadata(),{showErrorToast:!1})]);if(P&&w){const I=new Map(w.map(D=>[D.id,D])),T=P.preferences.map(D=>({...D,metadata:I.get(D.notificationTypeId)}));n(T)}else d("Failed to load notification preferences")}catch(P){d(P.message||"Failed to load notification preferences")}finally{s(!1)}},b=(P,w,I)=>{n(T=>T.map(D=>D.notificationTypeId===P?{...D,[w]:I}:D)),h(!0)},y=async()=>{i(!0),d(null);const P=e.map(I=>({notificationTypeId:I.notificationTypeId,pushEnabled:I.pushEnabled,inAppEnabled:I.inAppEnabled}));await p(()=>f.app.account.bulkUpdateNotificationPreferences(P),{showSuccessMessage:!0,successMessage:"Notification preferences saved successfully",showErrorToast:!0})&&(h(!1),g()),i(!1)},S=()=>{g(),h(!1)},j=e.reduce((P,w)=>{var T;const I=((T=w.metadata)==null?void 0:T.category)||"system";return P[I]||(P[I]=[]),P[I].push(w),P},{});return r?t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Notification Preferences"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Loading..."}),t.jsx(me,{spacing:2,children:[1,2,3].map(P=>t.jsx(ue,{variant:"rectangular",height:80},P))})]}):l?t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Notification Preferences"}),t.jsx(lt,{severity:"error",sx:{mt:2},children:l})]}):t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:3},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5},children:"Notification Preferences"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Control which notifications you receive via push and in-app"})]}),t.jsxs(C,{sx:{display:"flex",gap:1},children:[t.jsx(ce,{variant:"outlined",size:"small",onClick:S,disabled:!u||o,children:"Cancel"}),t.jsx(ce,{variant:"contained",size:"small",startIcon:o?void 0:t.jsx(tp,{}),onClick:y,disabled:!u||o,children:o?"Saving...":"Save Changes"})]})]}),t.jsx(me,{spacing:3,children:uB.map(P=>{const w=j[P];return!w||w.length===0?null:t.jsxs(C,{children:[t.jsxs(v,{variant:"subtitle1",sx:{fontWeight:600,mb:2,display:"flex",alignItems:"center",gap:1},children:[t.jsx(Mv,{fontSize:"small"}),dB[P]]}),t.jsx(me,{spacing:1.5,children:w.map(I=>{var T,D;return t.jsx(rt,{elevation:0,sx:{p:2.5,border:"1px solid",borderColor:"divider",borderRadius:2,"&:hover":{borderColor:"primary.main",bgcolor:"action.hover"}},children:t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{sx:{flex:1,mr:3},children:[t.jsx(v,{variant:"body1",sx:{fontWeight:500,mb:.5},children:((T=I.metadata)==null?void 0:T.name)||`Notification Type ${I.notificationTypeId}`}),t.jsx(v,{variant:"body2",color:"text.secondary",children:((D=I.metadata)==null?void 0:D.description)||"No description available"})]}),t.jsxs(C,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t.jsx(Ro,{control:t.jsx(Xa,{checked:I.pushEnabled,onChange:R=>b(I.notificationTypeId,"pushEnabled",R.target.checked),color:"primary"}),label:t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Push"}),labelPlacement:"top",sx:{m:0}}),t.jsx(Mt,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),t.jsx(Ro,{control:t.jsx(Xa,{checked:I.inAppEnabled,onChange:R=>b(I.notificationTypeId,"inAppEnabled",R.target.checked),color:"primary"}),label:t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"In-App"}),labelPlacement:"top",sx:{m:0}})]})]})},I.notificationTypeId)})})]},P)})}),u&&t.jsx(lt,{severity:"info",sx:{mt:3},children:'You have unsaved changes. Click "Save Changes" to apply your preferences.'})]})},p0=Ne(Oe)(({theme:e})=>({position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:1,backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",width:32,height:32,"&:hover":{backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.08)"}})),fB=()=>{const[e,n]=x.useState("appearance"),r=x.useRef(null),[s,o]=x.useState(!1),[i,l]=x.useState(!1),d=[{id:"appearance",icon:t.jsx(DR,{}),label:"Appearance"},{id:"notifications",icon:t.jsx(Mv,{}),label:"Notifications"}],u=()=>{var b;const g=(b=r.current)==null?void 0:b.querySelector(".MuiTabs-scroller");if(g){const{scrollLeft:y,scrollWidth:S,clientWidth:j}=g;o(y>0),l(y+j<S-1)}};x.useEffect(()=>{var b;u();const g=(b=r.current)==null?void 0:b.querySelector(".MuiTabs-scroller");if(g)return g.addEventListener("scroll",u),window.addEventListener("resize",u),()=>{g.removeEventListener("scroll",u),window.removeEventListener("resize",u)}},[]);const h=()=>{var b;const g=(b=r.current)==null?void 0:b.querySelector(".MuiTabs-scroller");g&&g.scrollBy({left:-200,behavior:"smooth"})},f=()=>{var b;const g=(b=r.current)==null?void 0:b.querySelector(".MuiTabs-scroller");g&&g.scrollBy({left:200,behavior:"smooth"})},p=()=>{switch(e){case"appearance":return t.jsx(cB,{});case"notifications":return t.jsx(hB,{});default:return null}};return t.jsxs(C,{sx:{width:"100%",overflow:"hidden"},children:[t.jsxs(C,{sx:{mb:4},children:[t.jsx(C,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:t.jsx(v,{variant:"h5",sx:{fontWeight:600},children:"Settings"})}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Manage your application preferences"})]}),t.jsxs(C,{sx:{position:"relative",mb:3},ref:r,children:[s&&t.jsx(p0,{onClick:h,sx:{left:0},children:t.jsx(Ls,{fontSize:"small"})}),t.jsx(Bs,{value:e,onChange:(g,b)=>n(b),variant:"scrollable",scrollButtons:!1,sx:{borderBottom:1,borderColor:"divider","& .MuiTabs-scroller":{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},"& .MuiTabs-indicator":{height:2,borderRadius:"2px 2px 0 0"},"& .MuiTab-root":{minWidth:"auto",px:2.5,py:1.5,textTransform:"none",fontSize:"0.875rem",fontWeight:500,color:"text.secondary","&.Mui-selected":{color:"primary.main",fontWeight:600}}},children:d.map(g=>t.jsx(An,{value:g.id,label:g.label,icon:g.icon,iconPosition:"start",sx:{minHeight:48,gap:.75}},g.id))}),i&&t.jsx(p0,{onClick:f,sx:{right:0},children:t.jsx(Ov,{fontSize:"small"})})]}),t.jsx(C,{children:p()})]})},pB={NEWS:"NEWS",POLL:"POLL"},mB=()=>{const{api:e}=Ye(),[n,r]=x.useState(0),s=Oc({fetcher:async(b,y,S)=>e.app.bookmark.getBookmarks(null,{after:y,limit:S||20}),pageSize:20,autoFetch:!1}),o=Oc({fetcher:async(b,y,S)=>e.app.bookmark.getBookmarkedNews({after:y,limit:S||20}),pageSize:20,autoFetch:!1}),i=Oc({fetcher:async(b,y,S)=>e.app.bookmark.getBookmarkedPolls({after:y,limit:S||20}),pageSize:20,autoFetch:!1}),d=(()=>{switch(n){case 0:return s;case 1:return o;case 2:return i;default:return s}})();x.useEffect(()=>{d.fetchInitial()},[n]);const u=(b,y)=>{r(y)},h=()=>t.jsxs(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",textAlign:"center",px:3},children:[t.jsx(hi,{sx:{fontSize:80,color:"text.disabled",mb:2}}),t.jsx(v,{variant:"h5",gutterBottom:!0,fontWeight:600,children:"No bookmarks yet"}),t.jsxs(v,{variant:"body1",color:"text.secondary",children:[n===0&&"Start bookmarking news and polls to see them here",n===1&&"You haven't bookmarked any news articles yet",n===2&&"You haven't bookmarked any polls yet"]})]}),f=()=>t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(Zt,{})}),p=()=>n===0?s.items.map(b=>t.jsx(C,{sx:{mb:2},children:b.type===pB.NEWS?t.jsx(ld,{news:b.content,mode:"grid"}):t.jsx(ud,{poll:b.content,mode:"grid",showAsPreview:!0})},b.id)):n===1?o.items.map(b=>t.jsx(C,{sx:{mb:2},children:t.jsx(ld,{news:b,mode:"grid"})},b.id)):i.items.map(b=>t.jsx(C,{sx:{mb:2},children:t.jsx(ud,{poll:b,mode:"grid",showAsPreview:!0})},b.id)),g=d.isLoading&&d.items.length===0;return t.jsx(C,{sx:{width:"100%",minHeight:"100vh",bgcolor:"background.default"},children:t.jsxs(St,{maxWidth:"lg",sx:{py:3},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,fontWeight:700,sx:{mb:3},children:"My Bookmarks"}),t.jsxs(Bs,{value:n,onChange:u,sx:{borderBottom:1,borderColor:"divider",mb:3},children:[t.jsx(An,{label:"All",value:0}),t.jsx(An,{label:"News",value:1}),t.jsx(An,{label:"Polls",value:2})]}),g?f():d.items.length===0?h():t.jsx(Cs,{dataLength:d.items.length,next:d.loadMore,hasMore:d.hasMore,loader:f(),endMessage:t.jsx(C,{sx:{textAlign:"center",py:4},children:t.jsx(v,{variant:"body2",color:"text.secondary",children:"You've reached the end of your bookmarks"})}),style:{overflow:"visible"},children:t.jsx(C,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:2},children:p()})})]})})},Hm=({children:e,isHighlighted:n=!1,contentPadding:r=3,noHover:s=!1,contentSx:o,sx:i,...l})=>t.jsx(Fe,{elevation:n?2:0,sx:{height:"100%",position:"relative",borderRadius:2,border:"1px solid",borderColor:d=>n?"primary.main":d.palette.mode==="dark"?he(d.palette.common.white,.1):he(d.palette.common.black,.08),bgcolor:d=>n?he(d.palette.primary.main,d.palette.mode==="dark"?.1:.05):"background.paper",transition:"all 0.2s ease-in-out",...!s&&{"&:hover":{borderColor:"primary.main",transform:"translateY(-2px)"}},...i},...l,children:t.jsx(Ve,{sx:{p:r,"&:last-child":{pb:r},...o},children:e})}),Gm=({status:e,...n})=>t.jsx(Xe,{label:Po(e),color:E3(e),size:"small",variant:"filled",sx:{borderRadius:1,fontWeight:500,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px",...n.sx},...n}),Er={TRAVEL:"TRAVEL",EQUIPMENT:"EQUIPMENT",ACCOMMODATION:"ACCOMMODATION",FOOD:"FOOD",COMMUNICATION:"COMMUNICATION",LABOR:"LABOR",OTHER:"OTHER"};function xB(e){switch(e){case Er.TRAVEL:return"Travel";case Er.EQUIPMENT:return"Equipment";case Er.ACCOMMODATION:return"Accommodation";case Er.FOOD:return"Food";case Er.COMMUNICATION:return"Communication";case Er.LABOR:return"Labor";case Er.OTHER:return"Other";default:return e}}const KS=[{value:Er.TRAVEL,label:"Travel"},{value:Er.EQUIPMENT,label:"Equipment"},{value:Er.ACCOMMODATION,label:"Accommodation"},{value:Er.FOOD,label:"Food"},{value:Er.COMMUNICATION,label:"Communication"},{value:Er.LABOR,label:"Labor"},{value:Er.OTHER,label:"Other"}],Ym=({expenseOrder:e,onView:n,onEdit:r,onSubmit:s,onCancel:o,onApprove:i,onReject:l,onProcessPayment:d,showActions:u=!0,userRole:h="journalist"})=>{const[f,p]=Dt.useState(null),g=!!f,b=_=>{p(_.currentTarget)},y=()=>{p(null)},S=(_,k)=>new Intl.NumberFormat("en-US",{style:"currency",currency:k}).format(_),j=e.status===nt.DRAFT,P=e.status===nt.DRAFT,w=[nt.DRAFT,nt.SUBMITTED].includes(e.status),I=[nt.SUBMITTED,nt.UNDER_REVIEW].includes(e.status),T=[nt.SUBMITTED,nt.UNDER_REVIEW].includes(e.status),D=e.status===nt.APPROVED,R=()=>{const _=[];return n&&_.push(t.jsxs(je,{onClick:()=>{n(e),y()},children:[t.jsx(Ws,{sx:{mr:1},fontSize:"small"}),"View Details"]},"view")),h==="journalist"?(j&&r&&_.push(t.jsxs(je,{onClick:()=>{r(e),y()},children:[t.jsx(ws,{sx:{mr:1},fontSize:"small"}),"Edit"]},"edit")),P&&s&&_.push(t.jsxs(je,{onClick:()=>{s(e),y()},children:[t.jsx(Td,{sx:{mr:1},fontSize:"small"}),"Submit for Approval"]},"submit")),w&&o&&_.push(t.jsxs(je,{onClick:()=>{o(e),y()},sx:{color:"error.main"},children:[t.jsx(el,{sx:{mr:1},fontSize:"small"}),"Cancel"]},"cancel"))):(h==="admin"||h==="finance-manager")&&(I&&i&&_.push(t.jsx(je,{onClick:()=>{i(e),y()},sx:{color:"success.main"},children:"Approve"},"approve")),T&&l&&_.push(t.jsx(je,{onClick:()=>{l(e),y()},sx:{color:"error.main"},children:"Reject"},"reject")),D&&d&&_.push(t.jsx(je,{onClick:()=>{d(e),y()},sx:{color:"primary.main"},children:"Process Payment"},"process-payment"))),_};return t.jsxs(Hm,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(C,{sx:{flex:1},children:[t.jsx(v,{variant:"h6",component:"h3",sx:{mb:1,fontWeight:600},children:e.title}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.description}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:[e.channel.name,"  ",xB(e.type.id)]})]}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Gm,{status:e.status}),u&&t.jsx(Oe,{size:"small",onClick:b,children:t.jsx(np,{})})]})]}),t.jsx(Mt,{sx:{my:2}}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h5",component:"span",sx:{fontWeight:700,color:"primary.main"},children:S(e.amount,e.currency)}),e.receiptUrl&&t.jsx(Pt,{title:"Receipt attached",children:t.jsx(oo,{sx:{ml:1,color:"success.main"},fontSize:"small"})})]}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(e.createdAt),{addSuffix:!0})})]}),e.notes&&t.jsx(C,{sx:{mt:2},children:t.jsxs(v,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:['"',e.notes,'"']})}),e.rejectionReason&&t.jsx(C,{sx:{mt:2,p:2,bgcolor:"error.lighter",borderRadius:1},children:t.jsxs(v,{variant:"body2",color:"error.main",sx:{fontWeight:500},children:["Rejection Reason: ",e.rejectionReason]})}),t.jsx(Oo,{anchorEl:f,open:g,onClose:y,PaperProps:{sx:{minWidth:180}},children:R()})]})};function gB(e){const{children:n,value:r,index:s,...o}=e;return t.jsx("div",{role:"tabpanel",hidden:r!==s,id:`expense-order-tabpanel-${s}`,"aria-labelledby":`expense-order-tab-${s}`,...o,children:r===s&&t.jsx(C,{sx:{py:3},children:n})})}const bB=()=>{const e=xt(),{api:n}=Ye(),[r,s]=x.useState(0),[o,i]=x.useState([]),[l,d]=x.useState(!0),{execute:u}=Ke(),h=[{label:"All",status:void 0},{label:"Draft",status:bt.DRAFT},{label:"Submitted",status:bt.SUBMITTED},{label:"Approved",status:bt.APPROVED},{label:"Paid",status:bt.PAID},{label:"Rejected",status:bt.REJECTED}],f=async P=>{d(!0);const w=await u(()=>n.app.expenseOrder.getMyExpenseOrders({page:1,limit:50},P),{showErrorToast:!0});w&&i(w.items),d(!1)};x.useEffect(()=>{f(h[r].status)},[r,u]);const p=(P,w)=>{s(w)},g=P=>{e(fe.APP_EXPENSE_ORDER_VIEW.replace(":id",P.id))},b=P=>{e(fe.STUDIO_EXPENSE_ORDER_EDIT.replace(":id",P.id))},y=async P=>{await u(()=>n.app.expenseOrder.submitExpenseOrder(P.id),{showSuccessMessage:!0,successMessage:"Expense order submitted successfully!"})&&f(h[r].status)},S=async P=>{await u(()=>n.app.expenseOrder.cancelExpenseOrder(P.id),{showSuccessMessage:!0,successMessage:"Expense order cancelled successfully!"})&&f(h[r].status)},j=()=>{e(fe.STUDIO_EXPENSE_ORDER_CREATE)};return t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"My Expense Orders"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:j,children:"Create New"})]}),t.jsx(C,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:t.jsx(Bs,{value:r,onChange:p,"aria-label":"expense order status tabs",children:h.map((P,w)=>t.jsx(An,{label:P.label},w))})}),h.map((P,w)=>t.jsx(gB,{value:r,index:w,children:l?t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(Zt,{})}):o.length===0?t.jsxs(C,{sx:{textAlign:"center",py:8},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No expense orders found"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:P.status?`No ${P.label.toLowerCase()} expense orders`:"You haven't created any expense orders yet"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:j,children:"Create Your First Expense Order"})]}):t.jsx(F,{container:!0,spacing:3,children:o.map(I=>t.jsx(F,{item:!0,xs:12,md:6,lg:4,children:t.jsx(Ym,{expenseOrder:I,onView:g,onEdit:b,onSubmit:y,onCancel:S,userRole:"journalist"})},I.id))})},w))]})},yB=()=>{const e=xt(),{id:n}=dr(),{api:r}=Ye(),[s,o]=x.useState(null),[i,l]=x.useState(!0),[d,u]=x.useState(!1),[h,f]=x.useState(null),{execute:p}=Ke(),g=async()=>{if(!n)return;l(!0),f(null);const R=await p(()=>r.app.expenseOrder.getExpenseOrder(n),{showErrorToast:!0});R&&o(R),l(!1)};x.useEffect(()=>{g()},[n]);const b=(R,_)=>new Intl.NumberFormat("en-US",{style:"currency",currency:_}).format(R),y=()=>{e(fe.APP_EXPENSE_ORDERS)},S=()=>{s&&e(fe.STUDIO_EXPENSE_ORDER_EDIT.replace(":id",s.id))},j=async()=>{if(!s)return;u(!0),await p(()=>r.app.expenseOrder.submitExpenseOrder(s.id),{showSuccessMessage:!0,successMessage:"Expense order submitted successfully!"})&&await g(),u(!1)},P=async()=>{if(!s)return;u(!0),await p(()=>r.app.expenseOrder.cancelExpenseOrder(s.id),{showSuccessMessage:!0,successMessage:"Expense order cancelled successfully!"})&&await g(),u(!1)};if(i)return t.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:t.jsx(Zt,{})});if(h||!s)return t.jsxs(C,{sx:{p:3},children:[t.jsx(lt,{severity:"error",children:h||"Expense order not found"}),t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:y,sx:{mt:2},children:"Back to Expense Orders"})]});const w=s.status===bt.DRAFT,I=s.status===bt.DRAFT,D=[bt.DRAFT,bt.SUBMITTED].includes(s.status);return t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:y,sx:{mr:2},children:"Back"}),t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600,flex:1},children:"Expense Order Details"}),t.jsx(Gm,{status:s.status})]}),h&&t.jsx(lt,{severity:"error",sx:{mb:3},children:h}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsxs(F,{item:!0,xs:12,md:8,children:[t.jsxs(rt,{sx:{p:3,mb:3},children:[t.jsx(v,{variant:"h5",sx:{mb:2,fontWeight:600},children:s.title}),t.jsx(v,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:s.description}),t.jsx(Mt,{sx:{my:3}}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Channel"}),t.jsx(v,{variant:"body1",sx:{fontWeight:500},children:s.channel.name})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Expense Type"}),t.jsx(v,{variant:"body1",sx:{fontWeight:500},children:s.type.name})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Amount"}),t.jsx(v,{variant:"h6",sx:{fontWeight:700,color:"primary.main"},children:b(s.amount,s.currency)})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body1",children:Yp(new Date(s.createdAt),"PPP")})]})]}),s.receiptUrl&&t.jsxs(t.Fragment,{children:[t.jsx(Mt,{sx:{my:3}}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Receipt"}),t.jsxs(Id,{href:s.receiptUrl,target:"_blank",rel:"noopener noreferrer",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(oo,{fontSize:"small"}),"View Receipt"]})]})]}),s.notes&&t.jsxs(t.Fragment,{children:[t.jsx(Mt,{sx:{my:3}}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Notes"}),t.jsx(v,{variant:"body1",sx:{fontStyle:"italic"},children:s.notes})]})]})]}),t.jsxs(rt,{sx:{p:3},children:[t.jsx(v,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Actions"}),t.jsxs(C,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[w&&t.jsx(ce,{variant:"outlined",startIcon:t.jsx(ws,{}),onClick:S,disabled:d,children:"Edit"}),I&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(Td,{}),onClick:j,disabled:d,children:"Submit for Approval"}),D&&t.jsx(ce,{variant:"outlined",color:"error",startIcon:t.jsx(Fs,{}),onClick:P,disabled:d,children:"Cancel"})]})]})]}),t.jsxs(F,{item:!0,xs:12,md:4,children:[t.jsxs(rt,{sx:{p:3,mb:3},children:[t.jsx(v,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Timeline"}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Created"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.createdAt),{addSuffix:!0})})]}),s.submittedAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Submitted"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.submittedAt),{addSuffix:!0})})]}),s.approvedAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:s.status===bt.APPROVED?"Approved":"Reviewed"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.approvedAt),{addSuffix:!0})}),s.approver&&t.jsxs(v,{variant:"caption",display:"block",color:"text.secondary",children:["by ",s.approver.displayName]})]}),s.paidAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Paid"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.paidAt),{addSuffix:!0})}),s.paymentReference&&t.jsxs(v,{variant:"caption",display:"block",color:"text.secondary",children:["Ref: ",s.paymentReference]})]})]})]}),s.rejectionReason&&t.jsxs(rt,{sx:{p:3,bgcolor:"error.lighter"},children:[t.jsx(v,{variant:"h6",sx:{mb:1,fontWeight:600,color:"error.main"},children:"Rejection Reason"}),t.jsx(v,{variant:"body2",color:"error.main",children:s.rejectionReason})]})]})]})]})},ts={ALL:"ALL",NEWS:"NEWS",CHANNELS:"CHANNELS",USERS:"USERS",POLLS:"POLLS",TAGS:"TAGS"},wo={RELEVANCE:"RELEVANCE",DATE:"DATE",POPULARITY:"POPULARITY"},vB=Ne(Fe)(({theme:e})=>({marginBottom:e.spacing(2),cursor:"pointer",transition:"all 0.2s ease","&:hover":{boxShadow:e.shadows[4],transform:"translateY(-1px)"}})),m0=Ne(Xe)(({theme:e})=>({margin:e.spacing(.5),fontSize:"0.75rem"})),x0=()=>{var Q;const e=ma(),n=xt(),[r,s]=x.useState(1),[o,i]=x.useState(""),[l,d]=x.useState(!0),[u,h]=x.useState([]),[f,p]=x.useState(null),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState({type:ts.ALL,sortBy:wo.RELEVANCE}),[w,I]=x.useState(null),{api:T}=Ye(),{execute:D}=Ke(),R=20;x.useEffect(()=>{const Y=new URLSearchParams(e.search),oe=Y.get("q"),V=Y.get("type");if(oe){i(oe);const Z={...j};V&&V!==ts.ALL&&(Z.type=V,P(Z)),N(oe,Z)}},[e.search]),x.useEffect(()=>{o&&(s(1),k(1))},[j]);const _=()=>{k(r+1)},k=async(Y=r)=>{if(o){b(!0),S(null);try{const oe={};Object.entries(j).forEach(([Z,Ee])=>{Ee!=null&&Ee!==""&&(oe[Z]=Ee)});const V=await D(()=>T==null?void 0:T.app.search.search(o,oe,{page:Y,limit:R}),{showErrorToast:!0});V&&(h(Y===1?V.items??[]:Z=>[...Z,...V.items??[]]),s(V.metadata.currentPage??1),d(V.metadata.hasNext===!0),p(V))}catch(oe){console.error("Search error:",oe),S(oe.message||"Search failed")}finally{b(!1)}}},N=async(Y,oe)=>{P(oe||j),i(Y),s(1),h([]),d(!0),setTimeout(()=>{k(1)},0)},L=Y=>{const oe={...j,...Y};I(null),o&&N(o,oe)},z=(Y,oe)=>{const V=encodeURIComponent(Y);switch(oe){case"news":n(`${fe.APP_NEWS}?tags=${V}`);break;case"channel":n(`${fe.APP_CHANNELS}?tags=${V}`);break;case"poll":n(`${fe.APP_POLLS}?tags=${V}`);break;default:n(`${fe.APP_NEWS}?tags=${V}`);break}},$=Y=>{var Ee,be;const oe=()=>{switch(Y.type){case"news":return t.jsx(ia,{color:"primary"});case"channel":return t.jsx(Xf,{color:"secondary"});case"user":return t.jsx(Jf,{color:"action"});case"poll":return t.jsx(Qf,{color:"info"});case"tag":return t.jsx(Zf,{color:"success"});default:return t.jsx(ia,{color:"primary"})}},V=()=>{switch(Y.type){case"news":return"primary";case"channel":return"secondary";case"user":return"default";case"poll":return"info";case"tag":return"success";default:return"default"}},Z=()=>{switch(Y.type){case"news":n(fe.APP_NEWS_VIEW.replace(":id",Y.id));break;case"channel":n(fe.APP_CHANNEL_VIEW.replace(":channelId",Y.id));break;case"poll":n(fe.APP_POLL_VIEW.replace(":id",Y.id));break;case"tag":n(`${fe.APP_SEARCH}?q=${encodeURIComponent(Y.title)}`);break}};return t.jsx(vB,{onClick:Z,children:t.jsx(Ve,{children:t.jsxs(C,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[t.jsx(C,{sx:{mt:.5},children:oe()}),t.jsxs(C,{sx:{flexGrow:1},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(v,{variant:"h6",component:"h3",sx:{fontWeight:600},children:Y.title}),t.jsx(Xe,{label:Y.type,size:"small",color:V(),variant:"outlined"})]}),Y.description&&t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:1,lineHeight:1.6},children:Y.description}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",mb:1},children:[Y.channel&&t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{sx:{width:20,height:20},children:(be=(Ee=Y==null?void 0:Y.channel)==null?void 0:Ee.name)==null?void 0:be.charAt(0)}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["in ",t.jsx("strong",{children:Y.channel.name})," (@",Y.channel.handle,")"]})]}),Y.handle&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["@",Y.handle]}),Y.publishedAt&&t.jsx(v,{variant:"caption",color:"text.secondary",children:new Date(Y.publishedAt).toLocaleDateString()}),Y.startDate&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Start: ",new Date(Y.startDate).toLocaleDateString()]}),Y.endDate&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["End: ",new Date(Y.endDate).toLocaleDateString()]}),Y.voteCount!==void 0&&t.jsx(m0,{label:`${Y.voteCount} votes`,size:"small",variant:"outlined",color:"info"}),Y.usageCount!==void 0&&t.jsx(m0,{label:`${Y.usageCount} uses`,size:"small",variant:"outlined",color:"success"})]}),Y.tags&&Y.tags.length>0&&t.jsx(C,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mb:1},children:Y.tags.slice(0,5).map((ae,ee)=>t.jsx(Xe,{label:ae,size:"small",variant:"outlined",onClick:Ce=>{Ce.stopPropagation(),z(ae,Y.type)},sx:{fontSize:"0.7rem",cursor:"pointer","&:hover":{backgroundColor:"primary.main",color:"primary.contrastText"}}},ee))}),t.jsxs(C,{sx:{display:"flex",justifyContent:"flex-end",gap:1,pt:1},children:[t.jsx(Pt,{title:"Bookmark",children:t.jsx(Oe,{size:"small",children:t.jsx(_R,{fontSize:"small"})})}),t.jsx(Pt,{title:"Share",children:t.jsx(Oe,{size:"small",children:t.jsx(OR,{fontSize:"small"})})})]})]})]})})},Y.id)},G=()=>t.jsx(t.Fragment,{children:Array.from({length:5}).map((Y,oe)=>t.jsxs(rt,{sx:{p:2,mb:2},children:[t.jsx(ue,{variant:"text",width:"60%",height:32}),t.jsx(ue,{variant:"text",width:"100%",height:20,sx:{mt:1}}),t.jsx(ue,{variant:"text",width:"80%",height:20}),t.jsxs(C,{sx:{display:"flex",gap:1,mt:1},children:[t.jsx(ue,{variant:"rounded",width:60,height:24}),t.jsx(ue,{variant:"rounded",width:80,height:24})]})]},oe))}),K=!!w,J=Y=>{I(Y.currentTarget)},q=()=>{I(null)};return t.jsxs(St,{maxWidth:"lg",sx:{py:3},children:[(u.length>0||g)&&o&&t.jsxs(C,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h5",sx:{mb:1},children:"Search Results"}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Found ",(((Q=f==null?void 0:f.metadata)==null?void 0:Q.total)||0).toLocaleString(),' results for "',o,'"']}),(j.type!==ts.ALL||j.sortBy!==wo.RELEVANCE)&&t.jsxs(me,{direction:"row",spacing:1,sx:{mt:2},children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Active filters:"}),j.type!==ts.ALL&&t.jsx(Xe,{label:`Type: ${j.type}`,size:"small",onDelete:()=>L({type:ts.ALL})}),j.sortBy!==wo.RELEVANCE&&t.jsx(Xe,{label:`Sort: ${j.sortBy}`,size:"small",onDelete:()=>L({sortBy:wo.RELEVANCE})})]})]}),t.jsx(ce,{variant:"outlined",startIcon:t.jsx(Nv,{}),onClick:J,sx:{minWidth:120},children:"Filters"})]}),t.jsx(AR,{open:K,anchorEl:w,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:t.jsxs(rt,{sx:{p:3,minWidth:280},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(v,{variant:"h6",children:"Filters"}),t.jsx(Oe,{size:"small",onClick:q,children:t.jsx(RR,{fontSize:"small"})})]}),t.jsxs(ht,{fullWidth:!0,sx:{mb:2},children:[t.jsx(Ct,{children:"Content Type"}),t.jsxs(mt,{value:j.type||ts.ALL,label:"Content Type",onChange:Y=>L({type:Y.target.value}),children:[t.jsx(je,{value:ts.ALL,children:"All Content"}),t.jsx(je,{value:ts.NEWS,children:"Articles"}),t.jsx(je,{value:ts.CHANNELS,children:"Channels"}),t.jsx(je,{value:ts.USERS,children:"Journalists"}),t.jsx(je,{value:ts.POLLS,children:"Polls"}),t.jsx(je,{value:ts.TAGS,children:"Tags"})]})]}),t.jsxs(ht,{fullWidth:!0,sx:{mb:2},children:[t.jsx(Ct,{children:"Sort By"}),t.jsxs(mt,{value:j.sortBy||wo.RELEVANCE,label:"Sort By",onChange:Y=>L({sortBy:Y.target.value}),children:[t.jsx(je,{value:wo.RELEVANCE,children:"Relevance"}),t.jsx(je,{value:wo.DATE,children:"Date"}),t.jsx(je,{value:wo.POPULARITY,children:"Popularity"})]})]}),t.jsx(v,{variant:"subtitle2",sx:{mb:1},children:"Time Period"}),t.jsxs(kR,{value:j.dateFrom?"custom":"all",exclusive:!0,onChange:(Y,oe)=>{if(oe==="all")L({dateFrom:void 0,dateTo:void 0});else if(oe){const V=new Date,Ee={day:1,week:7,month:30,year:365}[oe]||0,be=new Date(V.getTime()-Ee*24*60*60*1e3);L({dateFrom:be,dateTo:V})}},size:"small",sx:{mb:2,width:"100%"},children:[t.jsx(_h,{value:"all",sx:{flex:1},children:"All"}),t.jsx(_h,{value:"week",sx:{flex:1},children:"Week"}),t.jsx(_h,{value:"month",sx:{flex:1},children:"Month"})]})]})}),y&&t.jsx(lt,{severity:"error",sx:{mb:3},children:y}),g&&u.length===0&&G(),u.length===0&&!g&&o?t.jsxs(rt,{sx:{p:4,textAlign:"center"},children:[t.jsx(v,{variant:"h6",color:"text.secondary",children:"No results found"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try adjusting your search terms or filters"})]}):u.length>0?t.jsx(Cs,{dataLength:u.length,next:_,hasMore:l,loader:t.jsx(C,{sx:{mt:2},children:G()}),endMessage:t.jsx(C,{sx:{textAlign:"center",mt:4,color:"text.secondary",fontSize:"0.875rem"},children:"No more results to display"}),children:u.map($)}):null,!g&&!f&&!y&&t.jsxs(rt,{sx:{p:6,textAlign:"center"},children:[t.jsx(v,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"Start your search"}),t.jsx(v,{variant:"body1",color:"text.secondary",children:"Search for articles, channels, journalists, polls, or tags to get started"})]})]})};var qm={},jB=Qe;Object.defineProperty(qm,"__esModule",{value:!0});var JS=qm.default=void 0,SB=jB(Ze()),wB=t;JS=qm.default=(0,SB.default)((0,wB.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const kf=({label:e,value:n,onChange:r})=>{const s=async o=>{var i;(i=o.target.files)==null||i[0]};return t.jsx(C,{sx:{width:"100%",height:200,border:"2px dashed",borderColor:"divider",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:n?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:n,alt:"Cover",style:{width:"100%",height:"100%",objectFit:"cover"}}),t.jsx(ce,{onClick:()=>r(null),sx:{position:"absolute",bottom:8,right:8},children:"Remove"})]}):t.jsxs(ce,{component:"label",startIcon:t.jsx(JS,{}),children:[e??"Upload Image",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:s})]})})};var Km={},CB=Qe;Object.defineProperty(Km,"__esModule",{value:!0});var XS=Km.default=void 0,PB=CB(Ze()),EB=t;XS=Km.default=(0,PB.default)((0,EB.jsx)("path",{d:"M14 2H6.01c-1.1 0-2 .89-2 2L4 20c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8zm-1 7V3.5L18.5 9zm1 5 2-1.06v4.12L14 16v1c0 .55-.45 1-1 1H9c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h4c.55 0 1 .45 1 1z"}),"VideoFile");var Jm={},IB=Qe;Object.defineProperty(Jm,"__esModule",{value:!0});var $o=Jm.default=void 0,TB=IB(Ze()),DB=t;$o=Jm.default=(0,TB.default)((0,DB.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const AB=({label:e,value:n,onChange:r})=>{const s=async i=>{var d;const l=(d=i.target.files)==null?void 0:d[0];if(l){if(l.size>52428800){alert("Video file size must be less than 50MB");return}const u=URL.createObjectURL(l);r(u)}},o=()=>{n&&URL.revokeObjectURL(n),r(null)};return t.jsx(C,{sx:{width:"100%",height:250,border:"2px dashed",borderColor:"divider",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",bgcolor:"background.paper"},children:n?t.jsxs(t.Fragment,{children:[t.jsx("video",{src:n,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"},preload:"metadata"}),t.jsx(ce,{onClick:o,startIcon:t.jsx($o,{}),color:"error",variant:"contained",size:"small",sx:{position:"absolute",bottom:8,right:8,opacity:.9},children:"Remove"})]}):t.jsxs(C,{sx:{textAlign:"center",p:3},children:[t.jsxs(ce,{component:"label",startIcon:t.jsx(XS,{}),variant:"outlined",size:"large",sx:{mb:2},children:[e??"Upload Video",t.jsx("input",{type:"file",hidden:!0,accept:"video/*",onChange:s})]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"Upload short videos (max 50MB)"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:"Supported formats: MP4, WebM, MOV"})]})})},QS=({value:e,onChange:n,mediaTypeId:r,title:s="Media",description:o="Upload an image or video",useNewsFormats:i=!0})=>{const[l,d]=x.useState(0),u=i?id.IMAGE:Eo.IMAGE,h=i?id.VIDEO:Eo.VIDEO,f=b=>{n(b?{id:"0",url:b,type:r,format:u}:null)},p=b=>{n(b?{id:"0",url:b,type:r,format:h}:null)},g=(b,y)=>{d(y),e&&n(null)};return t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:s}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:o}),t.jsx(C,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:t.jsxs(Bs,{value:l,onChange:g,children:[t.jsx(An,{label:"Image"}),t.jsx(An,{label:"Video"})]})}),l===0&&t.jsx(kf,{label:"Upload Image",value:(e==null?void 0:e.format)===u?e.url:null,onChange:f}),l===1&&t.jsx(AB,{label:"Upload Video",value:(e==null?void 0:e.format)===h?e.url:null,onChange:p})]})},ZS=({initialData:e,onSubmit:n,submitButtonText:r,isEdit:s})=>{var T;const{profile:o,channelRelations:{hasChannel:i}}=Es(),l=xt();x.useEffect(()=>{o&&(!o.staffChannels||o.staffChannels.length)},[o]);const[d,u]=x.useState(()=>({title:(e==null?void 0:e.title)||"",channelId:(e==null?void 0:e.channelId)||"",status:(e==null?void 0:e.status)||Dn.PUBLISHED,requiredTierId:(e==null?void 0:e.requiredTierId)||null,isPremium:(e==null?void 0:e.isPremium)||!1,content:(e==null?void 0:e.content)||""})),[h,f]=x.useState(!1),[p,g]=x.useState(((T=e==null?void 0:e.media)==null?void 0:T[0])||null),[b,y]=x.useState((e==null?void 0:e.socialLinks)||[]),[S,j]=x.useState(null),P=[],w=async D=>{D.preventDefault(),f(!0),j(null);try{const R={...d,media:p?[p]:[],socialLinks:b};await n(R)}catch(R){console.error("Failed to submit news:",R),j("Failed to submit news")}finally{f(!1)}},I=x.useCallback(D=>{u(R=>({...R,content:JSON.stringify(D)}))},[]);return i()?t.jsx("form",{onSubmit:w,children:t.jsxs(me,{spacing:4,children:[S&&t.jsx(lt,{severity:"error",sx:{width:"100%"},children:S}),o&&!i()&&t.jsx(lt,{severity:"warning",action:t.jsx(ce,{color:"inherit",size:"small",onClick:()=>l(fe.STUDIO_CHANNEL_CREATE),children:"Create Channel"}),children:"You need to create a channel before you can create news articles"}),i()?t.jsxs(t.Fragment,{children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Media"}),t.jsx(me,{spacing:4,children:t.jsx(C,{children:t.jsx(QS,{title:"Cover Media",description:"Upload an image or short video that will be displayed at the top of your news article and in previews.",value:p?{id:p.id||"0",url:p.url,type:p.type,format:p.format}:null,onChange:D=>g(D?{id:D.id,url:D.url,type:D.type,format:D.format,newsId:""}:null),mediaTypeId:El.COVER})})})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Basic Info"}),t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Title"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Create a clear and engaging title for your news article. This will be the first thing readers see."}),t.jsx(et,{value:d.title,onChange:D=>u(R=>({...R,title:D.target.value})),required:!0,fullWidth:!0,placeholder:"Enter news title"})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select the channel where this news will be published. Choose the most relevant channel for your content."}),t.jsx(ht,{fullWidth:!0,disabled:s,children:t.jsx(mt,{value:d.channelId,onChange:D=>u(R=>({...R,channelId:D.target.value})),required:!0,children:o==null?void 0:o.staffChannels.map(D=>t.jsx(je,{value:D.channelId,children:D.channel.name},D.id))})})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Content"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Write your news article using the editor below. You can add text, images, and other media elements."}),t.jsx(Qd,{data:d.content?JSON.parse(d.content):void 0,onChange:I,placeholder:"Start writing your news content...",borderColor:D=>D.palette.mode==="dark"?he(D.palette.common.white,.23):he(D.palette.common.black,.23)})]})]})]}),t.jsx(C,{children:t.jsx(Em,{links:b,onChange:y})}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Publishing Options"}),t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Premium Content"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Mark this content as premium to restrict access to specific subscribers."}),t.jsx(Ro,{control:t.jsx(Xa,{checked:d.isPremium,onChange:D=>u(R=>({...R,isPremium:D.target.checked}))}),label:"Premium Content"})]}),d.isPremium&&t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Required Subscription Tier"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Select which subscription tier is required to access this content. Higher tiers will automatically have access to content from lower tiers."}),t.jsx(ht,{fullWidth:!0,children:t.jsx(mt,{value:d.requiredTierId||"",onChange:D=>u(R=>({...R,requiredTierId:D.target.value})),required:d.isPremium,children:P.map(D=>t.jsxs(je,{value:D.id,children:[D.name," - ",D.description]},D.id))})})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Status"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set the visibility status of your news article."}),t.jsx(ht,{fullWidth:!0,children:t.jsxs(mt,{value:d.status,onChange:D=>{const R=Number(D.target.value);u(_=>({..._,status:R}))},children:[t.jsx(je,{value:Dn.DRAFT,children:"Draft - Save for later"}),t.jsx(je,{value:Dn.PUBLISHED,children:"Published - Visible to readers"}),t.jsx(je,{value:Dn.PENDING_REVIEW,children:"Pending Review - Submit for approval"}),t.jsx(je,{value:Dn.ARCHIVED,children:"Archived - No longer visible"})]})})]})]})]}),t.jsx(ce,{type:"submit",variant:"contained",disabled:h||!i(),sx:{py:1.5,textTransform:"none",fontWeight:600},children:h?"Submitting...":r})]}):null]})}):t.jsx(C,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:t.jsx(Us,{title:"Channel Required",description:"You need to create a channel before you can start publishing news articles.",icon:t.jsx(Pl,{sx:{fontSize:48}}),action:{label:"Create Channel",onClick:()=>l(fe.STUDIO_CHANNEL_CREATE)}})})},RB=()=>{const{api:e}=Ye(),n=xt(),{execute:r}=Ke(),s=async o=>{const i=await r(()=>e==null?void 0:e.app.news.createNews(o),{showSuccessMessage:!0,successMessage:"News article created successfully!"});i&&n(fe.APP_NEWS_VIEW.replace(":id",i.id))};return t.jsxs(C,{sx:{p:3,maxWidth:800},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Create News"}),t.jsx(ZS,{onSubmit:s,submitButtonText:"Create News",isCreate:!0})]})},kB=()=>{const{id:e}=dr(),n=xt(),{api:r}=Ye(),[s,o]=x.useState(null),{execute:i}=Ke(),{execute:l}=Ke();x.useEffect(()=>{(async()=>{if(!e)return;const h=await i(()=>r==null?void 0:r.app.news.get(e),{showErrorToast:!0});h&&o(h)})()},[e,r==null?void 0:r.app.news,i]);const d=async u=>{e&&(await l(()=>r==null?void 0:r.app.news.update(e,u),{showSuccessMessage:!0,successMessage:"News article updated successfully!"}),n(`/news/${e}`))};return s?t.jsxs(St,{sx:{maxWidth:800,mx:"auto",p:3},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Update News"}),t.jsx(ZS,{initialData:s,onSubmit:d,submitButtonText:"Update News",isEdit:!0})]}):null},_B=()=>t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsx(ue,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:2,mb:3}})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3},children:[t.jsx(ue,{variant:"text",width:"60%",height:40}),t.jsx(me,{direction:"row",spacing:1,children:[1,2,3].map(e=>t.jsx(ue,{variant:"circular",width:40,height:40},e))})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:300,sx:{mb:3,borderRadius:1}}),t.jsxs(me,{spacing:2,sx:{mb:3},children:[t.jsx(ue,{variant:"text",width:"100%"}),t.jsx(ue,{variant:"text",width:"95%"}),t.jsx(ue,{variant:"text",width:"90%"}),t.jsx(ue,{variant:"text",width:"85%"}),t.jsx(ue,{variant:"text",width:"95%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:80,sx:{mb:3,borderRadius:1}}),t.jsx(me,{direction:"row",spacing:1,children:[1,2,3,4].map(e=>t.jsx(ue,{variant:"rounded",width:80,height:32},e))})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"50%",height:32,sx:{mb:2}}),t.jsx(me,{spacing:2,children:[1,2,3,4,5].map(e=>t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[t.jsx(ue,{variant:"text",width:"40%"}),t.jsx(ue,{variant:"text",width:"20%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:8,sx:{borderRadius:1}})]},e))})]})})})]})}),OB=()=>{const{id:e}=dr(),{api:n}=Ye(),{execute:r}=Ke(),[s,o]=x.useState(null),[i,l]=x.useState(!0);if(x.useEffect(()=>{(async()=>{if(e){l(!0);const f=await r(()=>n==null?void 0:n.app.news.get(e),{showErrorToast:!0});f&&o(f),l(!1)}})()},[e,r]),i)return t.jsx(_B,{});if(!s)return t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(v,{variant:"h4",children:"Entry not found"})});const d=s.media.find(h=>h.type===El.COVER),u=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(h);return t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsxs(C,{sx:{height:300,width:"100%",position:"relative",mb:3,borderRadius:2,overflow:"hidden"},children:[t.jsx(C,{component:"img",src:(d==null?void 0:d.url)||Kd,alt:s.title,sx:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"}}),t.jsxs(C,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",p:3,color:"white"},children:[t.jsx(v,{variant:"h4",component:"h1",gutterBottom:!0,children:s.title}),t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(C,{component:er,to:fe.APP_CHANNEL_VIEW.replace(":channelId",s.channel.id),sx:{display:"inline-flex",alignItems:"center",bgcolor:"rgba(255, 255, 255, 0.1)",color:"white",px:2,py:1,borderRadius:2,textDecoration:"none",transition:"all 0.2s ease-in-out",border:"1px solid rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px)"}},children:[t.jsx(Il,{sx:{mr:1}}),t.jsx(v,{variant:"subtitle2",children:s.channel.name})]}),t.jsxs(C,{sx:{display:"inline-flex",alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.3)",px:2,py:1,borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx(Cl,{sx:{mr:1,fontSize:"0.9rem"}}),t.jsx(v,{variant:"caption",children:s.creator.displayName})]})]}),t.jsx(v,{variant:"subtitle1",children:new Date(s.publishedAt).toLocaleDateString()})]})]})]})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(C,{sx:{p:3},children:[t.jsx(Qd,{data:kS(s.content),readOnly:!0,borderColor:h=>h.palette.mode==="dark"?he(h.palette.common.white,.1):he(h.palette.common.black,.1)}),t.jsx(C,{sx:{mt:2},children:s.tags.map(h=>t.jsx(Xe,{label:h.title,variant:"outlined",sx:{mr:1,mb:1}},h.id))})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(me,{spacing:3,children:[t.jsx(Em,{links:s.socialLinks}),s.qualityMetrics&&t.jsxs(rt,{elevation:0,sx:{p:2,bgcolor:"success.light",color:"success.contrastText",display:"flex",alignItems:"center",gap:2,borderRadius:2},children:[t.jsx(Dm,{fontSize:"large"}),t.jsxs(C,{children:[t.jsx(v,{variant:"overline",children:"Quality Score"}),t.jsxs(v,{variant:"h4",component:"div",children:[s.qualityMetrics.overallQualityScore.toFixed(1),"/10"]})]})]}),s.newsFund&&t.jsxs(rt,{elevation:0,sx:{p:2,bgcolor:"primary.light",color:"primary.contrastText",display:"flex",alignItems:"center",gap:2,borderRadius:2},children:[t.jsx(qd,{fontSize:"large"}),t.jsxs(C,{children:[t.jsx(v,{variant:"overline",children:"News Fund"}),t.jsx(v,{variant:"h4",component:"div",children:u(s.newsFund.amount)})]})]})]})})]})})};var Xm={},MB=Qe;Object.defineProperty(Xm,"__esModule",{value:!0});var tu=Xm.default=void 0,NB=MB(Ze()),LB=t;tu=Xm.default=(0,NB.default)((0,LB.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var Qm={},$B=Qe;Object.defineProperty(Qm,"__esModule",{value:!0});var fi=Qm.default=void 0,FB=$B(Ze()),WB=t;fi=Qm.default=(0,FB.default)((0,WB.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");const Zm=({open:e,onClose:n,onConfirm:r,title:s,content:o,confirmText:i="Confirm",cancelText:l="Cancel",confirmColor:d="primary"})=>t.jsxs(Gt,{open:e,onClose:n,PaperProps:{sx:{width:"100%",maxWidth:400,borderRadius:2}},children:[t.jsx(Qt,{sx:{pb:1,fontWeight:600},children:s}),t.jsx(Yt,{children:t.jsx(MR,{sx:{color:"text.secondary",fontSize:"0.875rem"},children:o})}),t.jsxs(qt,{sx:{px:3,pb:2},children:[t.jsx(ce,{onClick:n,variant:"outlined",color:"inherit",sx:{textTransform:"none",fontWeight:600,minWidth:100},children:l}),t.jsx(ce,{onClick:r,variant:"contained",color:d,autoFocus:!0,sx:{textTransform:"none",fontWeight:600,minWidth:100},children:i})]})]}),BB=({news:e,onRefresh:n})=>{var I,T,D;const[r,s]=x.useState(null),[o,i]=x.useState(!1),l=xt(),{api:d}=Ye(),{execute:u}=Ke(),h=cn(),f=R=>{R.stopPropagation(),s(R.currentTarget)},p=()=>{s(null)},g=()=>{l(fe.APP_NEWS_VIEW.replace(":id",e.id)),p()},b=()=>{l(fe.STUDIO_NEWS_EDIT.replace(":id",e.id)),p()},y=()=>{i(!0),p()},S=async()=>{await u(()=>d==null?void 0:d.app.news.delete(e.id),{showSuccessMessage:!0,successMessage:"News article deleted successfully"})&&n(),i(!1)},j=(I=e.media)==null?void 0:I.find(R=>R.type===El.COVER),w=(()=>{const R=new Date;return new Date(e.publishedAt)>R?{label:"Scheduled",color:"warning"}:{label:"Published",color:"success"}})();return t.jsxs(Fe,{onClick:()=>l(fe.STUDIO_NEWS_VIEW.replace(":id",e.id)),sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",bgcolor:R=>he(R.palette.mode==="dark"?R.palette.common.white:R.palette.common.black,R.palette.mode==="dark"?.05:.03),transition:h.transitions.create(["background-color","box-shadow","transform"]),"&:hover":{bgcolor:R=>he(R.palette.mode==="dark"?R.palette.common.white:R.palette.common.black,R.palette.mode==="dark"?.08:.05),transform:"translateY(-2px)",boxShadow:R=>`0 4px 12px ${he(R.palette.primary.main,.1)}`}},children:[t.jsx(C,{sx:{height:{xs:120,sm:140},backgroundImage:`url(${(j==null?void 0:j.url)||Kd})`,backgroundSize:"cover",backgroundPosition:"center",borderTopLeftRadius:1,borderTopRightRadius:1,position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:R=>`linear-gradient(180deg, 
              ${he(R.palette.background.default,0)} 0%, 
              ${he(R.palette.background.default,.8)} 100%)`}},children:t.jsx(Oe,{onClick:f,sx:{position:"absolute",top:8,right:8,zIndex:1,color:"text.primary",bgcolor:R=>he(R.palette.background.paper,.8),backdropFilter:"blur(4px)","&:hover":{bgcolor:R=>he(R.palette.background.paper,.95)}},children:t.jsx(tu,{fontSize:"small"})})}),t.jsx(Ve,{sx:{flexGrow:1,p:{xs:2,sm:2.5}},children:t.jsxs(me,{spacing:{xs:1.5,sm:2},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5,fontSize:{xs:"1rem",sm:"1.125rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.3},children:e.title}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:1},children:[t.jsx(Il,{sx:{fontSize:"0.875rem",mr:.5,color:"text.secondary"}}),t.jsx(v,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:e.channel.name})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",fontSize:{xs:"0.875rem",sm:"0.875rem"},lineHeight:1.4},children:((T=e.content)==null?void 0:T.substring(0,100))+"..."})]}),t.jsxs(me,{direction:"row",spacing:1,flexWrap:"wrap",sx:{gap:1},children:[t.jsx(Xe,{size:"small",label:w.label,color:w.color,sx:{height:24,fontSize:"0.75rem","& .MuiChip-label":{px:1}}}),t.jsx(Xe,{size:"small",label:new Date(e.publishedAt).toLocaleDateString(),sx:{height:24,fontSize:"0.75rem",bgcolor:R=>he(R.palette.text.secondary,.1),color:"text.secondary","& .MuiChip-label":{px:1}}}),((D=e==null?void 0:e.tags)==null?void 0:D.length)>0&&t.jsx(Xe,{size:"small",label:`${e.tags.length} tags`,sx:{height:24,fontSize:"0.75rem",bgcolor:R=>he(R.palette.secondary.main,R.palette.mode==="dark"?.15:.08),color:"secondary.main","& .MuiChip-label":{px:1}}})]})]})}),t.jsxs(Oo,{anchorEl:r,open:!!r,onClose:p,onClick:R=>R.stopPropagation(),PaperProps:{sx:{width:200,mt:1}},children:[t.jsxs(je,{onClick:g,children:[t.jsx(Xt,{children:t.jsx(ga,{fontSize:"small"})}),t.jsx(Bt,{primary:"View Article"})]}),t.jsxs(je,{onClick:b,children:[t.jsx(Xt,{children:t.jsx(fi,{fontSize:"small"})}),t.jsx(Bt,{primary:"Edit Article"})]}),t.jsxs(je,{onClick:y,sx:{color:"error.main"},children:[t.jsx(Xt,{sx:{color:"inherit"},children:t.jsx($o,{fontSize:"small"})}),t.jsx(Bt,{primary:"Delete Article"})]})]}),t.jsx(Zm,{open:o,title:"Delete News Article",content:"Are you sure you want to delete this news article? This action cannot be undone.",onConfirm:S,onClose:()=>i(!1),confirmText:"Delete",confirmColor:"error"})]})},VB=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(1),[o,i]=x.useState(!0),[l,d]=x.useState(!0),{api:u}=Ye(),{profile:h}=Es(),f=xt(),{execute:p}=Ke(),g=cn(),b=()=>{y(r+1)},y=async(j=r)=>{if(!h)return;const P=await p(()=>u==null?void 0:u.app.news.getCreatorNews(h.id,{page:j,limit:12}),{showErrorToast:!0});P&&(n(w=>j===1?(P==null?void 0:P.items)??[]:[...w,...(P==null?void 0:P.items)??[]]),s((P==null?void 0:P.metadata.currentPage)??1),i((P==null?void 0:P.metadata.hasNext)===!0)),d(!1)};x.useEffect(()=>{h&&y(1)},[h]);const S=()=>t.jsxs(C,{sx:{p:2,borderRadius:1,bgcolor:j=>he(j.palette.mode==="dark"?j.palette.common.white:j.palette.common.black,j.palette.mode==="dark"?.05:.03),height:{xs:280,sm:320},transition:g.transitions.create(["background-color","height"])},children:[t.jsx(ue,{variant:"rectangular",sx:{borderRadius:1,height:{xs:120,sm:140},mb:2}}),t.jsxs(C,{sx:{p:1},children:[t.jsx(ue,{width:"90%",height:24,sx:{mb:1}}),t.jsx(ue,{width:"60%",height:16,sx:{mb:1}}),t.jsx(ue,{width:"95%",height:20,sx:{mb:1}}),t.jsx(ue,{width:"80%",height:20,sx:{mb:2}}),t.jsxs(C,{sx:{display:"flex",gap:1},children:[t.jsx(ue,{width:"25%",height:24}),t.jsx(ue,{width:"30%",height:24}),t.jsx(ue,{width:"20%",height:24})]})]})]});return t.jsxs(C,{sx:{px:{xs:2,sm:3,md:4},py:{xs:2,sm:3},maxWidth:"lg",mx:"auto",width:"100%"},children:[t.jsx(C,{sx:{mb:{xs:2,sm:3}},children:t.jsx(v,{variant:"h5",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:l?t.jsx(ue,{width:150}):"My News"})}),l?t.jsx(F,{container:!0,spacing:2,children:[1,2,3,4].map(j=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(S,{})},j))}):e.length===0?t.jsx(Us,{title:"No News Yet",description:"Start creating your first news article to share with your subscribers.",icon:t.jsx(om,{sx:{fontSize:{xs:40,sm:48}}}),action:{label:"Create News",onClick:()=>f(fe.STUDIO_NEWS_CREATE)}}):t.jsx(Cs,{dataLength:e.length,next:b,hasMore:o,loader:t.jsx(F,{container:!0,spacing:2,sx:{mt:.5},children:[1,2,3].map(j=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(S,{})},j))}),children:t.jsx(F,{container:!0,spacing:2,children:e.map(j=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(BB,{news:j,onRefresh:()=>y(1)})},j.id))})})]})},UB=({channel:e,onRefresh:n})=>{var b;const r=xt(),{api:s}=Ye(),{execute:o}=Ke(),[i,l]=x.useState(null),[d,u]=x.useState(!1),h=cn(),f=y=>{y.stopPropagation(),l(y.currentTarget)},p=()=>{l(null)},g=async()=>{await o(()=>s==null?void 0:s.app.channel.deleteChannel(e.id),{showSuccessMessage:!0,successMessage:"Channel deleted successfully"})&&n(),u(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs(Fe,{onClick:()=>r(fe.STUDIO_CHANNEL_VIEW.replace(":id",e.id)),sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",transition:h.transitions.create(["box-shadow","transform"],{duration:h.transitions.duration.shorter}),"&:hover":{transform:"translateY(-2px)",boxShadow:y=>`0 4px 12px ${he(y.palette.primary.main,.1)}`}},children:[t.jsx(C,{sx:{height:{xs:100,sm:120},backgroundImage:`url(${(e==null?void 0:e.bannerUrl)||"https://via.placeholder.com/600x400"})`,backgroundSize:"cover",backgroundPosition:"center",borderTopLeftRadius:1,borderTopRightRadius:1,position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:y=>`linear-gradient(180deg, 
                ${he(y.palette.background.default,0)} 0%, 
                ${he(y.palette.background.default,.8)} 100%)`}},children:t.jsx(Oe,{onClick:f,sx:{position:"absolute",top:8,right:8,zIndex:1,color:"text.primary",bgcolor:y=>he(y.palette.background.paper,.8),backdropFilter:"blur(4px)","&:hover":{bgcolor:y=>he(y.palette.background.paper,.95)}},children:t.jsx(tu,{fontSize:"small"})})}),t.jsx(Ve,{sx:{flexGrow:1,p:{xs:2,sm:2.5}},children:t.jsxs(me,{spacing:{xs:1.5,sm:2},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:.5,fontSize:{xs:"1rem",sm:"1.125rem"}},children:e.name}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",fontSize:{xs:"0.875rem",sm:"0.875rem"},lineHeight:1.5},children:e.description})]}),t.jsxs(me,{direction:"row",spacing:1,flexWrap:"wrap",sx:{gap:1},children:[t.jsx(Xe,{size:"small",label:`${(b=e==null?void 0:e.stats)==null?void 0:b.activeSubscriptionCount} subscribers`,sx:{height:24,fontSize:"0.75rem",bgcolor:y=>he(y.palette.primary.main,y.palette.mode==="dark"?.15:.08),color:"primary.main","& .MuiChip-label":{px:1}}}),t.jsx(Xe,{size:"small",label:"10 news",sx:{height:24,fontSize:"0.75rem",bgcolor:y=>he(y.palette.secondary.main,y.palette.mode==="dark"?.15:.08),color:"secondary.main","& .MuiChip-label":{px:1}}})]})]})})]}),t.jsxs(Oo,{anchorEl:i,open:!!i,onClose:p,onClick:y=>y.stopPropagation(),PaperProps:{sx:{width:200,mt:1}},children:[t.jsxs(je,{onClick:()=>{r(fe.STUDIO_CHANNEL_EDIT.replace(":id",e.id)),p()},children:[t.jsx(Xt,{children:t.jsx(fi,{fontSize:"small"})}),t.jsx(Bt,{primary:"Edit Channel"})]}),t.jsxs(je,{onClick:()=>{r(fe.APP_CHANNEL_VIEW.replace(":id",e.id)),p()},children:[t.jsx(Xt,{children:t.jsx(ga,{fontSize:"small"})}),t.jsx(Bt,{primary:"View Public Page"})]}),t.jsxs(je,{onClick:()=>{u(!0),p()},sx:{color:"error.main"},children:[t.jsx(Xt,{sx:{color:"inherit"},children:t.jsx($o,{fontSize:"small"})}),t.jsx(Bt,{primary:"Delete Channel"})]})]}),t.jsx(Zm,{open:d,onClose:()=>u(!1),onConfirm:g,title:"Delete Channel",content:"Are you sure you want to delete this channel? This action cannot be undone.",confirmText:"Delete",confirmColor:"error"})]})},zB=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(1),[o,i]=x.useState(!0),[l,d]=x.useState(!0),{api:u}=Ye(),h=xt(),f=cn(),{execute:p}=Ke(),g=()=>{b(r+1)},b=async(S=r)=>{const j=await p(()=>u==null?void 0:u.studio.getMyChannels(),{showErrorToast:!0});j&&(n(P=>S===1?(j==null?void 0:j.items)??[]:[...P,...(j==null?void 0:j.items)??[]]),s((j==null?void 0:j.metadata.currentPage)??1),i((j==null?void 0:j.metadata.hasNext)===!0)),d(!1)};x.useEffect(()=>{b(1)},[]);const y=()=>t.jsxs(C,{sx:{p:2,borderRadius:1,bgcolor:S=>he(S.palette.mode==="dark"?S.palette.common.white:S.palette.common.black,S.palette.mode==="dark"?.05:.03),height:{xs:180,sm:200},transition:f.transitions.create(["background-color","height"])},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[t.jsx(ue,{variant:"circular",width:32,height:32,sx:{mr:1.5}}),t.jsxs(C,{sx:{width:"100%"},children:[t.jsx(ue,{width:"60%",height:20}),t.jsx(ue,{width:"40%",height:16})]})]}),t.jsx(ue,{variant:"rectangular",sx:{borderRadius:1,height:{xs:70,sm:80}}}),t.jsx(C,{sx:{mt:1.5},children:t.jsx(ue,{width:"30%",height:20})})]});return t.jsxs(C,{sx:{px:{xs:2,sm:3,md:4},py:{xs:2,sm:3},maxWidth:"lg",mx:"auto",width:"100%"},children:[t.jsx(C,{sx:{mb:{xs:2,sm:3}},children:t.jsx(v,{variant:"h5",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:l?t.jsx(ue,{width:150}):"My Channels"})}),l?t.jsx(F,{container:!0,spacing:2,children:[1,2].map(S=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(y,{})},S))}):e.length===0?t.jsx(Us,{title:"No Channels Yet",description:"Create your first channel to start publishing news and connecting with subscribers.",icon:t.jsx(Pl,{sx:{fontSize:{xs:40,sm:48}}}),action:{label:"Create Channel",onClick:()=>h(fe.STUDIO_CHANNEL_CREATE)}}):t.jsx(Cs,{dataLength:e.length,next:g,hasMore:o,loader:t.jsx(F,{container:!0,spacing:2,sx:{mt:.5},children:[1,2].map(S=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(y,{})},S))}),children:t.jsx(F,{container:!0,spacing:2,children:e.map(S=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(UB,{channel:S,onRefresh:()=>b(1)})},S.id))})})]})},Vn={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",PRIVATE:"PRIVATE",SUSPENDED:"SUSPENDED",DELETED:"DELETED"},Fr={OWNER:"OWNER",ADMIN:"ADMIN",MODERATOR:"MODERATOR",MEMBER:"MEMBER"};function HB(e){switch(e){case Vn.ACTIVE:return"Active";case Vn.INACTIVE:return"Inactive";case Vn.PRIVATE:return"Private";case Vn.SUSPENDED:return"Suspended";case Vn.DELETED:return"Deleted";default:return e}}function GB(e){switch(e){case Vn.ACTIVE:return"success";case Vn.INACTIVE:return"secondary";case Vn.PRIVATE:return"info";case Vn.SUSPENDED:return"warning";case Vn.DELETED:return"error";default:return"default"}}function YB(e){switch(e){case Fr.OWNER:return"Owner";case Fr.ADMIN:return"Admin";case Fr.MODERATOR:return"Moderator";case Fr.MEMBER:return"Member";default:return e}}function qB(e){switch(e){case Fr.OWNER:return"error";case Fr.ADMIN:return"warning";case Fr.MODERATOR:return"info";case Fr.MEMBER:return"default";default:return"default"}}const KB=[{value:Vn.ACTIVE,label:"Active"},{value:Vn.INACTIVE,label:"Inactive"},{value:Vn.PRIVATE,label:"Private"},{value:Vn.SUSPENDED,label:"Suspended"},{value:Vn.DELETED,label:"Deleted"}],JB=[{value:Fr.ADMIN,label:"Admin"},{value:Fr.MODERATOR,label:"Moderator"},{value:Fr.MEMBER,label:"Member"}],ro={PENDING:"PENDING",ACCEPTED:"ACCEPTED",EXPIRED:"EXPIRED",CANCELLED:"CANCELLED"};function XB(e){switch(e){case ro.PENDING:return"Pending";case ro.ACCEPTED:return"Accepted";case ro.EXPIRED:return"Expired";case ro.CANCELLED:return"Cancelled";default:return e}}function QB(e){switch(e){case ro.PENDING:return"warning";case ro.ACCEPTED:return"success";case ro.EXPIRED:return"default";case ro.CANCELLED:return"error";default:return"default"}}const Qn={USD:{code:"USD",decimals:2,symbol:"$",name:"US Dollar"},EUR:{code:"EUR",decimals:2,symbol:"",name:"Euro"},GBP:{code:"GBP",decimals:2,symbol:"",name:"British Pound"},JPY:{code:"JPY",decimals:0,symbol:"",name:"Japanese Yen"},CAD:{code:"CAD",decimals:2,symbol:"C$",name:"Canadian Dollar"},AUD:{code:"AUD",decimals:2,symbol:"A$",name:"Australian Dollar"},CHF:{code:"CHF",decimals:2,symbol:"CHF",name:"Swiss Franc"},CNY:{code:"CNY",decimals:2,symbol:"",name:"Chinese Yuan"},INR:{code:"INR",decimals:2,symbol:"",name:"Indian Rupee"},BRL:{code:"BRL",decimals:2,symbol:"R$",name:"Brazilian Real"},KRW:{code:"KRW",decimals:0,symbol:"",name:"South Korean Won"},SEK:{code:"SEK",decimals:2,symbol:"kr",name:"Swedish Krona"},NOK:{code:"NOK",decimals:2,symbol:"kr",name:"Norwegian Krone"},DKK:{code:"DKK",decimals:2,symbol:"kr",name:"Danish Krone"},PLN:{code:"PLN",decimals:2,symbol:"z",name:"Polish Zoty"},TRY:{code:"TRY",decimals:2,symbol:"",name:"Turkish Lira"},RUB:{code:"RUB",decimals:2,symbol:"",name:"Russian Ruble"},MXN:{code:"MXN",decimals:2,symbol:"$",name:"Mexican Peso"},SGD:{code:"SGD",decimals:2,symbol:"S$",name:"Singapore Dollar"},HKD:{code:"HKD",decimals:2,symbol:"HK$",name:"Hong Kong Dollar"},NZD:{code:"NZD",decimals:2,symbol:"NZ$",name:"New Zealand Dollar"},ZAR:{code:"ZAR",decimals:2,symbol:"R",name:"South African Rand"},AED:{code:"AED",decimals:2,symbol:".",name:"UAE Dirham"},SAR:{code:"SAR",decimals:2,symbol:".",name:"Saudi Riyal"},ILS:{code:"ILS",decimals:2,symbol:"",name:"Israeli Shekel"},THB:{code:"THB",decimals:2,symbol:"",name:"Thai Baht"},MYR:{code:"MYR",decimals:2,symbol:"RM",name:"Malaysian Ringgit"},IDR:{code:"IDR",decimals:2,symbol:"Rp",name:"Indonesian Rupiah"},PHP:{code:"PHP",decimals:2,symbol:"",name:"Philippine Peso"},VND:{code:"VND",decimals:0,symbol:"",name:"Vietnamese Dong"},EGP:{code:"EGP",decimals:2,symbol:"E",name:"Egyptian Pound"},NGN:{code:"NGN",decimals:2,symbol:"",name:"Nigerian Naira"},KES:{code:"KES",decimals:2,symbol:"KSh",name:"Kenyan Shilling"},GHS:{code:"GHS",decimals:2,symbol:"",name:"Ghanaian Cedi"},MAD:{code:"MAD",decimals:2,symbol:"..",name:"Moroccan Dirham"},TND:{code:"TND",decimals:3,symbol:".",name:"Tunisian Dinar"},JOD:{code:"JOD",decimals:3,symbol:".",name:"Jordanian Dinar"},KWD:{code:"KWD",decimals:3,symbol:".",name:"Kuwaiti Dinar"},BHD:{code:"BHD",decimals:3,symbol:".",name:"Bahraini Dinar"},OMR:{code:"OMR",decimals:3,symbol:"..",name:"Omani Rial"},QAR:{code:"QAR",decimals:2,symbol:".",name:"Qatari Riyal"},LBP:{code:"LBP",decimals:2,symbol:".",name:"Lebanese Pound"},IRR:{code:"IRR",decimals:2,symbol:"",name:"Iranian Rial"},PKR:{code:"PKR",decimals:2,symbol:"",name:"Pakistani Rupee"},BDT:{code:"BDT",decimals:2,symbol:"",name:"Bangladeshi Taka"},LKR:{code:"LKR",decimals:2,symbol:"",name:"Sri Lankan Rupee"},NPR:{code:"NPR",decimals:2,symbol:"",name:"Nepalese Rupee"},AFN:{code:"AFN",decimals:2,symbol:"",name:"Afghan Afghani"},UZS:{code:"UZS",decimals:2,symbol:"",name:"Uzbekistani Som"},KZT:{code:"KZT",decimals:2,symbol:"",name:"Kazakhstani Tenge"},GEL:{code:"GEL",decimals:2,symbol:"",name:"Georgian Lari"},AMD:{code:"AMD",decimals:2,symbol:"",name:"Armenian Dram"},AZN:{code:"AZN",decimals:2,symbol:"",name:"Azerbaijani Manat"},BGN:{code:"BGN",decimals:2,symbol:"",name:"Bulgarian Lev"},HRK:{code:"HRK",decimals:2,symbol:"kn",name:"Croatian Kuna"},CZK:{code:"CZK",decimals:2,symbol:"K",name:"Czech Koruna"},HUF:{code:"HUF",decimals:2,symbol:"Ft",name:"Hungarian Forint"},RON:{code:"RON",decimals:2,symbol:"lei",name:"Romanian Leu"},RSD:{code:"RSD",decimals:2,symbol:".",name:"Serbian Dinar"},UAH:{code:"UAH",decimals:2,symbol:"",name:"Ukrainian Hryvnia"},BYN:{code:"BYN",decimals:2,symbol:"Br",name:"Belarusian Ruble"},MDL:{code:"MDL",decimals:2,symbol:"lei",name:"Moldovan Leu"},ALL:{code:"ALL",decimals:2,symbol:"L",name:"Albanian Lek"},MKD:{code:"MKD",decimals:2,symbol:"",name:"Macedonian Denar"},BAM:{code:"BAM",decimals:2,symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark"},ISK:{code:"ISK",decimals:0,symbol:"kr",name:"Icelandic Krna"},CLP:{code:"CLP",decimals:0,symbol:"$",name:"Chilean Peso"},COP:{code:"COP",decimals:2,symbol:"$",name:"Colombian Peso"},PEN:{code:"PEN",decimals:2,symbol:"S/",name:"Peruvian Sol"},UYU:{code:"UYU",decimals:2,symbol:"$U",name:"Uruguayan Peso"},ARS:{code:"ARS",decimals:2,symbol:"$",name:"Argentine Peso"},BOB:{code:"BOB",decimals:2,symbol:"Bs",name:"Bolivian Boliviano"},PYG:{code:"PYG",decimals:0,symbol:"",name:"Paraguayan Guaran"},VES:{code:"VES",decimals:2,symbol:"Bs.S",name:"Venezuelan Bolvar Soberano"},GYD:{code:"GYD",decimals:2,symbol:"$",name:"Guyanese Dollar"},SRD:{code:"SRD",decimals:2,symbol:"$",name:"Surinamese Dollar"},TTD:{code:"TTD",decimals:2,symbol:"TT$",name:"Trinidad and Tobago Dollar"},JMD:{code:"JMD",decimals:2,symbol:"J$",name:"Jamaican Dollar"},BBD:{code:"BBD",decimals:2,symbol:"$",name:"Barbadian Dollar"},BSD:{code:"BSD",decimals:2,symbol:"$",name:"Bahamian Dollar"},BZD:{code:"BZD",decimals:2,symbol:"BZ$",name:"Belize Dollar"},GTQ:{code:"GTQ",decimals:2,symbol:"Q",name:"Guatemalan Quetzal"},HNL:{code:"HNL",decimals:2,symbol:"L",name:"Honduran Lempira"},NIO:{code:"NIO",decimals:2,symbol:"C$",name:"Nicaraguan Crdoba"},CRC:{code:"CRC",decimals:2,symbol:"",name:"Costa Rican Coln"},PAB:{code:"PAB",decimals:2,symbol:"B/.",name:"Panamanian Balboa"},DOP:{code:"DOP",decimals:2,symbol:"RD$",name:"Dominican Peso"},HTG:{code:"HTG",decimals:2,symbol:"G",name:"Haitian Gourde"},CUP:{code:"CUP",decimals:2,symbol:"",name:"Cuban Peso"},XCD:{code:"XCD",decimals:2,symbol:"$",name:"East Caribbean Dollar"},AWG:{code:"AWG",decimals:2,symbol:"",name:"Aruban Florin"},ANG:{code:"ANG",decimals:2,symbol:"",name:"Netherlands Antillean Guilder"},SVC:{code:"SVC",decimals:2,symbol:"$",name:"Salvadoran Coln"},FJD:{code:"FJD",decimals:2,symbol:"$",name:"Fijian Dollar"},PGK:{code:"PGK",decimals:2,symbol:"K",name:"Papua New Guinean Kina"},SBD:{code:"SBD",decimals:2,symbol:"$",name:"Solomon Islands Dollar"},VUV:{code:"VUV",decimals:0,symbol:"Vt",name:"Vanuatu Vatu"},WST:{code:"WST",decimals:2,symbol:"T",name:"Samoan Tl"},TOP:{code:"TOP",decimals:2,symbol:"T$",name:"Tongan Paanga"},XPF:{code:"XPF",decimals:0,symbol:"",name:"CFP Franc"},XOF:{code:"XOF",decimals:0,symbol:"CFA",name:"West African CFA Franc"},XAF:{code:"XAF",decimals:0,symbol:"FCFA",name:"Central African CFA Franc"},KMF:{code:"KMF",decimals:0,symbol:"CF",name:"Comorian Franc"},DJF:{code:"DJF",decimals:0,symbol:"Fdj",name:"Djiboutian Franc"},ETB:{code:"ETB",decimals:2,symbol:"Br",name:"Ethiopian Birr"},ERN:{code:"ERN",decimals:2,symbol:"Nfk",name:"Eritrean Nakfa"},SOS:{code:"SOS",decimals:2,symbol:"S",name:"Somali Shilling"},UGX:{code:"UGX",decimals:0,symbol:"USh",name:"Ugandan Shilling"},TZS:{code:"TZS",decimals:2,symbol:"TSh",name:"Tanzanian Shilling"},RWF:{code:"RWF",decimals:0,symbol:"R",name:"Rwandan Franc"},BIF:{code:"BIF",decimals:0,symbol:"FBu",name:"Burundian Franc"},MWK:{code:"MWK",decimals:2,symbol:"MK",name:"Malawian Kwacha"},ZMW:{code:"ZMW",decimals:2,symbol:"ZK",name:"Zambian Kwacha"},BWP:{code:"BWP",decimals:2,symbol:"P",name:"Botswanan Pula"},NAD:{code:"NAD",decimals:2,symbol:"$",name:"Namibian Dollar"},SZL:{code:"SZL",decimals:2,symbol:"E",name:"Swazi Lilangeni"},LSL:{code:"LSL",decimals:2,symbol:"M",name:"Lesotho Loti"},MZN:{code:"MZN",decimals:2,symbol:"MT",name:"Mozambican Metical"},MGA:{code:"MGA",decimals:2,symbol:"Ar",name:"Malagasy Ariary"},MUR:{code:"MUR",decimals:2,symbol:"",name:"Mauritian Rupee"},SCR:{code:"SCR",decimals:2,symbol:"",name:"Seychellois Rupee"},CVE:{code:"CVE",decimals:2,symbol:"$",name:"Cape Verdean Escudo"},GMD:{code:"GMD",decimals:2,symbol:"D",name:"Gambian Dalasi"},GNF:{code:"GNF",decimals:0,symbol:"FG",name:"Guinean Franc"},LRD:{code:"LRD",decimals:2,symbol:"$",name:"Liberian Dollar"},SLL:{code:"SLL",decimals:2,symbol:"Le",name:"Sierra Leonean Leone"},STN:{code:"STN",decimals:2,symbol:"Db",name:"So Tom and Prncipe Dobra"},AOA:{code:"AOA",decimals:2,symbol:"Kz",name:"Angolan Kwanza"},CDF:{code:"CDF",decimals:2,symbol:"FC",name:"Congolese Franc"},XDR:{code:"XDR",decimals:5,symbol:"SDR",name:"Special Drawing Rights"}};function ZB(){return Object.values(Qn)}const e6=[Qn.USD,Qn.EUR,Qn.GBP,Qn.JPY,Qn.CAD,Qn.AUD,Qn.CHF,Qn.CNY],g0=[...e6,Qn.INR,Qn.BRL,Qn.KRW,Qn.MXN,Qn.SGD,Qn.HKD,Qn.NZD,Qn.ZAR],ew=({initialData:e,onSubmit:n,submitButtonText:r})=>{const[s,o]=x.useState(!1),[i,l]=x.useState(()=>({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",handle:(e==null?void 0:e.handle)||"",status:(e==null?void 0:e.status)||Vn.ACTIVE,logoUrl:(e==null?void 0:e.logoUrl)||"",bannerUrl:(e==null?void 0:e.bannerUrl)||"",tags:(e==null?void 0:e.tags)||[],defaultCurrency:(e==null?void 0:e.defaultCurrency)||"USD"})),[d,u]=x.useState((e==null?void 0:e.logoUrl)||void 0),[h,f]=x.useState((e==null?void 0:e.bannerUrl)||void 0),p=async g=>{g.preventDefault(),o(!0);try{await n({...i,logoUrl:d||"",bannerUrl:h||"",tags:[],defaultCurrency:i.defaultCurrency})}catch(b){console.error("Failed to submit channel:",b)}finally{o(!1)}};return t.jsx("form",{onSubmit:p,children:t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Branding"}),t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel Logo"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This image will appear next to your channel's content. Use a square image for best results."}),t.jsx(kf,{label:"Upload Channel Logo",value:d,onChange:u})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel Banner"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This image appears at the top of your channel page. Recommended size: 2048 x 1152 pixels."}),t.jsx(kf,{label:"Upload Channel Banner",value:h,onChange:f})]})]})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Basic Info"}),t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel Name"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose a name that represents your channel. You can change this later."}),t.jsx(et,{value:i.name,onChange:g=>l(b=>({...b,name:g.target.value})),required:!0,fullWidth:!0,placeholder:"Enter channel name"})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel Handle"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"This is the unique identifier for your channel. It will be used in the URL of your channel page."}),t.jsx(et,{value:i.handle,onChange:g=>l(b=>({...b,handle:g.target.value})),required:!0,fullWidth:!0,placeholder:"Enter channel handle"})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Description"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Tell viewers about your channel. This appears in search results and your channel page."}),t.jsx(et,{value:i.description,onChange:g=>l(b=>({...b,description:g.target.value})),multiline:!0,rows:4,fullWidth:!0,placeholder:"Tell your story..."})]})]})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Channel Settings"}),t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Default Currency"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose your channel's currency. All tiers, subscriptions, and transactions will use this currency. This cannot be changed later."}),t.jsx(ht,{fullWidth:!0,children:t.jsxs(mt,{value:i.defaultCurrency,onChange:g=>{l(b=>({...b,defaultCurrency:g.target.value}))},disabled:!!e,children:[g0.map(g=>t.jsxs(je,{value:g.code,children:[g.symbol," ",g.code," - ",g.name]},g.code)),t.jsx(je,{disabled:!0,children:""}),ZB().filter(g=>!g0.find(b=>b.code===g.code)).map(g=>t.jsxs(je,{value:g.code,children:[g.symbol," ",g.code," - ",g.name]},g.code))]})})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Channel Visibility"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Control who can see and access your channel's content."}),t.jsx(ht,{fullWidth:!0,children:t.jsxs(mt,{value:i.status,onChange:g=>{l(b=>({...b,status:g.target.value}))},children:[t.jsx(je,{value:Vn.ACTIVE,children:"Public - Channel is visible to everyone"}),t.jsx(je,{value:Vn.PRIVATE,children:"Private - Only invited members can access"}),t.jsx(je,{value:Vn.INACTIVE,children:"Hidden - Channel is temporarily hidden from public view"})]})})]})]})]}),t.jsx(ce,{type:"submit",variant:"contained",disabled:s,sx:{py:1.5,textTransform:"none",fontWeight:600},children:s?"Submitting...":r})]})})},t6=()=>{const{api:e}=Ye(),n=xt(),{execute:r}=Ke(),{actions:{refreshProfile:s}}=Es(),o=async i=>{if(!i)return;await r(()=>e==null?void 0:e.studio.createChannel(i),{showSuccessMessage:!0,successMessage:"Channel created successfully!"})&&(await s(),n(`${fe.STUDIO_CHANNELS}`))};return t.jsxs(St,{sx:{maxWidth:800,mx:"auto",p:3},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Create Channel"}),t.jsx(ew,{onSubmit:o,submitButtonText:"Create Channel"})]})},n6=()=>t.jsxs(St,{maxWidth:"md",sx:{mt:4,textAlign:"center"},children:[t.jsx(v,{variant:"h3",gutterBottom:!0,children:"404 - Page Not Found"}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"The page you are looking for does not exist."}),t.jsx(C,{sx:{mt:4},children:t.jsx(ce,{variant:"contained",color:"primary",component:er,to:"/",children:"Go to Home"})})]}),tw=({expenseOrder:e,channels:n,expenseTypes:r,onSave:s,onSubmit:o,loading:i=!1,isEdit:l=!1})=>{const[d,u]=x.useState({channelId:(e==null?void 0:e.channel.id)||"",typeId:(e==null?void 0:e.type.id)||"",title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",amount:(e==null?void 0:e.amount)||0,currency:(e==null?void 0:e.currency)||"USD",receiptUrl:(e==null?void 0:e.receiptUrl)||"",notes:(e==null?void 0:e.notes)||""}),[h,f]=x.useState({}),[p,g]=x.useState(!1),b=()=>{const w={};return d.channelId||(w.channelId="Channel is required"),d.typeId||(w.typeId="Expense type is required"),d.title.trim()||(w.title="Title is required"),d.description.trim()||(w.description="Description is required"),d.amount<=0&&(w.amount="Amount must be greater than 0"),d.currency.trim()||(w.currency="Currency is required"),f(w),Object.keys(w).length===0},y=(w,I)=>{u(T=>({...T,[w]:I})),h[w]&&f(T=>({...T,[w]:""}))},S=async()=>{if(b())try{if(l){const w={title:d.title,description:d.description,amount:d.amount,currency:d.currency,typeId:d.typeId,receiptUrl:d.receiptUrl,notes:d.notes};await s(w)}else{const w={channelId:d.channelId,typeId:d.typeId,title:d.title,description:d.description,amount:d.amount,currency:d.currency,receiptUrl:d.receiptUrl,notes:d.notes};await s(w)}}catch(w){console.error("Error saving expense order:",w)}},j=async()=>{if(!(!e||!o)){g(!0);try{await o(e)}catch(w){console.error("Error submitting expense order:",w)}finally{g(!1)}}},P=l&&(e==null?void 0:e.status)===bt.DRAFT&&o;return t.jsxs(Hm,{children:[t.jsx(v,{variant:"h6",sx:{mb:3,fontWeight:600},children:l?"Edit Expense Order":"Create New Expense Order"}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(ht,{fullWidth:!0,error:!!h.channelId,children:[t.jsx(Ct,{children:"Channel"}),t.jsx(mt,{value:d.channelId,label:"Channel",onChange:w=>y("channelId",w.target.value),disabled:l,children:n.map(w=>t.jsx(je,{value:w.id,children:w.name},w.id))}),h.channelId&&t.jsx(v,{variant:"caption",color:"error",sx:{mt:.5},children:h.channelId})]})}),t.jsx(F,{item:!0,xs:12,md:6,children:t.jsxs(ht,{fullWidth:!0,error:!!h.typeId,children:[t.jsx(Ct,{children:"Expense Type"}),t.jsx(mt,{value:d.typeId,label:"Expense Type",onChange:w=>y("typeId",w.target.value),children:r.map(w=>t.jsx(je,{value:w.value,children:w.label},w.value))}),h.typeId&&t.jsx(v,{variant:"caption",color:"error",sx:{mt:.5},children:h.typeId})]})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,label:"Title",value:d.title,onChange:w=>y("title",w.target.value),error:!!h.title,helperText:h.title,placeholder:"Enter expense title"})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,multiline:!0,rows:3,label:"Description",value:d.description,onChange:w=>y("description",w.target.value),error:!!h.description,helperText:h.description,placeholder:"Describe the expense in detail"})}),t.jsx(F,{item:!0,xs:12,md:6,children:t.jsx(et,{fullWidth:!0,type:"number",label:"Amount",value:d.amount,onChange:w=>y("amount",parseFloat(w.target.value)||0),error:!!h.amount,helperText:h.amount,InputProps:{startAdornment:t.jsx(zr,{position:"start",children:"$"})}})}),t.jsx(F,{item:!0,xs:12,md:6,children:t.jsx(et,{fullWidth:!0,label:"Currency",value:d.currency,onChange:w=>y("currency",w.target.value.toUpperCase()),error:!!h.currency,helperText:h.currency,placeholder:"USD",inputProps:{maxLength:3}})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,label:"Receipt URL",value:d.receiptUrl,onChange:w=>y("receiptUrl",w.target.value),placeholder:"https://example.com/receipt.pdf",InputProps:{startAdornment:t.jsx(zr,{position:"start",children:t.jsx(NR,{})})}})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,multiline:!0,rows:2,label:"Notes (Optional)",value:d.notes,onChange:w=>y("notes",w.target.value),placeholder:"Additional notes or comments"})}),t.jsx(F,{item:!0,xs:12,children:t.jsxs(C,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[t.jsx(ce,{variant:"outlined",startIcon:i?t.jsx(Zt,{size:16}):t.jsx(tp,{}),onClick:S,disabled:i||p,children:"Save as Draft"}),P&&t.jsx(ce,{variant:"contained",startIcon:p?t.jsx(Zt,{size:16}):t.jsx(Td,{}),onClick:j,disabled:i||p,children:"Submit for Approval"})]})})]})]})},r6=({onCreateNew:e,onEdit:n,onView:r,userRole:s="journalist",channelId:o,showCreateButton:i=!0})=>{const{api:l}=Ye(),[d,u]=x.useState([]),[h,f]=x.useState(!0),[p,g]=x.useState(null),[b,y]=x.useState(""),[S,j]=x.useState(1),[P,w]=x.useState(1),[I,T]=x.useState(!1),D=async(K=1)=>{var J,q;try{f(K===1),g(null);let Q;const Y={page:K,limit:10};s==="journalist"?Q=await l.app.expenseOrder.getMyExpenseOrders(Y,b||void 0):o?Q=await l.app.expenseOrder.getExpenseOrdersByChannel(o,Y,b||void 0):Q=await l.app.expenseOrder.getPendingExpenseOrders(Y),u(Q.data),w(Math.ceil(Q.total/Q.limit)),j(K)}catch(Q){g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to load expense orders"),console.error("Error loading expense orders:",Q)}finally{f(!1),T(!1)}};x.useEffect(()=>{D(1)},[b,s,o]);const R=async()=>{T(!0),await D(S)},_=(K,J)=>{D(J)},k=async K=>{var J,q;try{await l.app.expenseOrder.submitExpenseOrder(K.id),await D(S)}catch(Q){console.error("Error submitting expense order:",Q),g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to submit expense order")}},N=async K=>{var J,q;try{await l.app.expenseOrder.cancelExpenseOrder(K.id,"Cancelled by user"),await D(S)}catch(Q){console.error("Error cancelling expense order:",Q),g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to cancel expense order")}},L=async K=>{var J,q;try{await l.app.expenseOrder.approveExpenseOrder(K.id),await D(S)}catch(Q){console.error("Error approving expense order:",Q),g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to approve expense order")}},z=async K=>{var J,q;try{const Q=prompt("Please provide a reason for rejection:");Q&&(await l.app.expenseOrder.rejectExpenseOrder(K.id,{rejectionReason:Q}),await D(S))}catch(Q){console.error("Error rejecting expense order:",Q),g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to reject expense order")}},$=async K=>{var J,q;try{await l.app.expenseOrder.processPayment(K.id),await D(S)}catch(Q){console.error("Error processing payment:",Q),g(((q=(J=Q.response)==null?void 0:J.data)==null?void 0:q.message)||"Failed to process payment")}},G=()=>{switch(s){case"journalist":return"My Expense Orders";case"admin":case"finance-manager":return o?"Channel Expense Orders":"All Expense Orders";default:return"Expense Orders"}};return t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(v,{variant:"h5",sx:{fontWeight:600},children:G()}),t.jsxs(C,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t.jsxs(ht,{size:"small",sx:{minWidth:150},children:[t.jsx(Ct,{children:"Status Filter"}),t.jsxs(mt,{value:b,label:"Status Filter",onChange:K=>y(K.target.value),children:[t.jsx(je,{value:"",children:"All Statuses"}),t.jsx(je,{value:bt.DRAFT,children:"Draft"}),t.jsx(je,{value:bt.SUBMITTED,children:"Submitted"}),t.jsx(je,{value:bt.UNDER_REVIEW,children:"Under Review"}),t.jsx(je,{value:bt.APPROVED,children:"Approved"}),t.jsx(je,{value:bt.REJECTED,children:"Rejected"}),t.jsx(je,{value:bt.PAID,children:"Paid"}),t.jsx(je,{value:bt.CANCELLED,children:"Cancelled"})]})]}),t.jsx(ce,{variant:"outlined",startIcon:I?t.jsx(Zt,{size:16}):t.jsx(Lv,{}),onClick:R,disabled:I,size:"small",children:"Refresh"}),i&&s==="journalist"&&e&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:e,children:"Create Expense Order"})]})]}),p&&t.jsx(lt,{severity:"error",sx:{mb:3},onClose:()=>g(null),children:p}),h?t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(Zt,{})}):d.length===0?t.jsxs(C,{sx:{textAlign:"center",py:6},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No expense orders found"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:s==="journalist"?"You haven't created any expense orders yet.":"No expense orders match your current filter."}),i&&s==="journalist"&&e&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:e,children:"Create Your First Expense Order"})]}):t.jsxs(t.Fragment,{children:[t.jsx(F,{container:!0,spacing:3,children:d.map(K=>t.jsx(F,{item:!0,xs:12,md:6,lg:4,children:t.jsx(Ym,{expenseOrder:K,onView:r,onEdit:n,onSubmit:k,onCancel:N,onApprove:L,onReject:z,onProcessPayment:$,userRole:s})},K.id))}),P>1&&t.jsx(C,{sx:{display:"flex",justifyContent:"center",mt:4},children:t.jsx(LR,{count:P,page:S,onChange:_,color:"primary",size:"large"})})]})]})},s6=({channelId:e,onCreateExpenseOrder:n,onViewExpenseOrder:r,userRole:s="journalist"})=>{const{api:o}=Ye(),i=cn(),[l,d]=x.useState(null),[u,h]=x.useState(null),[f,p]=x.useState(!0),[g,b]=x.useState(null);x.useEffect(()=>{y()},[e]);const y=async()=>{var w,I;try{p(!0),b(null);const T=await o.app.expenseOrder.getExpenseOrderStats(e);if(d(T),e){const D=await o.app.channel.getChannel(e);h(D)}}catch(T){b(((I=(w=T.response)==null?void 0:w.data)==null?void 0:I.message)||"Failed to load dashboard data"),console.error("Error loading dashboard data:",T)}finally{p(!1)}},S=(w,I="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:I}).format(w),j=w=>{switch(w){case"paid":return i.palette.success.main;case"approved":return i.palette.info.main;case"submitted":case"underReview":return i.palette.warning.main;case"rejected":case"cancelled":return i.palette.error.main;case"draft":default:return i.palette.grey[500]}},P=({title:w,value:I,icon:T,color:D,subtitle:R})=>t.jsx(Fe,{sx:{height:"100%",border:`1px solid ${he(D,.2)}`,"&:hover":{boxShadow:i.shadows[4],transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(C,{sx:{p:1,borderRadius:2,bgcolor:he(D,.1),color:D,mr:2},children:T}),t.jsx(v,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:w})]}),t.jsx(v,{variant:"h4",sx:{fontWeight:700,color:D,mb:1},children:I}),R&&t.jsx(v,{variant:"body2",color:"text.secondary",children:R})]})});return f?t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:8},children:t.jsx(Zt,{size:40})}):g?t.jsx(lt,{severity:"error",sx:{mb:3},children:g}):t.jsxs(C,{children:[t.jsxs(C,{sx:{mb:4},children:[t.jsx(v,{variant:"h4",sx:{fontWeight:700,mb:1},children:u?`${u.name} Payouts`:"Payout Dashboard"}),t.jsx(v,{variant:"body1",color:"text.secondary",children:s==="journalist"?"Manage your expense orders and track payments":"Overview of expense orders and payout statistics"})]}),l&&t.jsxs(t.Fragment,{children:[t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{title:"Total Orders",value:l.total,icon:t.jsx(oo,{}),color:i.palette.primary.main,subtitle:"All time"})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{title:"Total Amount",value:S(l.totalAmount),icon:t.jsx(ao,{}),color:i.palette.secondary.main,subtitle:"Requested"})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{title:"Paid Amount",value:S(l.totalPaidAmount),icon:t.jsx(pa,{}),color:i.palette.success.main,subtitle:"Completed payments"})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{title:"Pending",value:l.submitted+l.underReview+l.approved,icon:t.jsx($R,{}),color:i.palette.warning.main,subtitle:"Awaiting action"})})]}),t.jsx(Fe,{sx:{mb:4},children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",sx:{fontWeight:600,mb:3},children:"Status Breakdown"}),t.jsx(F,{container:!0,spacing:2,children:[{label:"Draft",value:l.draft,status:"draft"},{label:"Submitted",value:l.submitted,status:"submitted"},{label:"Under Review",value:l.underReview,status:"underReview"},{label:"Approved",value:l.approved,status:"approved"},{label:"Paid",value:l.paid,status:"paid"},{label:"Rejected",value:l.rejected,status:"rejected"},{label:"Cancelled",value:l.cancelled,status:"cancelled"}].map(w=>t.jsx(F,{item:!0,xs:6,sm:4,md:3,lg:2,children:t.jsxs(C,{sx:{textAlign:"center",p:2},children:[t.jsx(v,{variant:"h5",sx:{fontWeight:700,color:j(w.status),mb:1},children:w.value}),t.jsx(Xe,{label:w.label,size:"small",sx:{bgcolor:he(j(w.status),.1),color:j(w.status),fontWeight:500}})]})},w.status))})]})})]}),t.jsx(Fe,{children:t.jsx(Ve,{children:t.jsx(r6,{userRole:s,channelId:e,onCreateNew:n,onView:r?w=>r(w.id):void 0,showCreateButton:s==="journalist"})})}),s==="journalist"&&t.jsx(C,{sx:{mt:4,display:"flex",justifyContent:"center"},children:t.jsx(ce,{variant:"contained",size:"large",startIcon:t.jsx(oo,{}),onClick:n,sx:{px:4,py:1.5},children:"Create New Expense Order"})})]})};function o6({channelId:e,refresh:n}){const{api:r}=Ye(),{loading:s,error:o,execute:i}=Ke(),{loading:l,execute:d}=Ke(),[u,h]=x.useState([]),[f,p]=x.useState(0),[g,b]=x.useState(0),[y,S]=x.useState(25),j=async()=>{const I=await i(()=>r.app.channel.getChannelInvitations(e,{page:g+1,limit:y}));I&&(h(I.items),p(I.metadata.total))};x.useEffect(()=>{j()},[e,g,y,n]);const P=async(I,T)=>{if(!window.confirm(`Cancel invitation for ${T}?`))return;await d(()=>r.app.channel.cancelInvitation(e,I),{showSuccessMessage:!0,successMessage:"Invitation cancelled successfully"})!==null&&j()},w=I=>{const T=new Date(I),D=new Date,R=T.getTime()-D.getTime(),_=Math.ceil(R/(1e3*60*60*24));return _<0?"Expired":_===0?"Today":_===1?"Tomorrow":`In ${_} days`};return s?t.jsx(C,{display:"flex",justifyContent:"center",p:4,children:t.jsx(Zt,{})}):o?t.jsx(lt,{severity:"error",sx:{m:2},children:o}):u.length===0?t.jsx(v,{variant:"body2",color:"text.secondary",align:"center",sx:{p:4},children:"No pending invitations"}):t.jsxs(t.Fragment,{children:[t.jsxs(Dd,{children:[t.jsx(Ad,{children:t.jsxs($s,{children:[t.jsx(at,{children:"Email"}),t.jsx(at,{children:"Role"}),t.jsx(at,{children:"Status"}),t.jsx(at,{children:"Invited By"}),t.jsx(at,{children:"Expires"}),t.jsx(at,{align:"right",children:"Actions"})]})}),t.jsx(Rd,{children:u.map(I=>t.jsxs($s,{children:[t.jsx(at,{children:I.email}),t.jsx(at,{children:t.jsx(Xe,{label:YB(I.role),color:qB(I.role),size:"small"})}),t.jsx(at,{children:t.jsx(Xe,{label:XB(I.status),color:QB(I.status),size:"small"})}),t.jsx(at,{children:I.invitedBy?`${I.invitedBy.displayName}`:"-"}),t.jsx(at,{children:w(I.expiresAt)}),t.jsx(at,{align:"right",children:I.status===ro.PENDING&&t.jsx(Oe,{size:"small",color:"error",onClick:()=>P(I.id,I.email),disabled:l,children:t.jsx(el,{})})})]},I.id))})]}),t.jsx($v,{component:"div",count:f,page:g,rowsPerPage:y,onPageChange:(I,T)=>b(T),onRowsPerPageChange:I=>{S(parseInt(I.target.value,10)),b(0)}})]})}function a6({open:e,onClose:n,channelId:r,onSuccess:s}){const{api:o}=Ye(),{loading:i,execute:l}=Ke(),[d,u]=x.useState({email:"",roleId:Fr.MEMBER}),[h,f]=x.useState({}),p=x.useCallback(P=>{const w=P.target.value;u(I=>({...I,email:w})),h.email&&f(I=>({...I,email:void 0}))},[h.email]),g=x.useCallback(P=>{const w=P.target.value;u(I=>({...I,roleId:w})),h.roleId&&f(I=>({...I,roleId:void 0}))},[h.roleId]),b=x.useCallback(()=>{const P={};return d.email.trim()?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(d.email)||(P.email="Invalid email address"):P.email="Email is required",d.roleId||(P.roleId="Role is required"),f(P),Object.keys(P).length===0},[d]),y=x.useCallback(()=>{u({email:"",roleId:Fr.MEMBER}),f({})},[]),S=x.useCallback(()=>{y(),n()},[y,n]),j=async P=>{if(P.preventDefault(),!b())return;await l(()=>o.app.channel.inviteUser(r,d),{showSuccessMessage:!0,successMessage:"Invitation sent successfully!"})!==null&&(y(),n(),s==null||s())};return t.jsx(Gt,{open:e,onClose:S,maxWidth:"sm",fullWidth:!0,children:t.jsxs("form",{onSubmit:j,children:[t.jsx(Qt,{children:"Invite User to Channel"}),t.jsxs(Yt,{children:[t.jsx(et,{label:"Email Address",type:"email",fullWidth:!0,margin:"normal",value:d.email,onChange:p,error:!!h.email,helperText:h.email,autoFocus:!0,disabled:i}),t.jsxs(ht,{fullWidth:!0,margin:"normal",error:!!h.roleId,children:[t.jsx(Ct,{children:"Role"}),t.jsx(mt,{value:d.roleId,onChange:g,label:"Role",disabled:i,children:JB.map(({value:P,label:w})=>t.jsx(je,{value:P,children:w},P))}),h.roleId&&t.jsx(Fv,{children:h.roleId})]})]}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:S,disabled:i,children:"Cancel"}),t.jsx(ce,{type:"submit",variant:"contained",disabled:i,children:i?"Sending...":"Send Invitation"})]})]})})}const i6=()=>{var D,R,_,k,N;const[e,n]=x.useState(null),[r,s]=x.useState(!0),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(0),{id:f}=dr(),p=f,{api:g}=Ye(),b=xt(),y=async()=>{try{if(p){const L=await(g==null?void 0:g.app.channel.getChannel(p));L&&n(L)}}catch(L){console.error("Failed to fetch channel:",L)}finally{s(!1)}};x.useEffect(()=>{y()},[]);const S=()=>{b("/studio/payouts")},j=L=>{b(`/studio/payouts/orders/${L}`)},P=(L,z)=>{i(z)},w=()=>{d(!0)},I=()=>{d(!1)},T=()=>{h(L=>L+1)};return r?t.jsxs(St,{maxWidth:"lg",sx:{mt:4},children:[t.jsxs(C,{sx:{textAlign:"center",mb:4},children:[t.jsx(ue,{variant:"circular",width:100,height:100,sx:{mx:"auto",mb:2}}),t.jsx(ue,{variant:"text",width:"60%",sx:{mx:"auto",mb:1}}),t.jsx(ue,{variant:"text",width:"40%",sx:{mx:"auto",mb:2}})]}),t.jsx(F,{container:!0,spacing:3,children:[...Array(3)].map((L,z)=>t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"80%"}),t.jsx(ue,{variant:"text",width:"60%"}),t.jsx(ue,{variant:"rectangular",height:100,sx:{my:2}})]})})},z))})]}):e?t.jsxs(St,{maxWidth:"lg",sx:{mt:4},children:[t.jsx(C,{sx:{position:"relative",mb:4,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:200,backgroundImage:e!=null&&e.bannerUrl?`url(${e.bannerUrl})`:void 0,background:e!=null&&e.bannerUrl?void 0:L=>`linear-gradient(135deg, ${L.palette.primary.main} 0%, ${L.palette.primary.light} 100%)`,backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.9)"}},children:t.jsxs(C,{sx:{position:"relative",pt:15,pb:4,textAlign:"center"},children:[t.jsx(Sn,{src:e.logoUrl,sx:{width:100,height:100,mx:"auto",mb:2,border:"3px solid white",boxShadow:2}}),t.jsx(v,{variant:"h4",gutterBottom:!0,children:e.name}),t.jsxs(v,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[((R=(D=e.stats)==null?void 0:D.activeSubscriptionCount)==null?void 0:R.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:1}))||0," followers  ",((k=(_=e.stats)==null?void 0:_.paidSubscriptionCount)==null?void 0:k.toLocaleString("en-US",{notation:"compact",maximumFractionDigits:1}))||0," subscribers"]}),t.jsx(v,{variant:"body1",sx:{mb:3},children:e.description}),t.jsx(Mt,{sx:{mb:4}})]})}),t.jsx(C,{sx:{mb:3},children:t.jsxs(Bs,{value:o,onChange:P,"aria-label":"channel tabs",sx:{borderBottom:1,borderColor:"divider"},children:[t.jsx(An,{label:"Subscription Tiers",id:"channel-tab-0","aria-controls":"channel-tabpanel-0"}),t.jsx(An,{label:"Payouts",icon:t.jsx(ao,{}),iconPosition:"start",id:"channel-tab-1","aria-controls":"channel-tabpanel-1"}),t.jsx(An,{label:"Invitations",icon:t.jsx(FR,{}),iconPosition:"start",id:"channel-tab-2","aria-controls":"channel-tabpanel-2"})]})}),t.jsx("div",{role:"tabpanel",hidden:o!==0,id:"channel-tabpanel-0","aria-labelledby":"channel-tab-0",children:o===0&&t.jsxs(C,{children:[t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Subscription Tiers"}),t.jsx(F,{container:!0,spacing:3,children:(N=e.tiers)==null?void 0:N.map(L=>t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(Hm,{children:[t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,fontSize:"1rem"},children:L.name}),t.jsxs(v,{variant:"h4",sx:{fontWeight:700,fontSize:"2rem",display:"flex",alignItems:"baseline",gap:.5},children:[L.price!==void 0&&L.currency?new Intl.NumberFormat("en-US",{style:"currency",currency:L.currency.toUpperCase()}).format(L.price/100):`$${L.price||0}`,t.jsx(v,{component:"span",sx:{fontSize:"0.875rem",fontWeight:400,color:"text.secondary"},children:"/month"})]})]}),t.jsx(v,{variant:"body2",sx:{mb:3,color:"text.secondary",minHeight:60},children:L.description})]})},L.id))})]})}),t.jsx("div",{role:"tabpanel",hidden:o!==1,id:"channel-tabpanel-1","aria-labelledby":"channel-tab-1",children:o===1&&t.jsx(C,{children:t.jsx(s6,{channelId:p,onCreateExpenseOrder:S,onViewExpenseOrder:j,userRole:"journalist"})})}),t.jsx("div",{role:"tabpanel",hidden:o!==2,id:"channel-tabpanel-2","aria-labelledby":"channel-tab-2",children:o===2&&t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600},children:"Channel Invitations"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(WR,{}),onClick:w,children:"Invite User"})]}),t.jsx(rt,{sx:{overflow:"hidden"},children:p&&t.jsx(o6,{channelId:p,refresh:u})})]})}),p&&t.jsx(a6,{open:l,onClose:I,channelId:p,onSuccess:T})]}):t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(v,{variant:"h5",align:"center",children:"Channel not found"})})},l6=()=>t.jsx(C,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(Zt,{})}),nw=({channel:e,onUpdate:n})=>{const r=async s=>{!s||!("name"in s)||await n(s)};return t.jsx(C,{sx:{maxWidth:800},children:t.jsx(ew,{initialData:e,onSubmit:r,submitButtonText:"Save"})})};var ex={},c6=Qe;Object.defineProperty(ex,"__esModule",{value:!0});var rw=ex.default=void 0,d6=c6(Ze()),u6=t;rw=ex.default=(0,d6.default)((0,u6.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator");var tx={},h6=Qe;Object.defineProperty(tx,"__esModule",{value:!0});var Tl=tx.default=void 0,f6=h6(Ze()),p6=t;Tl=tx.default=(0,f6.default)((0,p6.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function xr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m6=typeof Symbol=="function"&&Symbol.observable||"@@observable",b0=m6,Qh=()=>Math.random().toString(36).substring(7).split("").join("."),x6={INIT:`@@redux/INIT${Qh()}`,REPLACE:`@@redux/REPLACE${Qh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qh()}`},y0=x6;function g6(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function sw(e,n,r){if(typeof e!="function")throw new Error(xr(2));if(typeof n=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof n=="function"&&typeof r>"u"&&(r=n,n=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xr(1));return r(sw)(e,n)}let s=e,o=n,i=new Map,l=i,d=0,u=!1;function h(){l===i&&(l=new Map,i.forEach((j,P)=>{l.set(P,j)}))}function f(){if(u)throw new Error(xr(3));return o}function p(j){if(typeof j!="function")throw new Error(xr(4));if(u)throw new Error(xr(5));let P=!0;h();const w=d++;return l.set(w,j),function(){if(P){if(u)throw new Error(xr(6));P=!1,h(),l.delete(w),i=null}}}function g(j){if(!g6(j))throw new Error(xr(7));if(typeof j.type>"u")throw new Error(xr(8));if(typeof j.type!="string")throw new Error(xr(17));if(u)throw new Error(xr(9));try{u=!0,o=s(o,j)}finally{u=!1}return(i=l).forEach(w=>{w()}),j}function b(j){if(typeof j!="function")throw new Error(xr(10));s=j,g({type:y0.REPLACE})}function y(){const j=p;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(xr(11));function w(){const T=P;T.next&&T.next(f())}return w(),{unsubscribe:j(w)}},[b0](){return this}}}return g({type:y0.INIT}),{dispatch:g,subscribe:p,getState:f,replaceReducer:b,[b0]:y}}function v0(e,n){return function(...r){return n(e.apply(this,r))}}function j0(e,n){if(typeof e=="function")return v0(e,n);if(typeof e!="object"||e===null)throw new Error(xr(16));const r={};for(const s in e){const o=e[s];typeof o=="function"&&(r[s]=v0(o,n))}return r}function ow(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...s)=>n(r(...s)))}function b6(...e){return n=>(r,s)=>{const o=n(r,s);let i=()=>{throw new Error(xr(15))};const l={getState:o.getState,dispatch:(u,...h)=>i(u,...h)},d=e.map(u=>u(l));return i=ow(...d)(o.dispatch),{...o,dispatch:i}}}var y6={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=x;function v6(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var j6=typeof Object.is=="function"?Object.is:v6,S6=Dl.useSyncExternalStore,w6=Dl.useRef,C6=Dl.useEffect,P6=Dl.useMemo,E6=Dl.useDebugValue;y6.useSyncExternalStoreWithSelector=function(e,n,r,s,o){var i=w6(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=P6(function(){function u(b){if(!h){if(h=!0,f=b,b=s(b),o!==void 0&&l.hasValue){var y=l.value;if(o(y,b))return p=y}return p=b}if(y=p,j6(f,b))return y;var S=s(b);return o!==void 0&&o(y,S)?(f=b,y):(f=b,p=S)}var h=!1,f,p,g=r===void 0?null:r;return[function(){return u(n())},g===null?void 0:function(){return u(g())}]},[n,r,s,o]);var d=S6(e,i[0],i[1]);return C6(function(){l.hasValue=!0,l.value=d},[d]),E6(d),d};var I6=x.version.startsWith("19"),T6=Symbol.for(I6?"react.transitional.element":"react.element"),D6=Symbol.for("react.portal"),A6=Symbol.for("react.fragment"),R6=Symbol.for("react.strict_mode"),k6=Symbol.for("react.profiler"),_6=Symbol.for("react.consumer"),O6=Symbol.for("react.context"),aw=Symbol.for("react.forward_ref"),M6=Symbol.for("react.suspense"),N6=Symbol.for("react.suspense_list"),nx=Symbol.for("react.memo"),L6=Symbol.for("react.lazy"),$6=aw,F6=nx;function W6(e){if(typeof e=="object"&&e!==null){const{$$typeof:n}=e;switch(n){case T6:switch(e=e.type,e){case A6:case k6:case R6:case M6:case N6:return e;default:switch(e=e&&e.$$typeof,e){case O6:case aw:case L6:case nx:return e;case _6:return e;default:return n}}case D6:return n}}}function B6(e){return W6(e)===nx}function V6(e,n,r,s,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:l}){let d=!1,u,h,f,p,g;function b(w,I){return u=w,h=I,f=e(u,h),p=n(s,h),g=r(f,p,h),d=!0,g}function y(){return f=e(u,h),n.dependsOnOwnProps&&(p=n(s,h)),g=r(f,p,h),g}function S(){return e.dependsOnOwnProps&&(f=e(u,h)),n.dependsOnOwnProps&&(p=n(s,h)),g=r(f,p,h),g}function j(){const w=e(u,h),I=!l(w,f);return f=w,I&&(g=r(f,p,h)),g}function P(w,I){const T=!i(I,h),D=!o(w,u,I,h);return u=w,h=I,T&&D?y():T?S():D?j():g}return function(I,T){return d?P(I,T):b(I,T)}}function U6(e,{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:s,...o}){const i=n(e,o),l=r(e,o),d=s(e,o);return V6(i,l,d,e,o)}function z6(e,n){const r={};for(const s in e){const o=e[s];typeof o=="function"&&(r[s]=(...i)=>n(o(...i)))}return r}function _f(e){return function(r){const s=e(r);function o(){return s}return o.dependsOnOwnProps=!1,o}}function S0(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function iw(e,n){return function(s,{displayName:o}){const i=function(d,u){return i.dependsOnOwnProps?i.mapToProps(d,u):i.mapToProps(d,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(d,u){i.mapToProps=e,i.dependsOnOwnProps=S0(e);let h=i(d,u);return typeof h=="function"&&(i.mapToProps=h,i.dependsOnOwnProps=S0(h),h=i(d,u)),h},i}}function rx(e,n){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${n} argument when connecting component ${s.wrappedComponentName}.`)}}function H6(e){return e&&typeof e=="object"?_f(n=>z6(e,n)):e?typeof e=="function"?iw(e):rx(e,"mapDispatchToProps"):_f(n=>({dispatch:n}))}function G6(e){return e?typeof e=="function"?iw(e):rx(e,"mapStateToProps"):_f(()=>({}))}function Y6(e,n,r){return{...r,...e,...n}}function q6(e){return function(r,{displayName:s,areMergedPropsEqual:o}){let i=!1,l;return function(u,h,f){const p=e(u,h,f);return i?o(p,l)||(l=p):(i=!0,l=p),l}}}function K6(e){return e?typeof e=="function"?q6(e):rx(e,"mergeProps"):()=>Y6}function J6(e){e()}function X6(){let e=null,n=null;return{clear(){e=null,n=null},notify(){J6(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!s||e===null||(s=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var w0={notify(){},get:()=>[]};function lw(e,n){let r,s=w0,o=0,i=!1;function l(S){f();const j=s.subscribe(S);let P=!1;return()=>{P||(P=!0,j(),p())}}function d(){s.notify()}function u(){y.onStateChange&&y.onStateChange()}function h(){return i}function f(){o++,r||(r=n?n.addNestedSub(u):e.subscribe(u),s=X6())}function p(){o--,r&&o===0&&(r(),r=void 0,s.clear(),s=w0)}function g(){i||(i=!0,f())}function b(){i&&(i=!1,p())}const y={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:u,isSubscribed:h,trySubscribe:g,tryUnsubscribe:b,getListeners:()=>s};return y}var Q6=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z6=Q6(),eV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tV=eV(),nV=()=>Z6||tV?x.useLayoutEffect:x.useEffect,pd=nV();function C0(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function Zh(e,n){if(C0(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(n,r[o])||!C0(e[r[o]],n[r[o]]))return!1;return!0}var rV={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sV={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},oV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},aV={[$6]:oV,[F6]:cw};function P0(e){return B6(e)?cw:aV[e.$$typeof]||rV}var iV=Object.defineProperty,lV=Object.getOwnPropertyNames,E0=Object.getOwnPropertySymbols,cV=Object.getOwnPropertyDescriptor,dV=Object.getPrototypeOf,I0=Object.prototype;function Of(e,n){if(typeof n!="string"){if(I0){const i=dV(n);i&&i!==I0&&Of(e,i)}let r=lV(n);E0&&(r=r.concat(E0(n)));const s=P0(e),o=P0(n);for(let i=0;i<r.length;++i){const l=r[i];if(!sV[l]&&!(o&&o[l])&&!(s&&s[l])){const d=cV(n,l);try{iV(e,l,d)}catch{}}}}return e}var ef=Symbol.for("react-redux-context"),tf=typeof globalThis<"u"?globalThis:{};function uV(){if(!x.createContext)return{};const e=tf[ef]??(tf[ef]=new Map);let n=e.get(x.createContext);return n||(n=x.createContext(null),e.set(x.createContext,n)),n}var dw=uV(),hV=[null,null];function fV(e,n,r){pd(()=>e(...n),r)}function pV(e,n,r,s,o,i){e.current=s,r.current=!1,o.current&&(o.current=null,i())}function mV(e,n,r,s,o,i,l,d,u,h,f){if(!e)return()=>{};let p=!1,g=null;const b=()=>{if(p||!d.current)return;const S=n.getState();let j,P;try{j=s(S,o.current)}catch(w){P=w,g=w}P||(g=null),j===i.current?l.current||h():(i.current=j,u.current=j,l.current=!0,f())};return r.onStateChange=b,r.trySubscribe(),b(),()=>{if(p=!0,r.tryUnsubscribe(),r.onStateChange=null,g)throw g}}function xV(e,n){return e===n}function gV(e,n,r,{pure:s,areStatesEqual:o=xV,areOwnPropsEqual:i=Zh,areStatePropsEqual:l=Zh,areMergedPropsEqual:d=Zh,forwardRef:u=!1,context:h=dw}={}){const f=h,p=G6(e),g=H6(n),b=K6(r),y=!!e;return j=>{const P=j.displayName||j.name||"Component",w=`Connect(${P})`,I={shouldHandleStateChanges:y,displayName:w,wrappedComponentName:P,WrappedComponent:j,initMapStateToProps:p,initMapDispatchToProps:g,initMergeProps:b,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:d};function T(_){const[k,N,L]=x.useMemo(()=>{const{reactReduxForwardedRef:se,...ge}=_;return[_.context,se,ge]},[_]),z=x.useMemo(()=>{let se=f;return k!=null&&k.Consumer,se},[k,f]),$=x.useContext(z),G=!!_.store&&!!_.store.getState&&!!_.store.dispatch,K=!!$&&!!$.store,J=G?_.store:$.store,q=K?$.getServerState:J.getState,Q=x.useMemo(()=>U6(J.dispatch,I),[J]),[Y,oe]=x.useMemo(()=>{if(!y)return hV;const se=lw(J,G?void 0:$.subscription),ge=se.notifyNestedSubs.bind(se);return[se,ge]},[J,G,$]),V=x.useMemo(()=>G?$:{...$,subscription:Y},[G,$,Y]),Z=x.useRef(void 0),Ee=x.useRef(L),be=x.useRef(void 0),ae=x.useRef(!1),ee=x.useRef(!1),Ce=x.useRef(void 0);pd(()=>(ee.current=!0,()=>{ee.current=!1}),[]);const Ae=x.useMemo(()=>()=>be.current&&L===Ee.current?be.current:Q(J.getState(),L),[J,L]),We=x.useMemo(()=>ge=>Y?mV(y,J,Y,Q,Ee,Z,ae,ee,be,oe,ge):()=>{},[Y]);fV(pV,[Ee,Z,ae,L,be,oe]);let ye;try{ye=x.useSyncExternalStore(We,Ae,q?()=>Q(q(),L):Ae)}catch(se){throw Ce.current&&(se.message+=`
The error may be correlated with this previous error:
${Ce.current.stack}

`),se}pd(()=>{Ce.current=void 0,be.current=void 0,Z.current=ye});const ie=x.useMemo(()=>x.createElement(j,{...ye,ref:N}),[N,j,ye]);return x.useMemo(()=>y?x.createElement(z.Provider,{value:V},ie):ie,[z,ie,V])}const R=x.memo(T);if(R.WrappedComponent=j,R.displayName=T.displayName=w,u){const k=x.forwardRef(function(L,z){return x.createElement(R,{...L,reactReduxForwardedRef:z})});return k.displayName=w,k.WrappedComponent=j,Of(k,j)}return Of(R,j)}}var uw=gV;function bV(e){const{children:n,context:r,serverState:s,store:o}=e,i=x.useMemo(()=>{const u=lw(o);return{store:o,subscription:u,getServerState:s?()=>s:void 0}},[o,s]),l=x.useMemo(()=>o.getState(),[o]);pd(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==o.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,l]);const d=r||dw;return x.createElement(d.Provider,{value:i},n)}var yV=bV;function vV(e,n){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function hw(e,n){var r=x.useState(function(){return{inputs:n,result:e()}})[0],s=x.useRef(!0),o=x.useRef(r),i=s.current||!!(n&&o.current.inputs&&vV(n,o.current.inputs)),l=i?o.current:{inputs:n,result:e()};return x.useEffect(function(){s.current=!1,o.current=l},[l]),l.result}function jV(e,n){return hw(function(){return e},n)}var Ot=hw,ot=jV,vs=function(n){var r=n.top,s=n.right,o=n.bottom,i=n.left,l=s-i,d=o-r,u={top:r,right:s,bottom:o,left:i,width:l,height:d,x:i,y:r,center:{x:(s+i)/2,y:(o+r)/2}};return u},sx=function(n,r){return{top:n.top-r.top,left:n.left-r.left,bottom:n.bottom+r.bottom,right:n.right+r.right}},T0=function(n,r){return{top:n.top+r.top,left:n.left+r.left,bottom:n.bottom-r.bottom,right:n.right-r.right}},SV=function(n,r){return{top:n.top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x}},nf={top:0,right:0,bottom:0,left:0},ox=function(n){var r=n.borderBox,s=n.margin,o=s===void 0?nf:s,i=n.border,l=i===void 0?nf:i,d=n.padding,u=d===void 0?nf:d,h=vs(sx(r,o)),f=vs(T0(r,l)),p=vs(T0(f,u));return{marginBox:h,borderBox:vs(r),paddingBox:f,contentBox:p,margin:o,border:l,padding:u}},ns=function(n){var r=n.slice(0,-2),s=n.slice(-2);if(s!=="px")return 0;var o=Number(r);return isNaN(o)&&Fk(),o},wV=function(){return{x:window.pageXOffset,y:window.pageYOffset}},md=function(n,r){var s=n.borderBox,o=n.border,i=n.margin,l=n.padding,d=SV(s,r);return ox({borderBox:d,border:o,margin:i,padding:l})},xd=function(n,r){return r===void 0&&(r=wV()),md(n,r)},fw=function(n,r){var s={top:ns(r.marginTop),right:ns(r.marginRight),bottom:ns(r.marginBottom),left:ns(r.marginLeft)},o={top:ns(r.paddingTop),right:ns(r.paddingRight),bottom:ns(r.paddingBottom),left:ns(r.paddingLeft)},i={top:ns(r.borderTopWidth),right:ns(r.borderRightWidth),bottom:ns(r.borderBottomWidth),left:ns(r.borderLeftWidth)};return ox({borderBox:n,margin:s,padding:o,border:i})},pw=function(n){var r=n.getBoundingClientRect(),s=window.getComputedStyle(n);return fw(r,s)},D0=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function CV(e,n){return!!(e===n||D0(e)&&D0(n))}function PV(e,n){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!CV(e[r],n[r]))return!1;return!0}function Gn(e,n){n===void 0&&(n=PV);var r=null;function s(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(r&&r.lastThis===this&&n(o,r.lastArgs))return r.lastResult;var l=e.apply(this,o);return r={lastResult:l,lastArgs:o,lastThis:this},l}return s.clear=function(){r=null},s}var ll=function(n){var r=[],s=null,o=function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];r=d,!s&&(s=requestAnimationFrame(function(){s=null,n.apply(void 0,r)}))};return o.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},o};function mw(e,n){}mw.bind(null,"warn");mw.bind(null,"error");function To(){}function EV(e,n){return{...e,...n}}function ss(e,n,r){const s=n.map(o=>{const i=EV(r,o.options);return e.addEventListener(o.eventName,o.fn,i),function(){e.removeEventListener(o.eventName,o.fn,i)}});return function(){s.forEach(i=>{i()})}}const IV="Invariant failed";class gd extends Error{}gd.prototype.toString=function(){return this.message};function Le(e,n){throw new gd(IV)}class TV extends Dt.Component{constructor(...n){super(...n),this.callbacks=null,this.unbind=To,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof gd&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=ss(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(n){if(n instanceof gd){this.setState({});return}throw n}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const DV=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,bd=e=>e+1,AV=e=>`
  You have lifted an item in position ${bd(e.source.index)}
`,xw=(e,n)=>{const r=e.droppableId===n.droppableId,s=bd(e.index),o=bd(n.index);return r?`
      You have moved the item from position ${s}
      to position ${o}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${n.droppableId}
    in position ${o}
  `},gw=(e,n,r)=>n.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${n.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,RV=e=>{const n=e.destination;if(n)return xw(e.source,n);const r=e.combine;return r?gw(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},A0=e=>`
  The item has returned to its starting position
  of ${bd(e.index)}
`,kV=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${A0(e.source)}
    `;const n=e.destination,r=e.combine;return n?`
      You have dropped the item.
      ${xw(e.source,n)}
    `:r?`
      You have dropped the item.
      ${gw(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${A0(e.source)}
  `},Lc={dragHandleUsageInstructions:DV,onDragStart:AV,onDragUpdate:RV,onDragEnd:kV},Yn={x:0,y:0},tr=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),Wr=(e,n)=>({x:e.x-n.x,y:e.y-n.y}),Do=(e,n)=>e.x===n.x&&e.y===n.y,pi=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ha=(e,n,r=0)=>e==="x"?{x:n,y:r}:{x:r,y:n},cl=(e,n)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2),R0=(e,n)=>Math.min(...n.map(r=>cl(e,r))),bw=e=>n=>({x:e(n.x),y:e(n.y)});var _V=(e,n)=>{const r=vs({top:Math.max(n.top,e.top),right:Math.min(n.right,e.right),bottom:Math.min(n.bottom,e.bottom),left:Math.max(n.left,e.left)});return r.width<=0||r.height<=0?null:r};const Al=(e,n)=>({top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}),k0=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],OV={top:0,right:0,bottom:0,left:0},MV=(e,n)=>n?Al(e,n.scroll.diff.displacement):e,NV=(e,n,r)=>r&&r.increasedBy?{...e,[n.end]:e[n.end]+r.increasedBy[n.line]}:e,LV=(e,n)=>n&&n.shouldClipSubject?_V(n.pageMarginBox,e):vs(e);var ri=({page:e,withPlaceholder:n,axis:r,frame:s})=>{const o=MV(e.marginBox,s),i=NV(o,r,n),l=LV(i,s);return{page:e,withPlaceholder:n,active:l}},ax=(e,n)=>{e.frame||Le();const r=e.frame,s=Wr(n,r.scroll.initial),o=pi(s),i={...r,scroll:{initial:r.scroll.initial,current:n,diff:{value:s,displacement:o},max:r.scroll.max}},l=ri({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:l}};const yw=Gn(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),vw=Gn(e=>e.reduce((n,r)=>(n[r.descriptor.id]=r,n),{})),nu=Gn(e=>Object.values(e)),$V=Gn(e=>Object.values(e));var mi=Gn((e,n)=>$V(n).filter(s=>e===s.descriptor.droppableId).sort((s,o)=>s.descriptor.index-o.descriptor.index));function ix(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ru(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var su=Gn((e,n)=>n.filter(r=>r.descriptor.id!==e.descriptor.id)),FV=({isMovingForward:e,draggable:n,destination:r,insideDestination:s,previousImpact:o})=>{if(!r.isCombineEnabled||!ix(o))return null;function l(b){const y={type:"COMBINE",combine:{draggableId:b,droppableId:r.descriptor.id}};return{...o,at:y}}const d=o.displaced.all,u=d.length?d[0]:null;if(e)return u?l(u):null;const h=su(n,s);if(!u){if(!h.length)return null;const b=h[h.length-1];return l(b.descriptor.id)}const f=h.findIndex(b=>b.descriptor.id===u);f===-1&&Le();const p=f-1;if(p<0)return null;const g=h[p];return l(g.descriptor.id)},xi=(e,n)=>e.descriptor.droppableId===n.descriptor.id;const jw={point:Yn,value:0},dl={invisible:{},visible:{},all:[]},WV={displaced:dl,displacedBy:jw,at:null};var is=(e,n)=>r=>e<=r&&r<=n,Sw=e=>{const n=is(e.top,e.bottom),r=is(e.left,e.right);return s=>{if(n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right))return!0;const i=n(s.top)||n(s.bottom),l=r(s.left)||r(s.right);if(i&&l)return!0;const u=s.top<e.top&&s.bottom>e.bottom,h=s.left<e.left&&s.right>e.right;return u&&h?!0:u&&l||h&&i}},BV=e=>{const n=is(e.top,e.bottom),r=is(e.left,e.right);return s=>n(s.top)&&n(s.bottom)&&r(s.left)&&r(s.right)};const lx={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ww={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var VV=e=>n=>{const r=is(n.top,n.bottom),s=is(n.left,n.right);return o=>e===lx?r(o.top)&&r(o.bottom):s(o.left)&&s(o.right)};const UV=(e,n)=>{const r=n.frame?n.frame.scroll.diff.displacement:Yn;return Al(e,r)},zV=(e,n,r)=>n.subject.active?r(n.subject.active)(e):!1,HV=(e,n,r)=>r(n)(e),cx=({target:e,destination:n,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:o})=>{const i=s?UV(e,n):e;return zV(i,n,o)&&HV(i,r,o)},GV=e=>cx({...e,isVisibleThroughFrameFn:Sw}),Cw=e=>cx({...e,isVisibleThroughFrameFn:BV}),YV=e=>cx({...e,isVisibleThroughFrameFn:VV(e.destination.axis)}),qV=(e,n,r)=>{if(typeof r=="boolean")return r;if(!n)return!0;const{invisible:s,visible:o}=n;if(s[e])return!1;const i=o[e];return i?i.shouldAnimate:!0};function KV(e,n){const r=e.page.marginBox,s={top:n.point.y,right:0,bottom:0,left:n.point.x};return vs(sx(r,s))}function ul({afterDragging:e,destination:n,displacedBy:r,viewport:s,forceShouldAnimate:o,last:i}){return e.reduce(function(d,u){const h=KV(u,r),f=u.descriptor.id;if(d.all.push(f),!GV({target:h,destination:n,viewport:s,withDroppableDisplacement:!0}))return d.invisible[u.descriptor.id]=!0,d;const g=qV(f,i,o),b={draggableId:f,shouldAnimate:g};return d.visible[f]=b,d},{all:[],visible:{},invisible:{}})}function JV(e,n){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return n.inHomeList?r:r+1}function _0({insideDestination:e,inHomeList:n,displacedBy:r,destination:s}){const o=JV(e,{inHomeList:n});return{displaced:dl,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function yd({draggable:e,insideDestination:n,destination:r,viewport:s,displacedBy:o,last:i,index:l,forceShouldAnimate:d}){const u=xi(e,r);if(l==null)return _0({insideDestination:n,inHomeList:u,displacedBy:o,destination:r});const h=n.find(y=>y.descriptor.index===l);if(!h)return _0({insideDestination:n,inHomeList:u,displacedBy:o,destination:r});const f=su(e,n),p=n.indexOf(h),g=f.slice(p);return{displaced:ul({afterDragging:g,destination:r,displacedBy:o,last:i,viewport:s.frame,forceShouldAnimate:d}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function _o(e,n){return!!n.effected[e]}var XV=({isMovingForward:e,destination:n,draggables:r,combine:s,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const i=s.draggableId,d=r[i].descriptor.index;return _o(i,o)?e?d:d-1:e?d+1:d},QV=({isMovingForward:e,isInHomeList:n,insideDestination:r,location:s})=>{if(!r.length)return null;const o=s.index,i=e?o+1:o-1,l=r[0].descriptor.index,d=r[r.length-1].descriptor.index,u=n?d:d+1;return i<l||i>u?null:i},ZV=({isMovingForward:e,isInHomeList:n,draggable:r,draggables:s,destination:o,insideDestination:i,previousImpact:l,viewport:d,afterCritical:u})=>{const h=l.at;if(h||Le(),h.type==="REORDER"){const p=QV({isMovingForward:e,isInHomeList:n,location:h.destination,insideDestination:i});return p==null?null:yd({draggable:r,insideDestination:i,destination:o,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:p})}const f=XV({isMovingForward:e,destination:o,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:u});return f==null?null:yd({draggable:r,insideDestination:i,destination:o,viewport:d,last:l.displaced,displacedBy:l.displacedBy,index:f})},eU=({displaced:e,afterCritical:n,combineWith:r,displacedBy:s})=>{const o=!!(e.visible[r]||e.invisible[r]);return _o(r,n)?o?Yn:pi(s.point):o?s.point:Yn},tU=({afterCritical:e,impact:n,draggables:r})=>{const s=ru(n);s||Le();const o=s.draggableId,i=r[o].page.borderBox.center,l=eU({displaced:n.displaced,afterCritical:e,combineWith:o,displacedBy:n.displacedBy});return tr(i,l)};const Pw=(e,n)=>n.margin[e.start]+n.borderBox[e.size]/2,nU=(e,n)=>n.margin[e.end]+n.borderBox[e.size]/2,dx=(e,n,r)=>n[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,O0=({axis:e,moveRelativeTo:n,isMoving:r})=>ha(e.line,n.marginBox[e.end]+Pw(e,r),dx(e,n.marginBox,r)),M0=({axis:e,moveRelativeTo:n,isMoving:r})=>ha(e.line,n.marginBox[e.start]-nU(e,r),dx(e,n.marginBox,r)),rU=({axis:e,moveInto:n,isMoving:r})=>ha(e.line,n.contentBox[e.start]+Pw(e,r),dx(e,n.contentBox,r));var sU=({impact:e,draggable:n,draggables:r,droppable:s,afterCritical:o})=>{const i=mi(s.descriptor.id,r),l=n.page,d=s.axis;if(!i.length)return rU({axis:d,moveInto:s.page,isMoving:l});const{displaced:u,displacedBy:h}=e,f=u.all[0];if(f){const g=r[f];if(_o(f,o))return M0({axis:d,moveRelativeTo:g.page,isMoving:l});const b=md(g.page,h.point);return M0({axis:d,moveRelativeTo:b,isMoving:l})}const p=i[i.length-1];if(p.descriptor.id===n.descriptor.id)return l.borderBox.center;if(_o(p.descriptor.id,o)){const g=md(p.page,pi(o.displacedBy.point));return O0({axis:d,moveRelativeTo:g,isMoving:l})}return O0({axis:d,moveRelativeTo:p.page,isMoving:l})},Mf=(e,n)=>{const r=e.frame;return r?tr(n,r.scroll.diff.displacement):n};const oU=({impact:e,draggable:n,droppable:r,draggables:s,afterCritical:o})=>{const i=n.page.borderBox.center,l=e.at;return!r||!l?i:l.type==="REORDER"?sU({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:o}):tU({impact:e,draggables:s,afterCritical:o})};var ou=e=>{const n=oU(e),r=e.droppable;return r?Mf(r,n):n},Ew=(e,n)=>{const r=Wr(n,e.scroll.initial),s=pi(r);return{frame:vs({top:n.y,bottom:n.y+e.frame.height,left:n.x,right:n.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:n,diff:{value:r,displacement:s}}}};function N0(e,n){return e.map(r=>n[r])}function aU(e,n){for(let r=0;r<n.length;r++){const s=n[r].visible[e];if(s)return s}return null}var iU=({impact:e,viewport:n,destination:r,draggables:s,maxScrollChange:o})=>{const i=Ew(n,tr(n.scroll.current,o)),l=r.frame?ax(r,tr(r.frame.scroll.current,o)):r,d=e.displaced,u=ul({afterDragging:N0(d.all,s),destination:r,displacedBy:e.displacedBy,viewport:i.frame,last:d,forceShouldAnimate:!1}),h=ul({afterDragging:N0(d.all,s),destination:l,displacedBy:e.displacedBy,viewport:n.frame,last:d,forceShouldAnimate:!1}),f={},p={},g=[d,u,h];return d.all.forEach(y=>{const S=aU(y,g);if(S){p[y]=S;return}f[y]=!0}),{...e,displaced:{all:d.all,invisible:f,visible:p}}},lU=(e,n)=>tr(e.scroll.diff.displacement,n),ux=({pageBorderBoxCenter:e,draggable:n,viewport:r})=>{const s=lU(r,e),o=Wr(s,n.page.borderBox.center);return tr(n.client.borderBox.center,o)},Iw=({draggable:e,destination:n,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:o,onlyOnMainAxis:i=!1})=>{const l=Wr(r,e.page.borderBox.center),u={target:Al(e.page.borderBox,l),destination:n,withDroppableDisplacement:o,viewport:s};return i?YV(u):Cw(u)},cU=({isMovingForward:e,draggable:n,destination:r,draggables:s,previousImpact:o,viewport:i,previousPageBorderBoxCenter:l,previousClientSelection:d,afterCritical:u})=>{if(!r.isEnabled)return null;const h=mi(r.descriptor.id,s),f=xi(n,r),p=FV({isMovingForward:e,draggable:n,destination:r,insideDestination:h,previousImpact:o})||ZV({isMovingForward:e,isInHomeList:f,draggable:n,draggables:s,destination:r,insideDestination:h,previousImpact:o,viewport:i,afterCritical:u});if(!p)return null;const g=ou({impact:p,draggable:n,droppable:r,draggables:s,afterCritical:u});if(Iw({draggable:n,destination:r,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ux({pageBorderBoxCenter:g,draggable:n,viewport:i}),impact:p,scrollJumpRequest:null};const y=Wr(g,l),S=iU({impact:p,viewport:i,destination:r,draggables:s,maxScrollChange:y});return{clientSelection:d,impact:S,scrollJumpRequest:y}};const mr=e=>{const n=e.subject.active;return n||Le(),n};var dU=({isMovingForward:e,pageBorderBoxCenter:n,source:r,droppables:s,viewport:o})=>{const i=r.subject.active;if(!i)return null;const l=r.axis,d=is(i[l.start],i[l.end]),u=nu(s).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>Sw(o.frame)(mr(f))).filter(f=>{const p=mr(f);return e?i[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<i[l.crossAxisStart]}).filter(f=>{const p=mr(f),g=is(p[l.start],p[l.end]);return d(p[l.start])||d(p[l.end])||g(i[l.start])||g(i[l.end])}).sort((f,p)=>{const g=mr(f)[l.crossAxisStart],b=mr(p)[l.crossAxisStart];return e?g-b:b-g}).filter((f,p,g)=>mr(f)[l.crossAxisStart]===mr(g[0])[l.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const h=u.filter(f=>is(mr(f)[l.start],mr(f)[l.end])(n[l.line]));return h.length===1?h[0]:h.length>1?h.sort((f,p)=>mr(f)[l.start]-mr(p)[l.start])[0]:u.sort((f,p)=>{const g=R0(n,k0(mr(f))),b=R0(n,k0(mr(p)));return g!==b?g-b:mr(f)[l.start]-mr(p)[l.start]})[0]};const L0=(e,n)=>{const r=e.page.borderBox.center;return _o(e.descriptor.id,n)?Wr(r,n.displacedBy.point):r},uU=(e,n)=>{const r=e.page.borderBox;return _o(e.descriptor.id,n)?Al(r,pi(n.displacedBy.point)):r};var hU=({pageBorderBoxCenter:e,viewport:n,destination:r,insideDestination:s,afterCritical:o})=>s.filter(l=>Cw({target:uU(l,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})).sort((l,d)=>{const u=cl(e,Mf(r,L0(l,o))),h=cl(e,Mf(r,L0(d,o)));return u<h?-1:h<u?1:l.descriptor.index-d.descriptor.index})[0]||null,Rl=Gn(function(n,r){const s=r[n.line];return{value:s,point:ha(n.line,s)}});const fU=(e,n,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return ha(s.line,n[s.line]);const o=e.subject.page.contentBox[s.size],u=mi(e.descriptor.id,r).reduce((h,f)=>h+f.client.marginBox[s.size],0)+n[s.line]-o;return u<=0?null:ha(s.line,u)},Tw=(e,n)=>({...e,scroll:{...e.scroll,max:n}}),Dw=(e,n,r)=>{const s=e.frame;xi(n,e)&&Le(),e.subject.withPlaceholder&&Le();const o=Rl(e.axis,n.displaceBy).point,i=fU(e,o,r),l={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const f=ri({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return{...e,subject:f}}const d=i?tr(s.scroll.max,i):s.scroll.max,u=Tw(s,d),h=ri({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:u});return{...e,subject:h,frame:u}},pU=e=>{const n=e.subject.withPlaceholder;n||Le();const r=e.frame;if(!r){const l=ri({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:l}}const s=n.oldFrameMaxScroll;s||Le();const o=Tw(r,s),i=ri({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:i,frame:o}};var mU=({previousPageBorderBoxCenter:e,moveRelativeTo:n,insideDestination:r,draggable:s,draggables:o,destination:i,viewport:l,afterCritical:d})=>{if(!n){if(r.length)return null;const p={displaced:dl,displacedBy:jw,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},g=ou({impact:p,draggable:s,droppable:i,draggables:o,afterCritical:d}),b=xi(s,i)?i:Dw(i,s,o);return Iw({draggable:s,destination:b,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}const u=e[i.axis.line]<=n.page.borderBox.center[i.axis.line],h=(()=>{const p=n.descriptor.index;return n.descriptor.id===s.descriptor.id||u?p:p+1})(),f=Rl(i.axis,s.displaceBy);return yd({draggable:s,insideDestination:r,destination:i,viewport:l,displacedBy:f,last:dl,index:h})},xU=({isMovingForward:e,previousPageBorderBoxCenter:n,draggable:r,isOver:s,draggables:o,droppables:i,viewport:l,afterCritical:d})=>{const u=dU({isMovingForward:e,pageBorderBoxCenter:n,source:s,droppables:i,viewport:l});if(!u)return null;const h=mi(u.descriptor.id,o),f=hU({pageBorderBoxCenter:n,viewport:l,destination:u,insideDestination:h,afterCritical:d}),p=mU({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:o,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:d});if(!p)return null;const g=ou({impact:p,draggable:r,droppable:u,draggables:o,afterCritical:d});return{clientSelection:ux({pageBorderBoxCenter:g,draggable:r,viewport:l}),impact:p,scrollJumpRequest:null}},Vr=e=>{const n=e.at;return n?n.type==="REORDER"?n.destination.droppableId:n.combine.droppableId:null};const gU=(e,n)=>{const r=Vr(e);return r?n[r]:null};var bU=({state:e,type:n})=>{const r=gU(e.impact,e.dimensions.droppables),s=!!r,o=e.dimensions.droppables[e.critical.droppable.id],i=r||o,l=i.axis.direction,d=l==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||l==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(d&&!s)return null;const u=n==="MOVE_DOWN"||n==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:p,droppables:g}=e.dimensions;return d?cU({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:h,destination:i,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):xU({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:h,isOver:i,draggables:p,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function ra(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Aw(e){const n=is(e.top,e.bottom),r=is(e.left,e.right);return function(o){return n(o.y)&&r(o.x)}}function yU(e,n){return e.left<n.right&&e.right>n.left&&e.top<n.bottom&&e.bottom>n.top}function vU({pageBorderBox:e,draggable:n,candidates:r}){const s=n.page.borderBox.center,o=r.map(i=>{const l=i.axis,d=ha(i.axis.line,e.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:cl(s,d)}}).sort((i,l)=>l.distance-i.distance);return o[0]?o[0].id:null}function jU({pageBorderBox:e,draggable:n,droppables:r}){const s=nu(r).filter(o=>{if(!o.isEnabled)return!1;const i=o.subject.active;if(!i||!yU(e,i))return!1;if(Aw(i)(e.center))return!0;const l=o.axis,d=i.center[l.crossAxisLine],u=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=is(i[l.crossAxisStart],i[l.crossAxisEnd]),p=f(u),g=f(h);return!p&&!g?!0:p?u<d:h>d});return s.length?s.length===1?s[0].descriptor.id:vU({pageBorderBox:e,draggable:n,candidates:s}):null}const Rw=(e,n)=>vs(Al(e,n));var SU=(e,n)=>{const r=e.frame;return r?Rw(n,r.scroll.diff.value):n};function kw({displaced:e,id:n}){return!!(e.visible[n]||e.invisible[n])}function wU({draggable:e,closest:n,inHomeList:r}){return n?r&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var CU=({pageBorderBoxWithDroppableScroll:e,draggable:n,destination:r,insideDestination:s,last:o,viewport:i,afterCritical:l})=>{const d=r.axis,u=Rl(r.axis,n.displaceBy),h=u.value,f=e[d.start],p=e[d.end],b=su(n,s).find(S=>{const j=S.descriptor.id,P=S.page.borderBox.center[d.line],w=_o(j,l),I=kw({displaced:o,id:j});return w?I?p<=P:f<P-h:I?p<=P+h:f<P})||null,y=wU({draggable:n,closest:b,inHomeList:xi(n,r)});return yd({draggable:n,insideDestination:s,destination:r,viewport:i,last:o,displacedBy:u,index:y})};const PU=4;var EU=({draggable:e,pageBorderBoxWithDroppableScroll:n,previousImpact:r,destination:s,insideDestination:o,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const l=s.axis,d=Rl(s.axis,e.displaceBy),u=d.value,h=n[l.start],f=n[l.end],g=su(e,o).find(y=>{const S=y.descriptor.id,j=y.page.borderBox,w=j[l.size]/PU,I=_o(S,i),T=kw({displaced:r.displaced,id:S});return I?T?f>j[l.start]+w&&f<j[l.end]-w:h>j[l.start]-u+w&&h<j[l.end]-u-w:T?f>j[l.start]+u+w&&f<j[l.end]+u-w:h>j[l.start]+w&&h<j[l.end]-w});return g?{displacedBy:d,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}}:null},_w=({pageOffset:e,draggable:n,draggables:r,droppables:s,previousImpact:o,viewport:i,afterCritical:l})=>{const d=Rw(n.page.borderBox,e),u=jU({pageBorderBox:d,draggable:n,droppables:s});if(!u)return WV;const h=s[u],f=mi(h.descriptor.id,r),p=SU(h,d);return EU({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:o,destination:h,insideDestination:f,afterCritical:l})||CU({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:h,insideDestination:f,last:o.displaced,viewport:i,afterCritical:l})},hx=(e,n)=>({...e,[n.descriptor.id]:n});const IU=({previousImpact:e,impact:n,droppables:r})=>{const s=Vr(e),o=Vr(n);if(!s||s===o)return r;const i=r[s];if(!i.subject.withPlaceholder)return r;const l=pU(i);return hx(r,l)};var TU=({draggable:e,draggables:n,droppables:r,previousImpact:s,impact:o})=>{const i=IU({previousImpact:s,impact:o,droppables:r}),l=Vr(o);if(!l)return i;const d=r[l];if(xi(e,d)||d.subject.withPlaceholder)return i;const u=Dw(d,e,n);return hx(i,u)},Xi=({state:e,clientSelection:n,dimensions:r,viewport:s,impact:o,scrollJumpRequest:i})=>{const l=s||e.viewport,d=r||e.dimensions,u=n||e.current.client.selection,h=Wr(u,e.initial.client.selection),f={offset:h,selection:u,borderBoxCenter:tr(e.initial.client.borderBoxCenter,h)},p={selection:tr(f.selection,l.scroll.current),borderBoxCenter:tr(f.borderBoxCenter,l.scroll.current),offset:tr(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return{...e,dimensions:d,viewport:l,current:g};const b=d.draggables[e.critical.draggable.id],y=o||_w({pageOffset:p.offset,draggable:b,draggables:d.draggables,droppables:d.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),S=TU({draggable:b,impact:y,previousImpact:e.impact,draggables:d.draggables,droppables:d.droppables});return{...e,current:g,dimensions:{draggables:d.draggables,droppables:S},impact:y,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function DU(e,n){return e.map(r=>n[r])}var Ow=({impact:e,viewport:n,draggables:r,destination:s,forceShouldAnimate:o})=>{const i=e.displaced,l=DU(i.all,r),d=ul({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:i});return{...e,displaced:d}},Mw=({impact:e,draggable:n,droppable:r,draggables:s,viewport:o,afterCritical:i})=>{const l=ou({impact:e,draggable:n,draggables:s,droppable:r,afterCritical:i});return ux({pageBorderBoxCenter:l,draggable:n,viewport:o})},Nw=({state:e,dimensions:n,viewport:r})=>{e.movementMode!=="SNAP"&&Le();const s=e.impact,o=r||e.viewport,i=n||e.dimensions,{draggables:l,droppables:d}=i,u=l[e.critical.draggable.id],h=Vr(s);h||Le();const f=d[h],p=Ow({impact:s,viewport:o,destination:f,draggables:l}),g=Mw({impact:p,draggable:u,droppable:f,draggables:l,viewport:o,afterCritical:e.afterCritical});return Xi({impact:p,clientSelection:g,state:e,dimensions:i,viewport:o})},AU=e=>({index:e.index,droppableId:e.droppableId}),Lw=({draggable:e,home:n,draggables:r,viewport:s})=>{const o=Rl(n.axis,e.displaceBy),i=mi(n.descriptor.id,r),l=i.indexOf(e);l===-1&&Le();const d=i.slice(l+1),u=d.reduce((g,b)=>(g[b.descriptor.id]=!0,g),{}),h={inVirtualList:n.descriptor.mode==="virtual",displacedBy:o,effected:u};return{impact:{displaced:ul({afterDragging:d,destination:n,displacedBy:o,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:AU(e.descriptor)}},afterCritical:h}},RU=(e,n)=>({draggables:e.draggables,droppables:hx(e.droppables,n)}),kU=({draggable:e,offset:n,initialWindowScroll:r})=>{const s=md(e.client,n),o=xd(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:o}},_U=e=>{const n=e.frame;return n||Le(),n},OU=({additions:e,updatedDroppables:n,viewport:r})=>{const s=r.scroll.diff.value;return e.map(o=>{const i=o.descriptor.droppableId,l=n[i],u=_U(l).scroll.diff.value,h=tr(s,u);return kU({draggable:o,offset:h,initialWindowScroll:r.scroll.initial})})},MU=({state:e,published:n})=>{const r=n.modified.map(P=>{const w=e.dimensions.droppables[P.droppableId];return ax(w,P.scroll)}),s={...e.dimensions.droppables,...yw(r)},o=vw(OU({additions:n.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...o};n.removals.forEach(P=>{delete i[P]});const l={droppables:s,draggables:i},d=Vr(e.impact),u=d?l.droppables[d]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],{impact:p,afterCritical:g}=Lw({draggable:h,home:f,draggables:i,viewport:e.viewport}),b=u&&u.isCombineEnabled?e.impact:p,y=_w({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:b,viewport:e.viewport,afterCritical:g}),S={...e,phase:"DRAGGING",impact:y,onLiftImpact:p,dimensions:l,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?S:{...S,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Nf=e=>e.movementMode==="SNAP",rf=(e,n,r)=>{const s=RU(e.dimensions,n);return!Nf(e)||r?Xi({state:e,dimensions:s}):Nw({state:e,dimensions:s})};function sf(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const $0={phase:"IDLE",completed:null,shouldFlush:!1};var NU=(e=$0,n)=>{if(n.type==="FLUSH")return{...$0,shouldFlush:!0};if(n.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Le();const{critical:r,clientSelection:s,viewport:o,dimensions:i,movementMode:l}=n.payload,d=i.draggables[r.draggable.id],u=i.droppables[r.droppable.id],h={selection:s,borderBoxCenter:d.client.borderBox.center,offset:Yn},f={client:h,page:{selection:tr(h.selection,o.scroll.initial),borderBoxCenter:tr(h.selection,o.scroll.initial),offset:tr(h.selection,o.scroll.diff.value)}},p=nu(i.droppables).every(S=>!S.isFixedOnPage),{impact:g,afterCritical:b}=Lw({draggable:d,home:u,draggables:i.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:i,initial:f,current:f,isWindowScrollAllowed:p,impact:g,afterCritical:b,onLiftImpact:g,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(n.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Le(),{...e,phase:"COLLECTING"});if(n.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Le(),MU({state:e,published:n.payload});if(n.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ra(e)||Le();const{client:r}=n.payload;return Do(r,e.current.client.selection)?e:Xi({state:e,clientSelection:r,impact:Nf(e)?e.impact:null})}if(n.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return sf(e);ra(e)||Le();const{id:r,newScroll:s}=n.payload,o=e.dimensions.droppables[r];if(!o)return e;const i=ax(o,s);return rf(e,i,!1)}if(n.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ra(e)||Le();const{id:r,isEnabled:s}=n.payload,o=e.dimensions.droppables[r];o||Le(),o.isEnabled===s&&Le();const i={...o,isEnabled:s};return rf(e,i,!0)}if(n.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ra(e)||Le();const{id:r,isCombineEnabled:s}=n.payload,o=e.dimensions.droppables[r];o||Le(),o.isCombineEnabled===s&&Le();const i={...o,isCombineEnabled:s};return rf(e,i,!0)}if(n.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ra(e)||Le(),e.isWindowScrollAllowed||Le();const r=n.payload.newScroll;if(Do(e.viewport.scroll.current,r))return sf(e);const s=Ew(e.viewport,r);return Nf(e)?Nw({state:e,viewport:s}):Xi({state:e,viewport:s})}if(n.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ra(e))return e;const r=n.payload.maxScroll;if(Do(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(n.type==="MOVE_UP"||n.type==="MOVE_DOWN"||n.type==="MOVE_LEFT"||n.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Le();const r=bU({state:e,type:n.type});return r?Xi({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(n.type==="DROP_PENDING"){const r=n.payload.reason;return e.phase!=="COLLECTING"&&Le(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(n.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:o}=n.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Le(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:o,dimensions:e.dimensions}}if(n.type==="DROP_COMPLETE"){const{completed:r}=n.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function Vt(e,n){return e instanceof Object&&"type"in e&&e.type===n}const LU=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),$U=e=>({type:"LIFT",payload:e}),FU=e=>({type:"INITIAL_PUBLISH",payload:e}),WU=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),BU=()=>({type:"COLLECTION_STARTING",payload:null}),VU=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),UU=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),zU=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),$w=e=>({type:"MOVE",payload:e}),HU=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),GU=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),YU=()=>({type:"MOVE_UP",payload:null}),qU=()=>({type:"MOVE_DOWN",payload:null}),KU=()=>({type:"MOVE_RIGHT",payload:null}),JU=()=>({type:"MOVE_LEFT",payload:null}),fx=()=>({type:"FLUSH",payload:null}),XU=e=>({type:"DROP_ANIMATE",payload:e}),px=e=>({type:"DROP_COMPLETE",payload:e}),Fw=e=>({type:"DROP",payload:e}),QU=e=>({type:"DROP_PENDING",payload:e}),Ww=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var ZU=e=>({getState:n,dispatch:r})=>s=>o=>{if(!Vt(o,"LIFT")){s(o);return}const{id:i,clientSelection:l,movementMode:d}=o.payload,u=n();u.phase==="DROP_ANIMATING"&&r(px({completed:u.completed})),n().phase!=="IDLE"&&Le(),r(fx()),r(LU({draggableId:i,movementMode:d}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:d==="SNAP"}},{critical:p,dimensions:g,viewport:b}=e.startPublishing(f);r(FU({critical:p,dimensions:g,clientSelection:l,movementMode:d,viewport:b}))},ez=e=>()=>n=>r=>{Vt(r,"INITIAL_PUBLISH")&&e.dragging(),Vt(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(Vt(r,"FLUSH")||Vt(r,"DROP_COMPLETE"))&&e.resting(),n(r)};const mx={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},hl={opacity:{drop:0,combining:.7},scale:{drop:.75}},Bw={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Zo=`${Bw.outOfTheWay}s ${mx.outOfTheWay}`,Qi={fluid:`opacity ${Zo}`,snap:`transform ${Zo}, opacity ${Zo}`,drop:e=>{const n=`${e}s ${mx.drop}`;return`transform ${n}, opacity ${n}`},outOfTheWay:`transform ${Zo}`,placeholder:`height ${Zo}, width ${Zo}, margin ${Zo}`},F0=e=>Do(e,Yn)?void 0:`translate(${e.x}px, ${e.y}px)`,Lf={moveTo:F0,drop:(e,n)=>{const r=F0(e);if(r)return n?`${r} scale(${hl.scale.drop})`:r}},{minDropTime:$f,maxDropTime:Vw}=Bw,tz=Vw-$f,W0=1500,nz=.6;var rz=({current:e,destination:n,reason:r})=>{const s=cl(e,n);if(s<=0)return $f;if(s>=W0)return Vw;const o=s/W0,i=$f+tz*o,l=r==="CANCEL"?i*nz:i;return Number(l.toFixed(2))},sz=({impact:e,draggable:n,dimensions:r,viewport:s,afterCritical:o})=>{const{draggables:i,droppables:l}=r,d=Vr(e),u=d?l[d]:null,h=l[n.descriptor.droppableId],f=Mw({impact:e,draggable:n,draggables:i,afterCritical:o,droppable:u||h,viewport:s});return Wr(f,n.client.borderBox.center)},oz=({draggables:e,reason:n,lastImpact:r,home:s,viewport:o,onLiftImpact:i})=>!r.at||n!=="DROP"?{impact:Ow({draggables:e,impact:i,destination:s,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:dl},didDropInsideDroppable:!0};const az=({getState:e,dispatch:n})=>r=>s=>{if(!Vt(s,"DROP")){r(s);return}const o=e(),i=s.payload.reason;if(o.phase==="COLLECTING"){n(QU({reason:i}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&Le(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||Le();const d=o.critical,u=o.dimensions,h=u.draggables[o.critical.draggable.id],{impact:f,didDropInsideDroppable:p}=oz({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),g=p?ix(f):null,b=p?ru(f):null,y={index:d.draggable.index,droppableId:d.droppable.id},S={draggableId:h.descriptor.id,type:h.descriptor.type,source:y,reason:i,mode:o.movementMode,destination:g,combine:b},j=sz({impact:f,draggable:h,dimensions:u,viewport:o.viewport,afterCritical:o.afterCritical}),P={critical:o.critical,afterCritical:o.afterCritical,result:S,impact:f};if(!(!Do(o.current.client.offset,j)||!!S.combine)){n(px({completed:P}));return}const I=rz({current:o.current.client.offset,destination:j,reason:i});n(XU({newHomeClientOffset:j,dropDuration:I,completed:P}))};var Uw=()=>({x:window.pageXOffset,y:window.pageYOffset});function iz(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:n=>{n.target!==window&&n.target!==window.document||e()}}}function lz({onWindowScroll:e}){function n(){e(Uw())}const r=ll(n),s=iz(r);let o=To;function i(){return o!==To}function l(){i()&&Le(),o=ss(window,[s])}function d(){i()||Le(),r.cancel(),o(),o=To}return{start:l,stop:d,isActive:i}}const cz=e=>Vt(e,"DROP_COMPLETE")||Vt(e,"DROP_ANIMATE")||Vt(e,"FLUSH"),dz=e=>{const n=lz({onWindowScroll:r=>{e.dispatch(HU({newScroll:r}))}});return r=>s=>{!n.isActive()&&Vt(s,"INITIAL_PUBLISH")&&n.start(),n.isActive()&&cz(s)&&n.stop(),r(s)}};var uz=e=>{let n=!1,r=!1;const s=setTimeout(()=>{r=!0}),o=i=>{n||r||(n=!0,e(i),clearTimeout(s))};return o.wasCalled=()=>n,o},hz=()=>{const e=[],n=o=>{const i=e.findIndex(d=>d.timerId===o);i===-1&&Le();const[l]=e.splice(i,1);l.callback()};return{add:o=>{const i=setTimeout(()=>n(i)),l={timerId:i,callback:o};e.push(l)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const fz=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.droppableId===n.droppableId&&e.index===n.index,pz=(e,n)=>e==null&&n==null?!0:e==null||n==null?!1:e.draggableId===n.draggableId&&e.droppableId===n.droppableId,mz=(e,n)=>{if(e===n)return!0;const r=e.draggable.id===n.draggable.id&&e.draggable.droppableId===n.draggable.droppableId&&e.draggable.type===n.draggable.type&&e.draggable.index===n.draggable.index,s=e.droppable.id===n.droppable.id&&e.droppable.type===n.droppable.type;return r&&s},Wi=(e,n)=>{n()},Ic=(e,n)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:n});function of(e,n,r,s){if(!e){r(s(n));return}const o=uz(r);e(n,{announce:o}),o.wasCalled()||r(s(n))}var xz=(e,n)=>{const r=hz();let s=null;const o=(p,g)=>{s&&Le(),Wi("onBeforeCapture",()=>{const b=e().onBeforeCapture;b&&b({draggableId:p,mode:g})})},i=(p,g)=>{s&&Le(),Wi("onBeforeDragStart",()=>{const b=e().onBeforeDragStart;b&&b(Ic(p,g))})},l=(p,g)=>{s&&Le();const b=Ic(p,g);s={mode:g,lastCritical:p,lastLocation:b.source,lastCombine:null},r.add(()=>{Wi("onDragStart",()=>of(e().onDragStart,b,n,Lc.onDragStart))})},d=(p,g)=>{const b=ix(g),y=ru(g);s||Le();const S=!mz(p,s.lastCritical);S&&(s.lastCritical=p);const j=!fz(s.lastLocation,b);j&&(s.lastLocation=b);const P=!pz(s.lastCombine,y);if(P&&(s.lastCombine=y),!S&&!j&&!P)return;const w={...Ic(p,s.mode),combine:y,destination:b};r.add(()=>{Wi("onDragUpdate",()=>of(e().onDragUpdate,w,n,Lc.onDragUpdate))})},u=()=>{s||Le(),r.flush()},h=p=>{s||Le(),s=null,Wi("onDragEnd",()=>of(e().onDragEnd,p,n,Lc.onDragEnd))};return{beforeCapture:o,beforeStart:i,start:l,update:d,flush:u,drop:h,abort:()=>{if(!s)return;const p={...Ic(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};h(p)}}},gz=(e,n)=>{const r=xz(e,n);return s=>o=>i=>{if(Vt(i,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Vt(i,"INITIAL_PUBLISH")){const d=i.payload.critical;r.beforeStart(d,i.payload.movementMode),o(i),r.start(d,i.payload.movementMode);return}if(Vt(i,"DROP_COMPLETE")){const d=i.payload.completed.result;r.flush(),o(i),r.drop(d);return}if(o(i),Vt(i,"FLUSH")){r.abort();return}const l=s.getState();l.phase==="DRAGGING"&&r.update(l.critical,l.impact)}};const bz=e=>n=>r=>{if(!Vt(r,"DROP_ANIMATION_FINISHED")){n(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&Le(),e.dispatch(px({completed:s.completed}))},yz=e=>{let n=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),n&&(n(),n=null)}return o=>i=>{if((Vt(i,"FLUSH")||Vt(i,"DROP_COMPLETE")||Vt(i,"DROP_ANIMATION_FINISHED"))&&s(),o(i),!Vt(i,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Ww())}};r=requestAnimationFrame(()=>{r=null,n=ss(window,[l])})}};var vz=e=>()=>n=>r=>{(Vt(r,"DROP_COMPLETE")||Vt(r,"FLUSH")||Vt(r,"DROP_ANIMATE"))&&e.stopPublishing(),n(r)},jz=e=>{let n=!1;return()=>r=>s=>{if(Vt(s,"INITIAL_PUBLISH")){n=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!n){if(Vt(s,"FLUSH")){n=!1,e.tryRestoreFocusRecorded();return}if(Vt(s,"DROP_COMPLETE")){n=!1;const o=s.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Sz=e=>Vt(e,"DROP_COMPLETE")||Vt(e,"DROP_ANIMATE")||Vt(e,"FLUSH");var wz=e=>n=>r=>s=>{if(Sz(s)){e.stop(),r(s);return}if(Vt(s,"INITIAL_PUBLISH")){r(s);const o=n.getState();o.phase!=="DRAGGING"&&Le(),e.start(o);return}r(s),e.scroll(n.getState())};const Cz=e=>n=>r=>{if(n(r),!Vt(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Fw({reason:s.reason})))},Pz=ow;var Ez=({dimensionMarshal:e,focusMarshal:n,styleMarshal:r,getResponders:s,announce:o,autoScroller:i})=>sw(NU,Pz(b6(ez(r),vz(e),ZU(e),az,bz,yz,Cz,wz(i),dz,jz(n),gz(s,o))));const af=()=>({additions:{},removals:{},modified:{}});function Iz({registry:e,callbacks:n}){let r=af(),s=null;const o=()=>{s||(n.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:u,removals:h,modified:f}=r,p=Object.keys(u).map(y=>e.draggable.getById(y).getDimension(Yn)).sort((y,S)=>y.descriptor.index-S.descriptor.index),g=Object.keys(f).map(y=>{const j=e.droppable.getById(y).callbacks.getScrollWhileDragging();return{droppableId:y,scroll:j}}),b={additions:p,removals:Object.keys(h),modified:g};r=af(),n.publish(b)}))};return{add:u=>{const h=u.descriptor.id;r.additions[h]=u,r.modified[u.descriptor.droppableId]=!0,r.removals[h]&&delete r.removals[h],o()},remove:u=>{const h=u.descriptor;r.removals[h.id]=!0,r.modified[h.droppableId]=!0,r.additions[h.id]&&delete r.additions[h.id],o()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=af())}}}var zw=({scrollHeight:e,scrollWidth:n,height:r,width:s})=>{const o=Wr({x:n,y:e},{x:s,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Hw=()=>{const e=document.documentElement;return e||Le(),e},Gw=()=>{const e=Hw();return zw({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Tz=()=>{const e=Uw(),n=Gw(),r=e.y,s=e.x,o=Hw(),i=o.clientWidth,l=o.clientHeight,d=s+i,u=r+l;return{frame:vs({top:r,left:s,right:d,bottom:u}),scroll:{initial:e,current:e,max:n,diff:{value:Yn,displacement:Yn}}}},Dz=({critical:e,scrollOptions:n,registry:r})=>{const s=Tz(),o=s.scroll.current,i=e.droppable,l=r.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(o,n)),d=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(o));return{dimensions:{draggables:vw(d),droppables:yw(l)},critical:e,viewport:s}};function B0(e,n,r){return!(r.descriptor.id===n.id||r.descriptor.type!==n.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var Az=(e,n)=>{let r=null;const s=Iz({callbacks:{publish:n.publishWhileDragging,collectionStarting:n.collectionStarting},registry:e}),o=(g,b)=>{e.droppable.exists(g)||Le(),r&&n.updateDroppableIsEnabled({id:g,isEnabled:b})},i=(g,b)=>{r&&(e.droppable.exists(g)||Le(),n.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:b}))},l=(g,b)=>{r&&(e.droppable.exists(g)||Le(),n.updateDroppableScroll({id:g,newScroll:b}))},d=(g,b)=>{r&&e.droppable.getById(g).callbacks.scroll(b)},u=()=>{if(!r)return;s.stop();const g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(b=>b.callbacks.dragStopped()),r.unsubscribe(),r=null},h=g=>{r||Le();const b=r.critical.draggable;g.type==="ADDITION"&&B0(e,b,g.value)&&s.add(g.value),g.type==="REMOVAL"&&B0(e,b,g.value)&&s.remove(g.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:i,scrollDroppable:d,updateDroppableScroll:l,startPublishing:g=>{r&&Le();const b=e.draggable.getById(g.draggableId),y=e.droppable.getById(b.descriptor.droppableId),S={draggable:b.descriptor,droppable:y.descriptor},j=e.subscribe(h);return r={critical:S,unsubscribe:j},Dz({critical:S,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:u}},Yw=(e,n)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===n?!1:e.completed.result.reason==="DROP",Rz=e=>{window.scrollBy(e.x,e.y)};const kz=Gn(e=>nu(e).filter(n=>!(!n.isEnabled||!n.frame))),_z=(e,n)=>kz(n).find(s=>(s.frame||Le(),Aw(s.frame.pageMarginBox)(e)))||null;var Oz=({center:e,destination:n,droppables:r})=>{if(n){const o=r[n];return o.frame?o:null}return _z(e,r)};const fl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Mz=(e,n,r=()=>fl)=>{const s=r(),o=e[n.size]*s.startFromPercentage,i=e[n.size]*s.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:i}},qw=({startOfRange:e,endOfRange:n,current:r})=>{const s=n-e;return s===0?0:(r-e)/s},xx=1,Nz=(e,n,r=()=>fl)=>{const s=r();if(e>n.startScrollingFrom)return 0;if(e<=n.maxScrollValueAt)return s.maxPixelScroll;if(e===n.startScrollingFrom)return xx;const i=1-qw({startOfRange:n.maxScrollValueAt,endOfRange:n.startScrollingFrom,current:e}),l=s.maxPixelScroll*s.ease(i);return Math.ceil(l)},Lz=(e,n,r)=>{const s=r(),o=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,l=n,d=i,h=Date.now()-l;if(h>=i)return e;if(h<o)return xx;const f=qw({startOfRange:o,endOfRange:d,current:h}),p=e*s.ease(f);return Math.ceil(p)},V0=({distanceToEdge:e,thresholds:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Nz(e,n,o);return i===0?0:s?Math.max(Lz(i,r,o),xx):i},U0=({container:e,distanceToEdges:n,dragStartTime:r,axis:s,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const l=Mz(e,s,i);return n[s.end]<n[s.start]?V0({distanceToEdge:n[s.end],thresholds:l,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i}):-1*V0({distanceToEdge:n[s.start],thresholds:l,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})},$z=({container:e,subject:n,proposedScroll:r})=>{const s=n.height>e.height,o=n.width>e.width;return!o&&!s?r:o&&s?null:{x:o?0:r.x,y:s?0:r.y}};const Fz=bw(e=>e===0?0:e);var Kw=({dragStartTime:e,container:n,subject:r,center:s,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const l={top:s.y-n.top,right:n.right-s.x,bottom:n.bottom-s.y,left:s.x-n.left},d=U0({container:n,distanceToEdges:l,dragStartTime:e,axis:lx,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),u=U0({container:n,distanceToEdges:l,dragStartTime:e,axis:ww,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),h=Fz({x:u,y:d});if(Do(h,Yn))return null;const f=$z({container:n,subject:r,proposedScroll:h});return f?Do(f,Yn)?null:f:null};const Wz=bw(e=>e===0?0:e>0?1:-1),gx=(()=>{const e=(n,r)=>n<0?n:n>r?n-r:0;return({current:n,max:r,change:s})=>{const o=tr(n,s),i={x:e(o.x,r.x),y:e(o.y,r.y)};return Do(i,Yn)?null:i}})(),Jw=({max:e,current:n,change:r})=>{const s={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},o=Wz(r),i=gx({max:s,current:n,change:o});return!i||o.x!==0&&i.x===0||o.y!==0&&i.y===0},bx=(e,n)=>Jw({current:e.scroll.current,max:e.scroll.max,change:n}),Bz=(e,n)=>{if(!bx(e,n))return null;const r=e.scroll.max,s=e.scroll.current;return gx({current:s,max:r,change:n})},yx=(e,n)=>{const r=e.frame;return r?Jw({current:r.scroll.current,max:r.scroll.max,change:n}):!1},Vz=(e,n)=>{const r=e.frame;return!r||!yx(e,n)?null:gx({current:r.scroll.current,max:r.scroll.max,change:n})};var Uz=({viewport:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const l=Kw({dragStartTime:s,container:e.frame,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return l&&bx(e,l)?l:null},zz=({droppable:e,subject:n,center:r,dragStartTime:s,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const l=e.frame;if(!l)return null;const d=Kw({dragStartTime:s,container:l.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return d&&yx(e,d)?d:null},z0=({state:e,dragStartTime:n,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:o,getAutoScrollerOptions:i})=>{const l=e.current.page.borderBoxCenter,u=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const p=e.viewport,g=Uz({dragStartTime:n,viewport:p,subject:u,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});if(g){s(g);return}}const h=Oz({center:l,destination:Vr(e.impact),droppables:e.dimensions.droppables});if(!h)return;const f=zz({dragStartTime:n,droppable:h,subject:u,center:l,shouldUseTimeDampening:r,getAutoScrollerOptions:i});f&&o(h.descriptor.id,f)},Hz=({scrollWindow:e,scrollDroppable:n,getAutoScrollerOptions:r=()=>fl})=>{const s=ll(e),o=ll(n);let i=null;const l=h=>{i||Le();const{shouldUseTimeDampening:f,dragStartTime:p}=i;z0({state:h,scrollWindow:s,scrollDroppable:o,dragStartTime:p,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:h=>{i&&Le();const f=Date.now();let p=!1;const g=()=>{p=!0};z0({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:r}),i={dragStartTime:f,shouldUseTimeDampening:p},p&&l(h)},stop:()=>{i&&(s.cancel(),o.cancel(),i=null)},scroll:l}},Gz=({move:e,scrollDroppable:n,scrollWindow:r})=>{const s=(d,u)=>{const h=tr(d.current.client.selection,u);e({client:h})},o=(d,u)=>{if(!yx(d,u))return u;const h=Vz(d,u);if(!h)return n(d.descriptor.id,u),null;const f=Wr(u,h);return n(d.descriptor.id,f),Wr(u,f)},i=(d,u,h)=>{if(!d||!bx(u,h))return h;const f=Bz(u,h);if(!f)return r(h),null;const p=Wr(h,f);return r(p),Wr(h,p)};return d=>{const u=d.scrollJumpRequest;if(!u)return;const h=Vr(d.impact);h||Le();const f=o(d.dimensions.droppables[h],u);if(!f)return;const p=d.viewport,g=i(d.isWindowScrollAllowed,p,f);g&&s(d,g)}},Yz=({scrollDroppable:e,scrollWindow:n,move:r,getAutoScrollerOptions:s})=>{const o=Hz({scrollWindow:n,scrollDroppable:e,getAutoScrollerOptions:s}),i=Gz({move:r,scrollWindow:n,scrollDroppable:e});return{scroll:u=>{if(!(s().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){o.scroll(u);return}u.scrollJumpRequest&&i(u)}},start:o.start,stop:o.stop}};const si="data-rfd",oi=(()=>{const e=`${si}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Ff=(()=>{const e=`${si}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),qz=(()=>{const e=`${si}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),H0={contextId:`${si}-scroll-container-context-id`},Kz=e=>n=>`[${n}="${e}"]`,Bi=(e,n)=>e.map(r=>{const s=r.styles[n];return s?`${r.selector} { ${s} }`:""}).join(" "),Jz="pointer-events: none;";var Xz=e=>{const n=Kz(e),r=(()=>{const d=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:n(oi.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:d,dragging:Jz,dropAnimating:d}}})(),s=(()=>{const d=`
      transition: ${Qi.outOfTheWay};
    `;return{selector:n(Ff.contextId),styles:{dragging:d,dropAnimating:d,userCancel:d}}})(),o={selector:n(qz.contextId),styles:{always:"overflow-anchor: none;"}},l=[s,r,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Bi(l,"always"),resting:Bi(l,"resting"),dragging:Bi(l,"dragging"),dropAnimating:Bi(l,"dropAnimating"),userCancel:Bi(l,"userCancel")}};const Ur=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,lf=()=>{const e=document.querySelector("head");return e||Le(),e},G0=e=>{const n=document.createElement("style");return e&&n.setAttribute("nonce",e),n.type="text/css",n};function Qz(e,n){const r=Ot(()=>Xz(e),[e]),s=x.useRef(null),o=x.useRef(null),i=ot(Gn(p=>{const g=o.current;g||Le(),g.textContent=p}),[]),l=ot(p=>{const g=s.current;g||Le(),g.textContent=p},[]);Ur(()=>{!s.current&&!o.current||Le();const p=G0(n),g=G0(n);return s.current=p,o.current=g,p.setAttribute(`${si}-always`,e),g.setAttribute(`${si}-dynamic`,e),lf().appendChild(p),lf().appendChild(g),l(r.always),i(r.resting),()=>{const b=y=>{const S=y.current;S||Le(),lf().removeChild(S),y.current=null};b(s),b(o)}},[n,l,i,r.always,r.resting,e]);const d=ot(()=>i(r.dragging),[i,r.dragging]),u=ot(p=>{if(p==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),h=ot(()=>{o.current&&i(r.resting)},[i,r.resting]);return Ot(()=>({dragging:d,dropping:u,resting:h}),[d,u,h])}function Xw(e,n){return Array.from(e.querySelectorAll(n))}var Qw=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function au(e){return e instanceof Qw(e).HTMLElement}function Zz(e,n){const r=`[${oi.contextId}="${e}"]`,s=Xw(document,r);if(!s.length)return null;const o=s.find(i=>i.getAttribute(oi.draggableId)===n);return!o||!au(o)?null:o}function eH(e){const n=x.useRef({}),r=x.useRef(null),s=x.useRef(null),o=x.useRef(!1),i=ot(function(g,b){const y={id:g,focus:b};return n.current[g]=y,function(){const j=n.current;j[g]!==y&&delete j[g]}},[]),l=ot(function(g){const b=Zz(e,g);b&&b!==document.activeElement&&b.focus()},[e]),d=ot(function(g,b){r.current===g&&(r.current=b)},[]),u=ot(function(){s.current||o.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const g=r.current;g&&l(g)}))},[l]),h=ot(function(g){r.current=null;const b=document.activeElement;b&&b.getAttribute(oi.draggableId)===g&&(r.current=g)},[]);return Ur(()=>(o.current=!0,function(){o.current=!1;const g=s.current;g&&cancelAnimationFrame(g)}),[]),Ot(()=>({register:i,tryRecordFocus:h,tryRestoreFocusRecorded:u,tryShiftRecord:d}),[i,h,u,d])}function tH(){const e={draggables:{},droppables:{}},n=[];function r(p){return n.push(p),function(){const b=n.indexOf(p);b!==-1&&n.splice(b,1)}}function s(p){n.length&&n.forEach(g=>g(p))}function o(p){return e.draggables[p]||null}function i(p){const g=o(p);return g||Le(),g}const l={register:p=>{e.draggables[p.descriptor.id]=p,s({type:"ADDITION",value:p})},update:(p,g)=>{const b=e.draggables[g.descriptor.id];b&&b.uniqueId===p.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[p.descriptor.id]=p)},unregister:p=>{const g=p.descriptor.id,b=o(g);b&&p.uniqueId===b.uniqueId&&(delete e.draggables[g],e.droppables[p.descriptor.droppableId]&&s({type:"REMOVAL",value:p}))},getById:i,findById:o,exists:p=>!!o(p),getAllByType:p=>Object.values(e.draggables).filter(g=>g.descriptor.type===p)};function d(p){return e.droppables[p]||null}function u(p){const g=d(p);return g||Le(),g}const h={register:p=>{e.droppables[p.descriptor.id]=p},unregister:p=>{const g=d(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete e.droppables[p.descriptor.id]},getById:u,findById:d,exists:p=>!!d(p),getAllByType:p=>Object.values(e.droppables).filter(g=>g.descriptor.type===p)};function f(){e.draggables={},e.droppables={},n.length=0}return{draggable:l,droppable:h,subscribe:r,clean:f}}function nH(){const e=Ot(tH,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var vx=Dt.createContext(null),vd=()=>{const e=document.body;return e||Le(),e};const rH={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},sH=e=>`rfd-announcement-${e}`;function oH(e){const n=Ot(()=>sH(e),[e]),r=x.useRef(null);return x.useEffect(function(){const i=document.createElement("div");return r.current=i,i.id=n,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),U(i.style,rH),vd().appendChild(i),function(){setTimeout(function(){const u=vd();u.contains(i)&&u.removeChild(i),i===r.current&&(r.current=null)})}},[n]),ot(o=>{const i=r.current;if(i){i.textContent=o;return}},[])}const aH={separator:"::"};function jx(e,n=aH){const r=Dt.useId();return Ot(()=>`${e}${n.separator}${r}`,[n.separator,e,r])}function iH({contextId:e,uniqueId:n}){return`rfd-hidden-text-${e}-${n}`}function lH({contextId:e,text:n}){const r=jx("hidden-text",{separator:"-"}),s=Ot(()=>iH({contextId:e,uniqueId:r}),[r,e]);return x.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=n,i.style.display="none",vd().appendChild(i),function(){const d=vd();d.contains(i)&&d.removeChild(i)}},[s,n]),s}var iu=Dt.createContext(null);function Zw(e){const n=x.useRef(e);return x.useEffect(()=>{n.current=e}),n}function cH(){let e=null;function n(){return!!e}function r(l){return l===e}function s(l){e&&Le();const d={abandon:l};return e=d,d}function o(){e||Le(),e=null}function i(){e&&(e.abandon(),o())}return{isClaimed:n,isActive:r,claim:s,release:o,tryAbandon:i}}function pl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const dH=9,uH=13,Sx=27,e1=32,hH=33,fH=34,pH=35,mH=36,xH=37,gH=38,bH=39,yH=40,vH={[uH]:!0,[dH]:!0};var t1=e=>{vH[e.keyCode]&&e.preventDefault()};const lu=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),n1=0,Y0=5;function jH(e,n){return Math.abs(n.x-e.x)>=Y0||Math.abs(n.y-e.y)>=Y0}const q0={type:"IDLE"};function SH({cancel:e,completed:n,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:o=>{const{button:i,clientX:l,clientY:d}=o;if(i!==n1)return;const u={x:l,y:d},h=r();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(u);return}h.type!=="PENDING"&&Le();const f=h.point;if(!jH(f,u))return;o.preventDefault();const p=h.actions.fluidLift(u);s({type:"DRAGGING",actions:p})}},{eventName:"mouseup",fn:o=>{const i=r();if(i.type!=="DRAGGING"){e();return}o.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:o=>{r().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(r().type==="PENDING"){e();return}if(o.keyCode===Sx){o.preventDefault(),e();return}t1(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const i=r();if(i.type==="IDLE"&&Le(),i.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:lu,fn:e}]}function wH(e){const n=x.useRef(q0),r=x.useRef(To),s=Ot(()=>({eventName:"mousedown",fn:function(p){if(p.defaultPrevented||p.button!==n1||p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)return;const g=e.findClosestDraggableId(p);if(!g)return;const b=e.tryGetLock(g,l,{sourceEvent:p});if(!b)return;p.preventDefault();const y={x:p.clientX,y:p.clientY};r.current(),h(b,y)}}),[e]),o=Ot(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const p=e.findClosestDraggableId(f);if(!p)return;const g=e.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||e.canGetLock(p)&&f.preventDefault())}}),[e]),i=ot(function(){const p={passive:!1,capture:!0};r.current=ss(window,[o,s],p)},[o,s]),l=ot(()=>{n.current.type!=="IDLE"&&(n.current=q0,r.current(),i())},[i]),d=ot(()=>{const f=n.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=ot(function(){const p={capture:!0,passive:!1},g=SH({cancel:d,completed:l,getPhase:()=>n.current,setPhase:b=>{n.current=b}});r.current=ss(window,g,p)},[d,l]),h=ot(function(p,g){n.current.type!=="IDLE"&&Le(),n.current={type:"PENDING",point:g,actions:p},u()},[u]);Ur(function(){return i(),function(){r.current()}},[i])}function CH(){}const PH={[fH]:!0,[hH]:!0,[mH]:!0,[pH]:!0};function EH(e,n){function r(){n(),e.cancel()}function s(){n(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===Sx){o.preventDefault(),r();return}if(o.keyCode===e1){o.preventDefault(),s();return}if(o.keyCode===yH){o.preventDefault(),e.moveDown();return}if(o.keyCode===gH){o.preventDefault(),e.moveUp();return}if(o.keyCode===bH){o.preventDefault(),e.moveRight();return}if(o.keyCode===xH){o.preventDefault(),e.moveLeft();return}if(PH[o.keyCode]){o.preventDefault();return}t1(o)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:lu,fn:r}]}function IH(e){const n=x.useRef(CH),r=Ot(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==e1)return;const l=e.findClosestDraggableId(i);if(!l)return;const d=e.tryGetLock(l,f,{sourceEvent:i});if(!d)return;i.preventDefault();let u=!0;const h=d.snapLift();n.current();function f(){u||Le(),u=!1,n.current(),s()}n.current=ss(window,EH(h,f),{capture:!0,passive:!1})}}),[e]),s=ot(function(){const i={passive:!1,capture:!0};n.current=ss(window,[r],i)},[r]);Ur(function(){return s(),function(){n.current()}},[s])}const cf={type:"IDLE"},TH=120,DH=.15;function AH({cancel:e,getPhase:n}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.keyCode===Sx&&r.preventDefault(),e()}},{eventName:lu,fn:e}]}function RH({cancel:e,completed:n,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:i,clientY:l}=s.touches[0],d={x:i,y:l};s.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:s=>{const o=r();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const o=r();o.type==="IDLE"&&Le();const i=s.touches[0];if(!i||!(i.force>=DH))return;const d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&e();return}if(d){if(o.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:lu,fn:e}]}function kH(e){const n=x.useRef(cf),r=x.useRef(To),s=ot(function(){return n.current},[]),o=ot(function(b){n.current=b},[]),i=Ot(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const y=e.findClosestDraggableId(b);if(!y)return;const S=e.tryGetLock(y,d,{sourceEvent:b});if(!S)return;const j=b.touches[0],{clientX:P,clientY:w}=j,I={x:P,y:w};r.current(),p(S,I)}}),[e]),l=ot(function(){const b={capture:!0,passive:!1};r.current=ss(window,[i],b)},[i]),d=ot(()=>{const g=n.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),o(cf),r.current(),l())},[l,o]),u=ot(()=>{const g=n.current;d(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[d]),h=ot(function(){const b={capture:!0,passive:!1},y={cancel:u,completed:d,getPhase:s},S=ss(window,RH(y),b),j=ss(window,AH(y),b);r.current=function(){S(),j()}},[u,s,d]),f=ot(function(){const b=s();b.type!=="PENDING"&&Le();const y=b.actions.fluidLift(b.point);o({type:"DRAGGING",actions:y,hasMoved:!1})},[s,o]),p=ot(function(b,y){s().type!=="IDLE"&&Le();const S=setTimeout(f,TH);o({type:"PENDING",point:y,actions:b,longPressTimerId:S}),h()},[h,s,o,f]);Ur(function(){return l(),function(){r.current();const y=s();y.type==="PENDING"&&(clearTimeout(y.longPressTimerId),o(cf))}},[s,l,o]),Ur(function(){return ss(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const _H=["input","button","textarea","select","option","optgroup","video","audio"];function r1(e,n){if(n==null)return!1;if(_H.includes(n.tagName.toLowerCase()))return!0;const s=n.getAttribute("contenteditable");return s==="true"||s===""?!0:n===e?!1:r1(e,n.parentElement)}function OH(e,n){const r=n.target;return au(r)?r1(e,r):!1}var MH=e=>vs(e.getBoundingClientRect()).center;function NH(e){return e instanceof Qw(e).Element}const LH=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function s1(e,n){return e==null?null:e[LH](n)?e:s1(e.parentElement,n)}function $H(e,n){return e.closest?e.closest(n):s1(e,n)}function FH(e){return`[${oi.contextId}="${e}"]`}function WH(e,n){const r=n.target;if(!NH(r))return null;const s=FH(e),o=$H(r,s);return!o||!au(o)?null:o}function BH(e,n){const r=WH(e,n);return r?r.getAttribute(oi.draggableId):null}function VH(e,n){const r=`[${Ff.contextId}="${e}"]`,o=Xw(document,r).find(i=>i.getAttribute(Ff.id)===n);return!o||!au(o)?null:o}function UH(e){e.preventDefault()}function Tc({expected:e,phase:n,isLockActive:r,shouldWarn:s}){return!(!r()||e!==n)}function o1({lockAPI:e,store:n,registry:r,draggableId:s}){if(e.isClaimed())return!1;const o=r.draggable.findById(s);return!(!o||!o.options.isEnabled||!Yw(n.getState(),s))}function zH({lockAPI:e,contextId:n,store:r,registry:s,draggableId:o,forceSensorStop:i,sourceEvent:l}){if(!o1({lockAPI:e,store:r,registry:s,draggableId:o}))return null;const u=s.draggable.getById(o),h=VH(n,u.descriptor.id);if(!h||l&&!u.options.canDragInteractiveElements&&OH(h,l))return null;const f=e.claim(i||To);let p="PRE_DRAG";function g(){return u.options.shouldRespectForcePress}function b(){return e.isActive(f)}function y(D,R){Tc({expected:D,phase:p,isLockActive:b,shouldWarn:!0})&&r.dispatch(R())}const S=y.bind(null,"DRAGGING");function j(D){function R(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(R(),Le()),r.dispatch($U(D.liftActionArgs)),p="DRAGGING";function _(k,N={shouldBlockNextClick:!1}){if(D.cleanup(),N.shouldBlockNextClick){const L=ss(window,[{eventName:"click",fn:UH,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(L)}R(),r.dispatch(Fw({reason:k}))}return{isActive:()=>Tc({expected:"DRAGGING",phase:p,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:g,drop:k=>_("DROP",k),cancel:k=>_("CANCEL",k),...D.actions}}function P(D){const R=ll(k=>{S(()=>$w({client:k}))});return{...j({liftActionArgs:{id:o,clientSelection:D,movementMode:"FLUID"},cleanup:()=>R.cancel(),actions:{move:R}}),move:R}}function w(){const D={moveUp:()=>S(YU),moveRight:()=>S(KU),moveDown:()=>S(qU),moveLeft:()=>S(JU)};return j({liftActionArgs:{id:o,clientSelection:MH(h),movementMode:"SNAP"},cleanup:To,actions:D})}function I(){Tc({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!0})&&e.release()}return{isActive:()=>Tc({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:P,snapLift:w,abort:I}}const HH=[wH,IH,kH];function GH({contextId:e,store:n,registry:r,customSensors:s,enableDefaultSensors:o}){const i=[...o?HH:[],...s||[]],l=x.useState(()=>cH())[0],d=ot(function(j,P){pl(j)&&!pl(P)&&l.tryAbandon()},[l]);Ur(function(){let j=n.getState();return n.subscribe(()=>{const w=n.getState();d(j,w),j=w})},[l,n,d]),Ur(()=>l.tryAbandon,[l.tryAbandon]);const u=ot(S=>o1({lockAPI:l,registry:r,store:n,draggableId:S}),[l,r,n]),h=ot((S,j,P)=>zH({lockAPI:l,registry:r,contextId:e,store:n,draggableId:S,forceSensorStop:j||null,sourceEvent:P&&P.sourceEvent?P.sourceEvent:null}),[e,l,r,n]),f=ot(S=>BH(e,S),[e]),p=ot(S=>{const j=r.draggable.findById(S);return j?j.options:null},[r.draggable]),g=ot(function(){l.isClaimed()&&(l.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(fx()))},[l,n]),b=ot(()=>l.isClaimed(),[l]),y=Ot(()=>({canGetLock:u,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:b}),[u,h,f,p,g,b]);for(let S=0;S<i.length;S++)i[S](y)}const YH=e=>({onBeforeCapture:n=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(n)};Kf.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),qH=e=>({...fl,...e.autoScrollerOptions,durationDampening:{...fl.durationDampening,...e.autoScrollerOptions}});function Vi(e){return e.current||Le(),e.current}function KH(e){const{contextId:n,setCallbacks:r,sensors:s,nonce:o,dragHandleUsageInstructions:i}=e,l=x.useRef(null),d=Zw(e),u=ot(()=>YH(d.current),[d]),h=ot(()=>qH(d.current),[d]),f=oH(n),p=lH({contextId:n,text:i}),g=Qz(n,o),b=ot(L=>{Vi(l).dispatch(L)},[]),y=Ot(()=>j0({publishWhileDragging:WU,updateDroppableScroll:VU,updateDroppableIsEnabled:UU,updateDroppableIsCombineEnabled:zU,collectionStarting:BU},b),[b]),S=nH(),j=Ot(()=>Az(S,y),[S,y]),P=Ot(()=>Yz({scrollWindow:Rz,scrollDroppable:j.scrollDroppable,getAutoScrollerOptions:h,...j0({move:$w},b)}),[j.scrollDroppable,b,h]),w=eH(n),I=Ot(()=>Ez({announce:f,autoScroller:P,dimensionMarshal:j,focusMarshal:w,getResponders:u,styleMarshal:g}),[f,P,j,w,u,g]);l.current=I;const T=ot(()=>{const L=Vi(l);L.getState().phase!=="IDLE"&&L.dispatch(fx())},[]),D=ot(()=>{const L=Vi(l).getState();return L.phase==="DROP_ANIMATING"?!0:L.phase==="IDLE"?!1:L.isDragging},[]),R=Ot(()=>({isDragging:D,tryAbort:T}),[D,T]);r(R);const _=ot(L=>Yw(Vi(l).getState(),L),[]),k=ot(()=>ra(Vi(l).getState()),[]),N=Ot(()=>({marshal:j,focus:w,contextId:n,canLift:_,isMovementAllowed:k,dragHandleUsageInstructionsId:p,registry:S}),[n,j,p,w,_,k,S]);return GH({contextId:n,store:I,registry:S,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>T,[T]),Dt.createElement(iu.Provider,{value:N},Dt.createElement(yV,{context:vx,store:I},e.children))}function JH(){return Dt.useId()}function XH(e){const n=JH(),r=e.dragHandleUsageInstructions||Lc.dragHandleUsageInstructions;return Dt.createElement(TV,null,s=>Dt.createElement(KH,{nonce:e.nonce,contextId:n,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const K0={dragging:5e3,dropAnimating:4500},QH=(e,n)=>n?Qi.drop(n.duration):e?Qi.snap:Qi.fluid,ZH=(e,n)=>{if(e)return n?hl.opacity.drop:hl.opacity.combining},e8=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function t8(e){const r=e.dimension.client,{offset:s,combineWith:o,dropping:i}=e,l=!!o,d=e8(e),u=!!i,h=u?Lf.drop(s,l):Lf.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:QH(d,i),transform:h,opacity:ZH(l,u),zIndex:u?K0.dropAnimating:K0.dragging,pointerEvents:"none"}}function n8(e){return{transform:Lf.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function r8(e){return e.type==="DRAGGING"?t8(e):n8(e)}function s8(e,n,r=Yn){const s=window.getComputedStyle(n),o=n.getBoundingClientRect(),i=fw(o,s),l=xd(i,r),d={client:i,tagName:n.tagName.toLowerCase(),display:s.display},u={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:d,displaceBy:u,client:i,page:l}}function o8(e){const n=jx("draggable"),{descriptor:r,registry:s,getDraggableRef:o,canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:d}=e,u=Ot(()=>({canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:d}),[i,d,l]),h=ot(b=>{const y=o();return y||Le(),s8(r,y,b)},[r,o]),f=Ot(()=>({uniqueId:n,descriptor:r,options:u,getDimension:h}),[r,h,u,n]),p=x.useRef(f),g=x.useRef(!0);Ur(()=>(s.draggable.register(p.current),()=>s.draggable.unregister(p.current)),[s.draggable]),Ur(()=>{if(g.current){g.current=!1;return}const b=p.current;p.current=f,s.draggable.update(f,b)},[f,s.draggable])}var wx=Dt.createContext(null);function jd(e){const n=x.useContext(e);return n||Le(),n}function a8(e){e.preventDefault()}const i8=e=>{const n=x.useRef(null),r=ot((R=null)=>{n.current=R},[]),s=ot(()=>n.current,[]),{contextId:o,dragHandleUsageInstructionsId:i,registry:l}=jd(iu),{type:d,droppableId:u}=jd(wx),h=Ot(()=>({id:e.draggableId,index:e.index,type:d,droppableId:u}),[e.draggableId,e.index,d,u]),{children:f,draggableId:p,isEnabled:g,shouldRespectForcePress:b,canDragInteractiveElements:y,isClone:S,mapped:j,dropAnimationFinished:P}=e;if(!S){const R=Ot(()=>({descriptor:h,registry:l,getDraggableRef:s,canDragInteractiveElements:y,shouldRespectForcePress:b,isEnabled:g}),[h,l,s,y,b,g]);o8(R)}const w=Ot(()=>g?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:a8}:null,[o,i,p,g]),I=ot(R=>{j.type==="DRAGGING"&&j.dropping&&R.propertyName==="transform"&&Kf.flushSync(P)},[P,j]),T=Ot(()=>{const R=r8(j),_=j.type==="DRAGGING"&&j.dropping?I:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":p,style:R,onTransitionEnd:_},dragHandleProps:w}},[o,w,p,j,I,r]),D=Ot(()=>({draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}),[h.droppableId,h.id,h.index,h.type]);return Dt.createElement(Dt.Fragment,null,f(T,j.snapshot,D))};var a1=(e,n)=>e===n,i1=e=>{const{combine:n,destination:r}=e;return r?r.droppableId:n?n.droppableId:null};const l8=e=>e.combine?e.combine.draggableId:null,c8=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function d8(){const e=Gn((o,i)=>({x:o,y:i})),n=Gn((o,i,l=null,d=null,u=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!u,dropAnimation:u,mode:o,draggingOver:l,combineWith:d,combineTargetFor:null})),r=Gn((o,i,l,d,u=null,h=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:h,mode:i,offset:o,dimension:l,forceShouldAnimate:f,snapshot:n(i,d,u,h,null)}}));return(o,i)=>{if(pl(o)){if(o.critical.draggable.id!==i.draggableId)return null;const l=o.current.client.offset,d=o.dimensions.draggables[i.draggableId],u=Vr(o.impact),h=c8(o.impact),f=o.forceShouldAnimate;return r(e(l.x,l.y),o.movementMode,d,i.isClone,u,h,f)}if(o.phase==="DROP_ANIMATING"){const l=o.completed;if(l.result.draggableId!==i.draggableId)return null;const d=i.isClone,u=o.dimensions.draggables[i.draggableId],h=l.result,f=h.mode,p=i1(h),g=l8(h),y={duration:o.dropDuration,curve:mx.drop,moveTo:o.newHomeClientOffset,opacity:g?hl.opacity.drop:null,scale:g?hl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:u,dropping:y,draggingOver:p,combineWith:g,mode:f,forceShouldAnimate:null,snapshot:n(f,d,p,g,y)}}}return null}}function l1(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const u8={mapped:{type:"SECONDARY",offset:Yn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:l1(null)}};function h8(){const e=Gn((l,d)=>({x:l,y:d})),n=Gn(l1),r=Gn((l,d=null,u)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:d,shouldAnimateDisplacement:u,snapshot:n(d)}})),s=l=>l?r(Yn,l,!0):null,o=(l,d,u,h)=>{const f=u.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=ru(u),b=g&&g.draggableId===l?d:null;if(!f){if(!p)return s(b);if(u.displaced.invisible[l])return null;const j=pi(h.displacedBy.point),P=e(j.x,j.y);return r(P,b,!0)}if(p)return s(b);const y=u.displacedBy.point,S=e(y.x,y.y);return r(S,b,f.shouldAnimate)};return(l,d)=>{if(pl(l))return l.critical.draggable.id===d.draggableId?null:o(d.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const u=l.completed;return u.result.draggableId===d.draggableId?null:o(d.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const f8=()=>{const e=d8(),n=h8();return(s,o)=>e(s,o)||n(s,o)||u8},p8={dropAnimationFinished:Ww},m8=uw(f8,p8,null,{context:vx,areStatePropsEqual:a1})(i8);function c1(e){return jd(wx).isUsingCloneFor===e.draggableId&&!e.isClone?null:Dt.createElement(m8,e)}function x8(e){const n=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return Dt.createElement(c1,U({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const d1=e=>n=>e===n,g8=d1("scroll"),b8=d1("auto"),J0=(e,n)=>n(e.overflowX)||n(e.overflowY),y8=e=>{const n=window.getComputedStyle(e),r={overflowX:n.overflowX,overflowY:n.overflowY};return J0(r,g8)||J0(r,b8)},v8=()=>!1,u1=e=>e==null?null:e===document.body?v8()?e:null:e===document.documentElement?null:y8(e)?e:u1(e.parentElement);var Wf=e=>({x:e.scrollLeft,y:e.scrollTop});const h1=e=>e?window.getComputedStyle(e).position==="fixed"?!0:h1(e.parentElement):!1;var j8=e=>{const n=u1(e),r=h1(e);return{closestScrollable:n,isFixedOnPage:r}},S8=({descriptor:e,isEnabled:n,isCombineEnabled:r,isFixedOnPage:s,direction:o,client:i,page:l,closest:d})=>{const u=(()=>{if(!d)return null;const{scrollSize:g,client:b}=d,y=zw({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:d.page.marginBox,frameClient:b,scrollSize:g,shouldClipSubject:d.shouldClipSubject,scroll:{initial:d.scroll,current:d.scroll,max:y,diff:{value:Yn,displacement:Yn}}}})(),h=o==="vertical"?lx:ww,f=ri({page:l,withPlaceholder:null,axis:h,frame:u});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:h,isEnabled:n,client:i,page:l,frame:u,subject:f}};const w8=(e,n)=>{const r=pw(e);if(!n||e!==n)return r;const s=r.paddingBox.top-n.scrollTop,o=r.paddingBox.left-n.scrollLeft,i=s+n.scrollHeight,l=o+n.scrollWidth,u=sx({top:s,right:l,bottom:i,left:o},r.border);return ox({borderBox:u,margin:r.margin,border:r.border,padding:r.padding})};var C8=({ref:e,descriptor:n,env:r,windowScroll:s,direction:o,isDropDisabled:i,isCombineEnabled:l,shouldClipSubject:d})=>{const u=r.closestScrollable,h=w8(e,u),f=xd(h,s),p=(()=>{if(!u)return null;const b=pw(u),y={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:b,page:xd(b,s),scroll:Wf(u),scrollSize:y,shouldClipSubject:d}})();return S8({descriptor:n,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:o,client:h,page:f,closest:p})};const P8={passive:!1},E8={passive:!0};var X0=e=>e.shouldPublishImmediately?P8:E8;const Dc=e=>e&&e.env.closestScrollable||null;function I8(e){const n=x.useRef(null),r=jd(iu),s=jx("droppable"),{registry:o,marshal:i}=r,l=Zw(e),d=Ot(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),u=x.useRef(d),h=Ot(()=>Gn((T,D)=>{n.current||Le();const R={x:T,y:D};i.updateDroppableScroll(d.id,R)}),[d.id,i]),f=ot(()=>{const T=n.current;return!T||!T.env.closestScrollable?Yn:Wf(T.env.closestScrollable)},[]),p=ot(()=>{const T=f();h(T.x,T.y)},[f,h]),g=Ot(()=>ll(p),[p]),b=ot(()=>{const T=n.current,D=Dc(T);if(T&&D||Le(),T.scrollOptions.shouldPublishImmediately){p();return}g()},[g,p]),y=ot((T,D)=>{n.current&&Le();const R=l.current,_=R.getDroppableRef();_||Le();const k=j8(_),N={ref:_,descriptor:d,env:k,scrollOptions:D};n.current=N;const L=C8({ref:_,descriptor:d,env:k,windowScroll:T,direction:R.direction,isDropDisabled:R.isDropDisabled,isCombineEnabled:R.isCombineEnabled,shouldClipSubject:!R.ignoreContainerClipping}),z=k.closestScrollable;return z&&(z.setAttribute(H0.contextId,r.contextId),z.addEventListener("scroll",b,X0(N.scrollOptions))),L},[r.contextId,d,b,l]),S=ot(()=>{const T=n.current,D=Dc(T);return T&&D||Le(),Wf(D)},[]),j=ot(()=>{const T=n.current;T||Le();const D=Dc(T);n.current=null,D&&(g.cancel(),D.removeAttribute(H0.contextId),D.removeEventListener("scroll",b,X0(T.scrollOptions)))},[b,g]),P=ot(T=>{const D=n.current;D||Le();const R=Dc(D);R||Le(),R.scrollTop+=T.y,R.scrollLeft+=T.x},[]),w=Ot(()=>({getDimensionAndWatchScroll:y,getScrollWhileDragging:S,dragStopped:j,scroll:P}),[j,y,S,P]),I=Ot(()=>({uniqueId:s,descriptor:d,callbacks:w}),[w,d,s]);Ur(()=>(u.current=I.descriptor,o.droppable.register(I),()=>{n.current&&j(),o.droppable.unregister(I)}),[w,d,j,I,i,o.droppable]),Ur(()=>{n.current&&i.updateDroppableIsEnabled(u.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Ur(()=>{n.current&&i.updateDroppableIsCombineEnabled(u.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function df(){}const Q0={width:0,height:0,margin:OV},T8=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>e||r==="close"?Q0:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin},D8=({isAnimatingOpenOnMount:e,placeholder:n,animate:r})=>{const s=T8({isAnimatingOpenOnMount:e,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Qi.placeholder:null}},A8=e=>{const n=x.useRef(null),r=ot(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),{animate:s,onTransitionEnd:o,onClose:i,contextId:l}=e,[d,u]=x.useState(e.animate==="open");x.useEffect(()=>d?s!=="open"?(r(),u(!1),df):n.current?df:(n.current=setTimeout(()=>{n.current=null,u(!1)}),r):df,[s,d,r]);const h=ot(p=>{p.propertyName==="height"&&(o(),s==="close"&&i())},[s,i,o]),f=D8({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return Dt.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})};var R8=Dt.memo(A8);class k8 extends Dt.PureComponent{constructor(...n){super(...n),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(n,r){return n.shouldAnimate?n.on?{isVisible:!0,data:n.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!n.on,data:n.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const n={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(n)}}const _8=e=>{const n=x.useContext(iu);n||Le();const{contextId:r,isMovementAllowed:s}=n,o=x.useRef(null),i=x.useRef(null),{children:l,droppableId:d,type:u,mode:h,direction:f,ignoreContainerClipping:p,isDropDisabled:g,isCombineEnabled:b,snapshot:y,useClone:S,updateViewportMaxScroll:j,getContainerForClone:P}=e,w=ot(()=>o.current,[]),I=ot((z=null)=>{o.current=z},[]);ot(()=>i.current,[]);const T=ot((z=null)=>{i.current=z},[]),D=ot(()=>{s()&&j({maxScroll:Gw()})},[s,j]);I8({droppableId:d,type:u,mode:h,direction:f,isDropDisabled:g,isCombineEnabled:b,ignoreContainerClipping:p,getDroppableRef:w});const R=Ot(()=>Dt.createElement(k8,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:z,data:$,animate:G})=>Dt.createElement(R8,{placeholder:$,onClose:z,innerRef:T,animate:G,contextId:r,onTransitionEnd:D})),[r,D,e.placeholder,e.shouldAnimatePlaceholder,T]),_=Ot(()=>({innerRef:I,placeholder:R,droppableProps:{"data-rfd-droppable-id":d,"data-rfd-droppable-context-id":r}}),[r,d,R,I]),k=S?S.dragging.draggableId:null,N=Ot(()=>({droppableId:d,type:u,isUsingCloneFor:k}),[d,k,u]);function L(){if(!S)return null;const{dragging:z,render:$}=S,G=Dt.createElement(c1,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(K,J)=>$(K,J,z));return BR.createPortal(G,P())}return Dt.createElement(wx.Provider,{value:N},l(_,y),L())};function O8(){return document.body||Le(),document.body}const Z0={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:O8},f1=e=>{let n={...e},r;for(r in Z0)e[r]===void 0&&(n={...n,[r]:Z0[r]});return n},uf=(e,n)=>e===n.droppable.type,ev=(e,n)=>n.draggables[e.draggable.id],M8=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n={...e,shouldAnimatePlaceholder:!1},r=Gn(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=Gn((i,l,d,u,h,f)=>{const p=h.descriptor.id;if(h.descriptor.droppableId===i){const y=f?{render:f,dragging:r(h.descriptor)}:null,S={isDraggingOver:d,draggingOverWith:d?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:S,useClone:y}}if(!l)return n;if(!u)return e;const b={isDraggingOver:d,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(i,l)=>{const d=f1(l),u=d.droppableId,h=d.type,f=!d.isDropDisabled,p=d.renderClone;if(pl(i)){const g=i.critical;if(!uf(h,g))return n;const b=ev(g,i.dimensions),y=Vr(i.impact)===u;return s(u,f,y,y,b,p)}if(i.phase==="DROP_ANIMATING"){const g=i.completed;if(!uf(h,g.critical))return n;const b=ev(g.critical,i.dimensions);return s(u,f,i1(g.result)===u,Vr(g.impact)===u,b,p)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const g=i.completed;if(!uf(h,g.critical))return n;const b=Vr(g.impact)===u,y=!!(g.impact.at&&g.impact.at.type==="COMBINE"),S=g.critical.droppable.id===u;return b?y?e:n:S?e:n}return n}},N8={updateViewportMaxScroll:GU},L8=uw(M8,N8,(e,n,r)=>({...f1(r),...e,...n}),{context:vx,areStatePropsEqual:a1})(_8);var $8=L8;const F8=({tiers:e,isLoading:n=!1,onEdit:r,onDelete:s,onReorder:o,onCreateTier:i})=>{const[l,d]=x.useState(e);x.useEffect(()=>{d([...e].sort((h,f)=>h.order-f.order))},[e]);const u=async h=>{if(!h.destination)return;const f=h.source.index,p=h.destination.index;if(f===p)return;const g=[...l].sort((S,j)=>S.order-j.order),[b]=g.splice(f,1);g.splice(p,0,b);const y=g.map((S,j)=>({...S,order:j+1}));d(y),o(y)};return n?t.jsx(me,{spacing:3,sx:{maxWidth:900},children:[1,2,3].map(h=>t.jsx(rt,{sx:{p:3},children:t.jsxs(me,{spacing:2,children:[t.jsx(ue,{variant:"circular",width:32,height:32}),t.jsx(ue,{variant:"text",width:"60%",height:28}),t.jsx(ue,{variant:"text",width:"40%",height:40}),t.jsx(ue,{variant:"text",width:"80%",height:20}),t.jsxs(me,{direction:"row",justifyContent:"flex-end",spacing:1,children:[t.jsx(ue,{variant:"circular",width:32,height:32}),t.jsx(ue,{variant:"circular",width:32,height:32})]})]})},h))}):e.length===0?t.jsx(Us,{title:"Set Up Channel Subscriptions",description:"Create subscription tiers to offer exclusive perks and content to your subscribers",action:{label:"Create Your First Tier",onClick:i},icon:t.jsx(dd,{sx:{fontSize:48}})}):t.jsxs(me,{spacing:4,children:[t.jsxs(me,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsx(v,{variant:"h5",sx:{fontWeight:600},children:"Subscription Tiers"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(Tl,{}),onClick:i,sx:{px:3,borderRadius:2,textTransform:"none"},children:"Create Tier"})]}),t.jsx(rt,{sx:{p:2,bgcolor:"primary.50",borderRadius:2,border:"1px solid",borderColor:"primary.100"},children:t.jsxs(me,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(Hd,{color:"primary"}),t.jsx(v,{variant:"body2",color:"primary.700",children:"Drag to reorder tiers. Members will see tiers in this order on your channel page."})]})}),t.jsx(XH,{onDragEnd:u,children:t.jsx($8,{droppableId:"tiers",children:h=>t.jsxs(me,{spacing:3,...h.droppableProps,ref:h.innerRef,sx:{maxWidth:800,width:"100%"},children:[l.map((f,p)=>t.jsx(x8,{draggableId:f.id,index:p,children:(g,b)=>t.jsx(C,{ref:g.innerRef,...g.draggableProps,children:t.jsx(C,{sx:{position:"relative"},children:t.jsxs(rt,{elevation:b.isDragging?8:2,sx:{p:3,transition:"all 0.2s ease",transform:b.isDragging?"scale(1.02)":"scale(1)",bgcolor:"background.paper",borderRadius:2,"&:hover":{boxShadow:4,"& .drag-handle":{opacity:1}}},children:[t.jsx(Xe,{label:f.order,color:"primary",size:"small",sx:{position:"absolute",top:-12,left:16,height:32,width:32,borderRadius:"50%",boxShadow:2,zIndex:1,"& .MuiChip-label":{px:0,fontSize:"1rem",fontWeight:"bold"}}}),t.jsx(C,{...g.dragHandleProps,className:"drag-handle",sx:{position:"absolute",top:0,left:0,right:0,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.2s ease","&:hover":{cursor:"move","& .drag-icon":{transform:"scale(1.1)"}}},children:t.jsx(C,{className:"drag-icon",sx:{width:40,height:40,borderRadius:"50%",bgcolor:"action.hover",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s ease"},children:t.jsx(rw,{color:"action"})})}),t.jsxs(C,{sx:{flex:1},children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:f.name}),t.jsxs(v,{variant:"h4",gutterBottom:!0,children:["$",f.price,t.jsx(v,{component:"span",variant:"body2",sx:{ml:1},children:"/month"})]}),t.jsx(v,{variant:"body2",sx:{mb:2},children:f.description})]}),t.jsxs(me,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(Oe,{onClick:()=>r(f.id),size:"small",children:t.jsx(fi,{})}),t.jsx(Oe,{onClick:()=>s(f.id),size:"small",children:t.jsx($o,{})})]})]})})})},f.id)),h.placeholder]})})})]})},W8=({open:e,onClose:n,onSubmit:r,initialData:s,tierCount:o,isEdit:i=!1})=>{const[l,d]=x.useState({name:"",description:"",price:0,benefits:[],order:i?s.order:o+1}),[u,h]=x.useState({}),[f,p]=x.useState(!1);x.useEffect(()=>{s&&d({name:s.name,description:s.description,price:s.price,benefits:s.benefits,order:i?s.order:o+1})},[s]),x.useEffect(()=>{d(S=>({...S,order:o+1}))},[o]);const g=()=>{const S={};return l.name||(S.name="Name is required"),l.description||(S.description="Description is required"),l.price<0&&(S.price="Price must be positive"),l.benefits||(S.benefits="Benefits are required"),h(S),Object.keys(S).length===0},b=S=>j=>{const P=S==="price"?Number(j.target.value):j.target.value;d(w=>({...w,[S]:P})),u[S]&&h(w=>({...w,[S]:void 0}))},y=async S=>{if(S.preventDefault(),!!g())try{p(!0),await r(l),n()}catch(j){console.error("Failed to submit tier:",j)}finally{p(!1)}};return t.jsxs(Gt,{open:e,onClose:n,maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:i?"Edit Tier":"Create New Tier"}),t.jsxs("form",{onSubmit:y,children:[t.jsx(Yt,{children:t.jsxs(me,{spacing:3,children:[t.jsx(et,{label:"Tier Name",value:l.name,onChange:b("name"),error:!!u.name,helperText:u.name,fullWidth:!0}),t.jsx(et,{label:"Description",value:l.description,onChange:b("description"),multiline:!0,rows:3,error:!!u.description,helperText:u.description,fullWidth:!0}),t.jsx(et,{type:"number",label:"Monthly Price",value:l.price,onChange:b("price"),InputProps:{startAdornment:t.jsx(zr,{position:"start",children:"$"})},error:!!u.price,helperText:u.price,fullWidth:!0}),t.jsx(et,{label:"Benefits",value:l.benefits,onChange:b("benefits"),multiline:!0,rows:4,placeholder:"Enter benefits, one per line",error:!!u.benefits,helperText:u.benefits,fullWidth:!0})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:n,children:"Cancel"}),t.jsx(ce,{type:"submit",variant:"contained",disabled:f,children:i?"Save Changes":"Create Tier"})]})]})]})},Cx=x.memo(({channelId:e})=>{const{api:n}=Ye(),{execute:r}=Ke(),{execute:s}=Ke(),{execute:o}=Ke(),{execute:i}=Ke(),{execute:l}=Ke(),[d,u]=x.useState([]),[h,f]=x.useState(!0),[p,g]=x.useState(!1),[b,y]=x.useState(null),[S,j]=x.useState(!1),P=x.useCallback(async()=>{if(!e)return;f(!0);const k=await r(()=>n==null?void 0:n.app.channel.getTiers(e),{showErrorToast:!0});k&&u(k.items||[]),f(!1)},[e,r,n]);x.useEffect(()=>{P()},[P]);const w=k=>{const N=d.find(L=>L.id===k);N&&(y(N),g(!0))},I=()=>{g(!1),y(null)},T=async k=>{await s(()=>n==null?void 0:n.app.channel.createTier(e,k),{showSuccessMessage:!0,successMessage:"Tier created successfully"})&&(await P(),I())},D=async(k,N)=>{await o(()=>n==null?void 0:n.app.channel.updateTier(e,k,N),{showSuccessMessage:!0,successMessage:"Tier updated successfully"}),await P(),I()},R=async k=>{await l(()=>n==null?void 0:n.app.channel.deleteTier(e,k),{showSuccessMessage:!0,successMessage:"Tier deleted successfully"}),await P()},_=async k=>{try{j(!0),await i(()=>n==null?void 0:n.app.channel.updateTiers(e,k),{showSuccessMessage:!0,successMessage:"Tiers reordered successfully"}),u(k)}catch{}finally{j(!1)}};return t.jsxs(C,{sx:{p:3},children:[t.jsx(F8,{tiers:d,isLoading:h,onEdit:w,onDelete:R,onReorder:_,onCreateTier:()=>g(!0)}),t.jsx(W8,{open:p,onClose:I,onSubmit:b?k=>D(b.id,k):T,initialData:b,tierCount:d.length,isEdit:!!b}),t.jsx(VR,{sx:{color:"#fff",zIndex:k=>k.zIndex.drawer+1,backdropFilter:"blur(3px)"},open:S,children:t.jsx(Zt,{color:"inherit"})})]})},(e,n)=>e.channelId===n.channelId);Cx.displayName="TiersTab";const B8=({tabs:e,activeTab:n,onTabChange:r,isOpen:s,onClose:o,onOpen:i})=>t.jsx(UR,{anchor:"bottom",open:s,onClose:o,onOpen:i,disableSwipeToOpen:!1,PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"80vh"}},children:t.jsx(br,{sx:{pt:1,pb:2},children:e.map(l=>t.jsx(pf,{selected:n===l.id,onClick:()=>{r(l.id),o()},sx:{mx:1,borderRadius:1,mb:.5,"&.Mui-selected":{bgcolor:d=>he(d.palette.primary.main,.1)}},children:t.jsx(Bt,{primary:l.label})},l.id))})}),V8=({tabs:e,activeTab:n,onTabChange:r})=>t.jsx(C,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsx(Bs,{value:n,onChange:(s,o)=>r(o),sx:{px:{md:3,lg:4}},children:e.map(s=>t.jsx(An,{label:s.label,value:s.id,sx:{textTransform:"none",fontWeight:500,fontSize:"0.9375rem"}},s.id))})}),tv=[{id:"basic",label:"Basic Info",component:nw},{id:"tiers",label:"Channel Tiers",component:Cx}],U8=()=>{const{id:e}=dr(),n=cn(),r=vl(n.breakpoints.down("md")),{api:s}=Ye(),[o,i]=x.useState("basic"),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState(!0),{execute:g}=Ke(),{execute:b}=Ke(),y=x.useCallback(async()=>{if(!e)return;p(!0);const w=await g(()=>s==null?void 0:s.app.channel.getChannel(e),{showErrorToast:!0});w&&h(w),p(!1)},[e,g,s]);x.useEffect(()=>{y()},[y]);const S=async w=>{e&&(await b(()=>s==null?void 0:s.app.channel.updateChannel(e,w),{showSuccessMessage:!0,successMessage:"Channel updated successfully"}),await y())},j=w=>{i(w)};if(!e||f||!u)return null;const P=()=>{switch(o){case"basic":return t.jsx(nw,{channel:u,onUpdate:S});case"tiers":return t.jsx(Cx,{channelId:u.id});default:return null}};return t.jsx(C,{sx:{minHeight:"100%",bgcolor:"background.default"},children:r?t.jsxs(t.Fragment,{children:[t.jsx(C,{sx:{px:2,py:1.5},children:t.jsx(v,{variant:"h6",sx:{fontWeight:600},children:"Edit Channel"})}),P(),t.jsx(B8,{tabs:tv,activeTab:o,onTabChange:j,isOpen:l,onClose:()=>d(!1),onOpen:()=>d(!0)})]}):t.jsxs(t.Fragment,{children:[t.jsx(V8,{tabs:tv,activeTab:o,onTabChange:j}),t.jsx(C,{sx:{p:{md:3,lg:4}},children:P()})]})})},p1=({tier:e,onClick:n})=>t.jsx(Fe,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:n?"pointer":"default","&:hover":n?{boxShadow:r=>r.shadows[4]}:{}},onClick:n,children:t.jsx(Ve,{sx:{flexGrow:1},children:t.jsxs(me,{spacing:2,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:e.name}),t.jsxs(v,{variant:"h4",color:"primary",gutterBottom:!0,children:["$",e.price,t.jsx(v,{component:"span",variant:"body2",color:"text.secondary",children:"/month"})]})]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:e.description})]})})}),z8=()=>{const{id:e}=dr(),n=e,{api:r}=Ye(),s=xt(),[o,i]=x.useState([]),{execute:l}=Ke();x.useEffect(()=>{d()},[n]);const d=async()=>{if(!n)return;const u=await l(()=>r==null?void 0:r.app.channel.getTiers(n),{showErrorToast:!0});u&&i(u)};return t.jsxs(C,{children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:1},children:"Membership Tiers"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mb:3},children:"Manage your channel's membership tiers and subscription options."}),o.length===0?t.jsx(Us,{title:"No Tiers Yet",description:"Create your first membership tier to start offering exclusive content to subscribers.",icon:t.jsx(Tl,{sx:{fontSize:{xs:40,sm:48}}}),action:{label:"Create Tier",onClick:()=>s(fe.STUDIO_TIER_CREATE.replace(":id",n))}}):t.jsx(F,{container:!0,spacing:3,children:o.map(u=>t.jsx(F,{item:!0,xs:12,md:6,lg:4,children:t.jsx(p1,{tier:u})},u.id))})]})},m1=({initialData:e,onSubmit:n,submitButtonText:r})=>{const[s,o]=x.useState(!1),[i,l]=x.useState(()=>({name:(e==null?void 0:e.name)||"",price:(e==null?void 0:e.price)||0,description:(e==null?void 0:e.description)||"",order:(e==null?void 0:e.order)||0,benefits:(e==null?void 0:e.benefits)||[""]})),d=async p=>{p.preventDefault(),o(!0);try{await n(i)}catch(g){console.error("Failed to submit tier:",g)}finally{o(!1)}},u=(p,g)=>{const b=[...i.benefits];b[p]=g,l(y=>({...y,benefits:b}))},h=()=>{l(p=>({...p,benefits:[...p.benefits,""]}))},f=p=>{if(i.benefits.length>1){const g=i.benefits.filter((b,y)=>y!==p);l(b=>({...b,benefits:g}))}};return t.jsx("form",{onSubmit:d,children:t.jsxs(me,{spacing:4,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Basic Information"}),t.jsxs(me,{spacing:3,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Tier Name"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Choose a name for this subscription tier."}),t.jsx(et,{value:i.name,onChange:p=>l(g=>({...g,name:p.target.value})),required:!0,fullWidth:!0,placeholder:"e.g., Premium Tier"})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Monthly Price"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Set the monthly subscription price for this tier."}),t.jsx(et,{type:"number",value:i.price,onChange:p=>l(g=>({...g,price:Number(p.target.value)})),required:!0,fullWidth:!0,InputProps:{startAdornment:t.jsx(zr,{position:"start",children:"$"})}})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Description"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Describe what subscribers will get with this tier."}),t.jsx(et,{value:i.description,onChange:p=>l(g=>({...g,description:p.target.value})),multiline:!0,rows:4,fullWidth:!0,placeholder:"Describe the benefits of this tier..."})]})]})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Benefits"}),t.jsxs(me,{spacing:2,children:[i.benefits.map((p,g)=>t.jsxs(C,{sx:{display:"flex",gap:1},children:[t.jsx(et,{value:p,onChange:b=>u(g,b.target.value),fullWidth:!0,placeholder:"Add a benefit...",required:!0}),t.jsx(Oe,{onClick:()=>f(g),disabled:i.benefits.length===1,children:t.jsx($o,{})})]},g)),t.jsx(ce,{startIcon:t.jsx(Tl,{}),onClick:h,sx:{alignSelf:"flex-start"},children:"Add Benefit"})]})]}),t.jsx(ce,{type:"submit",variant:"contained",disabled:s,sx:{py:1.5,textTransform:"none",fontWeight:600},children:s?"Submitting...":r})]})})},H8=()=>{const{id:e}=dr(),n=e,{api:r}=Ye(),s=xt(),{execute:o}=Ke(),i=async l=>{if(!n)return;await o(()=>r==null?void 0:r.app.channel.createTier(n,l),{showSuccessMessage:!0,successMessage:"Tier created successfully!"})&&s(fe.STUDIO_CHANNEL_VIEW.replace(":id",n))};return t.jsxs(C,{children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:1},children:"Create Tier"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mb:3},children:"Create a membership tier to offer exclusive benefits to your subscribers."}),t.jsx(m1,{channelId:n,onSubmit:i,submitButtonText:"Create Tier"})]})},G8=()=>{const{id:e,tierId:n}=dr(),r=e,{api:s}=Ye(),o=xt(),[i,l]=x.useState(null),{execute:d}=Ke();x.useEffect(()=>{(async()=>{if(!r||!n)return;const f=await d(()=>s==null?void 0:s.app.channel.getTier(r,n),{showErrorToast:!0});f&&l(f)})()},[r,n,s==null?void 0:s.app.channel,d]);const u=async h=>{if(!r||!n)return;await d(()=>s==null?void 0:s.app.channel.updateTier(r,n,h),{showSuccessMessage:!0,successMessage:"Tier updated successfully!"})&&o(fe.STUDIO_CHANNEL_VIEW.replace(":id",r))};return i?t.jsxs(C,{children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:1},children:"Edit Tier"}),t.jsx(v,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mb:3},children:"Update the details and benefits of this membership tier."}),t.jsx(m1,{channelId:r,initialData:i,onSubmit:u,submitButtonText:"Update Tier"})]}):null},Y8=()=>{const{id:e,tierId:n}=dr(),r=e,s=xt(),{api:o}=Ye(),[i,l]=x.useState(null),{execute:d}=Ke();x.useEffect(()=>{u()},[r,n]);const u=async()=>{if(!r||!n)return;const h=await d(()=>o==null?void 0:o.app.channel.getTier(r,n),{showErrorToast:!0});h&&l(h)};return i?t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[t.jsxs(C,{children:[t.jsx(ce,{startIcon:t.jsx(Vd,{}),onClick:()=>s(fe.STUDIO_TIER_LIST.replace(":id",r)),sx:{mb:2},children:"Back to Tiers"}),t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:1},children:i.name}),t.jsx(v,{variant:"body1",color:"text.secondary",children:"Tier details and management"})]}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(fi,{}),onClick:()=>s(fe.STUDIO_TIER_EDIT.replace(":id",r).replace(":tierId",n)),children:"Edit Tier"})]}),t.jsx(F,{container:!0,spacing:3,children:t.jsx(F,{item:!0,xs:12,md:6,children:t.jsx(p1,{tier:i})})})]}):null},x1=({open:e,poll:n,onClose:r,onConvert:s,loading:o=!1})=>{var b,y;const{profile:i}=Es(),[l,d]=x.useState({title:"",channelId:"",status:Dn.PUBLISHED,isPremium:!1,requiredTierId:null,content:""}),[u,h]=x.useState(null),f=async()=>{if(!l.title.trim()){h("Title is required");return}if(!l.channelId){h("Channel is required");return}if(!l.content.trim()){h("Content is required");return}try{h(null),await s(l),p()}catch(S){h(S.message||"Failed to convert poll to news")}},p=()=>{d({title:"",channelId:"",status:Dn.PUBLISHED,isPremium:!1,requiredTierId:null,content:""}),h(null),r()},g=S=>{d(j=>({...j,content:JSON.stringify(S)}))};return Dt.useEffect(()=>{e&&n&&d(S=>{var j;return{...S,title:`News Article: ${n.title}`,channelId:((j=n.channel)==null?void 0:j.id)||"",content:n.description||""}})},[e,n]),n?t.jsxs(Gt,{open:e,onClose:p,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"70vh"}},children:[t.jsxs(Qt,{children:[t.jsx(v,{variant:"h6",children:"Convert Poll to News Article"}),t.jsxs(v,{variant:"body2",color:"text.secondary",sx:{mt:1},children:['Convert "',n.title,'" into a news article with poll results included']})]}),t.jsx(Yt,{children:t.jsxs(me,{spacing:3,sx:{mt:1},children:[u&&t.jsx(lt,{severity:"error",onClose:()=>h(null),children:u}),t.jsxs(C,{sx:{p:2,borderRadius:2,bgcolor:S=>he(S.palette.primary.main,.05),border:S=>`1px solid ${he(S.palette.primary.main,.2)}`},children:[t.jsx(v,{variant:"subtitle2",gutterBottom:!0,children:"Poll Results (will be included in the article)"}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Total Votes: ",n.voteCount||0,"  Status: ",(b=n.stats)!=null&&b.hasEnded?"Ended":"Active"]})]}),t.jsx(et,{label:"Article Title",fullWidth:!0,required:!0,value:l.title,onChange:S=>d(j=>({...j,title:S.target.value})),helperText:"Create an engaging title for your news article"}),t.jsxs(ht,{fullWidth:!0,required:!0,children:[t.jsx(Ct,{children:"Channel"}),t.jsx(mt,{value:l.channelId,label:"Channel",onChange:S=>d(j=>({...j,channelId:S.target.value})),children:(y=i==null?void 0:i.staffChannels)==null?void 0:y.map(S=>t.jsx(je,{value:S.channelId,children:S.channel.name},S.id))})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:1},children:"Article Content"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Write your news article. Poll results will be automatically appended."}),t.jsx(Qd,{data:l.content?JSON.parse(l.content):void 0,onChange:g,placeholder:"Write your news article content here...",borderColor:S=>S.palette.mode==="dark"?he(S.palette.common.white,.23):he(S.palette.common.black,.23)})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle1",sx:{mb:2},children:"Publishing Options"}),t.jsxs(me,{spacing:2,children:[t.jsx(Ro,{control:t.jsx(Xa,{checked:l.isPremium,onChange:S=>d(j=>({...j,isPremium:S.target.checked}))}),label:"Premium Content"}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:l.status,label:"Status",onChange:S=>d(j=>({...j,status:S.target.value})),children:[t.jsx(je,{value:Dn.DRAFT,children:"Draft"}),t.jsx(je,{value:Dn.PUBLISHED,children:"Published"}),t.jsx(je,{value:Dn.PENDING_REVIEW,children:"Pending Review"})]})]})]})]})]})}),t.jsxs(qt,{sx:{p:3},children:[t.jsx(ce,{onClick:p,disabled:o,children:"Cancel"}),t.jsx(ce,{onClick:f,variant:"contained",disabled:o,children:o?"Converting...":"Convert to News"})]})]}):null},q8=({poll:e,onRefresh:n})=>{var _;const[r,s]=x.useState(null),[o,i]=x.useState(!1),[l,d]=x.useState(!1),u=xt(),{api:h}=Ye(),{execute:f}=Ke(),p=cn(),g=k=>{s(k.currentTarget)},b=()=>{s(null)},y=()=>{u(`${fe.STUDIO_POLL_VIEW.replace(":id",e.id)}`),b()},S=()=>{u(`${fe.STUDIO_POLL_EDIT.replace(":id",e.id)}`),b()},j=()=>{i(!0),b()},P=()=>{d(!0),b()},w=async()=>{await f(()=>h==null?void 0:h.app.poll.delete(e.id),{showSuccessMessage:!0,successMessage:"Poll deleted successfully"})&&n(),i(!1)},I=async k=>{await f(()=>h==null?void 0:h.app.poll.convertToNews(e.id,k),{showSuccessMessage:!0,successMessage:"Poll converted to news successfully!"})&&n()},D=(()=>{const k=new Date,N=new Date(e.startDate),L=new Date(e.endDate);return k<N?{label:"Scheduled",color:"warning"}:k>L?{label:"Ended",color:"error"}:{label:"Active",color:"success"}})(),R=!e.isConverted&&!((_=e.stats)!=null&&_.hasEnded);return t.jsxs(Fe,{sx:{height:"100%",bgcolor:k=>he(k.palette.mode==="dark"?k.palette.common.white:k.palette.common.black,k.palette.mode==="dark"?.05:.03),transition:p.transitions.create(["background-color","box-shadow"]),"&:hover":{bgcolor:k=>he(k.palette.mode==="dark"?k.palette.common.white:k.palette.common.black,k.palette.mode==="dark"?.08:.05),boxShadow:1}},children:[t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(v,{variant:"h6",sx:{fontSize:"1rem",fontWeight:600,color:"text.primary"},children:e.title}),t.jsx(Oe,{size:"small",onClick:g,sx:{ml:1},children:t.jsx(tu,{})})]}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:e.description}),t.jsxs(me,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(Xe,{label:D.label,size:"small",color:D.color}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:[e.totalVotes??0," votes"]})]})]}),t.jsxs(Oo,{anchorEl:r,open:!!r,onClose:b,PaperProps:{sx:{width:200}},children:[t.jsxs(je,{onClick:y,children:[t.jsx(Xt,{children:t.jsx(ga,{fontSize:"small"})}),t.jsx(Bt,{children:"View Poll"})]}),t.jsxs(je,{onClick:S,children:[t.jsx(Xt,{children:t.jsx(fi,{fontSize:"small"})}),t.jsx(Bt,{children:"Edit Poll"})]}),R&&t.jsxs(je,{onClick:P,children:[t.jsx(Xt,{children:t.jsx(il,{fontSize:"small"})}),t.jsx(Bt,{children:"Convert to News"})]}),t.jsxs(je,{onClick:j,children:[t.jsx(Xt,{children:t.jsx($o,{fontSize:"small"})}),t.jsx(Bt,{children:"Delete Poll"})]})]}),t.jsx(Zm,{open:o,title:"Delete Poll",content:"Are you sure you want to delete this poll? This action cannot be undone.",onConfirm:w,onClose:()=>i(!1)}),t.jsx(x1,{open:l,poll:e,onClose:()=>d(!1),onConvert:I})]})},K8=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(1),[o,i]=x.useState(!0),[l,d]=x.useState(!0),{api:u}=Ye(),{profile:h}=Es(),f=xt(),p=cn(),{execute:g}=Ke(),b=()=>{y(r+1)},y=async(j=r)=>{if(!(h!=null&&h.id))return;const P=await g(()=>u==null?void 0:u.studio.getMyContent("polls"),{showErrorToast:!0});P&&(n(w=>j===1?(P==null?void 0:P.items)??[]:[...w,...(P==null?void 0:P.items)??[]]),s((P==null?void 0:P.metadata.currentPage)??1),i((P==null?void 0:P.metadata.hasNext)===!0)),d(!1)};x.useEffect(()=>{y(1)},[]);const S=()=>t.jsxs(C,{sx:{p:2,borderRadius:1,bgcolor:j=>he(j.palette.mode==="dark"?j.palette.common.white:j.palette.common.black,j.palette.mode==="dark"?.05:.03),height:{xs:180,sm:200},transition:p.transitions.create(["background-color","height"])},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[t.jsx(ue,{variant:"circular",width:32,height:32,sx:{mr:1.5}}),t.jsxs(C,{sx:{width:"100%"},children:[t.jsx(ue,{width:"60%",height:20}),t.jsx(ue,{width:"40%",height:16})]})]}),t.jsx(ue,{variant:"rectangular",sx:{borderRadius:1,height:{xs:70,sm:80}}}),t.jsx(C,{sx:{mt:1.5},children:t.jsx(ue,{width:"30%",height:20})})]});return t.jsxs(C,{sx:{px:{xs:2,sm:3,md:4},py:{xs:2,sm:3},maxWidth:"lg",mx:"auto",width:"100%"},children:[t.jsx(C,{sx:{mb:{xs:2,sm:3}},children:t.jsx(v,{variant:"h5",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:l?t.jsx(ue,{width:150}):"My Polls"})}),l?t.jsx(F,{container:!0,spacing:2,children:[1,2].map(j=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(S,{})},j))}):e.length===0?t.jsx(Us,{title:"No Polls Yet",description:"Create your first poll to start gathering opinions from your audience.",icon:t.jsx(lm,{sx:{fontSize:{xs:40,sm:48}}}),action:{label:"Create Poll",onClick:()=>f(fe.STUDIO_POLL_CREATE)}}):t.jsx(Cs,{dataLength:e.length,next:b,hasMore:o,loader:t.jsx(F,{container:!0,spacing:2,sx:{mt:.5},children:[1,2].map(j=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(S,{})},j))}),children:t.jsx(F,{container:!0,spacing:2,children:e.map(j=>t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(q8,{poll:j,onRefresh:()=>y(1)})},j.id))})})]})};function J8(e,...n){const r=new URL(`https://mui.com/production-error/?code=${e}`);return n.forEach(s=>r.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${r} for the full message.`}const g1=re.oneOfType([re.func,re.object]);function X8(e){if(typeof e!="string")throw new Error(J8(7));return e.charAt(0).toUpperCase()+e.slice(1)}function hf(e){return e&&e.ownerDocument||document}const ls=typeof window<"u"?x.useLayoutEffect:x.useEffect;let nv=0;function Q8(e){const[n,r]=x.useState(e),s=e||n;return x.useEffect(()=>{n==null&&(nv+=1,r(`mui-${nv}`))},[n]),s}const Z8={...zR},rv=Z8.useId;function cu(e){if(rv!==void 0){const n=rv();return e??n}return Q8(e)}function ai(e){const{controlled:n,default:r,name:s,state:o="value"}=e,{current:i}=x.useRef(n!==void 0),[l,d]=x.useState(r),u=i?n:l,h=x.useCallback(f=>{i||d(f)},[]);return[u,h]}function Ue(e){const n=x.useRef(e);return ls(()=>{n.current=e}),x.useRef((...r)=>(0,n.current)(...r)).current}function cr(...e){const n=x.useRef(void 0),r=x.useCallback(s=>{const o=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,d=l(s);return typeof d=="function"?d:()=>{l(null)}}return i.current=s,()=>{i.current=null}});return()=>{o.forEach(i=>i==null?void 0:i())}},e);return x.useMemo(()=>e.every(s=>s==null)?null:s=>{n.current&&(n.current(),n.current=void 0),s!=null&&(n.current=r(s))},e)}const sv={};function e9(e,n){const r=x.useRef(sv);return r.current===sv&&(r.current=e(n)),r}const t9=[];function n9(e){x.useEffect(e,t9)}class Px{constructor(){De(this,"currentId",null);De(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});De(this,"disposeEffect",()=>this.clear)}static create(){return new Px}start(n,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},n)}}function za(){const e=e9(Px.create).current;return n9(e.disposeEffect),e}const r9={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function en(e,n,r=void 0){const s={};for(const o in e){const i=e[o];let l="",d=!0;for(let u=0;u<i.length;u+=1){const h=i[u];h&&(l+=(d===!0?"":" ")+n(h),d=!1,r&&r[h]&&(l+=" "+r[h]))}s[o]=l}return s}const ov=e=>e,s9=()=>{let e=ov;return{configure(n){e=n},generate(n){return e(n)},reset(){e=ov}}},o9=s9(),a9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function un(e,n,r="Mui"){const s=a9[n];return s?`${r}-${s}`:`${o9.generate(e)}-${n}`}function pn(e,n,r="Mui"){const s={};return n.forEach(o=>{s[o]=un(e,o,r)}),s}function i9(e){return typeof e=="string"}function l9(e,n,r){return e===void 0||i9(e)?n:{...n,ownerState:{...n.ownerState,...r}}}function c9(e,n=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!n.includes(s)).forEach(s=>{r[s]=e[s]}),r}function av(e){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{n[r]=e[r]}),n}function d9(e){const{getSlotProps:n,additionalProps:r,externalSlotProps:s,externalForwardedProps:o,className:i}=e;if(!n){const b=rn(r==null?void 0:r.className,i,o==null?void 0:o.className,s==null?void 0:s.className),y={...r==null?void 0:r.style,...o==null?void 0:o.style,...s==null?void 0:s.style},S={...r,...o,...s};return b.length>0&&(S.className=b),Object.keys(y).length>0&&(S.style=y),{props:S,internalRef:void 0}}const l=c9({...o,...s}),d=av(s),u=av(o),h=n(l),f=rn(h==null?void 0:h.className,r==null?void 0:r.className,i,o==null?void 0:o.className,s==null?void 0:s.className),p={...h==null?void 0:h.style,...r==null?void 0:r.style,...o==null?void 0:o.style,...s==null?void 0:s.style},g={...h,...r,...u,...d};return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:h.ref}}function ml(e,n,r){return typeof e=="function"?e(n,r):e}function $t(e){var p;const{elementType:n,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:o=!1,...i}=e,l=o?{}:ml(r,s),{props:d,internalRef:u}=d9({...i,externalSlotProps:l}),h=cr(u,l==null?void 0:l.ref,(p=e.additionalProps)==null?void 0:p.ref);return l9(n,{...d,ref:h},s)}const u9=["localeText"],Bf=x.createContext(null),b1=function(n){const{localeText:r}=n,s=it(n,u9),{utils:o,localeText:i}=x.useContext(Bf)??{utils:void 0,localeText:void 0},l=Kt({props:s,name:"MuiLocalizationProvider"}),{children:d,dateAdapter:u,dateFormats:h,dateLibInstance:f,adapterLocale:p,localeText:g}=l,b=x.useMemo(()=>U({},g,i,r),[g,i,r]),y=x.useMemo(()=>{if(!u)return o||null;const P=new u({locale:p,formats:h,instance:f});if(!P.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return P},[u,p,h,f,o]),S=x.useMemo(()=>y?{minDate:y.date("1900-01-01T00:00:00.000"),maxDate:y.date("2099-12-31T00:00:00.000")}:null,[y]),j=x.useMemo(()=>({utils:y,defaultDates:S,localeText:b}),[S,y,b]);return t.jsx(Bf.Provider,{value:j,children:d})},h9=e=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:U({},e)}}}}),y1={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:e=>e==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(e,n)=>`Select ${e}. ${n?`Selected time is ${n}`:"No time selected"}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:e=>e?`Choose date, selected date is ${e}`:"Choose date",openTimePickerDialogue:e=>e?`Choose time, selected time is ${e}`:"Choose time",openRangePickerDialogue:e=>e?`Choose range, selected range is ${e}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>e.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>e.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},f9=y1;h9(y1);const ba=()=>{const e=x.useContext(Bf);if(e===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(e.utils===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const n=x.useMemo(()=>U({},f9,e.localeText),[e.localeText]);return x.useMemo(()=>U({},e,{localeText:n}),[e,n])},Ut=()=>ba().utils,v1=()=>ba().defaultDates,gi=e=>{const n=Ut(),r=x.useRef(void 0);return r.current===void 0&&(r.current=n.date(void 0,e)),r.current},Is=()=>ba().localeText,p9=Mo(t.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),m9=Mo(t.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),x9=Mo(t.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),g9=Mo(t.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar");Mo(t.jsxs(x.Fragment,{children:[t.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),t.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock");const b9=Mo(t.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),y9=Mo(t.jsxs(x.Fragment,{children:[t.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),t.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),v9=Mo(t.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");function j9(e){return un("MuiPickersArrowSwitcher",e)}pn("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const j1=x.createContext(()=>!0);function S9(){return x.useContext(j1)}const S1=x.createContext(null);function w1(){return x.useContext(S1)}const Ex=x.createContext(null),Fo=()=>{const e=x.useContext(Ex);if(e==null)throw new Error("MUI X: The `usePickerContext` hook can only be called inside the context of a Picker component");return e},C1=x.createContext(null),P1=x.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0});function E1(e){const{contextValue:n,actionsContextValue:r,privateContextValue:s,fieldPrivateContextValue:o,isValidContextValue:i,localeText:l,children:d}=e;return t.jsx(Ex.Provider,{value:n,children:t.jsx(C1.Provider,{value:r,children:t.jsx(P1.Provider,{value:s,children:t.jsx(S1.Provider,{value:o,children:t.jsx(j1.Provider,{value:i,children:t.jsx(b1,{localeText:l,children:d})})})})})})}const _n=()=>x.useContext(P1),w9=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],C9=["ownerState"],P9=["ownerState"],E9=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),I9=Ne("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:e})=>({width:e.spacing(3)})),iv=Ne(Oe,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),T9=e=>en({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},j9,e),D9=x.forwardRef(function(n,r){const s=Vs(),o=Kt({props:n,name:"MuiPickersArrowSwitcher"}),{children:i,className:l,slots:d,slotProps:u,isNextDisabled:h,isNextHidden:f,onGoToNext:p,nextLabel:g,isPreviousDisabled:b,isPreviousHidden:y,onGoToPrevious:S,previousLabel:j,labelId:P,classes:w}=o,I=it(o,w9),{ownerState:T}=_n(),D=T9(w),R={isDisabled:h,isHidden:f,goTo:p,label:g},_={isDisabled:b,isHidden:y,goTo:S,label:j},k=(d==null?void 0:d.previousIconButton)??iv,N=$t({elementType:k,externalSlotProps:u==null?void 0:u.previousIconButton,additionalProps:{size:"medium",title:_.label,"aria-label":_.label,disabled:_.isDisabled,edge:"end",onClick:_.goTo},ownerState:U({},T,{isButtonHidden:_.isHidden??!1}),className:rn(D.button,D.previousIconButton)}),L=(d==null?void 0:d.nextIconButton)??iv,z=$t({elementType:L,externalSlotProps:u==null?void 0:u.nextIconButton,additionalProps:{size:"medium",title:R.label,"aria-label":R.label,disabled:R.isDisabled,edge:"start",onClick:R.goTo},ownerState:U({},T,{isButtonHidden:R.isHidden??!1}),className:rn(D.button,D.nextIconButton)}),$=(d==null?void 0:d.leftArrowIcon)??m9,G=$t({elementType:$,externalSlotProps:u==null?void 0:u.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:T,className:D.leftArrowIcon}),K=it(G,C9),J=(d==null?void 0:d.rightArrowIcon)??x9,q=$t({elementType:J,externalSlotProps:u==null?void 0:u.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:T,className:D.rightArrowIcon}),Q=it(q,P9);return t.jsxs(E9,U({ref:r,className:rn(D.root,l),ownerState:T},I,{children:[t.jsx(k,U({},N,{children:s?t.jsx(J,U({},Q)):t.jsx($,U({},K))})),i?t.jsx(v,{variant:"subtitle1",component:"span",id:P,children:i}):t.jsx(I9,{className:D.spacer,ownerState:T}),t.jsx(L,U({},z,{children:s?t.jsx($,U({},K)):t.jsx(J,U({},Q))}))]}))}),Ns=(e,n)=>e.length!==n.length?!1:n.every(r=>e.includes(r)),A9=({openTo:e,defaultOpenTo:n,views:r,defaultViews:s})=>{const o=r??s;let i;if(e!=null)i=e;else if(o.includes(n))i=n;else if(o.length>0)i=o[0];else throw new Error("MUI X: The `views` prop must contain at least one view.");return{views:o,openTo:i}},I1=["hours","minutes","seconds"],R9=["hours","minutes","seconds","meridiem"],xl=e=>I1.includes(e),Fa=e=>R9.includes(e),k9=(e,n)=>e?n.getHours(e)>=12?"pm":"am":null,Vf=(e,n,r)=>r&&(e>=12?"pm":"am")!==n?n==="am"?e-12:e+12:e,_9=(e,n,r,s)=>{const o=Vf(s.getHours(e),n,r);return s.setHours(e,o)},lv=(e,n)=>n.getHours(e)*3600+n.getMinutes(e)*60+n.getSeconds(e),du=(e,n)=>(r,s)=>e?n.isAfter(r,s):lv(r,n)>lv(s,n),cv=(e,{format:n,views:r,ampm:s})=>{if(n!=null)return n;const o=e.formats;return Ns(r,["hours"])?s?`${o.hours12h} ${o.meridiem}`:o.hours24h:Ns(r,["minutes"])?o.minutes:Ns(r,["seconds"])?o.seconds:Ns(r,["minutes","seconds"])?`${o.minutes}:${o.seconds}`:Ns(r,["hours","minutes","seconds"])?s?`${o.hours12h}:${o.minutes}:${o.seconds} ${o.meridiem}`:`${o.hours24h}:${o.minutes}:${o.seconds}`:s?`${o.hours12h}:${o.minutes} ${o.meridiem}`:`${o.hours24h}:${o.minutes}`},T1={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function O9(e){const{steps:n,isViewMatchingStep:r,onStepChange:s}=e;return o=>{if(n==null)return T1;const i=n.findIndex(d=>r(o.view,d)),l=i===-1||i===n.length-1?null:n[i+1];return{hasNextStep:l!=null,hasSeveralSteps:n.length>1,goToNextStep:()=>{l!=null&&s(U({},o,{step:l}))},areViewsInSameStep:(d,u)=>{const h=n.find(p=>r(d,p)),f=n.find(p=>r(u,p));return h===f}}}}function uu({onChange:e,onViewChange:n,openTo:r,view:s,views:o,autoFocus:i,focusedView:l,onFocusedViewChange:d,getStepNavigation:u}){const h=x.useRef(r),f=x.useRef(o),p=x.useRef(o.includes(r)?r:o[0]),[g,b]=ai({name:"useViews",state:"view",controlled:s,default:p.current}),y=x.useRef(i?g:null),[S,j]=ai({name:"useViews",state:"focusedView",controlled:l,default:y.current}),P=u?u({setView:b,view:g,defaultView:p.current,views:o}):T1;x.useEffect(()=>{(h.current&&h.current!==r||f.current&&f.current.some(N=>!o.includes(N)))&&(b(o.includes(r)?r:o[0]),f.current=o,h.current=r)},[r,b,g,o]);const w=o.indexOf(g),I=o[w-1]??null,T=o[w+1]??null,D=Ue((N,L)=>{j(L?N:z=>N===z?null:z),d==null||d(N,L)}),R=Ue(N=>{D(N,!0),N!==g&&(b(N),n&&n(N))}),_=Ue(()=>{T&&R(T)}),k=Ue((N,L,z)=>{const $=L==="finish",G=z?o.indexOf(z)<o.length-1:!!T;e(N,$&&G?"partial":L,z);let J=null;if(z!=null&&z!==g?J=z:$&&(J=g),J==null)return;const q=o[o.indexOf(J)+1];q==null||!P.areViewsInSameStep(J,q)||R(q)});return U({},P,{view:g,setView:R,focusedView:S,setFocusedView:D,nextView:T,previousView:I,defaultView:o.includes(r)?r:o[0],goToNextView:_,setValueAndGoToNextView:k})}function M9(e,{disableFuture:n,maxDate:r,timezone:s}){const o=Ut();return x.useMemo(()=>{const i=o.date(void 0,s),l=o.startOfMonth(n&&o.isBefore(i,r)?i:r);return!o.isAfter(l,e)},[n,r,e,o,s])}function N9(e,{disablePast:n,minDate:r,timezone:s}){const o=Ut();return x.useMemo(()=>{const i=o.date(void 0,s),l=o.startOfMonth(n&&o.isAfter(i,r)?i:r);return!o.isBefore(l,e)},[n,r,e,o,s])}function D1(e,n,r,s){const o=Ut(),i=x.useMemo(()=>o.isValid(e)?e:null,[o,e]),l=k9(i,o),d=x.useCallback(u=>{const h=i==null?null:_9(i,u,!!n,o);r(h,s??"partial")},[n,i,r,s,o]);return{meridiemMode:l,handleMeridiemChange:d}}const gl=36,hu=2,ii=320,L9=280,li=336,A1=232,Yi=48,Ix=Ne("div")({overflow:"hidden",width:ii,maxHeight:li,display:"flex",flexDirection:"column",margin:"0 auto"}),Sd=(e,n,r)=>{let s=n;return s=e.setHours(s,e.getHours(r)),s=e.setMinutes(s,e.getMinutes(r)),s=e.setSeconds(s,e.getSeconds(r)),s=e.setMilliseconds(s,e.getMilliseconds(r)),s},bl=({date:e,disableFuture:n,disablePast:r,maxDate:s,minDate:o,isDateDisabled:i,utils:l,timezone:d})=>{const u=Sd(l,l.date(void 0,d),e);r&&l.isBefore(o,u)&&(o=u),n&&l.isAfter(s,u)&&(s=u);let h=e,f=e;for(l.isBefore(e,o)&&(h=o,f=null),l.isAfter(e,s)&&(f&&(f=s),h=null);h||f;){if(h&&l.isAfter(h,s)&&(h=null),f&&l.isBefore(f,o)&&(f=null),h){if(!i(h))return h;h=l.addDays(h,1)}if(f){if(!i(f))return f;f=l.addDays(f,-1)}}return null},$9=(e,n)=>e.isValid(n)?n:null,wd=(e,n,r)=>n==null||!e.isValid(n)?r:n,F9=(e,n,r)=>!e.isValid(n)&&n!=null&&!e.isValid(r)&&r!=null?!0:e.isEqual(n,r),Tx=(e,n)=>{const s=[e.startOfYear(n)];for(;s.length<12;){const o=s[s.length-1];s.push(e.addMonths(o,1))}return s},Dx=(e,n,r)=>r==="date"?e.startOfDay(e.date(void 0,n)):e.date(void 0,n),Zi=(e,n)=>{const r=e.setHours(e.date(),n==="am"?2:14);return e.format(r,"meridiem")},R1=["year","month","day"],ci=e=>R1.includes(e),dv=(e,{format:n,views:r},s)=>{if(n!=null)return n;const o=e.formats;return Ns(r,["year"])?o.year:Ns(r,["month"])?o.month:Ns(r,["day"])?o.dayOfMonth:Ns(r,["month","year"])?`${o.month} ${o.year}`:Ns(r,["day","month"])?`${o.month} ${o.dayOfMonth}`:o.keyboardDate},W9=(e,n)=>{const r=e.startOfWeek(n);return[0,1,2,3,4,5,6].map(s=>e.addDays(r,s))},ya=({name:e,timezone:n,value:r,defaultValue:s,referenceDate:o,onChange:i,valueManager:l})=>{const d=Ut(),[u,h]=ai({name:e,state:"value",controlled:r,default:s??l.emptyValue}),f=x.useMemo(()=>l.getTimezone(d,u),[d,l,u]),p=Ue(S=>f==null?S:l.setTimezone(d,f,S)),g=x.useMemo(()=>n||f||(o?d.getTimezone(o):"default"),[n,f,o,d]),b=x.useMemo(()=>l.setTimezone(d,g,u),[l,d,g,u]),y=Ue((S,...j)=>{const P=p(S);h(P),i==null||i(P,...j)});return{value:b,handleValueChange:y,timezone:g}},ys={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},B9=e=>Math.max(...e.map(n=>ys[n.type]??1)),Ui=(e,n,r)=>{if(n===ys.year)return e.startOfYear(r);if(n===ys.month)return e.startOfMonth(r);if(n===ys.day)return e.startOfDay(r);let s=r;return n<ys.minutes&&(s=e.setMinutes(s,0)),n<ys.seconds&&(s=e.setSeconds(s,0)),n<ys.milliseconds&&(s=e.setMilliseconds(s,0)),s},V9=({props:e,utils:n,granularity:r,timezone:s,getTodayDate:o})=>{let i=o?o():Ui(n,r,Dx(n,s));e.minDate!=null&&n.isAfterDay(e.minDate,i)&&(i=Ui(n,r,e.minDate)),e.maxDate!=null&&n.isBeforeDay(e.maxDate,i)&&(i=Ui(n,r,e.maxDate));const l=du(e.disableIgnoringDatePartForTimeValidation??!1,n);return e.minTime!=null&&l(e.minTime,i)&&(i=Ui(n,r,e.disableIgnoringDatePartForTimeValidation?e.minTime:Sd(n,i,e.minTime))),e.maxTime!=null&&l(i,e.maxTime)&&(i=Ui(n,r,e.disableIgnoringDatePartForTimeValidation?e.maxTime:Sd(n,i,e.maxTime))),i},k1=(e,n)=>{const r=e.formatTokenMap[n];if(r==null)throw new Error([`MUI X: The token "${n}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof r=="string"?{type:r,contentType:r==="meridiem"?"letter":"digit",maxLength:void 0}:{type:r.sectionType,contentType:r.contentType,maxLength:r.maxLength}},fu=(e,n)=>{const r=[],s=e.date(void 0,"default"),o=e.startOfWeek(s),i=e.endOfWeek(s);let l=o;for(;e.isBefore(l,i);)r.push(l),l=e.addDays(l,1);return r.map(d=>e.formatByString(d,n))},_1=(e,n,r,s)=>{switch(r){case"month":return Tx(e,e.date(void 0,n)).map(o=>e.formatByString(o,s));case"weekDay":return fu(e,s);case"meridiem":{const o=e.date(void 0,n);return[e.startOfDay(o),e.endOfDay(o)].map(i=>e.formatByString(i,s))}default:return[]}},uv="s",U9=["0","1","2","3","4","5","6","7","8","9"],z9=e=>{const n=e.date(void 0);return e.formatByString(e.setSeconds(n,0),uv)==="0"?U9:Array.from({length:10}).map((s,o)=>e.formatByString(e.setSeconds(n,o),uv))},fa=(e,n)=>{if(n[0]==="0")return e;const r=[];let s="";for(let o=0;o<e.length;o+=1){s+=e[o];const i=n.indexOf(s);i>-1&&(r.push(i.toString()),s="")}return r.join("")},Ax=(e,n)=>n[0]==="0"?e:e.split("").map(r=>n[Number(r)]).join(""),hv=(e,n)=>{const r=fa(e,n);return r!==" "&&!Number.isNaN(Number(r))},Rx=(e,n)=>Number(e).toString().padStart(n,"0"),O1=(e,n,r,s,o)=>{if(o.type==="day"&&o.contentType==="digit-with-letter"){const l=e.setDate(r.longestMonth,n);return e.formatByString(l,o.format)}let i=n.toString();return o.hasLeadingZerosInInput&&(i=Rx(i,o.maxLength)),Ax(i,s)},kx=(e,n,r)=>{let s=e.value||e.placeholder;const o=n==="non-input"?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;return n==="non-input"&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(s=Number(fa(s,r)).toString()),["input-rtl","input-ltr"].includes(n)&&e.contentType==="digit"&&!o&&s.length===1&&(s=`${s}`),n==="input-rtl"&&(s=`${s}`),s},fv=(e,n,r,s)=>e.formatByString(e.parse(n,r),s),H9=(e,n)=>e.formatByString(e.date(void 0,"system"),n).length===4,M1=(e,n,r,s)=>{if(n!=="digit")return!1;const o=e.date(void 0,"default");switch(r){case"year":return e.lib==="dayjs"&&s==="YY"?!0:e.formatByString(e.setYear(o,1),s).startsWith("0");case"month":return e.formatByString(e.startOfYear(o),s).length>1;case"day":return e.formatByString(e.startOfMonth(o),s).length>1;case"weekDay":return e.formatByString(e.startOfWeek(o),s).length>1;case"hours":return e.formatByString(e.setHours(o,1),s).length>1;case"minutes":return e.formatByString(e.setMinutes(o,1),s).length>1;case"seconds":return e.formatByString(e.setSeconds(o,1),s).length>1;default:throw new Error("Invalid section type")}},G9=(e,n,r)=>{const s=n.some(u=>u.type==="day"),o=[],i=[];for(let u=0;u<n.length;u+=1){const h=n[u];s&&h.type==="weekDay"||(o.push(h.format),i.push(kx(h,"non-input",r)))}const l=o.join(" "),d=i.join(" ");return e.parse(d,l)},Y9=e=>e.map(n=>`${n.startSeparator}${n.value||n.placeholder}${n.endSeparator}`).join(""),q9=(e,n,r)=>{const o=e.map(i=>{const l=kx(i,r?"input-rtl":"input-ltr",n);return`${i.startSeparator}${l}${i.endSeparator}`}).join("");return r?`${o}`:o},K9=(e,n,r)=>{const s=e.date(void 0,r),o=e.endOfYear(s),i=e.endOfDay(s),{maxDaysInMonth:l,longestMonth:d}=Tx(e,s).reduce((u,h)=>{const f=e.getDaysInMonth(h);return f>u.maxDaysInMonth?{maxDaysInMonth:f,longestMonth:h}:u},{maxDaysInMonth:0,longestMonth:null});return{year:({format:u})=>({minimum:0,maximum:H9(e,u)?9999:99}),month:()=>({minimum:1,maximum:e.getMonth(o)+1}),day:({currentDate:u})=>({minimum:1,maximum:e.isValid(u)?e.getDaysInMonth(u):l,longestMonth:d}),weekDay:({format:u,contentType:h})=>{if(h==="digit"){const f=fu(e,u).map(Number);return{minimum:Math.min(...f),maximum:Math.max(...f)}}return{minimum:1,maximum:7}},hours:({format:u})=>{const h=e.getHours(i);return fa(e.formatByString(e.endOfDay(s),u),n)!==h.toString()?{minimum:1,maximum:Number(fa(e.formatByString(e.startOfDay(s),u),n))}:{minimum:0,maximum:h}},minutes:()=>({minimum:0,maximum:e.getMinutes(i)}),seconds:()=>({minimum:0,maximum:e.getSeconds(i)}),meridiem:()=>({minimum:0,maximum:1}),empty:()=>({minimum:0,maximum:0})}},J9=(e,n,r,s)=>{switch(n.type){case"year":return e.setYear(s,e.getYear(r));case"month":return e.setMonth(s,e.getMonth(r));case"weekDay":{let o=e.formatByString(r,n.format);n.hasLeadingZerosInInput&&(o=Rx(o,n.maxLength));const i=fu(e,n.format),l=i.indexOf(o),u=i.indexOf(n.value)-l;return e.addDays(r,u)}case"day":return e.setDate(s,e.getDate(r));case"meridiem":{const o=e.getHours(r)<12,i=e.getHours(s);return o&&i>=12?e.addHours(s,-12):!o&&i<12?e.addHours(s,12):s}case"hours":return e.setHours(s,e.getHours(r));case"minutes":return e.setMinutes(s,e.getMinutes(r));case"seconds":return e.setSeconds(s,e.getSeconds(r));default:return s}},pv={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8,empty:9},mv=(e,n,r,s,o)=>[...r].sort((i,l)=>pv[i.type]-pv[l.type]).reduce((i,l)=>!o||l.modified?J9(e,l,n,i):i,s),X9=()=>navigator.userAgent.toLowerCase().includes("android"),Q9=(e,n)=>{const r={};if(!n)return e.forEach((u,h)=>{const f=h===0?null:h-1,p=h===e.length-1?null:h+1;r[h]={leftIndex:f,rightIndex:p}}),{neighbors:r,startIndex:0,endIndex:e.length-1};const s={},o={};let i=0,l=0,d=e.length-1;for(;d>=0;){l=e.findIndex((u,h)=>{var f;return h>=i&&((f=u.endSeparator)==null?void 0:f.includes(" "))&&u.endSeparator!==" / "}),l===-1&&(l=e.length-1);for(let u=l;u>=i;u-=1)o[u]=d,s[d]=u,d-=1;i=l+1}return e.forEach((u,h)=>{const f=o[h],p=f===0?null:s[f-1],g=f===e.length-1?null:s[f+1];r[h]={leftIndex:p,rightIndex:g}}),{neighbors:r,startIndex:s[0],endIndex:s[e.length-1]}},Uf=(e,n)=>{if(e==null)return null;if(e==="all")return"all";if(typeof e=="string"){const r=n.findIndex(s=>s.type===e);return r===-1?null:r}return e},Z9=["value","referenceDate"],yr={emptyValue:null,getTodayValue:Dx,getInitialReferenceValue:e=>{let{value:n,referenceDate:r}=e,s=it(e,Z9);return s.utils.isValid(n)?n:r??V9(s)},cleanValue:$9,areValuesEqual:F9,isSameError:(e,n)=>e===n,hasError:e=>e!=null,defaultErrorState:null,getTimezone:(e,n)=>e.isValid(n)?e.getTimezone(n):null,setTimezone:(e,n,r)=>r==null?null:e.setTimezone(r,n)},e7={updateReferenceValue:(e,n,r)=>e.isValid(n)?n:r,getSectionsFromValue:(e,n)=>n(e),getV7HiddenInputValueFromSections:Y9,getV6InputValueFromSections:q9,parseValueStr:(e,n,r)=>r(e.trim(),n),getDateFromSection:e=>e,getDateSectionsFromValue:e=>e,updateDateInValue:(e,n,r)=>r,clearDateSections:e=>e.map(n=>U({},n,{value:""}))},N1=({value:e,referenceDate:n,utils:r,props:s,timezone:o})=>{const i=x.useMemo(()=>yr.getInitialReferenceValue({value:e,utils:r,props:s,referenceDate:n,granularity:ys.day,timezone:o,getTodayDate:()=>Dx(r,o,"date")}),[]);return e??i};function t7(e){return un("MuiDigitalClock",e)}const zf=pn("MuiDigitalClock",["root","list","item"]);function n7(e,n){return Array.isArray(n)?n.every(r=>e.indexOf(r)!==-1):e.indexOf(n)!==-1}const r7=e=>{setTimeout(e,0)},Zn=(e=document)=>{const n=e.activeElement;return n?n.shadowRoot?Zn(n.shadowRoot):n:null},Cd=e=>Array.from(e.children).indexOf(Zn(document)),s7="@media (pointer: fine)";function o7(...e){return e.reduce((n,r)=>(Array.isArray(r)?n.push(...r):r!=null&&n.push(r),n),[])}const a7=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","views","skipDisabled","timezone"],i7=e=>en({root:["root"],list:["list"],item:["item"]},t7,e),l7=Ne(Ix,{name:"MuiDigitalClock",slot:"Root"})({overflowY:"auto",width:"100%",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:A1,variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),c7=Ne(Wv,{name:"MuiDigitalClock",slot:"List"})({padding:0}),d7=Ne(je,{name:"MuiDigitalClock",slot:"Item",shouldForwardProp:e=>e!=="itemValue"&&e!=="formattedValue"})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:he(e.palette.primary.main,e.palette.action.focusOpacity)}})),u7=x.forwardRef(function(n,r){const s=Ut(),o=x.useRef(null),i=cr(r,o),l=x.useRef(null),d=Kt({props:n,name:"MuiDigitalClock"}),{ampm:u=s.is12HourCycleInCurrentLocale(),timeStep:h=30,autoFocus:f,slots:p,slotProps:g,value:b,defaultValue:y,referenceDate:S,disableIgnoringDatePartForTimeValidation:j=!1,maxTime:P,minTime:w,disableFuture:I,disablePast:T,minutesStep:D=1,shouldDisableTime:R,onChange:_,view:k,openTo:N,onViewChange:L,focusedView:z,onFocusedViewChange:$,className:G,classes:K,disabled:J,readOnly:q,views:Q=["hours"],skipDisabled:Y=!1,timezone:oe}=d,V=it(d,a7),{value:Z,handleValueChange:Ee,timezone:be}=ya({name:"DigitalClock",timezone:oe,value:b,defaultValue:y,referenceDate:S,onChange:_,valueManager:yr}),ae=Is(),ee=gi(be),{ownerState:Ce}=_n(),Ae=U({},Ce,{hasDigitalClockAlreadyBeenRendered:!!o.current}),We=i7(K),ye=(p==null?void 0:p.digitalClockItem)??d7,ie=$t({elementType:ye,externalSlotProps:g==null?void 0:g.digitalClockItem,ownerState:Ae,className:We.item}),le=N1({value:Z,referenceDate:S,utils:s,props:d,timezone:be}),se=Ue(Se=>Ee(Se,"finish","hours")),{setValueAndGoToNextView:ge}=uu({view:k,views:Q,openTo:N,onViewChange:L,onChange:se,focusedView:z,onFocusedViewChange:$}),pe=Ue(Se=>{ge(Se,"finish")});ls(()=>{if(o.current===null)return;const Se=o.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!Se)return;const Pe=Se.offsetTop;(f||z)&&Se.focus(),o.current.scrollTop=Pe-4});const ke=x.useCallback(Se=>{const Pe=du(j,s),B=()=>!(w&&Pe(w,Se)||P&&Pe(Se,P)||I&&Pe(Se,ee)||T&&Pe(ee,Se)),Me=()=>s.getMinutes(Se)%D!==0?!1:R?!R(Se,"hours"):!0;return!B()||!Me()},[j,s,w,P,I,ee,T,D,R]),ne=x.useMemo(()=>{const Se=[];let B=s.startOfDay(le);for(;s.isSameDay(le,B);)Se.push(B),B=s.addMinutes(B,h);return Se},[le,h,s]),_e=ne.findIndex(Se=>s.isEqual(Se,le)),de=Se=>{switch(Se.key){case"PageUp":{const Pe=Cd(l.current)-5,B=l.current.children,Me=Math.max(0,Pe),qe=B[Me];qe&&qe.focus(),Se.preventDefault();break}case"PageDown":{const Pe=Cd(l.current)+5,B=l.current.children,Me=Math.min(B.length-1,Pe),qe=B[Me];qe&&qe.focus(),Se.preventDefault();break}}};return t.jsx(l7,U({ref:i,className:rn(We.root,G),ownerState:Ae},V,{children:t.jsx(c7,{ref:l,role:"listbox","aria-label":ae.timePickerToolbarTitle,className:We.list,onKeyDown:de,children:ne.map((Se,Pe)=>{const B=ke(Se);if(Y&&B)return null;const Me=s.isEqual(Se,Z),qe=s.format(Se,u?"fullTime12h":"fullTime24h"),tn=_e===Pe||_e===-1&&Pe===0?0:-1;return t.jsx(ye,U({onClick:()=>!q&&pe(Se),selected:Me,disabled:J||B,disableRipple:q,role:"option","aria-disabled":q,"aria-selected":Me,tabIndex:tn,itemValue:Se,formattedValue:qe},ie,{children:qe}),`${Se.valueOf()}-${qe}`)})})}))});function h7(e){return un("MuiMultiSectionDigitalClock",e)}const Hf=pn("MuiMultiSectionDigitalClock",["root"]);function f7(e){return un("MuiMultiSectionDigitalClockSection",e)}const Gf=pn("MuiMultiSectionDigitalClockSection",["root","item"]),p7=["autoFocus","onChange","className","classes","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],m7=e=>en({root:["root"],item:["item"]},f7,e),x7=Ne(Wv,{name:"MuiMultiSectionDigitalClockSection",slot:"Root"})(({theme:e})=>({maxHeight:A1,width:56,padding:0,overflow:"hidden",scrollbarWidth:"thin","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{hasDigitalClockAlreadyBeenRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),g7=Ne(je,{name:"MuiMultiSectionDigitalClockSection",slot:"Item"})(({theme:e})=>({padding:8,margin:"2px 4px",width:Yi,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:he(e.palette.primary.main,e.palette.action.focusOpacity)}})),b7=x.forwardRef(function(n,r){const s=x.useRef(null),o=cr(r,s),i=x.useRef(null),l=Kt({props:n,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:d,onChange:u,className:h,classes:f,disabled:p,readOnly:g,items:b,active:y,slots:S,slotProps:j,skipDisabled:P}=l,w=it(l,p7),{ownerState:I}=_n(),T=U({},I,{hasDigitalClockAlreadyBeenRendered:!!s.current}),D=m7(f),R=(S==null?void 0:S.digitalClockSectionItem)??g7;ls(()=>{if(s.current===null)return;const N=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(y&&d&&N&&N.focus(),!N||i.current===N)return;i.current=N;const L=N.offsetTop;s.current.scrollTop=L-4});const _=b.findIndex(N=>N.isFocused(N.value)),k=N=>{switch(N.key){case"PageUp":{const L=Cd(s.current)-5,z=s.current.children,$=Math.max(0,L),G=z[$];G&&G.focus(),N.preventDefault();break}case"PageDown":{const L=Cd(s.current)+5,z=s.current.children,$=Math.min(z.length-1,L),G=z[$];G&&G.focus(),N.preventDefault();break}}};return t.jsx(x7,U({ref:o,className:rn(D.root,h),ownerState:T,autoFocusItem:d&&y,role:"listbox",onKeyDown:k},w,{children:b.map((N,L)=>{var J;const z=(J=N.isDisabled)==null?void 0:J.call(N,N.value),$=p||z;if(P&&$)return null;const G=N.isSelected(N.value),K=_===L||_===-1&&L===0?0:-1;return t.jsx(R,U({onClick:()=>!g&&u(N.value),selected:G,disabled:$,disableRipple:g,role:"option","aria-disabled":g||$||void 0,"aria-label":N.ariaLabel,"aria-selected":G,tabIndex:K,className:D.item},j==null?void 0:j.digitalClockSectionItem,{children:N.label}),N.label)})}))}),y7=({now:e,value:n,utils:r,ampm:s,isDisabled:o,resolveAriaLabel:i,timeStep:l,valueOrReferenceDate:d})=>{const u=n?r.getHours(n):null,h=[],f=(b,y)=>{const S=y??u;return S===null?!1:s?b===12?S===12||S===0:S===b||S-12===b:S===b},p=b=>f(b,r.getHours(d)),g=s?11:23;for(let b=0;b<=g;b+=l){let y=r.format(r.setHours(e,b),s?"hours12h":"hours24h");const S=i(parseInt(y,10).toString());y=r.formatNumber(y),h.push({value:b,label:y,isSelected:f,isDisabled:o,isFocused:p,ariaLabel:S})}return h},xv=({value:e,utils:n,isDisabled:r,timeStep:s,resolveLabel:o,resolveAriaLabel:i,hasValue:l=!0})=>{const d=h=>e===null?!1:l&&e===h,u=h=>e===h;return[...Array.from({length:Math.ceil(60/s)},(h,f)=>{const p=s*f;return{value:p,label:n.formatNumber(o(p)),isDisabled:r,isSelected:d,isFocused:u,ariaLabel:i(p.toString())}})]},v7=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","classes","disabled","readOnly","skipDisabled","timezone"],j7=e=>en({root:["root"]},h7,e),S7=Ne(Ix,{name:"MuiMultiSectionDigitalClock",slot:"Root"})(({theme:e})=>({flexDirection:"row",width:"100%",borderBottom:`1px solid ${(e.vars||e).palette.divider}`})),w7=x.forwardRef(function(n,r){const s=Ut(),o=Vs(),i=Kt({props:n,name:"MuiMultiSectionDigitalClock"}),{ampm:l=s.is12HourCycleInCurrentLocale(),timeSteps:d,autoFocus:u,slots:h,slotProps:f,value:p,defaultValue:g,referenceDate:b,disableIgnoringDatePartForTimeValidation:y=!1,maxTime:S,minTime:j,disableFuture:P,disablePast:w,minutesStep:I=1,shouldDisableTime:T,onChange:D,view:R,views:_=["hours","minutes"],openTo:k,onViewChange:N,focusedView:L,onFocusedViewChange:z,className:$,classes:G,disabled:K,readOnly:J,skipDisabled:q=!1,timezone:Q}=i,Y=it(i,v7),{value:oe,handleValueChange:V,timezone:Z}=ya({name:"MultiSectionDigitalClock",timezone:Q,value:p,defaultValue:g,referenceDate:b,onChange:D,valueManager:yr}),Ee=Is(),be=gi(Z),ae=x.useMemo(()=>U({hours:1,minutes:5,seconds:5},d),[d]),ee=N1({value:oe,referenceDate:b,utils:s,props:i,timezone:Z}),Ce=Ue((Pe,B,Me)=>V(Pe,B,Me)),Ae=x.useMemo(()=>!l||!_.includes("hours")||_.includes("meridiem")?_:[..._,"meridiem"],[l,_]),{view:We,setValueAndGoToNextView:ye,focusedView:ie}=uu({view:R,views:Ae,openTo:k,onViewChange:N,onChange:Ce,focusedView:L,onFocusedViewChange:z}),le=Ue(Pe=>{ye(Pe,"finish","meridiem")}),{meridiemMode:se,handleMeridiemChange:ge}=D1(ee,l,le,"finish"),pe=x.useCallback((Pe,B)=>{const Me=du(y,s),qe=B==="hours"||B==="minutes"&&Ae.includes("seconds"),Cn=({start:Nt,end:hn})=>!(j&&Me(j,hn)||S&&Me(Nt,S)||P&&Me(Nt,be)||w&&Me(be,qe?hn:Nt)),tn=(Nt,hn=1)=>{if(Nt%hn!==0)return!1;if(T)switch(B){case"hours":return!T(s.setHours(ee,Nt),"hours");case"minutes":return!T(s.setMinutes(ee,Nt),"minutes");case"seconds":return!T(s.setSeconds(ee,Nt),"seconds");default:return!1}return!0};switch(B){case"hours":{const Nt=Vf(Pe,se,l),hn=s.setHours(ee,Nt);if(s.getHours(hn)!==Nt)return!0;const Un=s.setSeconds(s.setMinutes(hn,0),0),ft=s.setSeconds(s.setMinutes(hn,59),59);return!Cn({start:Un,end:ft})||!tn(Nt)}case"minutes":{const Nt=s.setMinutes(ee,Pe),hn=s.setSeconds(Nt,0),Un=s.setSeconds(Nt,59);return!Cn({start:hn,end:Un})||!tn(Pe,I)}case"seconds":{const Nt=s.setSeconds(ee,Pe);return!Cn({start:Nt,end:Nt})||!tn(Pe)}default:throw new Error("not supported")}},[l,ee,y,S,se,j,I,T,s,P,w,be,Ae]),ke=x.useCallback(Pe=>{switch(Pe){case"hours":return{onChange:B=>{const Me=Vf(B,se,l);ye(s.setHours(ee,Me),"finish","hours")},items:y7({now:be,value:oe,ampm:l,utils:s,isDisabled:B=>pe(B,"hours"),timeStep:ae.hours,resolveAriaLabel:Ee.hoursClockNumberText,valueOrReferenceDate:ee})};case"minutes":return{onChange:B=>{ye(s.setMinutes(ee,B),"finish","minutes")},items:xv({value:s.getMinutes(ee),utils:s,isDisabled:B=>pe(B,"minutes"),resolveLabel:B=>s.format(s.setMinutes(be,B),"minutes"),timeStep:ae.minutes,hasValue:!!oe,resolveAriaLabel:Ee.minutesClockNumberText})};case"seconds":return{onChange:B=>{ye(s.setSeconds(ee,B),"finish","seconds")},items:xv({value:s.getSeconds(ee),utils:s,isDisabled:B=>pe(B,"seconds"),resolveLabel:B=>s.format(s.setSeconds(be,B),"seconds"),timeStep:ae.seconds,hasValue:!!oe,resolveAriaLabel:Ee.secondsClockNumberText})};case"meridiem":{const B=Zi(s,"am"),Me=Zi(s,"pm");return{onChange:ge,items:[{value:"am",label:B,isSelected:()=>!!oe&&se==="am",isFocused:()=>!!ee&&se==="am",ariaLabel:B},{value:"pm",label:Me,isSelected:()=>!!oe&&se==="pm",isFocused:()=>!!ee&&se==="pm",ariaLabel:Me}]}}default:throw new Error(`Unknown view: ${Pe} found.`)}},[be,oe,l,s,ae.hours,ae.minutes,ae.seconds,Ee.hoursClockNumberText,Ee.minutesClockNumberText,Ee.secondsClockNumberText,se,ye,ee,pe,ge]),ne=x.useMemo(()=>{if(!o)return Ae;const Pe=Ae.filter(B=>B!=="meridiem");return Pe.reverse(),Ae.includes("meridiem")&&Pe.push("meridiem"),Pe},[o,Ae]),_e=x.useMemo(()=>Ae.reduce((Pe,B)=>U({},Pe,{[B]:ke(B)}),{}),[Ae,ke]),{ownerState:de}=_n(),Se=j7(G);return t.jsx(S7,U({ref:r,className:rn(Se.root,$),ownerState:de,role:"group"},Y,{children:ne.map(Pe=>t.jsx(b7,{items:_e[Pe].items,onChange:_e[Pe].onChange,active:We===Pe,autoFocus:u||ie===Pe,disabled:K,readOnly:J,slots:h,slotProps:f,skipDisabled:q,"aria-label":Ee.selectViewText(Pe)},Pe))}))});function C7(e){return un("MuiPickersDay",e)}const ea=pn("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]);function L1(e){const{disabled:n,selected:r,today:s,outsideCurrentMonth:o,day:i,disableMargin:l,disableHighlightToday:d,showDaysOutsideCurrentMonth:u}=e,h=Ut(),{ownerState:f}=_n();return x.useMemo(()=>U({},f,{day:i,isDaySelected:r??!1,isDayDisabled:n??!1,isDayCurrent:s??!1,isDayOutsideMonth:o??!1,isDayStartOfWeek:h.isSameDay(i,h.startOfWeek(i)),isDayEndOfWeek:h.isSameDay(i,h.endOfWeek(i)),disableMargin:l??!1,disableHighlightToday:d??!1,showDaysOutsideCurrentMonth:u??!1}),[h,f,i,r,n,s,o,l,d,u])}const P7=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],E7=(e,n)=>{const{isDaySelected:r,isDayDisabled:s,isDayCurrent:o,isDayOutsideMonth:i,disableMargin:l,disableHighlightToday:d,showDaysOutsideCurrentMonth:u}=n,h=i&&!u;return en({root:["root",r&&!h&&"selected",s&&"disabled",!l&&"dayWithMargin",!d&&o&&"today",i&&u&&"dayOutsideMonth",h&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},C7,e)},$1=({theme:e})=>U({},e.typography.caption,{width:gl,height:gl,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:e.transitions.create("background-color",{duration:e.transitions.duration.short}),color:(e.vars||e).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.primary.main,e.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:he(e.palette.primary.main,e.palette.action.focusOpacity),[`&.${ea.selected}`]:{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${ea.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(e.vars||e).palette.primary.dark}},[`&.${ea.disabled}:not(.${ea.selected})`]:{color:(e.vars||e).palette.text.disabled},[`&.${ea.disabled}&.${ea.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${hu}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(e.vars||e).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${ea.selected})`]:{border:`1px solid ${(e.vars||e).palette.text.secondary}`}}}]}),F1=(e,n)=>{const{ownerState:r}=e;return[n.root,!r.disableMargin&&n.dayWithMargin,!r.disableHighlightToday&&r.isDayCurrent&&n.today,!r.isDayOutsideMonth&&r.showDaysOutsideCurrentMonth&&n.dayOutsideMonth,r.isDayOutsideMonth&&!r.showDaysOutsideCurrentMonth&&n.hiddenDaySpacingFiller]},I7=Ne(HR,{name:"MuiPickersDay",slot:"Root",overridesResolver:F1})($1),T7=Ne("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:F1})(({theme:e})=>U({},$1({theme:e}),{opacity:0,pointerEvents:"none"})),zi=()=>{},D7=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersDay"}),{autoFocus:o=!1,className:i,classes:l,isAnimating:d,onClick:u,onDaySelect:h,onFocus:f=zi,onBlur:p=zi,onKeyDown:g=zi,onMouseDown:b=zi,onMouseEnter:y=zi,children:S,day:j,selected:P,disabled:w,today:I,outsideCurrentMonth:T,disableMargin:D,disableHighlightToday:R,showDaysOutsideCurrentMonth:_}=s,k=it(s,P7),N=L1({day:j,selected:P,disabled:w,today:I,outsideCurrentMonth:T,disableMargin:D,disableHighlightToday:R,showDaysOutsideCurrentMonth:_}),L=E7(l,N),z=Ut(),$=x.useRef(null),G=cr($,r);ls(()=>{o&&!w&&!d&&!T&&$.current.focus()},[o,w,d,T]);const K=q=>{b(q),T&&q.preventDefault()},J=q=>{w||h(j),T&&q.currentTarget.focus(),u&&u(q)};return T&&!_?t.jsx(T7,{className:rn(L.root,L.hiddenDaySpacingFiller,i),ownerState:N,role:k.role}):t.jsx(I7,U({className:rn(L.root,i),ref:G,centerRipple:!0,disabled:w,tabIndex:P?0:-1,onKeyDown:q=>g(q,j),onFocus:q=>f(q,j),onBlur:q=>p(q,j),onMouseEnter:q=>y(q,j),onClick:J,onMouseDown:K},k,{ownerState:N,children:S||z.format(j,"dayOfMonth")}))}),A7=x.memo(D7),Yf=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],qf=["disablePast","disableFuture","minTime","maxTime","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],W1=["minDateTime","maxDateTime"],R7=[...Yf,...qf,...W1],B1=e=>R7.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{}),k7=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef","unstableStartFieldRef","unstableEndFieldRef","enableAccessibleFieldDOMStructure","disabled","readOnly","dateSeparator","autoFocus","focused"],V1=(e,n)=>x.useMemo(()=>{const r=U({},e),s={},o=i=>{r.hasOwnProperty(i)&&(s[i]=r[i],delete r[i])};return k7.forEach(o),n==="date"?Yf.forEach(o):n==="time"?qf.forEach(o):n==="date-time"&&(Yf.forEach(o),qf.forEach(o),W1.forEach(o)),{forwardedProps:r,internalProps:s}},[e,n]),_7=({utils:e,format:n})=>{let r=10,s=n,o=e.expandFormat(n);for(;o!==s;)if(s=o,o=e.expandFormat(s),r-=1,r<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the component.");return o},O7=({utils:e,expandedFormat:n})=>{const r=[],{start:s,end:o}=e.escapedCharacters,i=new RegExp(`(\\${s}[^\\${o}]*\\${o})+`,"g");let l=null;for(;l=i.exec(n);)r.push({start:l.index,end:i.lastIndex-1});return r},M7=(e,n,r,s)=>{switch(r.type){case"year":return n.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),s).length,format:s});case"month":return n.fieldMonthPlaceholder({contentType:r.contentType,format:s});case"day":return n.fieldDayPlaceholder({format:s});case"weekDay":return n.fieldWeekDayPlaceholder({contentType:r.contentType,format:s});case"hours":return n.fieldHoursPlaceholder({format:s});case"minutes":return n.fieldMinutesPlaceholder({format:s});case"seconds":return n.fieldSecondsPlaceholder({format:s});case"meridiem":return n.fieldMeridiemPlaceholder({format:s});default:return s}},N7=({utils:e,date:n,shouldRespectLeadingZeros:r,localeText:s,localizedDigits:o,now:i,token:l,startSeparator:d})=>{if(l==="")throw new Error("MUI X: Should not call `commitToken` with an empty token");const u=k1(e,l),h=M1(e,u.contentType,u.type,l),f=r?h:u.contentType==="digit",p=e.isValid(n);let g=p?e.formatByString(n,l):"",b=null;if(f)if(h)b=g===""?e.formatByString(i,l).length:g.length;else{if(u.maxLength==null)throw new Error(`MUI X: The token ${l} should have a 'maxLength' property on it's adapter`);b=u.maxLength,p&&(g=Ax(Rx(fa(g,o),b),o))}return U({},u,{format:l,maxLength:b,value:g,placeholder:M7(e,s,u,l),hasLeadingZerosInFormat:h,hasLeadingZerosInInput:f,startSeparator:d,endSeparator:"",modified:!1})},L7=e=>{var b;const{utils:n,expandedFormat:r,escapedParts:s}=e,o=n.date(void 0),i=[];let l="";const d=Object.keys(n.formatTokenMap).sort((y,S)=>S.length-y.length),u=/^([a-zA-Z]+)/,h=new RegExp(`^(${d.join("|")})*$`),f=new RegExp(`^(${d.join("|")})`),p=y=>s.find(S=>S.start<=y&&S.end>=y);let g=0;for(;g<r.length;){const y=p(g),S=y!=null,j=(b=u.exec(r.slice(g)))==null?void 0:b[1];if(!S&&j!=null&&h.test(j)){let P=j;for(;P.length>0;){const w=f.exec(P)[1];P=P.slice(w.length),i.push(N7(U({},e,{now:o,token:w,startSeparator:l}))),l=""}g+=j.length}else{const P=r[g];S&&(y==null?void 0:y.start)===g||(y==null?void 0:y.end)===g||(i.length===0?l+=P:(i[i.length-1].endSeparator+=P,i[i.length-1].isEndFormatSeparator=!0)),g+=1}}return i.length===0&&l.length>0&&i.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:l,endSeparator:"",modified:!1}),i},$7=({isRtl:e,formatDensity:n,sections:r})=>r.map(s=>{const o=i=>{let l=i;return e&&l!==null&&l.includes(" ")&&(l=`${l}`),n==="spacious"&&["/",".","-"].includes(l)&&(l=` ${l} `),l};return s.startSeparator=o(s.startSeparator),s.endSeparator=o(s.endSeparator),s}),gv=e=>{let n=_7(e);e.isRtl&&e.enableAccessibleFieldDOMStructure&&(n=n.split(" ").reverse().join(" "));const r=O7(U({},e,{expandedFormat:n})),s=L7(U({},e,{expandedFormat:n,escapedParts:r}));return $7(U({},e,{sections:s}))},_x=()=>x.useContext(Ex),F7=()=>{const e=x.useContext(C1);if(e==null)throw new Error(["MUI X: The `usePickerActionsContext` can only be called in fields that are used as a slot of a Picker component"].join(`
`));return e},La=e=>e.saveQuery!=null,U1=({stateResponse:{localizedDigits:e,sectionsValueBoundaries:n,state:r,timezone:s,setCharacterQuery:o,setTempAndroidValueStr:i,updateSectionValue:l}})=>{const d=Ut(),u=({keyPressed:p,sectionIndex:g},b,y)=>{const S=p.toLowerCase(),j=r.sections[g];if(r.characterQuery!=null&&(!y||y(r.characterQuery.value))&&r.characterQuery.sectionIndex===g){const w=`${r.characterQuery.value}${S}`,I=b(w,j);if(!La(I))return o({sectionIndex:g,value:w,sectionType:j.type}),I}const P=b(S,j);return La(P)&&!P.saveQuery?(o(null),null):(o({sectionIndex:g,value:S,sectionType:j.type}),La(P)?null:P)},h=p=>{const g=(S,j,P)=>{const w=j.filter(I=>I.toLowerCase().startsWith(P));return w.length===0?{saveQuery:!1}:{sectionValue:w[0],shouldGoToNextSection:w.length===1}},b=(S,j,P,w)=>{const I=T=>_1(d,s,j.type,T);if(j.contentType==="letter")return g(j.format,I(j.format),S);if(P&&w!=null&&k1(d,P).contentType==="letter"){const T=I(P),D=g(P,T,S);return La(D)?{saveQuery:!1}:U({},D,{sectionValue:w(D.sectionValue,T)})}return{saveQuery:!1}};return u(p,(S,j)=>{switch(j.type){case"month":{const P=w=>fv(d,w,d.formats.month,j.format);return b(S,j,d.formats.month,P)}case"weekDay":{const P=(w,I)=>I.indexOf(w).toString();return b(S,j,d.formats.weekday,P)}case"meridiem":return b(S,j);default:return{saveQuery:!1}}})},f=p=>{const g=(y,S)=>{const j=fa(y,e),P=Number(j),w=n[S.type]({currentDate:null,format:S.format,contentType:S.contentType});if(P>w.maximum)return{saveQuery:!1};if(P<w.minimum)return{saveQuery:!0};const I=P*10>w.maximum||j.length===w.maximum.toString().length;return{sectionValue:O1(d,P,w,e,S),shouldGoToNextSection:I}};return u(p,(y,S)=>{if(S.contentType==="digit"||S.contentType==="digit-with-letter")return g(y,S);if(S.type==="month"){const j=M1(d,"digit","month","MM"),P=g(y,{type:S.type,format:"MM",hasLeadingZerosInFormat:j,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(La(P))return P;const w=fv(d,P.sectionValue,"MM",S.format);return U({},P,{sectionValue:w})}if(S.type==="weekDay"){const j=g(y,S);if(La(j))return j;const P=fu(d,S.format)[Number(j.sectionValue)-1];return U({},j,{sectionValue:P})}return{saveQuery:!1}},y=>hv(y,e))};return Ue(p=>{const g=r.sections[p.sectionIndex],y=hv(p.keyPressed,e)?f(U({},p,{keyPressed:Ax(p.keyPressed,e)})):h(p);if(y==null){i(null);return}l({section:g,newSectionValue:y.sectionValue,shouldGoToNextSection:y.shouldGoToNextSection})})},Ox=({props:e,value:n,timezone:r,adapter:s})=>{if(n===null)return null;const{shouldDisableDate:o,shouldDisableMonth:i,shouldDisableYear:l,disablePast:d,disableFuture:u,minDate:h,maxDate:f}=e,p=s.utils.date(void 0,r);switch(!0){case!s.utils.isValid(n):return"invalidDate";case!!(o&&o(n)):return"shouldDisableDate";case!!(i&&i(n)):return"shouldDisableMonth";case!!(l&&l(n)):return"shouldDisableYear";case!!(u&&s.utils.isAfterDay(n,p)):return"disableFuture";case!!(d&&s.utils.isBeforeDay(n,p)):return"disablePast";case!!(h&&s.utils.isBeforeDay(n,h)):return"minDate";case!!(f&&s.utils.isAfterDay(n,f)):return"maxDate";default:return null}};Ox.valueManager=yr;const z1=({adapter:e,value:n,timezone:r,props:s})=>{if(n===null)return null;const{minTime:o,maxTime:i,minutesStep:l,shouldDisableTime:d,disableIgnoringDatePartForTimeValidation:u=!1,disablePast:h,disableFuture:f}=s,p=e.utils.date(void 0,r),g=du(u,e.utils);switch(!0){case!e.utils.isValid(n):return"invalidDate";case!!(o&&g(o,n)):return"minTime";case!!(i&&g(n,i)):return"maxTime";case!!(f&&e.utils.isAfter(n,p)):return"disableFuture";case!!(h&&e.utils.isBefore(n,p)):return"disablePast";case!!(d&&d(n,"hours")):return"shouldDisableTime-hours";case!!(d&&d(n,"minutes")):return"shouldDisableTime-minutes";case!!(d&&d(n,"seconds")):return"shouldDisableTime-seconds";case!!(l&&e.utils.getMinutes(n)%l!==0):return"minutesStep";default:return null}};z1.valueManager=yr;const pu=({adapter:e,value:n,timezone:r,props:s})=>{const o=Ox({adapter:e,value:n,timezone:r,props:s});return o!==null?o:z1({adapter:e,value:n,timezone:r,props:s})};pu.valueManager=yr;function H1(e){const{props:n,validator:r,value:s,timezone:o,onError:i}=e,l=ba(),d=x.useRef(r.valueManager.defaultErrorState),u=r({adapter:l,value:s,timezone:o,props:n}),h=r.valueManager.hasError(u);x.useEffect(()=>{i&&!r.valueManager.isSameError(u,d.current)&&i(u,s),d.current=u},[r,i,u,s]);const f=Ue(p=>r({adapter:l,value:p,timezone:o,props:n}));return{validationError:u,hasValidationError:h,getValidationErrorForNewValue:f}}const W7=5e3,G1=e=>{var _e;const n=Ut(),r=Is(),s=ba(),o=Vs(),{manager:{validator:i,valueType:l,internal_valueManager:d,internal_fieldValueManager:u},internalPropsWithDefaults:h,internalPropsWithDefaults:{value:f,defaultValue:p,referenceDate:g,onChange:b,format:y,formatDensity:S="dense",selectedSections:j,onSelectedSectionsChange:P,shouldRespectLeadingZeros:w=!1,timezone:I,enableAccessibleFieldDOMStructure:T=!0},forwardedProps:{error:D}}=e,{value:R,handleValueChange:_,timezone:k}=ya({name:"a field component",timezone:I,value:f,defaultValue:p,referenceDate:g,onChange:b,valueManager:d}),N=x.useRef(R);x.useEffect(()=>{N.current=R},[R]);const{hasValidationError:L}=H1({props:h,validator:i,timezone:k,value:R,onError:h.onError}),z=x.useMemo(()=>D!==void 0?D:L,[L,D]),$=x.useMemo(()=>z9(n),[n]),G=x.useMemo(()=>K9(n,$,k),[n,$,k]),K=x.useCallback(de=>u.getSectionsFromValue(de,Se=>gv({utils:n,localeText:r,localizedDigits:$,format:y,date:Se,formatDensity:S,shouldRespectLeadingZeros:w,enableAccessibleFieldDOMStructure:T,isRtl:o})),[u,y,r,$,o,w,n,S,T]),[J,q]=x.useState(()=>{const de=K(R),Se={sections:de,lastExternalValue:R,lastSectionsDependencies:{format:y,isRtl:o,locale:n.locale},tempValueStrAndroid:null,characterQuery:null},Pe=B9(de),B=d.getInitialReferenceValue({referenceDate:g,value:R,utils:n,props:h,granularity:Pe,timezone:k});return U({},Se,{referenceValue:B})}),[Q,Y]=ai({controlled:j,default:null,name:"useField",state:"selectedSections"}),oe=de=>{Y(de),P==null||P(de)},V=x.useMemo(()=>Uf(Q,J.sections),[Q,J.sections]),Z=V==="all"?0:V,Ee=x.useMemo(()=>Q9(J.sections,o&&!T),[J.sections,o,T]),be=x.useMemo(()=>J.sections.every(de=>de.value===""),[J.sections]),ae=de=>{const Se={validationError:i({adapter:s,value:de,timezone:k,props:h})};_(de,Se)},ee=(de,Se)=>{const Pe=[...J.sections];return Pe[de]=U({},Pe[de],{value:Se,modified:!0}),Pe},Ce=x.useRef(null),Ae=za(),We=de=>{Z!=null&&(Ce.current={sectionIndex:Z,value:de},Ae.start(0,()=>{Ce.current=null}))},ye=()=>{d.areValuesEqual(n,R,d.emptyValue)?q(de=>U({},de,{sections:de.sections.map(Se=>U({},Se,{value:""})),tempValueStrAndroid:null,characterQuery:null})):(q(de=>U({},de,{characterQuery:null})),ae(d.emptyValue))},ie=()=>{if(Z==null)return;const de=J.sections[Z];de.value!==""&&(We(""),u.getDateFromSection(R,de)===null?q(Se=>U({},Se,{sections:ee(Z,""),tempValueStrAndroid:null,characterQuery:null})):(q(Se=>U({},Se,{characterQuery:null})),ae(u.updateDateInValue(R,de,null))))},le=de=>{const Se=(B,Me)=>{const qe=n.parse(B,y);if(!n.isValid(qe))return null;const Cn=gv({utils:n,localeText:r,localizedDigits:$,format:y,date:qe,formatDensity:S,shouldRespectLeadingZeros:w,enableAccessibleFieldDOMStructure:T,isRtl:o});return mv(n,qe,Cn,Me,!1)},Pe=u.parseValueStr(de,J.referenceValue,Se);ae(Pe)},se=za(),ge=({section:de,newSectionValue:Se,shouldGoToNextSection:Pe})=>{Ae.clear(),se.clear();const B=u.getDateFromSection(R,de);Pe&&Z<J.sections.length-1&&oe(Z+1);const Me=ee(Z,Se),qe=u.getDateSectionsFromValue(Me,de),Cn=G9(n,qe,$);if(n.isValid(Cn)){const tn=mv(n,Cn,qe,u.getDateFromSection(J.referenceValue,de),!0);return B==null&&se.start(0,()=>{N.current===R&&q(Nt=>U({},Nt,{sections:u.clearDateSections(J.sections,de),tempValueStrAndroid:null}))}),ae(u.updateDateInValue(R,de,tn))}return qe.every(tn=>tn.value!=="")?(We(Se),ae(u.updateDateInValue(R,de,Cn))):B!=null?(We(Se),ae(u.updateDateInValue(R,de,null))):q(tn=>U({},tn,{sections:Me,tempValueStrAndroid:null}))},pe=de=>q(Se=>U({},Se,{tempValueStrAndroid:de})),ke=Ue(de=>{q(Se=>U({},Se,{characterQuery:de}))});if(R!==J.lastExternalValue){let de;Ce.current!=null&&!n.isValid(u.getDateFromSection(R,J.sections[Ce.current.sectionIndex]))?de=ee(Ce.current.sectionIndex,Ce.current.value):de=K(R),q(Se=>U({},Se,{lastExternalValue:R,sections:de,sectionsDependencies:{format:y,isRtl:o,locale:n.locale},referenceValue:u.updateReferenceValue(n,R,Se.referenceValue),tempValueStrAndroid:null}))}if(o!==J.lastSectionsDependencies.isRtl||y!==J.lastSectionsDependencies.format||n.locale!==J.lastSectionsDependencies.locale){const de=K(R);q(Se=>U({},Se,{lastSectionsDependencies:{format:y,isRtl:o,locale:n.locale},sections:de,tempValueStrAndroid:null,characterQuery:null}))}J.characterQuery!=null&&!z&&Z==null&&ke(null),J.characterQuery!=null&&((_e=J.sections[J.characterQuery.sectionIndex])==null?void 0:_e.type)!==J.characterQuery.sectionType&&ke(null),x.useEffect(()=>{Ce.current!=null&&(Ce.current=null)});const ne=za();return x.useEffect(()=>(J.characterQuery!=null&&ne.start(W7,()=>ke(null)),()=>{}),[J.characterQuery,ke,ne]),x.useEffect(()=>{J.tempValueStrAndroid!=null&&Z!=null&&ie()},[J.sections]),{activeSectionIndex:Z,areAllSectionsEmpty:be,error:z,localizedDigits:$,parsedSelectedSections:V,sectionOrder:Ee,sectionsValueBoundaries:G,state:J,timezone:k,value:R,clearValue:ye,clearActiveSection:ie,setCharacterQuery:ke,setSelectedSections:oe,setTempAndroidValueStr:pe,updateSectionValue:ge,updateValueFromValueStr:le,getSectionsFromValue:K}};function Y1(e){const{manager:{internal_useApplyDefaultValuesToFieldInternalProps:n},internalProps:r,skipContextFieldRefAssignment:s}=e,o=_x(),i=w1(),l=cr(r.unstableFieldRef,s?null:i==null?void 0:i.fieldRef),d=o==null?void 0:o.setValue,u=x.useCallback((f,p)=>d==null?void 0:d(f,{validationError:p.validationError,shouldClose:!1}),[d]),h=x.useMemo(()=>i!=null&&o!=null?U({value:o.value,onChange:u,timezone:o.timezone,disabled:o.disabled,readOnly:o.readOnly,autoFocus:o.autoFocus&&!o.open,focused:o.open?!0:void 0,format:o.fieldFormat,formatDensity:i.formatDensity,enableAccessibleFieldDOMStructure:i.enableAccessibleFieldDOMStructure,selectedSections:i.selectedSections,onSelectedSectionsChange:i.onSelectedSectionsChange,unstableFieldRef:l},r):r,[o,i,r,u,l]);return n(h)}function Mx(e){const{focused:n,domGetters:r,stateResponse:{parsedSelectedSections:s,state:o}}=e;if(!r.isReady())return;const i=document.getSelection();if(!i)return;if(s==null){i.rangeCount>0&&r.getRoot().contains(i.getRangeAt(0).startContainer)&&i.removeAllRanges(),n&&r.getRoot().blur();return}if(!r.getRoot().contains(Zn(document)))return;const l=new window.Range;let d;s==="all"?d=r.getRoot():o.sections[s].type==="empty"?d=r.getSectionContainer(s):d=r.getSectionContent(s),l.selectNodeContents(d),d.focus(),i.removeAllRanges(),i.addRange(l)}function q1(e){const n=Ut(),{manager:{internal_fieldValueManager:r},internalPropsWithDefaults:{minutesStep:s,disabled:o,readOnly:i},stateResponse:{state:l,value:d,activeSectionIndex:u,parsedSelectedSections:h,sectionsValueBoundaries:f,localizedDigits:p,timezone:g,sectionOrder:b,clearValue:y,clearActiveSection:S,setSelectedSections:j,updateSectionValue:P}}=e;return Ue(w=>{if(!o)switch(!0){case((w.ctrlKey||w.metaKey)&&String.fromCharCode(w.keyCode)==="A"&&!w.shiftKey&&!w.altKey):{w.preventDefault(),j("all");break}case w.key==="ArrowRight":{if(w.preventDefault(),h==null)j(b.startIndex);else if(h==="all")j(b.endIndex);else{const I=b.neighbors[h].rightIndex;I!==null&&j(I)}break}case w.key==="ArrowLeft":{if(w.preventDefault(),h==null)j(b.endIndex);else if(h==="all")j(b.startIndex);else{const I=b.neighbors[h].leftIndex;I!==null&&j(I)}break}case w.key==="Delete":{if(w.preventDefault(),i)break;h==null||h==="all"?y():S();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(w.key):{if(w.preventDefault(),i||u==null)break;h==="all"&&j(u);const I=l.sections[u],T=V7(n,g,I,w.key,f,p,r.getDateFromSection(d,I),{minutesStep:s});P({section:I,newSectionValue:T,shouldGoToNextSection:!1});break}}})}function B7(e){switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}}function V7(e,n,r,s,o,i,l,d){const u=B7(s),h=s==="Home",f=s==="End",p=r.value===""||h||f,g=()=>{const y=o[r.type]({currentDate:l,format:r.format,contentType:r.contentType}),S=w=>O1(e,w,y,i,r),j=r.type==="minutes"&&(d!=null&&d.minutesStep)?d.minutesStep:1;let P;if(p){if(r.type==="year"&&!f&&!h)return e.formatByString(e.date(void 0,n),r.format);u>0||h?P=y.minimum:P=y.maximum}else P=parseInt(fa(r.value,i),10)+u*j;return P%j!==0&&((u<0||h)&&(P+=j-(j+P)%j),(u>0||f)&&(P-=P%j)),P>y.maximum?S(y.minimum+(P-y.maximum-1)%(y.maximum-y.minimum+1)):P<y.minimum?S(y.maximum-(y.minimum-P-1)%(y.maximum-y.minimum+1)):S(P)},b=()=>{const y=_1(e,n,r.type,r.format);if(y.length===0)return r.value;if(p)return u>0||h?y[0]:y[y.length-1];const P=((y.indexOf(r.value)+u)%y.length+y.length)%y.length;return y[P]};return r.contentType==="digit"||r.contentType==="digit-with-letter"?g():b()}function U7(e){const{manager:n,focused:r,setFocused:s,domGetters:o,stateResponse:i,applyCharacterEditing:l,internalPropsWithDefaults:d,stateResponse:{parsedSelectedSections:u,sectionOrder:h,state:f,clearValue:p,setCharacterQuery:g,setSelectedSections:b,updateValueFromValueStr:y},internalPropsWithDefaults:{disabled:S=!1,readOnly:j=!1}}=e,P=q1({manager:n,internalPropsWithDefaults:d,stateResponse:i}),w=za(),I=Ue(k=>{S||!o.isReady()||(s(!0),u==="all"?w.start(0,()=>{const N=document.getSelection().getRangeAt(0).startOffset;if(N===0){b(h.startIndex);return}let L=0,z=0;for(;z<N&&L<f.sections.length;){const $=f.sections[L];L+=1,z+=`${$.startSeparator}${$.value||$.placeholder}${$.endSeparator}`.length}b(L-1)}):r?o.getRoot().contains(k.target)||b(h.startIndex):(s(!0),b(h.startIndex)))}),T=Ue(k=>{if(!o.isReady()||u!=="all")return;const L=k.target.textContent??"";o.getRoot().innerHTML=f.sections.map(z=>`${z.startSeparator}${z.value||z.placeholder}${z.endSeparator}`).join(""),Mx({focused:r,domGetters:o,stateResponse:i}),L.length===0||L.charCodeAt(0)===10?(p(),b("all")):L.length>1?y(L):(u==="all"&&b(0),l({keyPressed:L,sectionIndex:0}))}),D=Ue(k=>{if(j||u!=="all"){k.preventDefault();return}const N=k.clipboardData.getData("text");k.preventDefault(),g(null),y(N)}),R=Ue(()=>{if(r||S||!o.isReady())return;const k=Zn(document);s(!0),o.getSectionIndexFromDOMElement(k)!=null||b(h.startIndex)}),_=Ue(()=>{setTimeout(()=>{if(!o.isReady())return;const k=Zn(document);!o.getRoot().contains(k)&&(s(!1),b(null))})});return{onKeyDown:P,onBlur:_,onFocus:R,onClick:I,onPaste:D,onInput:T,contentEditable:u==="all",tabIndex:u===0?-1:0}}function z7(e){const{manager:{internal_fieldValueManager:n},stateResponse:{areAllSectionsEmpty:r,state:s,updateValueFromValueStr:o}}=e,i=Ue(d=>{o(d.target.value)});return{value:x.useMemo(()=>r?"":n.getV7HiddenInputValueFromSections(s.sections),[r,s.sections,n]),onChange:i}}function H7(e){const{stateResponse:{setSelectedSections:n},internalPropsWithDefaults:{disabled:r=!1}}=e,s=Ue(o=>i=>{r||i.isDefaultPrevented()||n(o)});return x.useCallback(o=>({"data-sectionindex":o,onClick:s(o)}),[s])}function G7(e){const n=Ut(),r=Is(),s=cu(),{focused:o,domGetters:i,stateResponse:l,applyCharacterEditing:d,manager:{internal_fieldValueManager:u},stateResponse:{parsedSelectedSections:h,sectionsValueBoundaries:f,state:p,value:g,clearActiveSection:b,setCharacterQuery:y,setSelectedSections:S,updateSectionValue:j,updateValueFromValueStr:P},internalPropsWithDefaults:{disabled:w=!1,readOnly:I=!1}}=e,T=h==="all",D=!T&&!w&&!I,R=Ue($=>{if(!i.isReady())return;const G=p.sections[$];i.getSectionContent($).innerHTML=G.value||G.placeholder,Mx({focused:o,domGetters:i,stateResponse:l})}),_=Ue($=>{if(!i.isReady())return;const G=$.target,K=G.textContent??"",J=i.getSectionIndexFromDOMElement(G),q=p.sections[J];if(I){R(J);return}if(K.length===0){if(q.value===""){R(J);return}const Q=$.nativeEvent.inputType;if(Q==="insertParagraph"||Q==="insertLineBreak"){R(J);return}R(J),b();return}d({keyPressed:K,sectionIndex:J}),R(J)}),k=Ue($=>{$.preventDefault()}),N=Ue($=>{if($.preventDefault(),I||w||typeof h!="number")return;const G=p.sections[h],K=$.clipboardData.getData("text"),J=/^[a-zA-Z]+$/.test(K),q=/^[0-9]+$/.test(K),Q=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(K);G.contentType==="letter"&&J||G.contentType==="digit"&&q||G.contentType==="digit-with-letter"&&Q?(y(null),j({section:G,newSectionValue:K,shouldGoToNextSection:!0})):!J&&!q&&(y(null),P(K))}),L=Ue($=>{$.preventDefault(),$.dataTransfer.dropEffect="none"}),z=Ue($=>()=>{w||S($)});return x.useCallback(($,G)=>{const K=f[$.type]({currentDate:u.getDateFromSection(g,$),contentType:$.contentType,format:$.format});return{onInput:_,onPaste:N,onMouseUp:k,onDragOver:L,onFocus:z(G),"aria-labelledby":`${s}-${$.type}`,"aria-readonly":I,"aria-valuenow":q7($,n),"aria-valuemin":K.minimum,"aria-valuemax":K.maximum,"aria-valuetext":$.value?Y7($,n):r.empty,"aria-label":r[$.type],"aria-disabled":w,tabIndex:T||G>0?-1:0,contentEditable:!T&&!w&&!I,role:"spinbutton",id:`${s}-${$.type}`,"data-range-position":$.dateName||void 0,spellCheck:D?!1:void 0,autoCapitalize:D?"off":void 0,autoCorrect:D?"off":void 0,children:$.value||$.placeholder,inputMode:$.contentType==="letter"?"text":"numeric"}},[f,s,T,w,I,D,r,n,_,N,k,L,z,u,g])}function Y7(e,n){if(e.value)switch(e.type){case"month":{if(e.contentType==="digit")return n.format(n.setMonth(n.date(),Number(e.value)-1),"month");const r=n.parse(e.value,e.format);return r?n.format(r,"month"):void 0}case"day":return e.contentType==="digit"?n.format(n.setDate(n.startOfYear(n.date()),Number(e.value)),"dayOfMonthFull"):e.value;case"weekDay":return;default:return}}function q7(e,n){if(e.value)switch(e.type){case"weekDay":return e.contentType==="letter"?void 0:Number(e.value);case"meridiem":{const r=n.parse(`01:00 ${e.value}`,`${n.formats.hours12h}:${n.formats.minutes} ${e.format}`);return r?n.getHours(r)>=12?1:0:void 0}case"day":return e.contentType==="digit-with-letter"?parseInt(e.value,10):Number(e.value);case"month":{if(e.contentType==="digit")return Number(e.value);const r=n.parse(e.value,e.format);return r?n.getMonth(r)+1:void 0}default:return e.contentType!=="letter"?Number(e.value):void 0}}const K7=e=>{const{props:n,manager:r,skipContextFieldRefAssignment:s,manager:{valueType:o,internal_useOpenPickerButtonAriaLabel:i}}=e,{internalProps:l,forwardedProps:d}=V1(n,o),u=Y1({manager:r,internalProps:l,skipContextFieldRefAssignment:s}),{sectionListRef:h,onBlur:f,onClick:p,onFocus:g,onInput:b,onPaste:y,onKeyDown:S,onClear:j,clearable:P}=d,{disabled:w=!1,readOnly:I=!1,autoFocus:T=!1,focused:D,unstableFieldRef:R}=u,_=x.useRef(null),k=cr(h,_),N=x.useMemo(()=>({isReady:()=>_.current!=null,getRoot:()=>_.current.getRoot(),getSectionContainer:ne=>_.current.getSectionContainer(ne),getSectionContent:ne=>_.current.getSectionContent(ne),getSectionIndexFromDOMElement:ne=>_.current.getSectionIndexFromDOMElement(ne)}),[_]),L=G1({manager:r,internalPropsWithDefaults:u,forwardedProps:d}),{areAllSectionsEmpty:z,error:$,parsedSelectedSections:G,sectionOrder:K,state:J,value:q,clearValue:Q,setSelectedSections:Y}=L,oe=U1({stateResponse:L}),V=i(q),[Z,Ee]=x.useState(!1);function be(ne=0){if(w||!_.current||bv(_)!=null)return;const _e=Uf(ne,J.sections);Ee(!0),_.current.getSectionContent(_e).focus()}const ae=U7({manager:r,internalPropsWithDefaults:u,stateResponse:L,applyCharacterEditing:oe,focused:Z,setFocused:Ee,domGetters:N}),ee=z7({manager:r,stateResponse:L}),Ce=H7({stateResponse:L,internalPropsWithDefaults:u}),Ae=G7({manager:r,stateResponse:L,applyCharacterEditing:oe,internalPropsWithDefaults:u,domGetters:N,focused:Z}),We=Ue(ne=>{S==null||S(ne),ae.onKeyDown(ne)}),ye=Ue(ne=>{f==null||f(ne),ae.onBlur(ne)}),ie=Ue(ne=>{g==null||g(ne),ae.onFocus(ne)}),le=Ue(ne=>{ne.isDefaultPrevented()||(p==null||p(ne),ae.onClick(ne))}),se=Ue(ne=>{y==null||y(ne),ae.onPaste(ne)}),ge=Ue(ne=>{b==null||b(ne),ae.onInput(ne)}),pe=Ue((ne,..._e)=>{ne.preventDefault(),j==null||j(ne,..._e),Q(),yv(_)?Y(K.startIndex):be(0)}),ke=x.useMemo(()=>J.sections.map((ne,_e)=>{const de=Ae(ne,_e);return{container:Ce(_e),content:Ae(ne,_e),before:{children:ne.startSeparator},after:{children:ne.endSeparator,"data-range-position":ne.isEndFormatSeparator?de["data-range-position"]:void 0}}}),[J.sections,Ce,Ae]);return x.useEffect(()=>{if(_.current==null)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please add the `enableAccessibleFieldDOMStructure={false}` prop to your Picker or Field component:","","<DatePicker enableAccessibleFieldDOMStructure={false} slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join(`
`));T&&!w&&_.current&&_.current.getSectionContent(K.startIndex).focus()},[]),ls(()=>{if(!(!Z||!_.current)){if(G==="all")_.current.getRoot().focus();else if(typeof G=="number"){const ne=_.current.getSectionContent(G);ne&&ne.focus()}}},[G,Z]),ls(()=>{Mx({focused:Z,domGetters:N,stateResponse:L})}),x.useImperativeHandle(R,()=>({getSections:()=>J.sections,getActiveSectionIndex:()=>bv(_),setSelectedSections:ne=>{if(w||!_.current)return;const _e=Uf(ne,J.sections);Ee((_e==="all"?0:_e)!==null),Y(ne)},focusField:be,isFieldFocused:()=>yv(_)})),U({},d,ae,{onBlur:ye,onClick:le,onFocus:ie,onInput:ge,onPaste:se,onKeyDown:We,onClear:pe},ee,{error:$,clearable:!!(P&&!z&&!I&&!w),focused:D??Z,sectionListRef:k,enableAccessibleFieldDOMStructure:!0,elements:ke,areAllSectionsEmpty:z,disabled:w,readOnly:I,autoFocus:T,openPickerAriaLabel:V})};function bv(e){const n=Zn(document);return!n||!e.current||!e.current.getRoot().contains(n)?null:e.current.getSectionIndexFromDOMElement(n)}function yv(e){const n=Zn(document);return!!e.current&&e.current.getRoot().contains(n)}const Wa=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),J7=(e,n,r)=>{let s=0,o=r?1:0;const i=[];for(let l=0;l<e.length;l+=1){const d=e[l],u=kx(d,r?"input-rtl":"input-ltr",n),h=`${d.startSeparator}${u}${d.endSeparator}`,f=Wa(h).length,p=h.length,g=Wa(u),b=o+(g===""?0:u.indexOf(g[0]))+d.startSeparator.length,y=b+g.length;i.push(U({},d,{start:s,end:s+f,startInInput:b,endInInput:y})),s+=f,o+=p}return i},X7=e=>{const n=Vs(),r=za(),s=za(),{props:o,manager:i,skipContextFieldRefAssignment:l,manager:{valueType:d,internal_valueManager:u,internal_fieldValueManager:h,internal_useOpenPickerButtonAriaLabel:f}}=e,{internalProps:p,forwardedProps:g}=V1(o,d),b=Y1({manager:i,internalProps:p,skipContextFieldRefAssignment:l}),{onFocus:y,onClick:S,onPaste:j,onBlur:P,onKeyDown:w,onClear:I,clearable:T,inputRef:D,placeholder:R}=g,{readOnly:_=!1,disabled:k=!1,autoFocus:N=!1,focused:L,unstableFieldRef:z}=b,$=x.useRef(null),G=cr(D,$),K=G1({manager:i,internalPropsWithDefaults:b,forwardedProps:g}),{activeSectionIndex:J,areAllSectionsEmpty:q,error:Q,localizedDigits:Y,parsedSelectedSections:oe,sectionOrder:V,state:Z,value:Ee,clearValue:be,clearActiveSection:ae,setCharacterQuery:ee,setSelectedSections:Ce,setTempAndroidValueStr:Ae,updateSectionValue:We,updateValueFromValueStr:ye,getSectionsFromValue:ie}=K,le=U1({stateResponse:K}),se=f(Ee),ge=x.useMemo(()=>J7(Z.sections,Y,n),[Z.sections,Y,n]);function pe(){const ft=$.current.selectionStart??0;let vt;ft<=ge[0].startInInput||ft>=ge[ge.length-1].endInInput?vt=1:vt=ge.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>ft);const kt=vt===-1?ge.length-1:vt-1;Ce(kt)}function ke(ft=0){var vt;Zn(document)!==$.current&&((vt=$.current)==null||vt.focus(),Ce(ft))}const ne=Ue(ft=>{y==null||y(ft);const vt=$.current;r.start(0,()=>{!vt||vt!==$.current||J==null&&(vt.value.length&&Number(vt.selectionEnd)-Number(vt.selectionStart)===vt.value.length?Ce("all"):pe())})}),_e=Ue((ft,...vt)=>{ft.isDefaultPrevented()||(S==null||S(ft,...vt),pe())}),de=Ue(ft=>{if(j==null||j(ft),ft.preventDefault(),_||k)return;const vt=ft.clipboardData.getData("text");if(typeof oe=="number"){const kt=Z.sections[oe],Jt=/^[a-zA-Z]+$/.test(vt),On=/^[0-9]+$/.test(vt),mn=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(vt);if(kt.contentType==="letter"&&Jt||kt.contentType==="digit"&&On||kt.contentType==="digit-with-letter"&&mn){ee(null),We({section:kt,newSectionValue:vt,shouldGoToNextSection:!0});return}if(Jt||On)return}ee(null),ye(vt)}),Se=Ue(ft=>{P==null||P(ft),Ce(null)}),Pe=Ue(ft=>{if(_)return;const vt=ft.target.value;if(vt===""){be();return}const kt=ft.nativeEvent.data,Jt=kt&&kt.length>1,On=Jt?kt:vt,mn=Wa(On);if(oe==="all"&&Ce(J),J==null||Jt){ye(Jt?kt:mn);return}let nr;if(oe==="all"&&mn.length===1)nr=mn;else{const yn=Wa(h.getV6InputValueFromSections(ge,Y,n));let It=-1,Mn=-1;for(let ur=0;ur<yn.length;ur+=1)It===-1&&yn[ur]!==mn[ur]&&(It=ur),Mn===-1&&yn[yn.length-ur-1]!==mn[mn.length-ur-1]&&(Mn=ur);const qn=ge[J];if(It<qn.start||yn.length-Mn-1>qn.end)return;const Bo=mn.length-yn.length+qn.end-Wa(qn.endSeparator||"").length;nr=mn.slice(qn.start+Wa(qn.startSeparator||"").length,Bo)}if(nr.length===0){X9()&&Ae(On),ae();return}le({keyPressed:nr,sectionIndex:J})}),B=Ue((ft,...vt)=>{ft.preventDefault(),I==null||I(ft,...vt),be(),vv($)?Ce(V.startIndex):ke(0)}),Me=q1({manager:i,internalPropsWithDefaults:b,stateResponse:K}),qe=Ue(ft=>{w==null||w(ft),Me(ft)}),Cn=x.useMemo(()=>R!==void 0?R:h.getV6InputValueFromSections(ie(u.emptyValue),Y,n),[R,h,ie,u.emptyValue,Y,n]),tn=x.useMemo(()=>Z.tempValueStrAndroid??h.getV6InputValueFromSections(Z.sections,Y,n),[Z.sections,h,Z.tempValueStrAndroid,Y,n]);x.useEffect(()=>{$.current&&$.current===Zn(document)&&Ce("all")},[]),ls(()=>{function ft(){if(!$.current)return;if(oe==null){$.current.scrollLeft&&($.current.scrollLeft=0);return}if($.current!==Zn(document))return;const vt=$.current.scrollTop;if(oe==="all")$.current.select();else{const kt=ge[oe],Jt=kt.type==="empty"?kt.startInInput-kt.startSeparator.length:kt.startInInput,On=kt.type==="empty"?kt.endInInput+kt.endSeparator.length:kt.endInInput;(Jt!==$.current.selectionStart||On!==$.current.selectionEnd)&&$.current===Zn(document)&&$.current.setSelectionRange(Jt,On),s.start(0,()=>{$.current&&$.current===Zn(document)&&$.current.selectionStart===$.current.selectionEnd&&($.current.selectionStart!==Jt||$.current.selectionEnd!==On)&&ft()})}$.current.scrollTop=vt}ft()});const Nt=x.useMemo(()=>J==null||Z.sections[J].contentType==="letter"?"text":"numeric",[J,Z.sections]),Un=!($.current&&$.current===Zn(document))&&q;return x.useImperativeHandle(z,()=>({getSections:()=>Z.sections,getActiveSectionIndex:()=>{const ft=$.current.selectionStart??0,vt=$.current.selectionEnd??0;if(ft===0&&vt===0)return null;const kt=ft<=ge[0].startInInput?1:ge.findIndex(Jt=>Jt.startInInput-Jt.startSeparator.length>ft);return kt===-1?ge.length-1:kt-1},setSelectedSections:ft=>Ce(ft),focusField:ke,isFieldFocused:()=>vv($)})),U({},g,{error:Q,clearable:!!(T&&!q&&!_&&!k),onBlur:Se,onClick:_e,onFocus:ne,onPaste:de,onKeyDown:qe,onClear:B,inputRef:G,enableAccessibleFieldDOMStructure:!1,placeholder:Cn,inputMode:Nt,autoComplete:"off",value:Un?"":tn,onChange:Pe,focused:L,disabled:k,readOnly:_,autoFocus:N,openPickerAriaLabel:se})};function vv(e){return e.current===Zn(document)}const Q7=e=>{const n=w1();return(e.props.enableAccessibleFieldDOMStructure??(n==null?void 0:n.enableAccessibleFieldDOMStructure)??!0?K7:X7)(e)};function Nx(e){const n=Ut(),r=v1();return x.useMemo(()=>({disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,minDate:wd(n,e.minDate,r.minDate),maxDate:wd(n,e.maxDate,r.maxDate)}),[e.minDate,e.maxDate,e.disableFuture,e.disablePast,n,r])}function Z7(e={}){const{enableAccessibleFieldDOMStructure:n=!0}=e;return x.useMemo(()=>({valueType:"date-time",validator:pu,internal_valueManager:yr,internal_fieldValueManager:e7,internal_enableAccessibleFieldDOMStructure:n,internal_useApplyDefaultValuesToFieldInternalProps:tG,internal_useOpenPickerButtonAriaLabel:eG}),[n])}function eG(e){const n=Ut(),r=Is();return x.useMemo(()=>{const s=n.isValid(e)?n.format(e,"fullDate"):null;return r.openDatePickerDialogue(s)},[e,r,n])}function tG(e){const n=Ut(),r=K1(e),s=x.useMemo(()=>e.ampm??n.is12HourCycleInCurrentLocale(),[e.ampm,n]);return x.useMemo(()=>U({},e,r,{format:e.format??(s?n.formats.keyboardDateTime12h:n.formats.keyboardDateTime24h)}),[e,r,s,n])}function K1(e){const n=Ut(),r=v1();return x.useMemo(()=>({disablePast:e.disablePast??!1,disableFuture:e.disableFuture??!1,disableIgnoringDatePartForTimeValidation:!!e.minDateTime||!!e.maxDateTime||!!e.disableFuture||!!e.disablePast,minDate:wd(n,e.minDateTime??e.minDate,r.minDate),maxDate:wd(n,e.maxDateTime??e.maxDate,r.maxDate),minTime:e.minDateTime??e.minTime,maxTime:e.maxDateTime??e.maxTime}),[e.minDateTime,e.maxDateTime,e.minTime,e.maxTime,e.minDate,e.maxDate,e.disableFuture,e.disablePast,n,r])}function Lx(e){const{ownerState:n}=_n(),r=Vs();return x.useMemo(()=>U({},n,{isFieldDisabled:e.disabled??!1,isFieldReadOnly:e.readOnly??!1,isFieldRequired:e.required??!1,fieldDirection:r?"rtl":"ltr"}),[n,e.disabled,e.readOnly,e.required,r])}function nG(e){return un("MuiPickersTextField",e)}pn("MuiPickersTextField",["root","focused","disabled","error","required"]);function rG(e){return un("MuiPickersInputBase",e)}const Ha=pn("MuiPickersInputBase",["root","focused","disabled","error","notchedOutline","sectionContent","sectionBefore","sectionAfter","adornedStart","adornedEnd","input","activeBar"]);function sG(e){return un("MuiPickersSectionList",e)}const Hi=pn("MuiPickersSectionList",["root","section","sectionContent"]),oG=["slots","slotProps","elements","sectionListRef","classes"],J1=Ne("div",{name:"MuiPickersSectionList",slot:"Root"})({direction:"ltr /*! @noflip */",outline:"none"}),X1=Ne("span",{name:"MuiPickersSectionList",slot:"Section"})({}),Q1=Ne("span",{name:"MuiPickersSectionList",slot:"SectionSeparator"})({whiteSpace:"pre"}),Z1=Ne("span",{name:"MuiPickersSectionList",slot:"SectionContent"})({outline:"none"}),aG=e=>en({root:["root"],section:["section"],sectionContent:["sectionContent"]},sG,e);function iG(e){const{slots:n,slotProps:r,element:s,classes:o}=e,{ownerState:i}=_n(),l=(n==null?void 0:n.section)??X1,d=$t({elementType:l,externalSlotProps:r==null?void 0:r.section,externalForwardedProps:s.container,className:o.section,ownerState:i}),u=(n==null?void 0:n.sectionContent)??Z1,h=$t({elementType:u,externalSlotProps:r==null?void 0:r.sectionContent,externalForwardedProps:s.content,additionalProps:{suppressContentEditableWarning:!0},className:o.sectionContent,ownerState:i}),f=(n==null?void 0:n.sectionSeparator)??Q1,p=$t({elementType:f,externalSlotProps:r==null?void 0:r.sectionSeparator,externalForwardedProps:s.before,ownerState:U({},i,{separatorPosition:"before"})}),g=$t({elementType:f,externalSlotProps:r==null?void 0:r.sectionSeparator,externalForwardedProps:s.after,ownerState:U({},i,{separatorPosition:"after"})});return t.jsxs(l,U({},d,{children:[t.jsx(f,U({},p)),t.jsx(u,U({},h)),t.jsx(f,U({},g))]}))}const lG=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersSectionList"}),{slots:o,slotProps:i,elements:l,sectionListRef:d,classes:u}=s,h=it(s,oG),f=aG(u),{ownerState:p}=_n(),g=x.useRef(null),b=cr(r,g),y=P=>{if(!g.current)throw new Error(`MUI X: Cannot call sectionListRef.${P} before the mount of the component.`);return g.current};x.useImperativeHandle(d,()=>({getRoot(){return y("getRoot")},getSectionContainer(P){return y("getSectionContainer").querySelector(`.${Hi.section}[data-sectionindex="${P}"]`)},getSectionContent(P){return y("getSectionContent").querySelector(`.${Hi.section}[data-sectionindex="${P}"] .${Hi.sectionContent}`)},getSectionIndexFromDOMElement(P){const w=y("getSectionIndexFromDOMElement");if(P==null||!w.contains(P))return null;let I=null;return P.classList.contains(Hi.section)?I=P:P.classList.contains(Hi.sectionContent)&&(I=P.parentElement),I==null?null:Number(I.dataset.sectionindex)}}));const S=(o==null?void 0:o.root)??J1,j=$t({elementType:S,externalSlotProps:i==null?void 0:i.root,externalForwardedProps:h,additionalProps:{ref:b,suppressContentEditableWarning:!0},className:f.root,ownerState:p});return t.jsx(S,U({},j,{children:j.contentEditable?l.map(({content:P,before:w,after:I})=>`${w.children}${P.children}${I.children}`).join(""):t.jsx(x.Fragment,{children:l.map((P,w)=>t.jsx(iG,{slots:o,slotProps:i,element:P,classes:f},w))})}))}),eC=x.createContext(null),mu=()=>{const e=x.useContext(eC);if(e==null)throw new Error(["MUI X: The `usePickerTextFieldOwnerState` can only be called in components that are used inside a PickerTextField component"].join(`
`));return e},cG=["elements","areAllSectionsEmpty","defaultValue","label","value","onChange","id","autoFocus","endAdornment","startAdornment","renderSuffix","slots","slotProps","contentEditable","tabIndex","onInput","onPaste","onKeyDown","fullWidth","name","readOnly","inputProps","inputRef","sectionListRef","onFocus","onBlur","classes","ownerState"],dG=e=>Math.round(e*1e5)/1e5,xu=Ne("div",{name:"MuiPickersInputBase",slot:"Root"})(({theme:e})=>U({},e.typography.body1,{color:(e.vars||e).palette.text.primary,cursor:"text",padding:0,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",boxSizing:"border-box",letterSpacing:`${dG(.15/16)}em`,variants:[{props:{isInputInFullWidth:!0},style:{width:"100%"}}]})),$x=Ne(J1,{name:"MuiPickersInputBase",slot:"SectionsContainer"})(({theme:e})=>({padding:"4px 0 5px",fontFamily:e.typography.fontFamily,fontSize:"inherit",lineHeight:"1.4375em",flexGrow:1,outline:"none",display:"flex",flexWrap:"nowrap",overflow:"hidden",letterSpacing:"inherit",width:"182px",variants:[{props:{fieldDirection:"rtl"},style:{textAlign:"right /*! @noflip */"}},{props:{inputSize:"small"},style:{paddingTop:1}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0},style:{color:"currentColor",opacity:0}},{props:{hasStartAdornment:!1,isFieldFocused:!1,isFieldValueEmpty:!0,inputHasLabel:!1},style:e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:e.palette.mode==="light"?.42:.5}}]})),uG=Ne(X1,{name:"MuiPickersInputBase",slot:"Section"})(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit",letterSpacing:"inherit",lineHeight:"1.4375em",display:"inline-block",whiteSpace:"nowrap"})),hG=Ne(Z1,{name:"MuiPickersInputBase",slot:"SectionContent",overridesResolver:(e,n)=>n.content})(({theme:e})=>({fontFamily:e.typography.fontFamily,lineHeight:"1.4375em",letterSpacing:"inherit",width:"fit-content",outline:"none"})),fG=Ne(Q1,{name:"MuiPickersInputBase",slot:"Separator"})(()=>({whiteSpace:"pre",letterSpacing:"inherit"})),pG=Ne("input",{name:"MuiPickersInputBase",slot:"Input",overridesResolver:(e,n)=>n.hiddenInput})(U({},r9)),mG=Ne("div",{name:"MuiPickersInputBase",slot:"ActiveBar"})(({theme:e,ownerState:n})=>({display:"none",position:"absolute",height:2,bottom:2,borderTopLeftRadius:2,borderTopRightRadius:2,transition:e.transitions.create(["width","left"],{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.primary.main,'[data-active-range-position="start"] &, [data-active-range-position="end"] &':{display:"block"},'[data-active-range-position="start"] &':{left:n.sectionOffsets[0]},'[data-active-range-position="end"] &':{left:n.sectionOffsets[1]}})),xG=(e,n)=>{const{isFieldFocused:r,isFieldDisabled:s,isFieldReadOnly:o,hasFieldError:i,inputSize:l,isInputInFullWidth:d,inputColor:u,hasStartAdornment:h,hasEndAdornment:f}=n,p={root:["root",r&&!s&&"focused",s&&"disabled",o&&"readOnly",i&&"error",d&&"fullWidth",`color${X8(u)}`,l==="small"&&"inputSizeSmall",h&&"adornedStart",f&&"adornedEnd"],notchedOutline:["notchedOutline"],input:["input"],sectionsContainer:["sectionsContainer"],sectionContent:["sectionContent"],sectionBefore:["sectionBefore"],sectionAfter:["sectionAfter"],activeBar:["activeBar"]};return en(p,rG,e)};function jv(e,n,r,s){var o;if(e.content.id){const i=(o=n.current)==null?void 0:o.querySelectorAll(`[data-sectionindex="${r}"] [data-range-position="${s}"]`);if(i)return Array.from(i).reduce((l,d)=>l+d.offsetWidth,0)}return 0}function gG(e,n){var o,i,l,d,u;let r=0;if(((o=n.current)==null?void 0:o.getAttribute("data-active-range-position"))==="end")for(let h=e.length-1;h>=e.length/2;h-=1)r+=jv(e[h],n,h,"end");else for(let h=0;h<e.length/2;h+=1)r+=jv(e[h],n,h,"start");return{activeBarWidth:r,sectionOffsets:[((l=(i=n.current)==null?void 0:i.querySelector('[data-sectionindex="0"]'))==null?void 0:l.offsetLeft)||0,((u=(d=n.current)==null?void 0:d.querySelector(`[data-sectionindex="${e.length/2}"]`))==null?void 0:u.offsetLeft)||0]}}const Fx=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersInputBase"}),{elements:o,areAllSectionsEmpty:i,value:l,onChange:d,id:u,endAdornment:h,startAdornment:f,renderSuffix:p,slots:g,slotProps:b,contentEditable:y,tabIndex:S,onInput:j,onPaste:P,onKeyDown:w,name:I,readOnly:T,inputProps:D,inputRef:R,sectionListRef:_,onFocus:k,onBlur:N,classes:L,ownerState:z}=s,$=it(s,cG),G=mu(),K=x.useRef(null),J=x.useRef(null),q=x.useRef([]),Q=cr(r,K),Y=cr(D==null?void 0:D.ref,R),oe=Bv();if(!oe)throw new Error("MUI X: PickersInputBase should always be used inside a PickersTextField component");const V=z??G,Z=ie=>{var le;(le=oe.onFocus)==null||le.call(oe,ie),k==null||k(ie)},Ee=ie=>{Z(ie)},be=ie=>{var le,se;if(w==null||w(ie),ie.key==="Enter"&&!ie.defaultMuiPrevented){if((le=K.current)!=null&&le.dataset.multiInput)return;const ge=(se=K.current)==null?void 0:se.closest("form"),pe=ge==null?void 0:ge.querySelector('[type="submit"]');if(!ge||!pe)return;ie.preventDefault(),ge.requestSubmit(pe)}},ae=ie=>{var le;(le=oe.onBlur)==null||le.call(oe,ie),N==null||N(ie)};x.useEffect(()=>{oe&&oe.setAdornedStart(!!f)},[oe,f]),x.useEffect(()=>{oe&&(i?oe.onEmpty():oe.onFilled())},[oe,i]);const ee=xG(L,V),Ce=(g==null?void 0:g.root)||xu,Ae=$t({elementType:Ce,externalSlotProps:b==null?void 0:b.root,externalForwardedProps:$,additionalProps:{"aria-invalid":oe.error,ref:Q},className:ee.root,ownerState:V}),We=(g==null?void 0:g.input)||$x,ye=o.some(ie=>ie.content["data-range-position"]!==void 0);return x.useEffect(()=>{if(!ye||!V.isPickerOpen)return;const{activeBarWidth:ie,sectionOffsets:le}=gG(o,K);q.current=[le[0],le[1]],J.current&&(J.current.style.width=`${ie}px`)},[o,ye,V.isPickerOpen]),t.jsxs(Ce,U({},Ae,{children:[f,t.jsx(lG,{sectionListRef:_,elements:o,contentEditable:y,tabIndex:S,className:ee.sectionsContainer,onFocus:Z,onBlur:ae,onInput:j,onPaste:P,onKeyDown:be,slots:{root:We,section:uG,sectionContent:hG,sectionSeparator:fG},slotProps:{root:U({},b==null?void 0:b.input,{ownerState:V}),sectionContent:{className:Ha.sectionContent},sectionSeparator:({separatorPosition:ie})=>({className:ie==="before"?Ha.sectionBefore:Ha.sectionAfter})}}),h,p?p(U({},oe)):null,t.jsx(pG,U({name:I,className:ee.input,value:l,onChange:d,id:u,"aria-hidden":"true",tabIndex:-1,readOnly:T,required:oe.required,disabled:oe.disabled,onFocus:Ee},D,{ref:Y})),ye&&t.jsx(mG,{className:ee.activeBar,ref:J,ownerState:{sectionOffsets:q.current}})]}))});function bG(e){return un("MuiPickersOutlinedInput",e)}const ps=U({},Ha,pn("MuiPickersOutlinedInput",["root","notchedOutline","input"])),yG=["children","className","label","notched","shrink"],vG=Ne("fieldset",{name:"MuiPickersOutlinedInput",slot:"NotchedOutline"})(({theme:e})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%",borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}),Sv=Ne("span")(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:"inherit"})),jG=Ne("legend",{shouldForwardProp:e=>lo(e)&&e!=="notched"})(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:{inputHasLabel:!1},style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:{inputHasLabel:!0},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:{inputHasLabel:!0,notched:!0},style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]}));function SG(e){const{className:n,label:r,notched:s}=e,o=it(e,yG),i=mu();return t.jsx(vG,U({"aria-hidden":!0,className:n},o,{ownerState:i,children:t.jsx(jG,{ownerState:i,notched:s,children:r?t.jsx(Sv,{children:r}):t.jsx(Sv,{className:"notranslate",children:""})})}))}const wG=["label","autoFocus","ownerState","classes","notched"],CG=Ne(xu,{name:"MuiPickersOutlinedInput",slot:"Root"})(({theme:e})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{padding:"0 14px",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${ps.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${ps.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${ps.focused} .${ps.notchedOutline}`]:{borderStyle:"solid",borderWidth:2},[`&.${ps.disabled}`]:{[`& .${ps.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled},"*":{color:(e.vars||e).palette.action.disabled}},[`&.${ps.error} .${ps.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},variants:Object.keys((e.vars??e).palette).filter(r=>{var s;return((s=(e.vars??e).palette[r])==null?void 0:s.main)??!1}).map(r=>({props:{inputColor:r},style:{[`&.${ps.focused}:not(.${ps.error}) .${ps.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}}))}}),PG=Ne($x,{name:"MuiPickersOutlinedInput",slot:"SectionsContainer"})({padding:"16.5px 0",variants:[{props:{inputSize:"small"},style:{padding:"8.5px 0"}}]}),EG=e=>{const r=en({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},bG,e);return U({},e,r)},tC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersOutlinedInput"}),{label:o,classes:i,notched:l}=s,d=it(s,wG),u=Bv(),h=EG(i);return t.jsx(Fx,U({slots:{root:CG,input:PG},renderSuffix:f=>t.jsx(SG,{shrink:!!(l||f.adornedStart||f.focused||f.filled),notched:!!(l||f.adornedStart||f.focused||f.filled),className:h.notchedOutline,label:o!=null&&o!==""&&(u!=null&&u.required)?t.jsxs(x.Fragment,{children:[o,"","*"]}):o})},d,{label:o,classes:h,ref:r}))});tC.muiName="Input";function IG(e){return un("MuiPickersFilledInput",e)}const ta=U({},Ha,pn("MuiPickersFilledInput",["root","underline","input"])),TG=["label","autoFocus","disableUnderline","hiddenLabel","classes"],DG=Ne(xu,{name:"MuiPickersFilledInput",slot:"Root",shouldForwardProp:e=>Vv(e)&&e!=="disableUnderline"})(({theme:e})=>{const n=e.palette.mode==="light",r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${ta.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${ta.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:i},variants:[...Object.keys((e.vars??e).palette).filter(l=>(e.vars??e).palette[l].main).map(l=>{var d;return{props:{inputColor:l,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(d=(e.vars||e).palette[l])==null?void 0:d.main}`}}}}),{props:{disableUnderline:!1},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ta.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ta.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ta.disabled}, .${ta.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ta.disabled}:before`]:{borderBottomStyle:"dotted"}}},{props:{hasStartAdornment:!0},style:{paddingLeft:12}},{props:{hasEndAdornment:!0},style:{paddingRight:12}}]}}),AG=Ne($x,{name:"MuiPickersFilledInput",slot:"sectionsContainer",shouldForwardProp:e=>Vv(e)&&e!=="hiddenLabel"})({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,variants:[{props:{inputSize:"small"},style:{paddingTop:21,paddingBottom:4}},{props:{hasStartAdornment:!0},style:{paddingLeft:0}},{props:{hasEndAdornment:!0},style:{paddingRight:0}},{props:{hiddenLabel:!0},style:{paddingTop:16,paddingBottom:17}},{props:{hiddenLabel:!0,inputSize:"small"},style:{paddingTop:8,paddingBottom:9}}]}),RG=(e,n)=>{const{inputHasUnderline:r}=n,o=en({root:["root",r&&"underline"],input:["input"]},IG,e);return U({},e,o)},nC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersFilledInput"}),{label:o,disableUnderline:i=!1,hiddenLabel:l=!1,classes:d}=s,u=it(s,TG),h=mu(),f=U({},h,{inputHasUnderline:!i}),p=RG(d,f);return t.jsx(Fx,U({slots:{root:DG,input:AG},slotProps:{root:{disableUnderline:i},input:{hiddenLabel:l}}},u,{label:o,classes:p,ref:r,ownerState:f}))});nC.muiName="Input";function kG(e){return un("MuiPickersFilledInput",e)}const Gi=U({},Ha,pn("MuiPickersInput",["root","underline","input"])),_G=["label","autoFocus","disableUnderline","ownerState","classes"],OG=Ne(xu,{name:"MuiPickersInput",slot:"Root",shouldForwardProp:e=>lo(e)&&e!=="disableUnderline"})(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{"label + &":{marginTop:16},variants:[...Object.keys((e.vars??e).palette).filter(s=>(e.vars??e).palette[s].main).map(s=>({props:{inputColor:s},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[s].main}`}}})),{props:{disableUnderline:!1},style:{"&::after":{background:"red",left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Gi.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Gi.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Gi.disabled}, .${Gi.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Gi.disabled}:before`]:{borderBottomStyle:"dotted"}}}]}}),MG=(e,n)=>{const{inputHasUnderline:r}=n,o=en({root:["root",!r&&"underline"],input:["input"]},kG,e);return U({},e,o)},rC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersInput"}),{label:o,disableUnderline:i=!1,classes:l}=s,d=it(s,_G),u=mu(),h=U({},u,{inputHasUnderline:!i}),f=MG(l,h);return t.jsx(Fx,U({slots:{root:OG},slotProps:{root:{disableUnderline:i}}},d,{label:o,classes:f,ref:r}))});rC.muiName="Input";const NG=["onFocus","onBlur","className","classes","color","disabled","error","variant","required","InputProps","inputProps","inputRef","sectionListRef","elements","areAllSectionsEmpty","onClick","onKeyDown","onKeyUp","onPaste","onInput","endAdornment","startAdornment","tabIndex","contentEditable","focused","value","onChange","fullWidth","id","name","helperText","FormHelperTextProps","label","InputLabelProps","data-active-range-position"],LG={standard:rC,filled:nC,outlined:tC},$G=Ne(ht,{name:"MuiPickersTextField",slot:"Root"})({}),FG=(e,n)=>{const{isFieldFocused:r,isFieldDisabled:s,isFieldRequired:o}=n;return en({root:["root",r&&!s&&"focused",s&&"disabled",o&&"required"]},nG,e)},sC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersTextField"}),{onFocus:o,onBlur:i,className:l,classes:d,color:u="primary",disabled:h=!1,error:f=!1,variant:p="outlined",required:g=!1,InputProps:b,inputProps:y,inputRef:S,sectionListRef:j,elements:P,areAllSectionsEmpty:w,onClick:I,onKeyDown:T,onKeyUp:D,onPaste:R,onInput:_,endAdornment:k,startAdornment:N,tabIndex:L,contentEditable:z,focused:$,value:G,onChange:K,fullWidth:J,id:q,name:Q,helperText:Y,FormHelperTextProps:oe,label:V,InputLabelProps:Z,"data-active-range-position":Ee}=s,be=it(s,NG),ae=x.useRef(null),ee=cr(r,ae),Ce=cu(q),Ae=Y&&Ce?`${Ce}-helper-text`:void 0,We=V&&Ce?`${Ce}-label`:void 0,ye=Lx({disabled:s.disabled,required:s.required,readOnly:b==null?void 0:b.readOnly}),ie=x.useMemo(()=>U({},ye,{isFieldValueEmpty:w,isFieldFocused:$??!1,hasFieldError:f??!1,inputSize:s.size??"medium",inputColor:u??"primary",isInputInFullWidth:J??!1,hasStartAdornment:!!(N??(b==null?void 0:b.startAdornment)),hasEndAdornment:!!(k??(b==null?void 0:b.endAdornment)),inputHasLabel:!!V}),[ye,w,$,f,s.size,u,J,N,k,b==null?void 0:b.startAdornment,b==null?void 0:b.endAdornment,V]),le=FG(d,ie),se=LG[p],ge={};return p==="outlined"&&(Z&&typeof Z.shrink<"u"&&(ge.notched=Z.shrink),ge.label=V),t.jsx(eC.Provider,{value:ie,children:t.jsxs($G,U({className:rn(le.root,l),ref:ee,focused:$,disabled:h,variant:p,error:f,color:u,fullWidth:J,required:g,ownerState:ie},be,{children:[V!=null&&V!==""&&t.jsx(Ct,U({htmlFor:Ce,id:We},Z,{children:V})),t.jsx(se,U({elements:P,areAllSectionsEmpty:w,onClick:I,onKeyDown:T,onKeyUp:D,onInput:_,onPaste:R,onFocus:o,onBlur:i,endAdornment:k,startAdornment:N,tabIndex:L,contentEditable:z,value:G,onChange:K,id:Ce,fullWidth:J,inputProps:y,inputRef:S,sectionListRef:j,label:V,name:Q,role:"group","aria-labelledby":We,"aria-describedby":Ae,"aria-live":Ae?"polite":void 0,"data-active-range-position":Ee},ge,b)),Y&&t.jsx(Fv,U({id:Ae},oe,{children:Y}))]}))})}),WG=["enableAccessibleFieldDOMStructure"],BG=["InputProps","readOnly","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],VG=["onPaste","onKeyDown","inputMode","readOnly","InputProps","inputProps","inputRef","onClear","clearable","clearButtonPosition","openPickerButtonPosition","openPickerAriaLabel"],UG=["ownerState"],zG=["ownerState"],HG=["ownerState"],GG=["ownerState"],YG=["InputProps","inputProps"],qG=e=>{let{enableAccessibleFieldDOMStructure:n}=e,r=it(e,WG);if(n){const{InputProps:j,readOnly:P,onClear:w,clearable:I,clearButtonPosition:T,openPickerButtonPosition:D,openPickerAriaLabel:R}=r,_=it(r,BG);return{clearable:I,onClear:w,clearButtonPosition:T,openPickerButtonPosition:D,openPickerAriaLabel:R,textFieldProps:U({},_,{InputProps:U({},j??{},{readOnly:P})})}}const{onPaste:s,onKeyDown:o,inputMode:i,readOnly:l,InputProps:d,inputProps:u,inputRef:h,onClear:f,clearable:p,clearButtonPosition:g,openPickerButtonPosition:b,openPickerAriaLabel:y}=r,S=it(r,VG);return{clearable:p,onClear:f,clearButtonPosition:g,openPickerButtonPosition:b,openPickerAriaLabel:y,textFieldProps:U({},S,{InputProps:U({},d??{},{readOnly:l}),inputProps:U({},u??{},{inputMode:i,onPaste:s,onKeyDown:o,ref:h})})}},Wx=x.createContext({slots:{},slotProps:{},inputRef:void 0});function KG(e){var oe,V;const{slots:n,slotProps:r,fieldResponse:s,defaultOpenPickerIcon:o}=e,i=Is(),l=_x(),d=x.useContext(Wx),{textFieldProps:u,onClear:h,clearable:f,openPickerAriaLabel:p,clearButtonPosition:g="end",openPickerButtonPosition:b="end"}=qG(s),y=Lx(u),S=Ue(Z=>{Z.preventDefault(),l==null||l.setOpen(Ee=>!Ee)}),j=l?l.triggerStatus:"hidden",P=f?g:null,w=j!=="hidden"?b:null,I=(n==null?void 0:n.textField)??d.slots.textField??(s.enableAccessibleFieldDOMStructure===!1?et:sC),T=(n==null?void 0:n.inputAdornment)??d.slots.inputAdornment??zr,D=$t({elementType:T,externalSlotProps:$c(d.slotProps.inputAdornment,r==null?void 0:r.inputAdornment),additionalProps:{position:"start"},ownerState:U({},y,{position:"start"})}),R=it(D,UG),_=$t({elementType:T,externalSlotProps:r==null?void 0:r.inputAdornment,additionalProps:{position:"end"},ownerState:U({},y,{position:"end"})}),k=it(_,zG),N=d.slots.openPickerButton??Oe,L=$t({elementType:N,externalSlotProps:d.slotProps.openPickerButton,additionalProps:{disabled:j==="disabled",onClick:S,"aria-label":p,edge:u.variant!=="standard"?w:!1},ownerState:y}),z=it(L,HG),$=d.slots.openPickerIcon??o,G=$t({elementType:$,externalSlotProps:d.slotProps.openPickerIcon,ownerState:y}),K=(n==null?void 0:n.clearButton)??d.slots.clearButton??Oe,J=$t({elementType:K,externalSlotProps:$c(d.slotProps.clearButton,r==null?void 0:r.clearButton),className:"clearButton",additionalProps:{title:i.fieldClearLabel,tabIndex:-1,onClick:h,disabled:s.disabled||s.readOnly,edge:u.variant!=="standard"&&P!==w?P:!1},ownerState:y}),q=it(J,GG),Q=(n==null?void 0:n.clearIcon)??d.slots.clearIcon??v9,Y=$t({elementType:Q,externalSlotProps:$c(d.slotProps.clearIcon,r==null?void 0:r.clearIcon),additionalProps:{fontSize:"small"},ownerState:y});return u.ref=cr(u.ref,l==null?void 0:l.rootRef),u.InputProps||(u.InputProps={}),l&&(u.InputProps.ref=l.triggerRef),!((oe=u.InputProps)!=null&&oe.startAdornment)&&(P==="start"||w==="start")&&(u.InputProps.startAdornment=t.jsxs(T,U({},R,{children:[w==="start"&&t.jsx(N,U({},z,{children:t.jsx($,U({},G))})),P==="start"&&t.jsx(K,U({},q,{children:t.jsx(Q,U({},Y))}))]}))),!((V=u.InputProps)!=null&&V.endAdornment)&&(P==="end"||w==="end")&&(u.InputProps.endAdornment=t.jsxs(T,U({},k,{children:[P==="end"&&t.jsx(K,U({},q,{children:t.jsx(Q,U({},Y))})),w==="end"&&t.jsx(N,U({},z,{children:t.jsx($,U({},G))}))]}))),P!=null&&(u.sx=[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(u.sx)?u.sx:[u.sx]]),t.jsx(I,U({},u))}function $c(e,n){return e?n?r=>U({},ml(n,r),ml(e,r)):e:n}function JG(e){const{ref:n,externalForwardedProps:r,slotProps:s}=e,o=x.useContext(Wx),i=_x(),l=Lx(r),{InputProps:d,inputProps:u}=r,h=it(r,YG),f=$t({elementType:sC,externalSlotProps:$c(o.slotProps.textField,s==null?void 0:s.textField),externalForwardedProps:h,additionalProps:{ref:n,sx:i==null?void 0:i.rootSx,label:i==null?void 0:i.label,name:i==null?void 0:i.name,className:i==null?void 0:i.rootClassName,inputRef:o.inputRef},ownerState:l});return f.inputProps=U({},u,f.inputProps),f.InputProps=U({},d,f.InputProps),f}function oC(e){const{slots:n={},slotProps:r={},inputRef:s,children:o}=e,i=x.useMemo(()=>({inputRef:s,slots:{openPickerButton:n.openPickerButton,openPickerIcon:n.openPickerIcon,textField:n.textField,inputAdornment:n.inputAdornment,clearIcon:n.clearIcon,clearButton:n.clearButton},slotProps:{openPickerButton:r.openPickerButton,openPickerIcon:r.openPickerIcon,textField:r.textField,inputAdornment:r.inputAdornment,clearIcon:r.clearIcon,clearButton:r.clearButton}}),[s,n.openPickerButton,n.openPickerIcon,n.textField,n.inputAdornment,n.clearIcon,n.clearButton,r.openPickerButton,r.openPickerIcon,r.textField,r.inputAdornment,r.clearIcon,r.clearButton]);return t.jsx(Wx.Provider,{value:i,children:o})}const XG=e=>{const n=Z7(e);return Q7({manager:n,props:e})},QG=["slots","slotProps"],aC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiDateTimeField"}),{slots:o,slotProps:i}=s,l=it(s,QG),d=JG({slotProps:i,ref:r,externalForwardedProps:l}),u=XG(d);return t.jsx(KG,{slots:o,slotProps:i,fieldResponse:u,defaultOpenPickerIcon:g9})}),iC=({shouldDisableDate:e,shouldDisableMonth:n,shouldDisableYear:r,minDate:s,maxDate:o,disableFuture:i,disablePast:l,timezone:d})=>{const u=ba();return x.useCallback(h=>Ox({adapter:u,value:h,timezone:d,props:{shouldDisableDate:e,shouldDisableMonth:n,shouldDisableYear:r,minDate:s,maxDate:o,disableFuture:i,disablePast:l}})!==null,[u,e,n,r,s,o,i,l,d])},ZG=(e,n)=>(r,s)=>{switch(s.type){case"setVisibleDate":return U({},r,{slideDirection:s.direction,currentMonth:s.month,isMonthSwitchingAnimating:!n.isSameMonth(s.month,r.currentMonth)&&!e&&!s.skipAnimation,focusedDay:s.focusedDay});case"changeMonthTimezone":{const o=s.newTimezone;if(n.getTimezone(r.currentMonth)===o)return r;let i=n.setTimezone(r.currentMonth,o);return n.getMonth(i)!==n.getMonth(r.currentMonth)&&(i=n.setMonth(i,n.getMonth(r.currentMonth))),U({},r,{currentMonth:i})}case"finishMonthSwitchingAnimation":return U({},r,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},eY=e=>{const{value:n,referenceDate:r,disableFuture:s,disablePast:o,maxDate:i,minDate:l,onMonthChange:d,onYearChange:u,reduceAnimations:h,shouldDisableDate:f,timezone:p,getCurrentMonthFromVisibleDate:g}=e,b=Ut(),y=x.useRef(ZG(!!h,b)).current,S=x.useMemo(()=>yr.getInitialReferenceValue({value:n,utils:b,timezone:p,props:e,referenceDate:r,granularity:ys.day}),[r,p]),[j,P]=x.useReducer(y,{isMonthSwitchingAnimating:!1,focusedDay:S,currentMonth:b.startOfMonth(S),slideDirection:"left"}),w=iC({shouldDisableDate:f,minDate:l,maxDate:i,disableFuture:s,disablePast:o,timezone:p});x.useEffect(()=>{P({type:"changeMonthTimezone",newTimezone:b.getTimezone(S)})},[S,b]);const I=Ue(({target:D,reason:R})=>{if(R==="cell-interaction"&&j.focusedDay!=null&&b.isSameDay(D,j.focusedDay))return;const _=R==="cell-interaction";let k,N;if(R==="cell-interaction")k=g(D,j.currentMonth),N=D;else if(k=b.isSameMonth(D,j.currentMonth)?j.currentMonth:b.startOfMonth(D),N=D,w(N)){const $=b.startOfMonth(D),G=b.endOfMonth(D);N=bl({utils:b,date:N,minDate:b.isBefore(l,$)?$:l,maxDate:b.isAfter(i,G)?G:i,disablePast:o,disableFuture:s,isDateDisabled:w,timezone:p})}const L=!b.isSameMonth(j.currentMonth,k),z=!b.isSameYear(j.currentMonth,k);L&&(d==null||d(k)),z&&(u==null||u(b.startOfYear(k))),P({type:"setVisibleDate",month:k,direction:b.isAfterDay(k,j.currentMonth)?"left":"right",focusedDay:j.focusedDay!=null&&N!=null&&b.isSameDay(N,j.focusedDay)?j.focusedDay:N,skipAnimation:_})}),T=x.useCallback(()=>{P({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:S,calendarState:j,setVisibleDate:I,isDateDisabled:w,onMonthSwitchingAnimationEnd:T}},tY=e=>un("MuiPickersFadeTransitionGroup",e);pn("MuiPickersFadeTransitionGroup",["root"]);const nY=["children"],rY=e=>en({root:["root"]},tY,e),sY=Ne(Uv,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function lC(e){const n=Kt({props:e,name:"MuiPickersFadeTransitionGroup"}),{className:r,reduceAnimations:s,transKey:o,classes:i}=n,{children:l}=n,d=it(n,nY),u=rY(i),h=cn();return s?l:t.jsx(sY,{className:rn(u.root,r),ownerState:d,children:t.jsx(kd,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:h.transitions.duration.enteringScreen,enter:h.transitions.duration.enteringScreen,exit:0},children:l},o)})}const oY=e=>un("MuiPickersSlideTransition",e),rs=pn("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),aY=["children","className","reduceAnimations","slideDirection","transKey","classes"],iY=(e,n)=>{const{slideDirection:r}=n,s={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${r}`],exitActive:[`slideExitActiveLeft-${r}`]};return en(s,oY,e)},lY=Ne(Uv,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,n)=>[n.root,{[`.${rs["slideEnter-left"]}`]:n["slideEnter-left"]},{[`.${rs["slideEnter-right"]}`]:n["slideEnter-right"]},{[`.${rs.slideEnterActive}`]:n.slideEnterActive},{[`.${rs.slideExit}`]:n.slideExit},{[`.${rs["slideExitActiveLeft-left"]}`]:n["slideExitActiveLeft-left"]},{[`.${rs["slideExitActiveLeft-right"]}`]:n["slideExitActiveLeft-right"]}]})(({theme:e})=>{const n=e.transitions.create("transform",{duration:e.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${rs["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${rs["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${rs.slideEnterActive}`]:{transform:"translate(0%)",transition:n},[`& .${rs.slideExit}`]:{transform:"translate(0%)"},[`& .${rs["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:n,zIndex:0},[`& .${rs["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:n,zIndex:0}}});function cY(e){const n=Kt({props:e,name:"MuiPickersSlideTransition"}),{children:r,className:s,reduceAnimations:o,slideDirection:i,transKey:l,classes:d}=n,u=it(n,aY),{ownerState:h}=_n(),f=U({},h,{slideDirection:i}),p=iY(d,f),g=cn();if(o)return t.jsx("div",{className:rn(p.root,s),children:r});const b={exit:p.exit,enterActive:p.enterActive,enter:p.enter,exitActive:p.exitActive};return t.jsx(lY,{className:rn(p.root,s),childFactory:y=>x.cloneElement(y,{classNames:b}),role:"presentation",ownerState:f,children:t.jsx(GR,U({mountOnEnter:!0,unmountOnExit:!0,timeout:g.transitions.duration.complex,classNames:b},u,{children:r}),l)})}const dY=e=>un("MuiDayCalendar",e);pn("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const uY=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],hY=["ownerState"],fY=e=>en({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},dY,e),cC=(gl+hu*2)*6,pY=Ne("div",{name:"MuiDayCalendar",slot:"Root"})({}),mY=Ne("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),xY=Ne(v,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.secondary})),gY=Ne(v,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:e})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(e.vars||e).palette.text.disabled})),bY=Ne(v,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:e})=>U({},e.typography.caption,{width:gl,height:gl,padding:0,margin:`0 ${hu}px`,color:(e.vars||e).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),yY=Ne("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:cC}),vY=Ne(cY,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:cC}),jY=Ne("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),SY=Ne("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${hu}px 0`,display:"flex",justifyContent:"center"});function wY(e){let{parentProps:n,day:r,focusedDay:s,selectedDays:o,isDateDisabled:i,currentMonthNumber:l,isViewFocused:d}=e,u=it(e,uY);const{disabled:h,disableHighlightToday:f,isMonthSwitchingAnimating:p,showDaysOutsideCurrentMonth:g,slots:b,slotProps:y,timezone:S}=n,j=Ut(),P=gi(S),w=s!=null&&j.isSameDay(r,s),I=d&&w,T=o.some(K=>j.isSameDay(K,r)),D=j.isSameDay(r,P),R=x.useMemo(()=>h||i(r),[h,i,r]),_=x.useMemo(()=>j.getMonth(r)!==l,[j,r,l]),k=L1({day:r,selected:T,disabled:R,today:D,outsideCurrentMonth:_,disableMargin:void 0,disableHighlightToday:f,showDaysOutsideCurrentMonth:g}),N=(b==null?void 0:b.day)??A7,L=$t({elementType:N,externalSlotProps:y==null?void 0:y.day,additionalProps:U({disableHighlightToday:f,showDaysOutsideCurrentMonth:g,role:"gridcell",isAnimating:p,"data-timestamp":j.toJsDate(r).valueOf()},u),ownerState:U({},k,{day:r,isDayDisabled:R,isDaySelected:T})}),z=it(L,hY),$=x.useMemo(()=>{const K=j.startOfMonth(j.setMonth(r,l));return g?j.isSameDay(r,j.startOfWeek(K)):j.isSameDay(r,K)},[l,r,g,j]),G=x.useMemo(()=>{const K=j.endOfMonth(j.setMonth(r,l));return g?j.isSameDay(r,j.endOfWeek(K)):j.isSameDay(r,K)},[l,r,g,j]);return t.jsx(N,U({},z,{day:r,disabled:R,autoFocus:!_&&I,today:D,outsideCurrentMonth:_,isFirstVisibleCell:$,isLastVisibleCell:G,selected:T,tabIndex:w?0:-1,"aria-selected":T,"aria-current":D?"date":void 0}))}function CY(e){const n=Kt({props:e,name:"MuiDayCalendar"}),r=Ut(),{onFocusedDayChange:s,className:o,classes:i,currentMonth:l,selectedDays:d,focusedDay:u,loading:h,onSelectedDaysChange:f,onMonthSwitchingAnimationEnd:p,readOnly:g,reduceAnimations:b,renderLoading:y=()=>t.jsx("span",{children:"..."}),slideDirection:S,TransitionProps:j,disablePast:P,disableFuture:w,minDate:I,maxDate:T,shouldDisableDate:D,shouldDisableMonth:R,shouldDisableYear:_,dayOfWeekFormatter:k=le=>r.format(le,"weekdayShort").charAt(0).toUpperCase(),hasFocus:N,onFocusedViewChange:L,gridLabelId:z,displayWeekNumber:$,fixedWeekNumber:G,timezone:K}=n,J=gi(K),q=fY(i),Q=Vs(),Y=iC({shouldDisableDate:D,shouldDisableMonth:R,shouldDisableYear:_,minDate:I,maxDate:T,disablePast:P,disableFuture:w,timezone:K}),oe=Is(),V=Ue(le=>{g||f(le)}),Z=le=>{Y(le)||(s(le),L==null||L(!0))},Ee=Ue((le,se)=>{switch(le.key){case"ArrowUp":Z(r.addDays(se,-7)),le.preventDefault();break;case"ArrowDown":Z(r.addDays(se,7)),le.preventDefault();break;case"ArrowLeft":{const ge=r.addDays(se,Q?1:-1),pe=r.addMonths(se,Q?1:-1),ke=bl({utils:r,date:ge,minDate:Q?ge:r.startOfMonth(pe),maxDate:Q?r.endOfMonth(pe):ge,isDateDisabled:Y,timezone:K});Z(ke||ge),le.preventDefault();break}case"ArrowRight":{const ge=r.addDays(se,Q?-1:1),pe=r.addMonths(se,Q?-1:1),ke=bl({utils:r,date:ge,minDate:Q?r.startOfMonth(pe):ge,maxDate:Q?ge:r.endOfMonth(pe),isDateDisabled:Y,timezone:K});Z(ke||ge),le.preventDefault();break}case"Home":Z(r.startOfWeek(se)),le.preventDefault();break;case"End":Z(r.endOfWeek(se)),le.preventDefault();break;case"PageUp":Z(r.addMonths(se,1)),le.preventDefault();break;case"PageDown":Z(r.addMonths(se,-1)),le.preventDefault();break}}),be=Ue((le,se)=>Z(se)),ae=Ue((le,se)=>{u!=null&&r.isSameDay(u,se)&&(L==null||L(!1))}),ee=r.getMonth(l),Ce=r.getYear(l),Ae=x.useMemo(()=>d.filter(le=>!!le).map(le=>r.startOfDay(le)),[r,d]),We=`${Ce}-${ee}`,ye=x.useMemo(()=>x.createRef(),[We]),ie=x.useMemo(()=>{const le=r.getWeekArray(l);let se=r.addMonths(l,1);for(;G&&le.length<G;){const ge=r.getWeekArray(se),pe=r.isSameDay(le[le.length-1][0],ge[0][0]);ge.slice(pe?1:0).forEach(ke=>{le.length<G&&le.push(ke)}),se=r.addMonths(se,1)}return le},[l,G,r]);return t.jsxs(pY,{role:"grid","aria-labelledby":z,className:q.root,children:[t.jsxs(mY,{role:"row",className:q.header,children:[$&&t.jsx(gY,{variant:"caption",role:"columnheader","aria-label":oe.calendarWeekNumberHeaderLabel,className:q.weekNumberLabel,children:oe.calendarWeekNumberHeaderText}),W9(r,J).map((le,se)=>t.jsx(xY,{variant:"caption",role:"columnheader","aria-label":r.format(le,"weekday"),className:q.weekDayLabel,children:k(le)},se.toString()))]}),h?t.jsx(yY,{className:q.loadingContainer,children:y()}):t.jsx(vY,U({transKey:We,onExited:p,reduceAnimations:b,slideDirection:S,className:rn(o,q.slideTransition)},j,{nodeRef:ye,children:t.jsx(jY,{ref:ye,role:"rowgroup",className:q.monthContainer,children:ie.map((le,se)=>t.jsxs(SY,{role:"row",className:q.weekContainer,"aria-rowindex":se+1,children:[$&&t.jsx(bY,{className:q.weekNumber,role:"rowheader","aria-label":oe.calendarWeekNumberAriaLabelText(r.getWeekNumber(le[0])),children:oe.calendarWeekNumberText(r.getWeekNumber(le[0]))}),le.map((ge,pe)=>t.jsx(wY,{parentProps:n,day:ge,selectedDays:Ae,isViewFocused:N,focusedDay:u,onKeyDown:Ee,onFocus:be,onBlur:ae,onDaySelect:V,isDateDisabled:Y,currentMonthNumber:ee,"aria-colindex":pe+1},ge.toString()))]},`week-${le[0]}`))})}))]})}function dC(e){return un("MuiMonthCalendar",e)}const Ac=pn("MuiMonthCalendar",["root","button","disabled","selected"]),PY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],EY=(e,n)=>{const r={button:["button",n.isMonthDisabled&&"disabled",n.isMonthSelected&&"selected"]};return en(r,dC,e)},IY=Ne("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(e,n)=>[n.button,{[`&.${Ac.disabled}`]:n.disabled},{[`&.${Ac.selected}`]:n.selected}]})(({theme:e})=>U({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.action.active,e.palette.action.hoverOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Ac.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Ac.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),TY=x.memo(function(n){const{autoFocus:r,classes:s,disabled:o,selected:i,value:l,onClick:d,onKeyDown:u,onFocus:h,onBlur:f,slots:p,slotProps:g}=n,b=it(n,PY),y=x.useRef(null),{ownerState:S}=_n(),j=U({},S,{isMonthDisabled:o,isMonthSelected:i}),P=EY(s,j);ls(()=>{var T;r&&((T=y.current)==null||T.focus())},[r]);const w=(p==null?void 0:p.monthButton)??IY,I=$t({elementType:w,externalSlotProps:g==null?void 0:g.monthButton,externalForwardedProps:b,additionalProps:{disabled:o,ref:y,type:"button",role:"radio","aria-checked":i,onClick:T=>d(T,l),onKeyDown:T=>u(T,l),onFocus:T=>h(T,l),onBlur:T=>f(T,l)},ownerState:j,className:P.button});return t.jsx(w,U({},I))}),DY=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],AY=e=>en({root:["root"]},dC,e);function RY(e,n){const r=Kt({props:e,name:n}),s=Nx(r);return U({},r,s,{monthsPerRow:r.monthsPerRow??3})}const kY=Ne("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:e=>lo(e)&&e!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:ii,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),_Y=x.forwardRef(function(n,r){const s=RY(n,"MuiMonthCalendar"),{autoFocus:o,className:i,classes:l,value:d,defaultValue:u,referenceDate:h,disabled:f,disableFuture:p,disablePast:g,maxDate:b,minDate:y,onChange:S,shouldDisableMonth:j,readOnly:P,onMonthFocus:w,hasFocus:I,onFocusedViewChange:T,monthsPerRow:D,timezone:R,gridLabelId:_,slots:k,slotProps:N}=s,L=it(s,DY),{value:z,handleValueChange:$,timezone:G}=ya({name:"MonthCalendar",timezone:R,value:d,defaultValue:u,referenceDate:h,onChange:S,valueManager:yr}),K=gi(G),J=Vs(),q=Ut(),{ownerState:Q}=_n(),Y=x.useMemo(()=>yr.getInitialReferenceValue({value:z,utils:q,props:s,timezone:G,referenceDate:h,granularity:ys.month}),[]),oe=AY(l),V=x.useMemo(()=>q.getMonth(K),[q,K]),Z=x.useMemo(()=>z!=null?q.getMonth(z):null,[z,q]),[Ee,be]=x.useState(()=>Z||q.getMonth(Y)),[ae,ee]=ai({name:"MonthCalendar",state:"hasFocus",controlled:I,default:o??!1}),Ce=Ue(ge=>{ee(ge),T&&T(ge)}),Ae=x.useCallback(ge=>{const pe=q.startOfMonth(g&&q.isAfter(K,y)?K:y),ke=q.startOfMonth(p&&q.isBefore(K,b)?K:b),ne=q.startOfMonth(ge);return q.isBefore(ne,pe)||q.isAfter(ne,ke)?!0:j?j(ne):!1},[p,g,b,y,K,j,q]),We=Ue((ge,pe)=>{if(P)return;const ke=q.setMonth(z??Y,pe);$(ke)}),ye=Ue(ge=>{Ae(q.setMonth(z??Y,ge))||(be(ge),Ce(!0),w&&w(ge))});x.useEffect(()=>{be(ge=>Z!==null&&ge!==Z?Z:ge)},[Z]);const ie=Ue((ge,pe)=>{switch(ge.key){case"ArrowUp":ye((12+pe-3)%12),ge.preventDefault();break;case"ArrowDown":ye((12+pe+3)%12),ge.preventDefault();break;case"ArrowLeft":ye((12+pe+(J?1:-1))%12),ge.preventDefault();break;case"ArrowRight":ye((12+pe+(J?-1:1))%12),ge.preventDefault();break}}),le=Ue((ge,pe)=>{ye(pe)}),se=Ue((ge,pe)=>{Ee===pe&&Ce(!1)});return t.jsx(kY,U({ref:r,className:rn(oe.root,i),ownerState:Q,role:"radiogroup","aria-labelledby":_,monthsPerRow:D},L,{children:Tx(q,z??Y).map(ge=>{const pe=q.getMonth(ge),ke=q.format(ge,"monthShort"),ne=q.format(ge,"month"),_e=pe===Z,de=f||Ae(ge);return t.jsx(TY,{selected:_e,value:pe,onClick:We,onKeyDown:ie,autoFocus:ae&&pe===Ee,disabled:de,tabIndex:pe===Ee&&!de?0:-1,onFocus:le,onBlur:se,"aria-current":V===pe?"date":void 0,"aria-label":ne,slots:k,slotProps:N,classes:l,children:ke},ke)})}))});function uC(e){return un("MuiYearCalendar",e)}const Rc=pn("MuiYearCalendar",["root","button","disabled","selected"]),OY=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],MY=(e,n)=>{const r={button:["button",n.isYearDisabled&&"disabled",n.isYearSelected&&"selected"]};return en(r,uC,e)},NY=Ne("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(e,n)=>[n.button,{[`&.${Rc.disabled}`]:n.disabled},{[`&.${Rc.selected}`]:n.selected}]})(({theme:e})=>U({color:"unset",backgroundColor:"transparent",border:0,outline:0},e.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.focusOpacity})`:he(e.palette.action.active,e.palette.action.focusOpacity)},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:he(e.palette.action.active,e.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Rc.disabled}`]:{color:(e.vars||e).palette.text.secondary},[`&.${Rc.selected}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.main,"&:focus, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}}})),LY=x.memo(function(n){const{autoFocus:r,classes:s,disabled:o,selected:i,value:l,onClick:d,onKeyDown:u,onFocus:h,onBlur:f,slots:p,slotProps:g}=n,b=it(n,OY),y=x.useRef(null),{ownerState:S}=_n(),j=U({},S,{isYearDisabled:o,isYearSelected:i}),P=MY(s,j);ls(()=>{var T;r&&((T=y.current)==null||T.focus())},[r]);const w=(p==null?void 0:p.yearButton)??NY,I=$t({elementType:w,externalSlotProps:g==null?void 0:g.yearButton,externalForwardedProps:b,additionalProps:{disabled:o,ref:y,type:"button",role:"radio","aria-checked":i,onClick:T=>d(T,l),onKeyDown:T=>u(T,l),onFocus:T=>h(T,l),onBlur:T=>f(T,l)},ownerState:j,className:P.button});return t.jsx(w,U({},I))}),$Y=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],FY=e=>en({root:["root"]},uC,e);function WY(e,n){const r=Kt({props:e,name:n}),s=Nx(r);return U({},r,s,{yearsPerRow:r.yearsPerRow??3,yearsOrder:r.yearsOrder??"asc"})}const BY=Ne("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:e=>lo(e)&&e!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:ii,maxHeight:L9,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),VY=Ne("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),UY=x.forwardRef(function(n,r){const s=WY(n,"MuiYearCalendar"),{autoFocus:o,className:i,classes:l,value:d,defaultValue:u,referenceDate:h,disabled:f,disableFuture:p,disablePast:g,maxDate:b,minDate:y,onChange:S,readOnly:j,shouldDisableYear:P,onYearFocus:w,hasFocus:I,onFocusedViewChange:T,yearsOrder:D,yearsPerRow:R,timezone:_,gridLabelId:k,slots:N,slotProps:L}=s,z=it(s,$Y),{value:$,handleValueChange:G,timezone:K}=ya({name:"YearCalendar",timezone:_,value:d,defaultValue:u,referenceDate:h,onChange:S,valueManager:yr}),J=gi(K),q=Vs(),Q=Ut(),{ownerState:Y}=_n(),oe=x.useMemo(()=>yr.getInitialReferenceValue({value:$,utils:Q,props:s,timezone:K,referenceDate:h,granularity:ys.year}),[]),V=FY(l),Z=x.useMemo(()=>Q.getYear(J),[Q,J]),Ee=x.useMemo(()=>$!=null?Q.getYear($):null,[$,Q]),[be,ae]=x.useState(()=>Ee||Q.getYear(oe)),[ee,Ce]=ai({name:"YearCalendar",state:"hasFocus",controlled:I,default:o??!1}),Ae=Ue(Pe=>{Ce(Pe),T&&T(Pe)}),We=x.useCallback(Pe=>{if(g&&Q.isBeforeYear(Pe,J)||p&&Q.isAfterYear(Pe,J)||y&&Q.isBeforeYear(Pe,y)||b&&Q.isAfterYear(Pe,b))return!0;if(!P)return!1;const B=Q.startOfYear(Pe);return P(B)},[p,g,b,y,J,P,Q]),ye=Ue((Pe,B)=>{if(j)return;const Me=Q.setYear($??oe,B);G(Me)}),ie=Ue(Pe=>{We(Q.setYear($??oe,Pe))||(ae(Pe),Ae(!0),w==null||w(Pe))});x.useEffect(()=>{ae(Pe=>Ee!==null&&Pe!==Ee?Ee:Pe)},[Ee]);const le=D!=="desc"?R*1:R*-1,se=q&&D==="asc"||!q&&D==="desc"?-1:1,ge=Ue((Pe,B)=>{switch(Pe.key){case"ArrowUp":ie(B-le),Pe.preventDefault();break;case"ArrowDown":ie(B+le),Pe.preventDefault();break;case"ArrowLeft":ie(B-se),Pe.preventDefault();break;case"ArrowRight":ie(B+se),Pe.preventDefault();break}}),pe=Ue((Pe,B)=>{ie(B)}),ke=Ue((Pe,B)=>{be===B&&Ae(!1)}),ne=x.useRef(null),_e=cr(r,ne);x.useEffect(()=>{if(o||ne.current===null)return;const Pe=ne.current.querySelector('[tabindex="0"]');if(!Pe)return;const B=Pe.offsetHeight,Me=Pe.offsetTop,qe=ne.current.clientHeight,Cn=ne.current.scrollTop,tn=Me+B;B>qe||Me<Cn||(ne.current.scrollTop=tn-qe/2-B/2)},[o]);const de=Q.getYearRange([y,b]);D==="desc"&&de.reverse();let Se=R-de.length%R;return Se===R&&(Se=0),t.jsxs(BY,U({ref:_e,className:rn(V.root,i),ownerState:Y,role:"radiogroup","aria-labelledby":k,yearsPerRow:R},z,{children:[de.map(Pe=>{const B=Q.getYear(Pe),Me=B===Ee,qe=f||We(Pe);return t.jsx(LY,{selected:Me,value:B,onClick:ye,onKeyDown:ge,autoFocus:ee&&B===be,disabled:qe,tabIndex:B===be&&!qe?0:-1,onFocus:pe,onBlur:ke,"aria-current":Z===B?"date":void 0,slots:N,slotProps:L,classes:l,children:Q.format(Pe,"year")},Q.format(Pe,"year"))}),Array.from({length:Se},(Pe,B)=>t.jsx(VY,{},B))]}))}),zY=e=>un("MuiPickersCalendarHeader",e),HY=pn("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),GY=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],YY=["ownerState"],qY=e=>en({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},zY,e),KY=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),JY=Ne("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:e})=>U({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},e.typography.body1,{fontWeight:e.typography.fontWeightMedium})),XY=Ne("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),QY=Ne(Oe,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${HY.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),ZY=Ne(p9,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:e})=>({willChange:"transform",transition:e.transitions.create("transform"),transform:"rotate(0deg)"})),eq=x.forwardRef(function(n,r){const s=Is(),o=Ut(),i=Kt({props:n,name:"MuiPickersCalendarHeader"}),{slots:l,slotProps:d,currentMonth:u,disabled:h,disableFuture:f,disablePast:p,maxDate:g,minDate:b,onMonthChange:y,onViewChange:S,view:j,reduceAnimations:P,views:w,labelId:I,className:T,classes:D,timezone:R,format:_=`${o.formats.month} ${o.formats.year}`}=i,k=it(i,GY),{ownerState:N}=_n(),L=qY(D),z=(l==null?void 0:l.switchViewButton)??QY,$=$t({elementType:z,externalSlotProps:d==null?void 0:d.switchViewButton,additionalProps:{size:"small","aria-label":s.calendarViewSwitchingButtonAriaLabel(j)},ownerState:N,className:L.switchViewButton}),G=(l==null?void 0:l.switchViewIcon)??ZY,K=$t({elementType:G,externalSlotProps:d==null?void 0:d.switchViewIcon,ownerState:N,className:L.switchViewIcon}),J=it(K,YY),q=()=>y(o.addMonths(u,1)),Q=()=>y(o.addMonths(u,-1)),Y=M9(u,{disableFuture:f,maxDate:g,timezone:R}),oe=N9(u,{disablePast:p,minDate:b,timezone:R}),V=()=>{if(!(w.length===1||!S||h))if(w.length===2)S(w.find(Ee=>Ee!==j)||w[0]);else{const Ee=w.indexOf(j)!==0?0:1;S(w[Ee])}};if(w.length===1&&w[0]==="year")return null;const Z=o.formatByString(u,_);return t.jsxs(KY,U({},k,{ownerState:N,className:rn(L.root,T),ref:r,children:[t.jsxs(JY,{role:"presentation",onClick:V,ownerState:N,"aria-live":"polite",className:L.labelContainer,children:[t.jsx(lC,{reduceAnimations:P,transKey:Z,children:t.jsx(XY,{id:I,ownerState:N,className:L.label,children:Z})}),w.length>1&&!h&&t.jsx(z,U({},$,{children:t.jsx(G,U({},J))}))]}),t.jsx(kd,{in:j==="day",appear:!P,enter:!P,children:t.jsx(D9,{slots:l,slotProps:d,onGoToPrevious:Q,isPreviousDisabled:oe,previousLabel:s.previousMonth,onGoToNext:q,isNextDisabled:Y,nextLabel:s.nextMonth})})]}))}),tq="@media (prefers-reduced-motion: reduce)",Ga=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),wv=Ga&&Ga[1]?parseInt(Ga[1],10):null,Cv=Ga&&Ga[2]?parseInt(Ga[2],10):null,nq=wv&&wv<10||Cv&&Cv<13||!1;function hC(e){const n=vl(tq,{defaultMatches:!1});return e??(n||nq)}const rq=e=>un("MuiDateCalendar",e);pn("MuiDateCalendar",["root","viewTransitionContainer"]);const sq=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],oq=e=>en({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},rq,e);function aq(e,n){const r=Kt({props:e,name:n}),s=hC(r.reduceAnimations),o=Nx(r);return U({},r,o,{loading:r.loading??!1,openTo:r.openTo??"day",views:r.views??["year","day"],reduceAnimations:s,renderLoading:r.renderLoading??(()=>t.jsx("span",{children:"..."}))})}const iq=Ne(Ix,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:li}),lq=Ne(lC,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),cq=x.forwardRef(function(n,r){const s=Ut(),{ownerState:o}=_n(),i=cu(),l=aq(n,"MuiDateCalendar"),{autoFocus:d,onViewChange:u,value:h,defaultValue:f,referenceDate:p,disableFuture:g,disablePast:b,onChange:y,onMonthChange:S,reduceAnimations:j,shouldDisableDate:P,shouldDisableMonth:w,shouldDisableYear:I,view:T,views:D,openTo:R,className:_,classes:k,disabled:N,readOnly:L,minDate:z,maxDate:$,disableHighlightToday:G,focusedView:K,onFocusedViewChange:J,showDaysOutsideCurrentMonth:q,fixedWeekNumber:Q,dayOfWeekFormatter:Y,slots:oe,slotProps:V,loading:Z,renderLoading:Ee,displayWeekNumber:be,yearsOrder:ae,yearsPerRow:ee,monthsPerRow:Ce,timezone:Ae}=l,We=it(l,sq),{value:ye,handleValueChange:ie,timezone:le}=ya({name:"DateCalendar",timezone:Ae,value:h,defaultValue:f,referenceDate:p,onChange:y,valueManager:yr}),{view:se,setView:ge,focusedView:pe,setFocusedView:ke,goToNextView:ne,setValueAndGoToNextView:_e}=uu({view:T,views:D,openTo:R,onChange:ie,onViewChange:u,autoFocus:d,focusedView:K,onFocusedViewChange:J}),{referenceDate:de,calendarState:Se,setVisibleDate:Pe,isDateDisabled:B,onMonthSwitchingAnimationEnd:Me}=eY({value:ye,referenceDate:p,reduceAnimations:j,onMonthChange:S,minDate:z,maxDate:$,shouldDisableDate:P,disablePast:b,disableFuture:g,timezone:le,getCurrentMonthFromVisibleDate:(It,Mn)=>s.isSameMonth(It,Mn)?Mn:s.startOfMonth(It)}),qe=N&&ye||z,Cn=N&&ye||$,tn=`${i}-grid-label`,Nt=pe!==null,hn=(oe==null?void 0:oe.calendarHeader)??eq,Un=$t({elementType:hn,externalSlotProps:V==null?void 0:V.calendarHeader,additionalProps:{views:D,view:se,currentMonth:Se.currentMonth,onViewChange:ge,onMonthChange:It=>Pe({target:It,reason:"header-navigation"}),minDate:qe,maxDate:Cn,disabled:N,disablePast:b,disableFuture:g,reduceAnimations:j,timezone:le,labelId:tn},ownerState:o}),ft=Ue(It=>{const Mn=s.startOfMonth(It),qn=s.endOfMonth(It),Tr=B(It)?bl({utils:s,date:It,minDate:s.isBefore(z,Mn)?Mn:z,maxDate:s.isAfter($,qn)?qn:$,disablePast:b,disableFuture:g,isDateDisabled:B,timezone:le}):It;Tr?(_e(Tr,"finish"),Pe({target:Tr,reason:"cell-interaction"})):(ne(),Pe({target:Mn,reason:"cell-interaction"}))}),vt=Ue(It=>{const Mn=s.startOfYear(It),qn=s.endOfYear(It),Tr=B(It)?bl({utils:s,date:It,minDate:s.isBefore(z,Mn)?Mn:z,maxDate:s.isAfter($,qn)?qn:$,disablePast:b,disableFuture:g,isDateDisabled:B,timezone:le}):It;Tr?(_e(Tr,"finish"),Pe({target:Tr,reason:"cell-interaction"})):(ne(),Pe({target:Mn,reason:"cell-interaction"}))}),kt=Ue(It=>ie(It&&Sd(s,It,ye??de),"finish",se));x.useEffect(()=>{s.isValid(ye)&&Pe({target:ye,reason:"controlled-value-change"})},[ye]);const Jt=oq(k),On={disablePast:b,disableFuture:g,maxDate:$,minDate:z},mn={disableHighlightToday:G,readOnly:L,disabled:N,timezone:le,gridLabelId:tn,slots:oe,slotProps:V},nr=x.useRef(se);x.useEffect(()=>{nr.current!==se&&(pe===nr.current&&ke(se,!0),nr.current=se)},[pe,ke,se]);const yn=x.useMemo(()=>[ye],[ye]);return t.jsxs(iq,U({ref:r,className:rn(Jt.root,_),ownerState:o},We,{children:[t.jsx(hn,U({},Un,{slots:oe,slotProps:V})),t.jsx(lq,{reduceAnimations:j,className:Jt.viewTransitionContainer,transKey:se,ownerState:o,children:t.jsxs("div",{children:[se==="year"&&t.jsx(UY,U({},On,mn,{value:ye,onChange:vt,shouldDisableYear:I,hasFocus:Nt,onFocusedViewChange:It=>ke("year",It),yearsOrder:ae,yearsPerRow:ee,referenceDate:de})),se==="month"&&t.jsx(_Y,U({},On,mn,{hasFocus:Nt,className:_,value:ye,onChange:ft,shouldDisableMonth:w,onFocusedViewChange:It=>ke("month",It),monthsPerRow:Ce,referenceDate:de})),se==="day"&&t.jsx(CY,U({},Se,On,mn,{onMonthSwitchingAnimationEnd:Me,hasFocus:Nt,onFocusedDayChange:It=>Pe({target:It,reason:"cell-interaction"}),reduceAnimations:j,selectedDays:yn,onSelectedDaysChange:kt,shouldDisableDate:P,shouldDisableMonth:w,shouldDisableYear:I,onFocusedViewChange:It=>ke("day",It),showDaysOutsideCurrentMonth:q,fixedWeekNumber:Q,dayOfWeekFormatter:Y,displayWeekNumber:be,loading:Z,renderLoading:Ee}))]})})]}))});function fC(e){return un("MuiPickersToolbar",e)}const dq=pn("MuiPickersToolbar",["root","title","content"]);function pC(){const{ownerState:e}=_n(),n=Vs();return x.useMemo(()=>U({},e,{toolbarDirection:n?"rtl":"ltr"}),[e,n])}const uq=["children","className","classes","toolbarTitle","hidden","titleId","classes","landscapeDirection"],hq=e=>en({root:["root"],title:["title"],content:["content"]},fC,e),fq=Ne("div",{name:"MuiPickersToolbar",slot:"Root"})(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{pickerOrientation:"landscape"},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]})),pq=Ne("div",{name:"MuiPickersToolbar",slot:"Content",shouldForwardProp:e=>lo(e)&&e!=="landscapeDirection"})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{pickerOrientation:"landscape"},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{pickerOrientation:"landscape",landscapeDirection:"row"},style:{flexDirection:"row"}}]}),mq=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersToolbar"}),{children:o,className:i,classes:l,toolbarTitle:d,hidden:u,titleId:h,landscapeDirection:f}=s,p=it(s,uq),g=pC(),b=hq(l);return u?null:t.jsxs(fq,U({ref:r,className:rn(b.root,i),ownerState:g},p,{children:[t.jsx(v,{color:"text.secondary",variant:"overline",id:h,className:b.title,children:d}),t.jsx(pq,{className:b.content,ownerState:g,landscapeDirection:f,children:o})]}))});function xq(e){return un("MuiPickerPopper",e)}pn("MuiPickerPopper",["root","paper"]);const gq=["PaperComponent","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],bq=e=>en({root:["root"],paper:["paper"]},xq,e),yq=Ne(YR,{name:"MuiPickerPopper",slot:"Root"})(({theme:e})=>({zIndex:e.zIndex.modal})),vq=Ne(rt,{name:"MuiPickerPopper",slot:"Paper"})({outline:0,transformOrigin:"top center",variants:[{props:({popperPlacement:e})=>["top","top-start","top-end"].includes(e),style:{transformOrigin:"bottom center"}}]});function jq(e,n){return n.documentElement.clientWidth<e.clientX||n.documentElement.clientHeight<e.clientY}function Sq(e,n){const r=x.useRef(!1),s=x.useRef(!1),o=x.useRef(null),i=x.useRef(!1);x.useEffect(()=>{if(!e)return;function u(){i.current=!0}return document.addEventListener("mousedown",u,!0),document.addEventListener("touchstart",u,!0),()=>{document.removeEventListener("mousedown",u,!0),document.removeEventListener("touchstart",u,!0),i.current=!1}},[e]);const l=Ue(u=>{if(!i.current)return;const h=s.current;s.current=!1;const f=hf(o.current);if(!o.current||"clientX"in u&&jq(u,f))return;if(r.current){r.current=!1;return}let p;u.composedPath?p=u.composedPath().indexOf(o.current)>-1:p=!f.documentElement.contains(u.target)||o.current.contains(u.target),!p&&!h&&n(u)}),d=()=>{s.current=!0};return x.useEffect(()=>{if(e){const u=hf(o.current),h=()=>{r.current=!0};return u.addEventListener("touchstart",l),u.addEventListener("touchmove",h),()=>{u.removeEventListener("touchstart",l),u.removeEventListener("touchmove",h)}}},[e,l]),x.useEffect(()=>{if(e){const u=hf(o.current);return u.addEventListener("click",l),()=>{u.removeEventListener("click",l),s.current=!1}}},[e,l]),[o,d,d]}const wq=x.forwardRef((e,n)=>{const{PaperComponent:r,ownerState:s,children:o,paperSlotProps:i,paperClasses:l,onPaperClick:d,onPaperTouchStart:u}=e,h=it(e,gq),f=$t({elementType:r,externalSlotProps:i,additionalProps:{tabIndex:-1,elevation:8,ref:n},className:l,ownerState:s});return t.jsx(r,U({},h,f,{onClick:p=>{var g;d(p),(g=f.onClick)==null||g.call(f,p)},onTouchStart:p=>{var g;u(p),(g=f.onTouchStart)==null||g.call(f,p)},ownerState:s,children:o}))});function Cq(e){const n=Kt({props:e,name:"MuiPickerPopper"}),{children:r,placement:s="bottom-start",slots:o,slotProps:i,classes:l}=n,{open:d,popupRef:u,reduceAnimations:h}=Fo(),{dismissViews:f,getCurrentViewMode:p,onPopperExited:g,triggerElement:b,viewContainerRole:y}=_n();x.useEffect(()=>{function Q(Y){d&&Y.key==="Escape"&&f()}return document.addEventListener("keydown",Q),()=>{document.removeEventListener("keydown",Q)}},[f,d]);const S=x.useRef(null);x.useEffect(()=>{y==="tooltip"||p()==="field"||(d?S.current=Zn(document):S.current&&S.current instanceof HTMLElement&&setTimeout(()=>{S.current instanceof HTMLElement&&S.current.focus()}))},[d,y,p]);const j=bq(l),{ownerState:P,rootRefObject:w}=_n(),I=U({},P,{popperPlacement:s}),T=Ue(()=>{y==="tooltip"?r7(()=>{var Q,Y;(Q=w.current)!=null&&Q.contains(Zn(document))||(Y=u.current)!=null&&Y.contains(Zn(document))||f()}):f()}),[D,R,_]=Sq(d,T),k=x.useRef(null),N=cr(k,u),L=cr(N,D),z=Q=>{Q.key==="Escape"&&(Q.stopPropagation(),f())},$=(o==null?void 0:o.desktopTransition)??h?kd:qR,G=(o==null?void 0:o.desktopTrapFocus)??KR,K=(o==null?void 0:o.desktopPaper)??vq,J=(o==null?void 0:o.popper)??yq,q=$t({elementType:J,externalSlotProps:i==null?void 0:i.popper,additionalProps:{transition:!0,role:y??void 0,open:d,placement:s,anchorEl:b,onKeyDown:z},className:j.root,ownerState:I});return t.jsx(J,U({},q,{children:({TransitionProps:Q})=>t.jsx(G,U({open:d,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:y==="tooltip",isEnabled:()=>!0},i==null?void 0:i.desktopTrapFocus,{children:t.jsx($,U({},Q,i==null?void 0:i.desktopTransition,{onExited:Y=>{var oe,V,Z;g==null||g(),(V=(oe=i==null?void 0:i.desktopTransition)==null?void 0:oe.onExited)==null||V.call(oe,Y),(Z=Q==null?void 0:Q.onExited)==null||Z.call(Q)},children:t.jsx(wq,{PaperComponent:K,ownerState:I,ref:L,onPaperClick:R,onPaperTouchStart:_,paperClasses:j.paper,paperSlotProps:i==null?void 0:i.desktopPaper,children:r})}))}))}))}function Pv(){return typeof window>"u"?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?Math.abs(window.screen.orientation.angle)===90?"landscape":"portrait":window.orientation&&Math.abs(Number(window.orientation))===90?"landscape":"portrait"}function Pq(e,n){const[r,s]=x.useState(Pv);return ls(()=>{const o=()=>{s(Pv())};return window.addEventListener("orientationchange",o),()=>{window.removeEventListener("orientationchange",o)}},[]),n7(e,["hours","minutes","seconds"])?"portrait":n??r}function Eq(e){const{props:n,valueManager:r,validator:s}=e,{value:o,defaultValue:i,onChange:l,referenceDate:d,timezone:u,onAccept:h,closeOnSelect:f,open:p,onOpen:g,onClose:b}=n,{current:y}=x.useRef(i),{current:S}=x.useRef(o!==void 0),{current:j}=x.useRef(p!==void 0),P=Ut(),{timezone:w,value:I,handleValueChange:T}=ya({name:"a picker component",timezone:u,value:o,defaultValue:y,referenceDate:d,onChange:l,valueManager:r}),[D,R]=x.useState(()=>({open:!1,lastExternalValue:I,clockShallowValue:void 0,lastCommittedValue:I,hasBeenModifiedSinceMount:!1})),{getValidationErrorForNewValue:_}=H1({props:n,validator:s,timezone:w,value:I,onError:n.onError}),k=Ue($=>{const G=typeof $=="function"?$(D.open):$;j||R(K=>U({},K,{open:G})),G&&g&&g(),G||b==null||b()}),N=Ue(($,G)=>{const{changeImportance:K="accept",skipPublicationIfPristine:J=!1,validationError:q,shortcut:Q,shouldClose:Y=K==="accept"}=G??{};let oe,V;!J&&!S&&!D.hasBeenModifiedSinceMount?(oe=!0,V=K==="accept"):(oe=!r.areValuesEqual(P,$,I),V=K==="accept"&&!r.areValuesEqual(P,$,D.lastCommittedValue)),R(be=>U({},be,{clockShallowValue:oe?void 0:be.clockShallowValue,lastCommittedValue:V?I:be.lastCommittedValue,hasBeenModifiedSinceMount:!0}));let Z=null;const Ee=()=>(Z||(Z={validationError:q??_($)},Q&&(Z.shortcut=Q)),Z);oe&&T($,Ee()),V&&h&&h($,Ee()),Y&&k(!1)});I!==D.lastExternalValue&&R($=>U({},$,{lastExternalValue:I,clockShallowValue:void 0,hasBeenModifiedSinceMount:!0}));const L=Ue(($,G="partial")=>{if(G==="shallow"){R(K=>U({},K,{clockShallowValue:$,hasBeenModifiedSinceMount:!0}));return}N($,{changeImportance:G==="finish"&&f?"accept":"set"})});x.useEffect(()=>{if(j){if(p===void 0)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");R($=>U({},$,{open:p}))}},[j,p]);const z=x.useMemo(()=>r.cleanValue(P,D.clockShallowValue===void 0?I:D.clockShallowValue),[P,r,D.clockShallowValue,I]);return{timezone:w,state:D,setValue:N,setValueFromView:L,setOpen:k,value:I,viewValue:z}}const Iq=["className","sx"],mC=({ref:e,props:n,valueManager:r,valueType:s,variant:o,validator:i,onPopperExited:l,autoFocusView:d,rendererInterceptor:u,localeText:h,viewContainerRole:f,getStepNavigation:p})=>{const{views:g,view:b,openTo:y,onViewChange:S,viewRenderers:j,reduceAnimations:P,orientation:w,disableOpenPicker:I,closeOnSelect:T,disabled:D,readOnly:R,formatDensity:_,enableAccessibleFieldDOMStructure:k,selectedSections:N,onSelectedSectionsChange:L,format:z,label:$,autoFocus:G,name:K}=n,{className:J,sx:q}=n,Q=it(n,Iq),Y=cu(),oe=Ut(),V=ba(),Z=hC(P),Ee=Pq(g,w),{current:be}=x.useRef(y??null),[ae,ee]=x.useState(null),Ce=x.useRef(null),Ae=x.useRef(null),We=x.useRef(null),ye=cr(e,We),{timezone:ie,state:le,setOpen:se,setValue:ge,setValueFromView:pe,value:ke,viewValue:ne}=Eq({props:n,valueManager:r,validator:i}),{view:_e,setView:de,defaultView:Se,focusedView:Pe,setFocusedView:B,setValueAndGoToNextView:Me,goToNextStep:qe,hasNextStep:Cn,hasSeveralSteps:tn}=uu({view:b,views:g,openTo:y,onChange:pe,onViewChange:S,autoFocus:d,getStepNavigation:p}),Nt=Ue(()=>ge(r.emptyValue)),hn=Ue(()=>ge(r.getTodayValue(oe,ie,s))),Un=Ue(()=>ge(ke)),ft=Ue(()=>ge(le.lastCommittedValue,{skipPublicationIfPristine:!0})),vt=Ue(()=>{ge(ke,{skipPublicationIfPristine:!0})}),{hasUIView:kt,viewModeLookup:Jt,timeViewsCount:On}=x.useMemo(()=>g.reduce((vn,Dr)=>{const kl=j[Dr]==null?"field":"UI";return vn.viewModeLookup[Dr]=kl,kl==="UI"&&(vn.hasUIView=!0,xl(Dr)&&(vn.timeViewsCount+=1)),vn},{hasUIView:!1,viewModeLookup:{},timeViewsCount:0}),[j,g]),mn=Jt[_e],nr=Ue(()=>mn),[yn,It]=x.useState(mn==="UI"?_e:null);yn!==_e&&Jt[_e]==="UI"&&It(_e),ls(()=>{mn==="field"&&le.open&&(se(!1),setTimeout(()=>{var vn,Dr;(vn=Ae==null?void 0:Ae.current)==null||vn.setSelectedSections(_e),(Dr=Ae==null?void 0:Ae.current)==null||Dr.focusField(_e)}))},[_e]),ls(()=>{if(!le.open)return;let vn=_e;mn==="field"&&yn!=null&&(vn=yn),vn!==Se&&Jt[vn]==="UI"&&Jt[Se]==="UI"&&(vn=Se),vn!==_e&&de(vn),B(vn,!0)},[le.open]);const Mn=x.useMemo(()=>({isPickerValueEmpty:r.areValuesEqual(oe,ke,r.emptyValue),isPickerOpen:le.open,isPickerDisabled:n.disabled??!1,isPickerReadOnly:n.readOnly??!1,pickerOrientation:Ee,pickerVariant:o}),[oe,r,ke,le.open,Ee,o,n.disabled,n.readOnly]),qn=x.useMemo(()=>I||!kt?"hidden":D||R?"disabled":"enabled",[I,kt,D,R]),Tr=Ue(qe),Bo=x.useMemo(()=>T&&!tn?[]:["cancel","nextOrAccept"],[T,tn]),ur=x.useMemo(()=>({setValue:ge,setOpen:se,clearValue:Nt,setValueToToday:hn,acceptValueChanges:Un,cancelValueChanges:ft,setView:de,goToNextStep:Tr}),[ge,se,Nt,hn,Un,ft,de,Tr]),gu=x.useMemo(()=>U({},ur,{value:ke,timezone:ie,open:le.open,views:g,view:yn,initialView:be,disabled:D??!1,readOnly:R??!1,autoFocus:G??!1,variant:o,orientation:Ee,popupRef:Ce,reduceAnimations:Z,triggerRef:ee,triggerStatus:qn,hasNextStep:Cn,fieldFormat:z??"",name:K,label:$,rootSx:q,rootRef:ye,rootClassName:J}),[ur,ke,ye,o,Ee,Z,D,R,z,J,K,$,q,qn,Cn,ie,le.open,yn,g,be,G]),bu=x.useMemo(()=>({dismissViews:vt,ownerState:Mn,hasUIView:kt,getCurrentViewMode:nr,rootRefObject:We,labelId:Y,triggerElement:ae,viewContainerRole:f,defaultActionBarActions:Bo,onPopperExited:l}),[vt,Mn,kt,nr,Y,ae,f,Bo,l]),yu=x.useMemo(()=>({formatDensity:_,enableAccessibleFieldDOMStructure:k,selectedSections:N,onSelectedSectionsChange:L,fieldRef:Ae}),[_,k,N,L,Ae]);return{providerProps:{localeText:h,contextValue:gu,privateContextValue:bu,actionsContextValue:ur,fieldPrivateContextValue:yu,isValidContextValue:vn=>{const Dr=i({adapter:V,value:vn,timezone:ie,props:n});return!r.hasError(Dr)}},renderCurrentView:()=>{if(yn==null)return null;const vn=j[yn];if(vn==null)return null;const Dr=U({},Q,{views:g,timezone:ie,value:ne,onChange:Me,view:yn,onViewChange:de,showViewSwitcher:On>1,timeViewsCount:On},f==="tooltip"?{focusedView:null,onFocusedViewChange:()=>{}}:{focusedView:Pe,onFocusedViewChange:B});return u?t.jsx(u,{viewRenderers:j,popperView:yn,rendererProps:Dr}):vn(Dr)},ownerState:Mn}};function xC(e){return un("MuiPickersLayout",e)}const xs=pn("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","tabs","shortcuts"]),Tq=["actions"],Dq=Ne(qt,{name:"MuiPickersLayout",slot:"ActionBar"})({});function Aq(e){const{actions:n}=e,r=it(e,Tq),s=Is(),{clearValue:o,setValueToToday:i,acceptValueChanges:l,cancelValueChanges:d,goToNextStep:u,hasNextStep:h}=Fo();if(n==null||n.length===0)return null;const f=n==null?void 0:n.map(p=>{switch(p){case"clear":return t.jsx(ce,{onClick:o,children:s.clearButtonLabel},p);case"cancel":return t.jsx(ce,{onClick:d,children:s.cancelButtonLabel},p);case"accept":return t.jsx(ce,{onClick:l,children:s.okButtonLabel},p);case"today":return t.jsx(ce,{onClick:i,children:s.todayButtonLabel},p);case"next":return t.jsx(ce,{onClick:u,children:s.nextStepButtonLabel},p);case"nextOrAccept":return h?t.jsx(ce,{onClick:u,children:s.nextStepButtonLabel},p):t.jsx(ce,{onClick:l,children:s.okButtonLabel},p);default:return null}});return t.jsx(Dq,U({},r,{children:f}))}const Rq=x.memo(Aq),kq=["items","changeImportance"],_q=["getValue"],Oq=Ne(br,{name:"MuiPickersLayout",slot:"Shortcuts"})({});function Mq(e){const{items:n,changeImportance:r="accept"}=e,s=it(e,kq),{setValue:o}=F7(),i=S9();if(n==null||n.length===0)return null;const l=n.map(d=>{let{getValue:u}=d,h=it(d,_q);const f=u({isValid:i});return U({},h,{label:h.label,onClick:()=>{o(f,{changeImportance:r,shortcut:h})},disabled:!i(f)})});return t.jsx(Oq,U({dense:!0,sx:[{maxHeight:li,maxWidth:200,overflow:"auto"},...Array.isArray(s.sx)?s.sx:[s.sx]]},s,{children:l.map(d=>t.jsx(ir,{children:t.jsx(Xe,U({},d))},d.id??d.label))}))}const Nq=["ownerState"];function Lq(e){return e.view!==null}const $q=(e,n)=>{const{pickerOrientation:r}=n;return en({root:["root",r==="landscape"&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]},xC,e)},gC=e=>{const{ownerState:n,defaultActionBarActions:r}=_n(),{view:s}=Fo(),o=Vs(),{children:i,slots:l,slotProps:d,classes:u}=e,h=x.useMemo(()=>U({},n,{layoutDirection:o?"rtl":"ltr"}),[n,o]),f=$q(u,h),p=(l==null?void 0:l.actionBar)??Rq,g=$t({elementType:p,externalSlotProps:d==null?void 0:d.actionBar,additionalProps:{actions:r},className:f.actionBar,ownerState:h}),b=it(g,Nq),y=t.jsx(p,U({},b)),S=l==null?void 0:l.toolbar,j=$t({elementType:S,externalSlotProps:d==null?void 0:d.toolbar,className:f.toolbar,ownerState:h}),P=Lq(j)&&S?t.jsx(S,U({},j)):null,w=i,I=l==null?void 0:l.tabs,T=s&&I?t.jsx(I,U({className:f.tabs},d==null?void 0:d.tabs)):null,D=(l==null?void 0:l.shortcuts)??Mq,R=$t({elementType:D,externalSlotProps:d==null?void 0:d.shortcuts,className:f.shortcuts,ownerState:h}),_=s&&D?t.jsx(D,U({},R)):null;return{toolbar:P,content:w,tabs:T,actionBar:y,shortcuts:_,ownerState:h}},Fq=(e,n)=>{const{pickerOrientation:r}=n;return en({root:["root",r==="landscape"&&"landscape"],contentWrapper:["contentWrapper"]},xC,e)},bC=Ne("div",{name:"MuiPickersLayout",slot:"Root"})({display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${xs.actionBar}`]:{gridColumn:"1 / 4",gridRow:3},variants:[{props:{pickerOrientation:"landscape"},style:{[`& .${xs.toolbar}`]:{gridColumn:1,gridRow:"2 / 3"},[`.${xs.shortcuts}`]:{gridColumn:"2 / 4",gridRow:1}}},{props:{pickerOrientation:"landscape",layoutDirection:"rtl"},style:{[`& .${xs.toolbar}`]:{gridColumn:3}}},{props:{pickerOrientation:"portrait"},style:{[`& .${xs.toolbar}`]:{gridColumn:"2 / 4",gridRow:1},[`& .${xs.shortcuts}`]:{gridColumn:1,gridRow:"2 / 3"}}},{props:{pickerOrientation:"portrait",layoutDirection:"rtl"},style:{[`& .${xs.shortcuts}`]:{gridColumn:3}}}]}),yC=Ne("div",{name:"MuiPickersLayout",slot:"ContentWrapper"})({gridColumn:"2 / 4",gridRow:2,display:"flex",flexDirection:"column"}),vC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersLayout"}),{toolbar:o,content:i,tabs:l,actionBar:d,shortcuts:u,ownerState:h}=gC(s),{orientation:f,variant:p}=Fo(),{sx:g,className:b,classes:y}=s,S=Fq(y,h);return t.jsxs(bC,{ref:r,sx:g,className:rn(S.root,b),ownerState:h,children:[f==="landscape"?u:o,f==="landscape"?o:u,t.jsx(yC,{className:S.contentWrapper,ownerState:h,children:p==="desktop"?t.jsxs(x.Fragment,{children:[i,l]}):t.jsxs(x.Fragment,{children:[l,i]})}),d]})});function jC(e){const{steps:n}=e;return O9({steps:n,isViewMatchingStep:(r,s)=>s.views==null||s.views.includes(r),onStepChange:({step:r,defaultView:s,setView:o,view:i,views:l})=>{const d=r.views==null?s:r.views.find(u=>l.includes(u));d!==i&&o(d)}})}const Wq=["props","steps"],Bq=["ownerState"],Vq=e=>{var R;let{props:n,steps:r}=e,s=it(e,Wq);const{slots:o,slotProps:i,label:l,inputRef:d,localeText:u}=n,h=jC({steps:r}),{providerProps:f,renderCurrentView:p,ownerState:g}=mC(U({},s,{props:n,localeText:u,autoFocusView:!0,viewContainerRole:"dialog",variant:"desktop",getStepNavigation:h})),b=f.privateContextValue.labelId,y=((R=i==null?void 0:i.toolbar)==null?void 0:R.hidden)??!1,S=o.field,j=$t({elementType:S,externalSlotProps:i==null?void 0:i.field,additionalProps:U({},y&&{id:b}),ownerState:g}),P=it(j,Bq),w=o.layout??vC;let I=b;y&&(l?I=`${b}-label`:I=void 0);const T=U({},i,{toolbar:U({},i==null?void 0:i.toolbar,{titleId:b}),popper:U({"aria-labelledby":I},i==null?void 0:i.popper)});return{renderPicker:()=>t.jsx(E1,U({},f,{children:t.jsxs(oC,{slots:o,slotProps:T,inputRef:d,children:[t.jsx(S,U({},P)),t.jsx(Cq,{slots:o,slotProps:T,children:t.jsx(w,U({},T==null?void 0:T.layout,{slots:o,slotProps:T,children:p()}))})]})}))}},Ya=({view:e,onViewChange:n,views:r,focusedView:s,onFocusedViewChange:o,value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minDate:b,maxDate:y,shouldDisableDate:S,shouldDisableMonth:j,shouldDisableYear:P,reduceAnimations:w,onMonthChange:I,monthsPerRow:T,onYearChange:D,yearsOrder:R,yearsPerRow:_,slots:k,slotProps:N,loading:L,renderLoading:z,disableHighlightToday:$,readOnly:G,disabled:K,showDaysOutsideCurrentMonth:J,dayOfWeekFormatter:q,sx:Q,autoFocus:Y,fixedWeekNumber:oe,displayWeekNumber:V,timezone:Z})=>t.jsx(cq,{view:e,onViewChange:n,views:r.filter(ci),focusedView:s&&ci(s)?s:null,onFocusedViewChange:o,value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minDate:b,maxDate:y,shouldDisableDate:S,shouldDisableMonth:j,shouldDisableYear:P,reduceAnimations:w,onMonthChange:I,monthsPerRow:T,onYearChange:D,yearsOrder:R,yearsPerRow:_,slots:k,slotProps:N,loading:L,renderLoading:z,disableHighlightToday:$,readOnly:G,disabled:K,showDaysOutsideCurrentMonth:J,dayOfWeekFormatter:q,sx:Q,autoFocus:Y,fixedWeekNumber:oe,displayWeekNumber:V,timezone:Z}),Uq=Ne(Gt)({[`& .${xy.container}`]:{outline:0},[`& .${xy.paper}`]:{outline:0,minWidth:ii}}),zq=Ne(Yt)({"&:first-of-type":{padding:0}});function Hq(e){const{children:n,slots:r,slotProps:s}=e,{open:o}=Fo(),{dismissViews:i,onPopperExited:l}=_n(),d=(r==null?void 0:r.dialog)??Uq,u=(r==null?void 0:r.mobileTransition)??kd;return t.jsx(d,U({open:o,onClose:()=>{i(),l==null||l()}},s==null?void 0:s.dialog,{TransitionComponent:u,TransitionProps:s==null?void 0:s.mobileTransition,PaperComponent:r==null?void 0:r.mobilePaper,PaperProps:s==null?void 0:s.mobilePaper,children:t.jsx(zq,{children:n})}))}const Gq=["props","steps"],Yq=["ownerState"],qq=e=>{var R;let{props:n,steps:r}=e,s=it(e,Gq);const{slots:o,slotProps:i,label:l,inputRef:d,localeText:u}=n,h=jC({steps:r}),{providerProps:f,renderCurrentView:p,ownerState:g}=mC(U({},s,{props:n,localeText:u,autoFocusView:!0,viewContainerRole:"dialog",variant:"mobile",getStepNavigation:h})),b=f.privateContextValue.labelId,y=((R=i==null?void 0:i.toolbar)==null?void 0:R.hidden)??!1,S=o.field,j=$t({elementType:S,externalSlotProps:i==null?void 0:i.field,additionalProps:U({},y&&{id:b}),ownerState:g}),P=it(j,Yq),w=o.layout??vC;let I=b;y&&(l?I=`${b}-label`:I=void 0);const T=U({},i,{toolbar:U({},i==null?void 0:i.toolbar,{titleId:b}),mobilePaper:U({"aria-labelledby":I},i==null?void 0:i.mobilePaper)});return{renderPicker:()=>t.jsx(E1,U({},f,{children:t.jsxs(oC,{slots:o,slotProps:T,inputRef:d,children:[t.jsx(S,U({},P)),t.jsx(Hq,{slots:o,slotProps:T,children:t.jsx(w,U({},T==null?void 0:T.layout,{slots:o,slotProps:T,children:p()}))})]})}))}};function Kq(e){return un("MuiPickersToolbarText",e)}const Jq=pn("MuiPickersToolbarText",["root"]),Xq=["className","classes","selected","value"],Qq=e=>en({root:["root"]},Kq,e),Zq=Ne(v,{name:"MuiPickersToolbarText",slot:"Root"})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,"&[data-selected]":{color:(e.vars||e).palette.text.primary}})),SC=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersToolbarText"}),{className:o,classes:i,selected:l,value:d}=s,u=it(s,Xq),h=Qq(i);return t.jsx(Zq,U({ref:r,className:rn(h.root,o),component:"span",ownerState:s},l&&{"data-selected":!0},u,{children:d}))}),eK=["align","className","classes","selected","typographyClassName","value","variant","width"],tK=e=>en({root:["root"]},fC,e),nK=Ne(ce,{name:"MuiPickersToolbarButton",slot:"Root"})({padding:0,minWidth:16,textTransform:"none"}),Co=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiPickersToolbarButton"}),{align:o,className:i,classes:l,selected:d,typographyClassName:u,value:h,variant:f,width:p}=s,g=it(s,eK),b=tK(l);return t.jsx(nK,U({variant:"text",ref:r,className:rn(b.root,i),ownerState:s},p?{sx:{width:p}}:{},g,{children:t.jsx(SC,{align:o,className:u,variant:f,value:h,selected:d})}))}),wC=({view:e,onViewChange:n,focusedView:r,onFocusedViewChange:s,views:o,value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minTime:b,maxTime:y,shouldDisableTime:S,minutesStep:j,ampm:P,slots:w,slotProps:I,readOnly:T,disabled:D,sx:R,autoFocus:_,disableIgnoringDatePartForTimeValidation:k,timeSteps:N,skipDisabled:L,timezone:z})=>t.jsx(u7,{view:e,onViewChange:n,focusedView:r&&xl(r)?r:null,onFocusedViewChange:s,views:o.filter(xl),value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minTime:b,maxTime:y,shouldDisableTime:S,minutesStep:j,ampm:P,slots:w,slotProps:I,readOnly:T,disabled:D,sx:R,autoFocus:_,disableIgnoringDatePartForTimeValidation:k,timeStep:N==null?void 0:N.minutes,skipDisabled:L,timezone:z}),Pd=({view:e,onViewChange:n,focusedView:r,onFocusedViewChange:s,views:o,value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minTime:b,maxTime:y,shouldDisableTime:S,minutesStep:j,ampm:P,slots:w,slotProps:I,readOnly:T,disabled:D,sx:R,autoFocus:_,disableIgnoringDatePartForTimeValidation:k,timeSteps:N,skipDisabled:L,timezone:z})=>t.jsx(w7,{view:e,onViewChange:n,focusedView:r&&Fa(r)?r:null,onFocusedViewChange:s,views:o.filter(xl),value:i,defaultValue:l,referenceDate:d,onChange:u,className:h,classes:f,disableFuture:p,disablePast:g,minTime:b,maxTime:y,shouldDisableTime:S,minutesStep:j,ampm:P,slots:w,slotProps:I,readOnly:T,disabled:D,sx:R,autoFocus:_,disableIgnoringDatePartForTimeValidation:k,timeSteps:N,skipDisabled:L,timezone:z}),rK=["views","format"],CC=(e,n,r)=>{let{views:s,format:o}=n,i=it(n,rK);if(o)return o;const l=[],d=[];if(s.forEach(f=>{xl(f)?d.push(f):ci(f)&&l.push(f)}),d.length===0)return dv(e,U({views:l},i));if(l.length===0)return cv(e,U({views:d},i));const u=cv(e,U({views:d},i));return`${dv(e,U({views:l},i))} ${u}`},sK=(e,n,r)=>r?n.filter(s=>!Fa(s)||s==="hours"):e?[...n,"meridiem"]:n,oK=(e,n)=>24*60/((e.hours??1)*(e.minutes??5))<=n;function aK({thresholdToRenderTimeInASingleColumn:e,ampm:n,timeSteps:r,views:s}){const o=e??24,i=U({hours:1,minutes:5,seconds:5},r),l=oK(i,o);return{thresholdToRenderTimeInASingleColumn:o,timeSteps:i,shouldRenderTimeInASingleColumn:l,views:sK(n,s,l)}}function iK(e){return un("MuiDateTimePickerTabs",e)}pn("MuiDateTimePickerTabs",["root"]);const lK=e=>ci(e)?"date":"time",cK=e=>e==="date"?"day":"hours",dK=e=>en({root:["root"]},iK,e),uK=Ne(Bs,{name:"MuiDateTimePickerTabs",slot:"Root"})(({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${JR.indicator}`]:{bottom:"auto",top:0}}})),hK=function(n){const r=Kt({props:n,name:"MuiDateTimePickerTabs"}),{dateIcon:s=t.jsx(b9,{}),timeIcon:o=t.jsx(y9,{}),hidden:i=typeof window>"u"||window.innerHeight<667,className:l,classes:d,sx:u}=r,h=Is(),{ownerState:f}=_n(),{view:p,setView:g}=Fo(),b=dK(d),y=(S,j)=>{g(cK(j))};return i?null:t.jsxs(uK,{ownerState:f,variant:"fullWidth",value:lK(p),onChange:y,className:rn(l,b.root),sx:u,children:[t.jsx(An,{value:"date","aria-label":h.dateTableLabel,icon:t.jsx(x.Fragment,{children:s})}),t.jsx(An,{value:"time","aria-label":h.timeTableLabel,icon:t.jsx(x.Fragment,{children:o})})]})};function fK(e){return un("MuiDateTimePickerToolbar",e)}const ff=pn("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),pK=["ampm","ampmInClock","toolbarFormat","toolbarPlaceholder","toolbarTitle","className","classes"],mK=(e,n)=>{const{pickerOrientation:r,toolbarDirection:s}=n;return en({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",s==="rtl"&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",s==="rtl"&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",r==="landscape"&&"ampmLandscape"],ampmLabel:["ampmLabel"]},fK,e)},xK=Ne(mq,{name:"MuiDateTimePickerToolbar",slot:"Root",shouldForwardProp:e=>lo(e)&&e!=="toolbarVariant"})(({theme:e})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,[`& .${dq.content} .${Jq.root}[data-selected]`]:{color:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",pickerOrientation:"landscape"},style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{paddingLeft:24,paddingRight:0}}]})),gK=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer"})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),bK=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",shouldForwardProp:e=>lo(e)&&e!=="toolbarVariant"})({display:"flex",flexDirection:"row",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",pickerOrientation:"portrait"},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({pickerOrientation:e,toolbarVariant:n})=>e==="landscape"&&n!=="desktop",style:{flexDirection:"column"}},{props:({pickerOrientation:e,toolbarVariant:n,toolbarDirection:r})=>e==="landscape"&&n!=="desktop"&&r==="rtl",style:{flexDirection:"column-reverse"}}]}),yK=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",shouldForwardProp:e=>lo(e)&&e!=="toolbarVariant"})({display:"flex",variants:[{props:{toolbarDirection:"rtl"},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),Ev=Ne(SC,{name:"MuiDateTimePickerToolbar",slot:"Separator",shouldForwardProp:e=>lo(e)&&e!=="toolbarVariant"})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),vK=Ne("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,n)=>[{[`.${ff.ampmLabel}`]:n.ampmLabel},{[`&.${ff.ampmLandscape}`]:n.ampmLandscape},n.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${ff.ampmLabel}`]:{fontSize:17},variants:[{props:{pickerOrientation:"landscape"},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]}),jK=x.createContext(null);function SK(e){const n=Kt({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:r,ampmInClock:s,toolbarFormat:o,toolbarPlaceholder:i="",toolbarTitle:l,className:d,classes:u}=n,h=it(n,pK),{value:f,setValue:p,disabled:g,readOnly:b,variant:y,orientation:S,view:j,setView:P,views:w}=Fo(),I=Is(),T=pC(),D=mK(u,T),R=Ut(),_=x.useContext(jK),k=_?_.value:f,N=_?_.setValue:p,L=_?_.view:j,z=_?_.setView:P,{meridiemMode:$,handleMeridiemChange:G}=D1(k,r,V=>N(V,{changeImportance:"set"})),K=_!=null&&_.forceDesktopVariant?"desktop":y,J=K==="desktop",q=!!(r&&!s),Q=l??I.dateTimePickerToolbarTitle,Y=x.useMemo(()=>R.isValid(k)?o?R.formatByString(k,o):R.format(k,"shortDate"):i,[k,o,i,R]),oe=(V,Z)=>R.isValid(k)?R.format(k,V):Z;return t.jsxs(xK,U({className:rn(D.root,d),toolbarTitle:Q,toolbarVariant:K},h,{ownerState:T,children:[t.jsxs(gK,{className:D.dateContainer,ownerState:T,children:[w.includes("year")&&t.jsx(Co,{tabIndex:-1,variant:"subtitle1",onClick:()=>z("year"),selected:L==="year",value:oe("year","")}),w.includes("day")&&t.jsx(Co,{tabIndex:-1,variant:J?"h5":"h4",onClick:()=>z("day"),selected:L==="day",value:Y})]}),t.jsxs(bK,{className:D.timeContainer,ownerState:T,toolbarVariant:K,children:[t.jsxs(yK,{className:D.timeDigitsContainer,ownerState:T,toolbarVariant:K,children:[w.includes("hours")&&t.jsxs(x.Fragment,{children:[t.jsx(Co,{variant:J?"h5":"h3",width:J&&S==="portrait"?Yi:void 0,onClick:()=>z("hours"),selected:L==="hours",value:oe(r?"hours12h":"hours24h","--")}),t.jsx(Ev,{variant:J?"h5":"h3",value:":",className:D.separator,ownerState:T,toolbarVariant:K}),t.jsx(Co,{variant:J?"h5":"h3",width:J&&S==="portrait"?Yi:void 0,onClick:()=>z("minutes"),selected:L==="minutes"||!w.includes("minutes")&&L==="hours",value:oe("minutes","--"),disabled:!w.includes("minutes")})]}),w.includes("seconds")&&t.jsxs(x.Fragment,{children:[t.jsx(Ev,{variant:J?"h5":"h3",value:":",className:D.separator,ownerState:T,toolbarVariant:K}),t.jsx(Co,{variant:J?"h5":"h3",width:J&&S==="portrait"?Yi:void 0,onClick:()=>z("seconds"),selected:L==="seconds",value:oe("seconds","--")})]})]}),q&&!J&&t.jsxs(vK,{className:D.ampmSelection,ownerState:T,children:[t.jsx(Co,{variant:"subtitle2",selected:$==="am",typographyClassName:D.ampmLabel,value:Zi(R,"am"),onClick:b?void 0:()=>G("am"),disabled:g}),t.jsx(Co,{variant:"subtitle2",selected:$==="pm",typographyClassName:D.ampmLabel,value:Zi(R,"pm"),onClick:b?void 0:()=>G("pm"),disabled:g})]}),r&&J&&t.jsx(Co,{variant:"h5",onClick:()=>z("meridiem"),selected:L==="meridiem",value:k&&$?Zi(R,$):"--",width:Yi})]})]}))}function PC(e,n){var b;const r=Ut(),s=Kt({props:e,name:n}),o=K1(s),i=s.ampm??r.is12HourCycleInCurrentLocale(),l=x.useMemo(()=>{var y;return((y=s.localeText)==null?void 0:y.toolbarTitle)==null?s.localeText:U({},s.localeText,{dateTimePickerToolbarTitle:s.localeText.toolbarTitle})},[s.localeText]),{openTo:d,views:u}=A9({views:s.views,openTo:s.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{shouldRenderTimeInASingleColumn:h,thresholdToRenderTimeInASingleColumn:f,views:p,timeSteps:g}=aK({thresholdToRenderTimeInASingleColumn:s.thresholdToRenderTimeInASingleColumn,ampm:i,timeSteps:s.timeSteps,views:u});return U({},s,o,{timeSteps:g,openTo:d,shouldRenderTimeInASingleColumn:h,thresholdToRenderTimeInASingleColumn:f,views:p,ampm:i,localeText:l,orientation:s.orientation??"portrait",slots:U({toolbar:SK,tabs:hK},s.slots),slotProps:U({},s.slotProps,{toolbar:U({ampm:i},(b=s.slotProps)==null?void 0:b.toolbar)})})}const wK=x.forwardRef(function(n,r){var y;const{toolbar:s,tabs:o,content:i,actionBar:l,shortcuts:d,ownerState:u}=gC(n),{orientation:h}=Fo(),{sx:f,className:p,classes:g}=n,b=l&&(((y=l.props.actions)==null?void 0:y.length)??0)>0;return t.jsxs(bC,{ref:r,className:rn(xs.root,g==null?void 0:g.root,p),sx:[{[`& .${xs.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${xs.actionBar}`]:{gridRow:5}},...Array.isArray(f)?f:[f]],ownerState:u,children:[h==="landscape"?d:s,h==="landscape"?s:d,t.jsxs(yC,{className:rn(xs.contentWrapper,g==null?void 0:g.contentWrapper),ownerState:u,sx:{display:"grid"},children:[i,o,b&&t.jsx(Mt,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),l]})}),CK=["openTo","focusedView","timeViewsCount"],PK=function(n){var b,y;const{viewRenderers:r,popperView:s,rendererProps:o}=n,{openTo:i,focusedView:l,timeViewsCount:d}=o,u=it(o,CK),h=U({},u,{autoFocus:!1,focusedView:null,sx:[{[`&.${Hf.root}`]:{borderBottom:0},[`&.${Hf.root}, .${Gf.root}, &.${zf.root}`]:{maxHeight:li}}]}),f=Fa(s),p=f?"day":s,g=f?s:"hours";return t.jsxs(x.Fragment,{children:[(b=r[p])==null?void 0:b.call(r,U({},o,{view:f?"day":s,focusedView:l&&ci(l)?l:null,views:o.views.filter(ci),sx:[{gridColumn:1},...h.sx]})),d>0&&t.jsxs(x.Fragment,{children:[t.jsx(Mt,{orientation:"vertical",sx:{gridColumn:2}}),(y=r[g])==null?void 0:y.call(r,U({},h,{view:f?s:"hours",focusedView:l&&Fa(l)?l:null,openTo:Fa(i)?i:"hours",views:o.views.filter(Fa),sx:[{gridColumn:3},...h.sx]}))]})]})},EC=x.forwardRef(function(n,r){var g,b,y;const s=Ut(),o=PC(n,"MuiDesktopDateTimePicker"),i=o.shouldRenderTimeInASingleColumn?wC:Pd,l=U({day:Ya,month:Ya,year:Ya,hours:i,minutes:i,seconds:i,meridiem:i},o.viewRenderers),d=o.ampmInClock??!0,h=((g=l.hours)==null?void 0:g.name)===Pd.name?o.views:o.views.filter(S=>S!=="meridiem"),f=U({},o,{viewRenderers:l,format:CC(s,o),views:h,yearsPerRow:o.yearsPerRow??4,ampmInClock:d,slots:U({field:aC,layout:wK},o.slots),slotProps:U({},o.slotProps,{field:S=>{var j;return U({},ml((j=o.slotProps)==null?void 0:j.field,S),B1(o))},toolbar:U({hidden:!0,ampmInClock:d},(b=o.slotProps)==null?void 0:b.toolbar),tabs:U({hidden:!0},(y=o.slotProps)==null?void 0:y.tabs)})}),{renderPicker:p}=Vq({ref:r,props:f,valueManager:yr,valueType:"date-time",validator:pu,rendererInterceptor:PK,steps:null});return p()});EC.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:g1,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,maxDateTime:re.object,maxTime:re.object,minDate:re.object,minDateTime:re.object,minTime:re.object,minutesStep:re.number,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableTime:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,skipDisabled:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),thresholdToRenderTimeInASingleColumn:re.number,timeSteps:re.shape({hours:re.number,minutes:re.number,seconds:re.number}),timezone:re.string,value:re.object,view:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:re.shape({day:re.func,hours:re.func,meridiem:re.func,minutes:re.func,month:re.func,seconds:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const EK=[{views:R1},{views:I1}],IC=x.forwardRef(function(n,r){var g,b,y,S,j,P;const s=Ut(),o=PC(n,"MuiMobileDateTimePicker"),i=o.shouldRenderTimeInASingleColumn?wC:Pd,l=U({day:Ya,month:Ya,year:Ya,hours:i,minutes:i,seconds:i,meridiem:i},o.viewRenderers),d=o.ampmInClock??!1,h=((g=l.hours)==null?void 0:g.name)===Pd.name?o.views:o.views.filter(w=>w!=="meridiem"),f=U({},o,{viewRenderers:l,format:CC(s,o),views:h,ampmInClock:d,slots:U({field:aC},o.slots),slotProps:U({},o.slotProps,{field:w=>{var I;return U({},ml((I=o.slotProps)==null?void 0:I.field,w),B1(o))},toolbar:U({hidden:!1,ampmInClock:d},(b=o.slotProps)==null?void 0:b.toolbar),tabs:U({hidden:!1},(y=o.slotProps)==null?void 0:y.tabs),layout:U({},(S=o.slotProps)==null?void 0:S.layout,{sx:o7([{[`& .${Hf.root}`]:{width:ii},[`& .${Gf.root}`]:{flex:1,maxHeight:li-1,[`.${Gf.item}`]:{width:"auto"}},[`& .${zf.root}`]:{width:ii,maxHeight:li,flex:1,[`.${zf.item}`]:{justifyContent:"center"}}}],(P=(j=o.slotProps)==null?void 0:j.layout)==null?void 0:P.sx)})})}),{renderPicker:p}=qq({ref:r,props:f,valueManager:yr,valueType:"date-time",validator:pu,steps:EK});return p()});IC.propTypes={ampm:re.bool,ampmInClock:re.bool,autoFocus:re.bool,className:re.string,closeOnSelect:re.bool,dayOfWeekFormatter:re.func,defaultValue:re.object,disabled:re.bool,disableFuture:re.bool,disableHighlightToday:re.bool,disableIgnoringDatePartForTimeValidation:re.bool,disableOpenPicker:re.bool,disablePast:re.bool,displayWeekNumber:re.bool,enableAccessibleFieldDOMStructure:re.any,fixedWeekNumber:re.number,format:re.string,formatDensity:re.oneOf(["dense","spacious"]),inputRef:g1,label:re.node,loading:re.bool,localeText:re.object,maxDate:re.object,maxDateTime:re.object,maxTime:re.object,minDate:re.object,minDateTime:re.object,minTime:re.object,minutesStep:re.number,monthsPerRow:re.oneOf([3,4]),name:re.string,onAccept:re.func,onChange:re.func,onClose:re.func,onError:re.func,onMonthChange:re.func,onOpen:re.func,onSelectedSectionsChange:re.func,onViewChange:re.func,onYearChange:re.func,open:re.bool,openTo:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:re.oneOf(["landscape","portrait"]),readOnly:re.bool,reduceAnimations:re.bool,referenceDate:re.object,renderLoading:re.func,selectedSections:re.oneOfType([re.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),re.number]),shouldDisableDate:re.func,shouldDisableMonth:re.func,shouldDisableTime:re.func,shouldDisableYear:re.func,showDaysOutsideCurrentMonth:re.bool,skipDisabled:re.bool,slotProps:re.object,slots:re.object,sx:re.oneOfType([re.arrayOf(re.oneOfType([re.func,re.object,re.bool])),re.func,re.object]),thresholdToRenderTimeInASingleColumn:re.number,timeSteps:re.shape({hours:re.number,minutes:re.number,seconds:re.number}),timezone:re.string,value:re.object,view:re.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:re.shape({day:re.func,hours:re.func,meridiem:re.func,minutes:re.func,month:re.func,seconds:re.func,year:re.func}),views:re.arrayOf(re.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:re.oneOf(["asc","desc"]),yearsPerRow:re.oneOf([3,4])};const IK=["desktopModeMediaQuery"],Iv=x.forwardRef(function(n,r){const s=Kt({props:n,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:o=s7}=s,i=it(s,IK);return vl(o,{defaultMatches:!0})?t.jsx(EC,U({ref:r},i)):t.jsx(IC,U({ref:r},i))}),TC=({initialData:e,onSubmit:n,submitButtonText:r="Submit",isEdit:s})=>{var j,P;const{profile:o,channelRelations:{hasChannel:i}}=Es(),l=xt(),[d,u]=x.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",startDate:(e==null?void 0:e.startDate)||new Date,endDate:(e==null?void 0:e.endDate)||new Date,channelId:(e==null?void 0:e.channelId)||"",options:(e==null?void 0:e.options)||[{text:""},{text:""}],media:(e==null?void 0:e.media)||[]}),[h,f]=x.useState(((j=e==null?void 0:e.media)==null?void 0:j.find(w=>w.type===h0.COVER))||null);x.useEffect(()=>{o&&(!o.staffChannels||o.staffChannels.length)},[o]);const p=(w,I)=>{u(T=>({...T,[w]:I}))},g=(w,I)=>{const T=[...d.options];T[w]={text:I},p("options",T)},b=()=>{p("options",[...d.options,{text:""}])},y=w=>{if(d.options.length<=2)return;const I=d.options.filter((T,D)=>D!==w);p("options",I)},S=w=>{w.preventDefault();const I={...d,media:h?[h]:[]};n(I)};return i()?t.jsx(C,{component:"form",onSubmit:S,children:t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,children:t.jsxs(ht,{fullWidth:!0,disabled:s,children:[t.jsx(Ct,{id:"channel-select-label",children:"Channel"}),t.jsx(mt,{labelId:"channel-select-label",value:d.channelId,label:"Channel",onChange:w=>p("channelId",w.target.value),required:!0,children:(P=o==null?void 0:o.staffChannels)==null?void 0:P.map(w=>t.jsx(je,{value:w.channelId,children:w.channel.name},w.id))})]})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,label:"Poll Title",value:d.title,onChange:w=>p("title",w.target.value),required:!0})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(et,{fullWidth:!0,label:"Description",value:d.description,onChange:w=>p("description",w.target.value),multiline:!0,rows:4})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(Iv,{label:"Start Date",value:d.startDate,onChange:w=>p("startDate",w),sx:{width:"100%"}})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(Iv,{label:"End Date",value:d.endDate,onChange:w=>p("endDate",w),sx:{width:"100%"}})}),t.jsx(F,{item:!0,xs:12,children:t.jsxs(rt,{sx:{p:3,mb:2},children:[t.jsx(v,{variant:"h6",sx:{mb:3},children:"Media"}),t.jsx(me,{spacing:4,children:t.jsx(C,{children:t.jsx(QS,{title:"Cover Media",description:"Upload an image or short video that will be displayed with your poll and in previews.",value:h?{id:h.id||"0",url:h.url,type:h.type,format:h.format}:null,onChange:w=>f(w?{id:w.id,url:w.url,type:w.type,format:w.format,pollId:""}:null),mediaTypeId:h0.COVER,useNewsFormats:!1})})})]})}),t.jsx(F,{item:!0,xs:12,children:t.jsxs(rt,{sx:{p:2,mb:2},children:[t.jsx(v,{variant:"h6",sx:{mb:2},children:"Poll Options"}),d.options.map((w,I)=>t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(et,{fullWidth:!0,label:`Option ${I+1}`,value:w.text,onChange:T=>g(I,T.target.value),required:!0,sx:{mr:1}}),t.jsx(Oe,{onClick:()=>y(I),disabled:d.options.length<=2,children:t.jsx($o,{})})]},I)),t.jsx(ce,{startIcon:t.jsx(Tl,{}),onClick:b,variant:"outlined",size:"small",children:"Add Option"})]})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(ce,{type:"submit",variant:"contained",size:"large",fullWidth:!0,children:r})})]})}):t.jsx(C,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",p:3},children:t.jsx(Us,{title:"Channel Required",description:"You need to create a channel before you can start creating polls.",icon:t.jsx(Pl,{sx:{fontSize:48}}),action:{label:"Create Channel",onClick:()=>l(fe.STUDIO_CHANNEL_CREATE)}})})},TK=()=>{const{api:e}=Ye(),n=xt(),{execute:r}=Ke(),s=async o=>{if(!o)return;await r(()=>e==null?void 0:e.studio.createPoll(o),{showSuccessMessage:!0,successMessage:"Poll created successfully!"})&&n(`${fe.STUDIO_POLLS}`)};return t.jsxs(St,{sx:{maxWidth:800,mx:"auto",p:3},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Create Poll"}),t.jsx(TC,{onSubmit:s,submitButtonText:"Create Poll"})]})},DK=()=>{const{id:e}=dr(),n=xt(),{api:r}=Ye(),[s,o]=x.useState(null),{execute:i}=Ke(),{execute:l}=Ke();x.useEffect(()=>{(async()=>{if(!e)return;const h=await i(()=>r==null?void 0:r.app.poll.get(e),{showErrorToast:!0});h&&o(h)})()},[e,r==null?void 0:r.app.poll,i]);const d=async u=>{e&&(await l(()=>r==null?void 0:r.app.poll.update(e,u),{showSuccessMessage:!0,successMessage:"Poll updated successfully!"}),n(fe.STUDIO_POLL_VIEW.replace(":id",e)))};return s?t.jsxs(St,{sx:{maxWidth:800,mx:"auto",p:3},children:[t.jsx(v,{variant:"h5",sx:{fontSize:{xs:"1.125rem",sm:"1.25rem"},fontWeight:600,mb:3},children:"Edit Poll"}),t.jsx(TC,{initialData:{title:s.title,description:s.description,startDate:s.startDate,endDate:s.endDate,channelId:s.channel.id,options:s.options.map(u=>({text:u.text,id:u.id}))},onSubmit:d,submitButtonText:"Update Poll"})]}):null},AK=({poll:e})=>{const n=cn(),r=e.statistics.totalVotes;return t.jsx(C,{children:e.options.map(s=>{const o=r>0?s.votes/r*100:0;return t.jsxs(C,{sx:{mb:2},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[t.jsx(v,{variant:"body1",children:s.text}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:[s.votes," votes (",o.toFixed(1),"%)"]})]}),t.jsx(Ja,{variant:"determinate",value:o,sx:{height:8,borderRadius:1,bgcolor:he(n.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:1,bgcolor:n.palette.primary.main}}})]},s.id)})})};var Bx={},RK=Qe;Object.defineProperty(Bx,"__esModule",{value:!0});var DC=Bx.default=void 0,kK=RK(Ze()),_K=t;DC=Bx.default=(0,kK.default)((0,_K.jsx)("path",{d:"M18 13h-.68l-2 2h1.91L19 17H5l1.78-2h2.05l-2-2H6l-3 3v4c0 1.1.89 2 1.99 2H19c1.1 0 2-.89 2-2v-4zm-1-5.05-4.95 4.95-3.54-3.54 4.95-4.95zm-4.24-5.66L6.39 8.66c-.39.39-.39 1.02 0 1.41l4.95 4.95c.39.39 1.02.39 1.41 0l6.36-6.36c.39-.39.39-1.02 0-1.41L14.16 2.3c-.38-.4-1.01-.4-1.4-.01"}),"HowToVote");const OK=()=>t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsxs(F,{container:!0,spacing:4,children:[t.jsx(F,{item:!0,xs:12,children:t.jsxs(C,{sx:{mb:3},children:[t.jsx(ue,{variant:"text",width:"60%",height:40}),t.jsx(ue,{variant:"text",width:"40%",height:24})]})}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"50%",height:32,sx:{mb:2}}),t.jsx(me,{spacing:2,children:[1,2,3,4].map(e=>t.jsxs(C,{children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t.jsx(ue,{variant:"text",width:"60%"}),t.jsx(ue,{variant:"text",width:"20%"})]}),t.jsx(ue,{variant:"rectangular",width:"100%",height:20,sx:{borderRadius:1}})]},e))})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsx(me,{spacing:3,children:[1,2].map(e=>t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(ue,{variant:"text",width:"50%",height:24}),t.jsx(ue,{variant:"text",width:"70%",height:40})]})},e))})})]})}),MK=()=>{var b;const{id:e}=dr(),{api:n}=Ye(),{execute:r}=Ke(),[s,o]=x.useState(null),[i,l]=x.useState(!0),[d,u]=x.useState(!1);x.useEffect(()=>{(async()=>{if(e){l(!0);const S=await r(()=>n==null?void 0:n.app.poll.get(e),{showErrorToast:!0});S&&o(S),l(!1)}})()},[e,r]);const h=async y=>{if(!e)return;if(await r(()=>n==null?void 0:n.app.poll.convertToNews(e,y),{showSuccessMessage:!0,successMessage:"Poll converted to news successfully!"})){const j=await r(()=>n==null?void 0:n.app.poll.get(e),{showErrorToast:!0});j&&o(j)}};if(i)return t.jsx(OK,{});if(!s)return t.jsx(St,{maxWidth:"lg",sx:{mt:4},children:t.jsx(v,{variant:"h4",children:"Poll not found"})});const f=new Date>=new Date(s.startDate)&&new Date<=new Date(s.endDate),p=new Date>=new Date(s.startDate),g=!s.isConverted&&!((b=s.stats)!=null&&b.hasEnded);return t.jsxs(St,{maxWidth:"lg",sx:{mt:4},children:[t.jsxs(F,{container:!0,spacing:4,children:[t.jsxs(F,{item:!0,xs:12,children:[t.jsxs(C,{sx:{mb:3},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,children:s.title}),t.jsx(v,{variant:"body1",color:"text.secondary",children:s.description})]}),t.jsxs(C,{sx:{display:"flex",gap:1,mb:3,alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(C,{sx:{display:"flex",gap:1},children:[t.jsx(Xe,{label:f?"Active":p?"Ended":"Scheduled",color:f?"success":p?"error":"warning"}),s.isTrending&&t.jsx(Xe,{icon:t.jsx(wl,{}),label:"Trending",color:"primary"}),s.isConverted&&t.jsx(Xe,{icon:t.jsx(il,{}),label:"Converted to News",color:"info"})]}),g&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(il,{}),onClick:()=>u(!0),size:"small",children:"Convert to News"})]})]}),t.jsx(F,{item:!0,xs:12,md:8,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Poll Results"}),t.jsx(AK,{poll:s})]})})}),t.jsx(F,{item:!0,xs:12,md:4,children:t.jsxs(me,{spacing:3,children:[t.jsx(rt,{elevation:0,sx:{p:2,bgcolor:"primary.light",color:"primary.contrastText",borderRadius:2},children:t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(DC,{fontSize:"large"}),t.jsxs(C,{children:[t.jsx(v,{variant:"overline",children:"Total Votes"}),t.jsx(v,{variant:"h4",children:s.statistics.totalVotes})]})]})}),t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Time Frame"}),t.jsxs(me,{spacing:2,children:[t.jsxs(C,{children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Start Date"}),t.jsx(v,{children:new Date(s.startDate).toLocaleString()})]}),t.jsxs(C,{children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"End Date"}),t.jsx(v,{children:new Date(s.endDate).toLocaleString()})]})]})]})})]})})]}),t.jsx(x1,{open:d,poll:s,onClose:()=>u(!1),onConvert:h})]})};function NK(e){const{children:n,value:r,index:s,...o}=e;return t.jsx("div",{role:"tabpanel",hidden:r!==s,id:`expense-order-tabpanel-${s}`,"aria-labelledby":`expense-order-tab-${s}`,...o,children:r===s&&t.jsx(C,{sx:{py:3},children:n})})}const LK=()=>{const e=xt(),{api:n}=Ye(),[r,s]=x.useState(0),[o,i]=x.useState([]),[l,d]=x.useState(!0),{execute:u}=Ke(),h=[{label:"All",status:void 0},{label:"Draft",status:bt.DRAFT},{label:"Submitted",status:bt.SUBMITTED},{label:"Approved",status:bt.APPROVED},{label:"Paid",status:bt.PAID},{label:"Rejected",status:bt.REJECTED}],f=async P=>{d(!0);const w=await u(()=>n.app.expenseOrder.getMyExpenseOrders({page:1,limit:50},P),{showErrorToast:!0});w&&i(w.items),d(!1)};x.useEffect(()=>{f(h[r].status)},[r,u]);const p=(P,w)=>{s(w)},g=P=>{e(fe.STUDIO_EXPENSE_ORDER_VIEW.replace(":id",P.id))},b=P=>{e(fe.STUDIO_EXPENSE_ORDER_EDIT.replace(":id",P.id))},y=async P=>{await u(()=>n.app.expenseOrder.submitExpenseOrder(P.id),{showSuccessMessage:!0,successMessage:"Expense order submitted successfully!"})&&f(h[r].status)},S=async P=>{await u(()=>n.app.expenseOrder.cancelExpenseOrder(P.id),{showSuccessMessage:!0,successMessage:"Expense order cancelled successfully!"})&&f(h[r].status)},j=()=>{e(fe.STUDIO_EXPENSE_ORDER_CREATE)};return t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Expense Orders"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:j,children:"Create New"})]}),t.jsx(C,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:t.jsx(Bs,{value:r,onChange:p,"aria-label":"expense order status tabs",children:h.map((P,w)=>t.jsx(An,{label:P.label},w))})}),h.map((P,w)=>t.jsx(NK,{value:r,index:w,children:l?t.jsx(C,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(Zt,{})}):o.length===0?t.jsxs(C,{sx:{textAlign:"center",py:8},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No expense orders found"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:P.status?`No ${P.label.toLowerCase()} expense orders`:"You haven't created any expense orders yet"}),t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:j,children:"Create Your First Expense Order"})]}):t.jsx(F,{container:!0,spacing:3,children:o.map(I=>t.jsx(F,{item:!0,xs:12,md:6,lg:4,children:t.jsx(Ym,{expenseOrder:I,onView:g,onEdit:b,onSubmit:y,onCancel:S,userRole:"journalist"})},I.id))})},w))]})},$K=()=>{var h;const e=xt(),{api:n}=Ye(),{profile:r}=Es(),{execute:s,loading:o}=Ke(),i=((h=r==null?void 0:r.staffChannels)==null?void 0:h.map(f=>f.channel))||[],l=KS,d=async f=>{const p=await s(()=>n.app.expenseOrder.createExpenseOrder(f),{showSuccessMessage:!0,successMessage:"Expense order created successfully!"});p&&e(fe.STUDIO_EXPENSE_ORDER_VIEW.replace(":id",p.id))},u=()=>{e(fe.STUDIO_EXPENSE_ORDERS)};return t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:u,sx:{mr:2},children:"Back"}),t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Create Expense Order"})]}),i.length===0&&!o?t.jsxs(C,{sx:{textAlign:"center",py:8,bgcolor:"background.paper",borderRadius:1},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No Channels Available"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"You need to be a member of at least one channel to create expense orders."})]}):t.jsx(tw,{channels:i,expenseTypes:l,onSave:d,loading:o,isEdit:!1})]})},FK=()=>{var S;const e=xt(),{id:n}=dr(),{api:r}=Ye(),{profile:s}=Es(),[o,i]=x.useState(null),[l,d]=x.useState(!0),{execute:u,loading:h}=Ke(),f=((S=s==null?void 0:s.staffChannels)==null?void 0:S.map(j=>j.channel))||[],p=KS;x.useEffect(()=>{(async()=>{if(n)try{d(!0);const P=await u(()=>r.app.expenseOrder.getExpenseOrder(n),{showErrorToast:!0});P&&i(P)}finally{d(!1)}})()},[n,u]);const g=async j=>{if(!n)return;const P=await u(()=>r.app.expenseOrder.updateExpenseOrder(n,j),{showSuccessMessage:!0,successMessage:"Expense order updated successfully!"});P&&(i(P),e(fe.STUDIO_EXPENSE_ORDER_VIEW.replace(":id",P.id)))},b=async j=>{await u(()=>r.app.expenseOrder.submitExpenseOrder(j.id),{showSuccessMessage:!0,successMessage:"Expense order submitted successfully!"})&&e(fe.STUDIO_EXPENSE_ORDER_VIEW.replace(":id",j.id))},y=()=>{e(o?fe.STUDIO_EXPENSE_ORDER_VIEW.replace(":id",o.id):fe.STUDIO_EXPENSE_ORDERS)};return l?t.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:t.jsx(Zt,{})}):o?o.status!==bt.DRAFT?t.jsx(C,{sx:{p:3},children:t.jsxs(C,{sx:{textAlign:"center",py:8,bgcolor:"background.paper",borderRadius:1},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"Cannot Edit Expense Order"}),t.jsx(v,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"This expense order cannot be edited because it has already been submitted."}),t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:y,children:"Back to Expense Order"})]})}):t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:y,sx:{mr:2},children:"Back"}),t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Edit Expense Order"})]}),t.jsx(tw,{expenseOrder:o,channels:f,expenseTypes:p,onSave:g,onSubmit:b,loading:h,isEdit:!0})]}):t.jsx(C,{sx:{p:3},children:t.jsxs(C,{sx:{textAlign:"center",py:8,bgcolor:"background.paper",borderRadius:1},children:[t.jsx(v,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"Expense Order Not Found"}),t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:y,children:"Back"})]})})},WK=()=>{const e=xt(),{id:n}=dr(),{api:r}=Ye(),[s,o]=x.useState(null),[i,l]=x.useState(!0),[d,u]=x.useState(!1),[h,f]=x.useState(null),[p,g]=x.useState(!1),[b,y]=x.useState(""),S=async()=>{if(n)try{l(!0),f(null);const N=await r.app.expenseOrder.getExpenseOrder(n);o(N)}catch(N){f(N.message||"Failed to fetch expense order")}finally{l(!1)}};x.useEffect(()=>{S()},[n]);const j=(N,L)=>new Intl.NumberFormat("en-US",{style:"currency",currency:L}).format(N),P=()=>{e(fe.STUDIO_EXPENSE_ORDERS)},w=()=>{s&&e(fe.STUDIO_EXPENSE_ORDER_EDIT.replace(":id",s.id))},I=async()=>{if(s){u(!0);try{await r.app.expenseOrder.submitExpenseOrder(s.id),await S()}catch(N){f(N.message||"Failed to submit expense order")}finally{u(!1)}}},T=async()=>{if(s){u(!0);try{await r.app.expenseOrder.cancelExpenseOrder(s.id,b),await S(),g(!1),y("")}catch(N){f(N.message||"Failed to cancel expense order")}finally{u(!1)}}};if(i)return t.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:t.jsx(Zt,{})});if(h||!s)return t.jsxs(C,{sx:{p:3},children:[t.jsx(lt,{severity:"error",children:h||"Expense order not found"}),t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:P,sx:{mt:2},children:"Back to Expense Orders"})]});const D=s.status===bt.DRAFT,R=s.status===bt.DRAFT,k=[bt.DRAFT,bt.SUBMITTED].includes(s.status);return t.jsxs(C,{sx:{p:3},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:3},children:[t.jsx(ce,{startIcon:t.jsx(Ls,{}),onClick:P,sx:{mr:2},children:"Back"}),t.jsx(v,{variant:"h4",component:"h1",sx:{fontWeight:600,flex:1},children:"Expense Order Details"}),t.jsx(Gm,{status:s.status})]}),h&&t.jsx(lt,{severity:"error",sx:{mb:3},children:h}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsxs(F,{item:!0,xs:12,md:8,children:[t.jsxs(rt,{sx:{p:3,mb:3},children:[t.jsx(v,{variant:"h5",sx:{mb:2,fontWeight:600},children:s.title}),t.jsx(v,{variant:"body1",sx:{mb:3,color:"text.secondary"},children:s.description}),t.jsx(Mt,{sx:{my:3}}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Channel"}),t.jsx(v,{variant:"body1",sx:{fontWeight:500},children:s.channel.name})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Expense Type"}),t.jsx(v,{variant:"body1",sx:{fontWeight:500},children:s.type.name})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Amount"}),t.jsx(v,{variant:"h6",sx:{fontWeight:700,color:"primary.main"},children:j(s.amount,s.currency)})]}),t.jsxs(F,{item:!0,xs:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body1",children:Yp(new Date(s.createdAt),"PPP")})]})]}),s.receiptUrl&&t.jsxs(t.Fragment,{children:[t.jsx(Mt,{sx:{my:3}}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Receipt"}),t.jsxs(Id,{href:s.receiptUrl,target:"_blank",rel:"noopener noreferrer",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(oo,{fontSize:"small"}),"View Receipt"]})]})]}),s.notes&&t.jsxs(t.Fragment,{children:[t.jsx(Mt,{sx:{my:3}}),t.jsxs(C,{children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Notes"}),t.jsx(v,{variant:"body1",sx:{fontStyle:"italic"},children:s.notes})]})]})]}),t.jsxs(rt,{sx:{p:3},children:[t.jsx(v,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Actions"}),t.jsxs(C,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[D&&t.jsx(ce,{variant:"outlined",startIcon:t.jsx(ws,{}),onClick:w,disabled:d,children:"Edit"}),R&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(Td,{}),onClick:I,disabled:d,children:"Submit for Approval"}),k&&t.jsx(ce,{variant:"outlined",color:"error",startIcon:t.jsx(Fs,{}),onClick:()=>g(!0),disabled:d,children:"Cancel"})]})]})]}),t.jsxs(F,{item:!0,xs:12,md:4,children:[t.jsxs(rt,{sx:{p:3,mb:3},children:[t.jsx(v,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Timeline"}),t.jsxs(C,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Created"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.createdAt),{addSuffix:!0})})]}),s.submittedAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Submitted"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.submittedAt),{addSuffix:!0})})]}),s.approvedAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:s.status===bt.APPROVED?"Approved":"Reviewed"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.approvedAt),{addSuffix:!0})}),s.approver&&t.jsxs(v,{variant:"caption",display:"block",color:"text.secondary",children:["by ",s.approver.displayName]})]}),s.paidAt&&t.jsxs(C,{children:[t.jsx(v,{variant:"body2",sx:{fontWeight:500},children:"Paid"}),t.jsx(v,{variant:"caption",color:"text.secondary",children:$r(new Date(s.paidAt),{addSuffix:!0})}),s.paymentReference&&t.jsxs(v,{variant:"caption",display:"block",color:"text.secondary",children:["Ref: ",s.paymentReference]})]})]})]}),s.rejectionReason&&t.jsxs(rt,{sx:{p:3,bgcolor:"error.lighter"},children:[t.jsx(v,{variant:"h6",sx:{mb:1,fontWeight:600,color:"error.main"},children:"Rejection Reason"}),t.jsx(v,{variant:"body2",color:"error.main",children:s.rejectionReason})]})]})]}),t.jsxs(Gt,{open:p,onClose:()=>g(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Cancel Expense Order"}),t.jsxs(Yt,{children:[t.jsx(v,{variant:"body2",sx:{mb:2},children:"Are you sure you want to cancel this expense order? This action cannot be undone."}),t.jsx(et,{fullWidth:!0,multiline:!0,rows:3,label:"Reason for cancellation (optional)",value:b,onChange:N=>y(N.target.value),placeholder:"Provide a reason for cancelling this expense order..."})]}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>g(!1),children:"Keep Order"}),t.jsx(ce,{onClick:T,color:"error",variant:"contained",disabled:d,children:"Cancel Order"})]})]})]})},Tv=()=>{const[e,n]=x.useState(null),[r,s]=x.useState(!0),[o,i]=x.useState(null),l=xt(),{api:d}=Ye(),{execute:u}=Ke();x.useEffect(()=>{h()},[]);const h=async()=>{var y,S;s(!0),i(null);const[g,b]=await Promise.all([u(()=>d.app.subscription.getSubscriptionAnalytics({period:"30d"}),{showErrorToast:!0}),u(()=>d.app.subscription.getRevenueMetrics({period:"30d"}),{showErrorToast:!0})]);if(g&&b){let j=0;if((S=(y=b.metrics)==null?void 0:y[0])!=null&&S.channels){const w=b.metrics[0].channels;for(const I in w){const T=w[I];j+=T.revenue||0}}const P={totalUsers:12543,totalChannels:1247,totalSubscriptions:g.total_subscriptions,monthlyRevenue:j,activeSubscriptions:g.active_subscriptions,newUsersThisMonth:342};n(P)}s(!1)},f=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g/100),p=[{title:"News Management",description:"Manage news articles and moderate content",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_NEWS,color:"#1976d2"},{title:"Poll Management",description:"Oversee polls and voting analytics",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_POLLS,color:"#7b1fa2"},{title:"User Management",description:"Manage users, roles, and permissions",icon:t.jsx(Ao,{sx:{fontSize:40}}),path:fe.ADMIN_USERS,color:"#388e3c"},{title:"Channel Management",description:"Oversee channels and content moderation",icon:t.jsx(zc,{sx:{fontSize:40}}),path:fe.ADMIN_CHANNELS,color:"#f57c00"},{title:"Expense Orders",description:"Review and approve expense claims",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_EXPENSE_ORDERS,color:"#d32f2f"},{title:"Payout Management",description:"Process payouts and financial transactions",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_PAYOUTS,color:"#2e7d32"},{title:"Tag Management",description:"Moderate tags and manage taxonomy",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_TAGS,color:"#795548"},{title:"Subscription Management",description:"Monitor subscriptions and billing",icon:t.jsx(Ka,{sx:{fontSize:40}}),path:fe.ADMIN_SUBSCRIPTIONS,color:"#ff5722"},{title:"Analytics",description:"Platform analytics and insights",icon:t.jsx(gs,{sx:{fontSize:40}}),path:fe.ADMIN_ANALYTICS,color:"#9c27b0"},{title:"Settings",description:"Platform configuration and settings",icon:t.jsx(Fc,{sx:{fontSize:40}}),path:fe.ADMIN_SETTINGS,color:"#5d4037"}];return t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:4},children:[t.jsx(Rv,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Admin Dashboard"})]}),o&&t.jsx(lt,{severity:"error",sx:{mb:3},children:o}),t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(XR,{sx:{fontSize:24,mr:1,color:"#1976d2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Users"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:80}):e==null?void 0:e.totalUsers.toLocaleString()}),t.jsx(v,{variant:"body2",color:"textSecondary",children:r?t.jsx(ue,{width:120}):`+${e==null?void 0:e.newUsersThisMonth} this month`})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(zc,{sx:{fontSize:24,mr:1,color:"#388e3c"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Channels"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:80}):e==null?void 0:e.totalChannels.toLocaleString()})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ka,{sx:{fontSize:24,mr:1,color:"#f57c00"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Active Subscriptions"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:80}):e==null?void 0:e.activeSubscriptions.toLocaleString()}),t.jsx(v,{variant:"body2",color:"textSecondary",children:r?t.jsx(ue,{width:120}):`${e==null?void 0:e.totalSubscriptions} total`})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(ao,{sx:{fontSize:24,mr:1,color:"#7b1fa2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Monthly Revenue"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:100}):f((e==null?void 0:e.monthlyRevenue)||0)})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ss,{sx:{fontSize:24,mr:1,color:"#d32f2f"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Growth Rate"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:60}):"+12.5%"}),t.jsx(v,{variant:"body2",color:"textSecondary",children:"vs last month"})]})})})]}),t.jsx(v,{variant:"h5",gutterBottom:!0,sx:{mb:3},children:"Administration"}),t.jsx(F,{container:!0,spacing:3,children:p.map(g=>t.jsx(F,{item:!0,xs:12,sm:6,md:4,children:t.jsxs(Fe,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs(Ve,{sx:{flexGrow:1},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(C,{sx:{color:g.color,mr:2},children:g.icon}),t.jsx(v,{variant:"h6",component:"h2",children:g.title})]}),t.jsx(v,{variant:"body2",color:"textSecondary",children:g.description})]}),t.jsx(xf,{children:t.jsx(ce,{size:"small",variant:"contained",onClick:()=>l(g.path),sx:{backgroundColor:g.color},children:"Manage"})})]})},g.title))})]})},BK=()=>t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:4},children:[t.jsx(Ao,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"User Management"})]}),t.jsx(Fe,{children:t.jsxs(Ve,{sx:{textAlign:"center",py:8},children:[t.jsx(Ao,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"User Management Coming Soon"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"This section will include user management, roles, permissions, and user analytics."})]})})]}),VK=()=>t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:4},children:[t.jsx(zc,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Channel Management"})]}),t.jsx(Fe,{children:t.jsxs(Ve,{sx:{textAlign:"center",py:8},children:[t.jsx(zc,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Channel Management Coming Soon"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"This section will include channel moderation, content management, and channel analytics."})]})})]}),UK=()=>{const[e,n]=x.useState([]),[r,s]=x.useState(null),[o,i]=x.useState(!0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState(null),[g,b]=x.useState(""),[y,S]=x.useState({}),[j]=x.useState($e),[P,w]=x.useState([]),[I,T]=x.useState(!1),[D,R]=x.useState("cancel"),[_,k]=x.useState(""),{api:N}=Ye(),{execute:L}=Ke();x.useEffect(()=>{z(),$()},[y,j]);const z=async()=>{i(!0),h(null);const V=await L(()=>N.app.subscription.getAllSubscriptions(j,y),{showErrorToast:!0});V&&n(V.items||[]),i(!1)},$=async()=>{d(!0);const V=await L(()=>N.app.subscription.getSubscriptionAnalytics({period:"30d"}),{showErrorToast:!1});V&&s(V),d(!1)},G=()=>{g.trim()?S({...y}):z()},K=(V,Z)=>{S({...y,[V]:Z||void 0})},J=async()=>{if(P.length===0)return;i(!0);const V={action:D,subscription_ids:P,reason:_||void 0},Z=await L(()=>N.app.subscription.bulkUpdateSubscriptions(V),{showSuccessMessage:!0,successMessage:"Successfully updated subscriptions"});Z&&(Z.failed>0&&h(`Failed to update ${Z.failed} subscriptions`),T(!1),w([]),k(""),await z()),i(!1)},q=async()=>{const V=await L(()=>N.app.subscription.exportSubscriptions(y,"csv"),{showErrorToast:!0});if(V){const Z=window.URL.createObjectURL(V),Ee=document.createElement("a");Ee.href=Z,Ee.download=`subscriptions-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ee),Ee.click(),window.URL.revokeObjectURL(Z),document.body.removeChild(Ee)}},Q=V=>fd(V),Y=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),oe=(V,Z)=>new Intl.NumberFormat("en-US",{style:"currency",currency:Z.toUpperCase()}).format(V/100);return t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsx(v,{variant:"h4",gutterBottom:!0,children:"Subscription Management"}),r&&t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Subscriptions"}),t.jsx(v,{variant:"h4",children:l?t.jsx(ue,{width:60}):r.total_subscriptions.toLocaleString()})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Active Subscriptions"}),t.jsx(v,{variant:"h4",children:l?t.jsx(ue,{width:60}):r.active_subscriptions.toLocaleString()})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"New This Month"}),t.jsx(v,{variant:"h4",children:l?t.jsx(ue,{width:60}):r.new_subscriptions.toLocaleString()})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Churn Rate"}),t.jsx(v,{variant:"h4",children:l?t.jsx(ue,{width:60}):`${(r.churn_rate*100).toFixed(1)}%`})]})})})]}),t.jsx(Fe,{sx:{mb:3},children:t.jsx(Ve,{children:t.jsxs(me,{direction:"row",spacing:2,alignItems:"center",flexWrap:"wrap",children:[t.jsx(et,{placeholder:"Search subscriptions...",value:g,onChange:V=>b(V.target.value),onKeyPress:V=>V.key==="Enter"&&G(),InputProps:{startAdornment:t.jsx(yl,{sx:{mr:1,color:"text.secondary"}})},sx:{minWidth:250}}),t.jsxs(ht,{sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:y.status||"",onChange:V=>K("status",V.target.value),label:"Status",children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"active",children:"Active"}),t.jsx(je,{value:"canceled",children:"Canceled"}),t.jsx(je,{value:"expired",children:"Expired"}),t.jsx(je,{value:"suspended",children:"Suspended"})]})]}),t.jsx(ce,{variant:"outlined",startIcon:t.jsx(Nv,{}),onClick:()=>S({}),children:"Clear Filters"}),t.jsx(ce,{variant:"outlined",startIcon:t.jsx(zv,{}),onClick:q,children:"Export"}),P.length>0&&t.jsxs(ce,{variant:"contained",startIcon:t.jsx(ws,{}),onClick:()=>T(!0),children:["Bulk Actions (",P.length,")"]})]})})}),u&&t.jsx(lt,{severity:"error",sx:{mb:2},onClose:()=>h(null),children:u}),f&&t.jsx(lt,{severity:"success",sx:{mb:2},onClose:()=>p(null),children:f}),t.jsx(Fe,{children:t.jsx(rp,{component:rt,children:t.jsxs(Dd,{children:[t.jsx(Ad,{children:t.jsxs($s,{children:[t.jsx(at,{padding:"checkbox",children:t.jsx(Hc,{indeterminate:P.length>0&&P.length<e.length,checked:e.length>0&&P.length===e.length,onChange:V=>{V.target.checked?w(e.map(Z=>Z.id)):w([])}})}),t.jsx(at,{children:"User"}),t.jsx(at,{children:"Channel"}),t.jsx(at,{children:"Tier"}),t.jsx(at,{children:"Status"}),t.jsx(at,{children:"Started"}),t.jsx(at,{children:"Expires"}),t.jsx(at,{children:"Actions"})]})}),t.jsx(Rd,{children:o?[...Array(5)].map((V,Z)=>t.jsxs($s,{children:[t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})}),t.jsx(at,{children:t.jsx(ue,{})})]},Z)):e.map(V=>t.jsxs($s,{children:[t.jsx(at,{padding:"checkbox",children:t.jsx(Hc,{checked:P.includes(V.id),onChange:Z=>{Z.target.checked?w([...P,V.id]):w(P.filter(Ee=>Ee!==V.id))}})}),t.jsx(at,{children:t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",children:V.user.displayName}),t.jsx(v,{variant:"caption",color:"text.secondary",children:V.user.email})]})}),t.jsx(at,{children:t.jsx(v,{variant:"body2",children:V.channel.name})}),t.jsx(at,{children:t.jsxs(C,{children:[t.jsx(v,{variant:"body2",children:V.tier.name}),t.jsx(v,{variant:"caption",color:"text.secondary",children:oe(V.tier.price,V.tier.currency)})]})}),t.jsx(at,{children:t.jsx(Xe,{label:hd(V.statusId),color:Q(V.statusId),size:"small"})}),t.jsx(at,{children:t.jsx(v,{variant:"body2",children:Y(V.subscribedAt)})}),t.jsx(at,{children:t.jsx(v,{variant:"body2",children:V.expiresAt?Y(V.expiresAt):"Never"})}),t.jsx(at,{children:t.jsx(ce,{size:"small",onClick:()=>{console.log("View subscription:",V.id)},children:"View"})})]},V.id))})]})})}),t.jsxs(Gt,{open:I,onClose:()=>T(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Bulk Action"}),t.jsxs(Yt,{children:[t.jsxs(v,{gutterBottom:!0,children:["You are about to perform a bulk action on ",P.length," subscription(s)."]}),t.jsxs(ht,{fullWidth:!0,sx:{mb:2},children:[t.jsx(Ct,{children:"Action"}),t.jsxs(mt,{value:D,onChange:V=>R(V.target.value),label:"Action",children:[t.jsx(je,{value:"cancel",children:"Cancel Subscriptions"}),t.jsx(je,{value:"activate",children:"Activate Subscriptions"}),t.jsx(je,{value:"suspend",children:"Suspend Subscriptions"})]})]}),t.jsx(et,{fullWidth:!0,label:"Reason (optional)",value:_,onChange:V=>k(V.target.value),multiline:!0,rows:3})]}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>T(!1),children:"Cancel"}),t.jsx(ce,{onClick:J,variant:"contained",color:"primary",children:"Confirm"})]})]})]})},zK=()=>{const[e,n]=x.useState(null),[r,s]=x.useState(!0),[o,i]=x.useState(null),[l,d]=x.useState("30d"),{api:u}=Ye(),{execute:h}=Ke();x.useEffect(()=>{f()},[l]);const f=async()=>{s(!0),i(null);const j=await h(()=>u.app.subscription.getSubscriptionAnalytics({period:l}),{showErrorToast:!0});j&&n(j),s(!1)},p=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j/100),g=j=>`${(j*100).toFixed(1)}%`,b=[{month:"Jan",new:120,canceled:45,active:1200},{month:"Feb",new:150,canceled:38,active:1312},{month:"Mar",new:180,canceled:52,active:1440},{month:"Apr",new:200,canceled:48,active:1592},{month:"May",new:165,canceled:55,active:1702},{month:"Jun",new:190,canceled:42,active:1850}],y=[{name:"Basic",value:35,revenue:15e3},{name:"Premium",value:45,revenue:35e3},{name:"Pro",value:20,revenue:25e3}],S=["#0088FE","#00C49F","#FFBB28","#FF8042"];return t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(gs,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Subscription Analytics"})]}),t.jsxs(ht,{sx:{minWidth:120},children:[t.jsx(Ct,{children:"Period"}),t.jsxs(mt,{value:l,onChange:j=>d(j.target.value),label:"Period",children:[t.jsx(je,{value:"7d",children:"Last 7 days"}),t.jsx(je,{value:"30d",children:"Last 30 days"}),t.jsx(je,{value:"90d",children:"Last 90 days"}),t.jsx(je,{value:"1y",children:"Last year"})]})]})]}),o&&t.jsx(lt,{severity:"error",sx:{mb:3},children:o}),t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ao,{sx:{fontSize:24,mr:1,color:"#1976d2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Subscriptions"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:80}):e==null?void 0:e.total_subscriptions.toLocaleString()}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",mt:1},children:[t.jsx(Ss,{sx:{fontSize:16,color:"success.main",mr:.5}}),t.jsx(v,{variant:"body2",color:"success.main",children:"+12.5% vs last period"})]})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ss,{sx:{fontSize:24,mr:1,color:"#388e3c"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"New Subscriptions"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:80}):e==null?void 0:e.new_subscriptions.toLocaleString()}),t.jsx(v,{variant:"body2",color:"textSecondary",children:"This period"})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Fs,{sx:{fontSize:24,mr:1,color:"#f57c00"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Churn Rate"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:60}):g((e==null?void 0:e.churn_rate)||0)}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",mt:1},children:[t.jsx(kv,{sx:{fontSize:16,color:"success.main",mr:.5}}),t.jsx(v,{variant:"body2",color:"success.main",children:"-2.1% vs last period"})]})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(ao,{sx:{fontSize:24,mr:1,color:"#7b1fa2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"})]}),t.jsx(v,{variant:"h4",children:r?t.jsx(ue,{width:100}):p(Object.values((e==null?void 0:e.revenue_by_currency)||{}).reduce((j,P)=>j+P,0))}),t.jsx(v,{variant:"body2",color:"textSecondary",children:"This period"})]})})})]}),t.jsxs(F,{container:!0,spacing:3,children:[t.jsx(F,{item:!0,xs:12,lg:8,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Subscription Trends"}),t.jsx(C,{sx:{width:"100%",height:400},children:t.jsx(qi,{children:t.jsxs(Yv,{data:b,children:[t.jsx(Kc,{strokeDasharray:"3 3"}),t.jsx(Jc,{dataKey:"month"}),t.jsx(Xc,{}),t.jsx(Ki,{}),t.jsx(Qc,{}),t.jsx(Ba,{type:"monotone",dataKey:"new",stroke:"#8884d8",strokeWidth:2,name:"New Subscriptions"}),t.jsx(Ba,{type:"monotone",dataKey:"canceled",stroke:"#82ca9d",strokeWidth:2,name:"Canceled"}),t.jsx(Ba,{type:"monotone",dataKey:"active",stroke:"#ffc658",strokeWidth:2,name:"Active Total"})]})})})]})})}),t.jsx(F,{item:!0,xs:12,lg:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Revenue by Tier"}),t.jsx(C,{sx:{width:"100%",height:400},children:t.jsx(qi,{children:t.jsxs(Wk,{children:[t.jsx(Bk,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:j,percent:P})=>`${j} ${(P*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:y.map((j,P)=>t.jsx(Vk,{fill:S[P%S.length]},`cell-${P}`))}),t.jsx(Ki,{formatter:(j,P)=>{var w;return[p(((w=y.find(I=>I.name===P))==null?void 0:w.revenue)||0),"Revenue"]}})]})})})]})})}),t.jsx(F,{item:!0,xs:12,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Monthly Revenue Breakdown"}),t.jsx(C,{sx:{width:"100%",height:400},children:t.jsx(qi,{children:t.jsxs(qv,{data:b,children:[t.jsx(Kc,{strokeDasharray:"3 3"}),t.jsx(Jc,{dataKey:"month"}),t.jsx(Xc,{}),t.jsx(Ki,{formatter:j=>[p(Number(j)*100),"Revenue"]}),t.jsx(Qc,{}),t.jsx(Zc,{dataKey:"new",fill:"#8884d8",name:"New Subscriptions Revenue"}),t.jsx(Zc,{dataKey:"active",fill:"#82ca9d",name:"Recurring Revenue"})]})})})]})})})]})]})},HK=()=>{const[e,n]=x.useState(!0),[r,s]=x.useState(null),[o,i]=x.useState("30d");x.useEffect(()=>{l()},[o]);const l=async()=>{try{n(!0),s(null),await new Promise(p=>setTimeout(p,1e3))}catch(p){s(p.message||"Failed to load revenue data")}finally{n(!1)}},d=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),u={totalRevenue:125e3,monthlyRecurring:98e3,oneTimePayments:27e3,averageRevenuePerUser:45.5,growthRate:12.5},h=[{month:"Jan",revenue:85e3,subscriptions:78e3,oneTime:7e3},{month:"Feb",revenue:92e3,subscriptions:84e3,oneTime:8e3},{month:"Mar",revenue:98e3,subscriptions:89e3,oneTime:9e3},{month:"Apr",revenue:105e3,subscriptions:95e3,oneTime:1e4},{month:"May",revenue:115e3,subscriptions:102e3,oneTime:13e3},{month:"Jun",revenue:125e3,subscriptions:112e3,oneTime:13e3}],f=[{name:"Tech News Daily",revenue:15e3,subscribers:1200},{name:"Global Politics",revenue:12500,subscribers:980},{name:"Science Weekly",revenue:11e3,subscribers:850},{name:"Business Insider",revenue:9500,subscribers:720},{name:"Sports Central",revenue:8200,subscribers:650}];return t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(ao,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Revenue Tracking"})]}),t.jsxs(ht,{sx:{minWidth:120},children:[t.jsx(Ct,{children:"Period"}),t.jsxs(mt,{value:o,onChange:p=>i(p.target.value),label:"Period",children:[t.jsx(je,{value:"7d",children:"Last 7 days"}),t.jsx(je,{value:"30d",children:"Last 30 days"}),t.jsx(je,{value:"90d",children:"Last 90 days"}),t.jsx(je,{value:"1y",children:"Last year"})]})]})]}),r&&t.jsx(lt,{severity:"error",sx:{mb:3},children:r}),t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(ao,{sx:{fontSize:24,mr:1,color:"#1976d2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Total Revenue"})]}),t.jsx(v,{variant:"h4",children:e?t.jsx(ue,{width:100}):d(u.totalRevenue)}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",mt:1},children:[t.jsx(Ss,{sx:{fontSize:16,color:"success.main",mr:.5}}),t.jsxs(v,{variant:"body2",color:"success.main",children:["+",u.growthRate,"% vs last period"]})]})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(mf,{sx:{fontSize:24,mr:1,color:"#388e3c"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"Monthly Recurring"})]}),t.jsx(v,{variant:"h4",children:e?t.jsx(ue,{width:100}):d(u.monthlyRecurring)}),t.jsxs(v,{variant:"body2",color:"textSecondary",children:[(u.monthlyRecurring/u.totalRevenue*100).toFixed(1),"% of total"]})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(_v,{sx:{fontSize:24,mr:1,color:"#f57c00"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"One-time Payments"})]}),t.jsx(v,{variant:"h4",children:e?t.jsx(ue,{width:100}):d(u.oneTimePayments)}),t.jsxs(v,{variant:"body2",color:"textSecondary",children:[(u.oneTimePayments/u.totalRevenue*100).toFixed(1),"% of total"]})]})})}),t.jsx(F,{item:!0,xs:12,sm:6,md:3,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Ss,{sx:{fontSize:24,mr:1,color:"#7b1fa2"}}),t.jsx(v,{color:"textSecondary",gutterBottom:!0,children:"ARPU"})]}),t.jsx(v,{variant:"h4",children:e?t.jsx(ue,{width:80}):d(u.averageRevenuePerUser)}),t.jsx(v,{variant:"body2",color:"textSecondary",children:"Average Revenue Per User"})]})})})]}),t.jsxs(F,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(F,{item:!0,xs:12,lg:8,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Monthly Revenue Trend"}),t.jsx(C,{sx:{width:"100%",height:400},children:t.jsx(qi,{children:t.jsxs(Yv,{data:h,children:[t.jsx(Kc,{strokeDasharray:"3 3"}),t.jsx(Jc,{dataKey:"month"}),t.jsx(Xc,{tickFormatter:p=>`$${(p/1e3).toFixed(0)}k`}),t.jsx(Ki,{formatter:p=>[d(Number(p)),""]}),t.jsx(Qc,{}),t.jsx(Ba,{type:"monotone",dataKey:"revenue",stroke:"#1976d2",strokeWidth:3,name:"Total Revenue"}),t.jsx(Ba,{type:"monotone",dataKey:"subscriptions",stroke:"#388e3c",strokeWidth:2,name:"Subscription Revenue"}),t.jsx(Ba,{type:"monotone",dataKey:"oneTime",stroke:"#f57c00",strokeWidth:2,name:"One-time Payments"})]})})})]})})}),t.jsx(F,{item:!0,xs:12,lg:4,children:t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Revenue Breakdown"}),t.jsx(C,{sx:{width:"100%",height:400},children:t.jsx(qi,{children:t.jsxs(qv,{data:h.slice(-3),children:[t.jsx(Kc,{strokeDasharray:"3 3"}),t.jsx(Jc,{dataKey:"month"}),t.jsx(Xc,{tickFormatter:p=>`$${(p/1e3).toFixed(0)}k`}),t.jsx(Ki,{formatter:p=>[d(Number(p)),""]}),t.jsx(Qc,{}),t.jsx(Zc,{dataKey:"subscriptions",fill:"#388e3c",name:"Subscriptions"}),t.jsx(Zc,{dataKey:"oneTime",fill:"#f57c00",name:"One-time"})]})})})]})})})]}),t.jsx(Fe,{children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Top Channels by Revenue"}),t.jsx(rp,{component:rt,variant:"outlined",children:t.jsxs(Dd,{children:[t.jsx(Ad,{children:t.jsxs($s,{children:[t.jsx(at,{children:"Channel Name"}),t.jsx(at,{align:"right",children:"Revenue"}),t.jsx(at,{align:"right",children:"Subscribers"}),t.jsx(at,{align:"right",children:"ARPU"})]})}),t.jsx(Rd,{children:f.map((p,g)=>t.jsxs($s,{children:[t.jsx(at,{component:"th",scope:"row",children:t.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(C,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:g===0?"#ffd700":g===1?"#c0c0c0":g===2?"#cd7f32":"#e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",mr:2,fontSize:"12px",fontWeight:"bold"},children:g+1}),p.name]})}),t.jsx(at,{align:"right",children:d(p.revenue)}),t.jsx(at,{align:"right",children:p.subscribers.toLocaleString()}),t.jsx(at,{align:"right",children:d(p.revenue/p.subscribers)})]},p.name))})]})})]})})]})},GK=()=>t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:4},children:[t.jsx(gs,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Platform Analytics"})]}),t.jsx(Fe,{children:t.jsxs(Ve,{sx:{textAlign:"center",py:8},children:[t.jsx(gs,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Platform Analytics Coming Soon"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"This section will include comprehensive platform analytics, user behavior, and performance metrics."})]})})]}),YK=()=>t.jsxs(St,{maxWidth:"xl",sx:{mt:4,mb:4},children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",mb:4},children:[t.jsx(Fc,{sx:{fontSize:32,mr:2}}),t.jsx(v,{variant:"h4",component:"h1",children:"Admin Settings"})]}),t.jsx(Fe,{children:t.jsxs(Ve,{sx:{textAlign:"center",py:8},children:[t.jsx(Fc,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Admin Settings Coming Soon"}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"This section will include platform configuration, system settings, and administrative preferences."})]})})]}),Wo=({title:e,columns:n,rows:r,totalCount:s,loading:o=!1,error:i=null,selected:l,onSelectionChange:d,onEdit:u,onDelete:h,onAdd:f,onRefresh:p,onSearch:g,onSort:b,onPageChange:y,onRowsPerPageChange:S,page:j=0,rowsPerPage:P=25,searchQuery:w="",sortColumn:I="",sortDirection:T="asc",actions:D,filters:R,rowActions:_})=>{const[k,N]=x.useState(w),[L,z]=x.useState(!1),[$,G]=x.useState(null),[K,J]=x.useState(null),q=ee=>{if(ee.target.checked){const Ce=r.map(Ae=>Ae.id);d(Ce)}else d([])},Q=(ee,Ce)=>{const Ae=l.indexOf(Ce);let We=[];Ae===-1?We=We.concat(l,Ce):Ae===0?We=We.concat(l.slice(1)):Ae===l.length-1?We=We.concat(l.slice(0,-1)):Ae>0&&(We=We.concat(l.slice(0,Ae),l.slice(Ae+1))),d(We)},Y=ee=>{ee.key==="Enter"&&g&&g(k)},oe=ee=>{N(ee.target.value),ee.target.value===""&&g&&g("")},V=ee=>{if(!b)return;b(ee,I===ee&&T==="asc"?"desc":"asc")},Z=(ee,Ce)=>{G(ee.currentTarget),J(Ce)},Ee=()=>{G(null),J(null)},be=()=>{const ee=l.length>0?r.filter(Ce=>l.includes(Ce.id)):K?[K]:[];ee.length>0&&h&&(h(ee),z(!1),Ee(),d([]))},ae=ee=>l.indexOf(ee)!==-1;return t.jsxs(C,{children:[t.jsxs(rt,{sx:{width:"100%",mb:2},children:[t.jsxs(so,{sx:{pl:{sm:2},pr:{xs:1,sm:1},...l.length>0&&{bgcolor:"primary.main",color:"primary.contrastText"}},children:[l.length>0?t.jsxs(v,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[l.length," selected"]}):t.jsx(v,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:e}),l.length>0?t.jsx(me,{direction:"row",spacing:1,children:h&&t.jsx(Pt,{title:"Delete",children:t.jsx(Oe,{color:"inherit",onClick:()=>z(!0),children:t.jsx(el,{})})})}):t.jsxs(me,{direction:"row",spacing:1,alignItems:"center",children:[g&&t.jsx(et,{size:"small",placeholder:`Search ${e.toLowerCase()}...`,value:k,onChange:oe,onKeyPress:Y,InputProps:{startAdornment:t.jsx(zr,{position:"start",children:t.jsx(yl,{})})},sx:{minWidth:250}}),R,p&&t.jsx(Pt,{title:"Refresh",children:t.jsx(Oe,{onClick:p,children:t.jsx(Lv,{})})}),f&&t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:f,sx:{whiteSpace:"nowrap"},children:"Add New"}),D]})]}),i&&t.jsx(lt,{severity:"error",sx:{m:2},children:i}),t.jsx(rp,{children:t.jsxs(Dd,{stickyHeader:!0,"aria-labelledby":"tableTitle",children:[t.jsx(Ad,{children:t.jsxs($s,{children:[t.jsx(at,{padding:"checkbox",children:t.jsx(Hc,{color:"primary",indeterminate:l.length>0&&l.length<r.length,checked:r.length>0&&l.length===r.length,onChange:q,inputProps:{"aria-label":"select all items"}})}),n.map(ee=>t.jsx(at,{align:ee.align,style:{minWidth:ee.minWidth},sortDirection:I===ee.id?T:!1,children:ee.sortable&&b?t.jsx(QR,{active:I===ee.id,direction:I===ee.id?T:"asc",onClick:()=>V(ee.id),children:ee.label}):ee.label},ee.id)),t.jsx(at,{align:"right",children:"Actions"})]})}),t.jsx(Rd,{children:o?Array.from(new Array(P)).map((ee,Ce)=>t.jsxs($s,{children:[t.jsx(at,{padding:"checkbox",children:t.jsx(ue,{variant:"rectangular",width:24,height:24})}),n.map(Ae=>t.jsx(at,{children:t.jsx(ue,{variant:"text"})},Ae.id)),t.jsx(at,{children:t.jsx(ue,{variant:"rectangular",width:40,height:24})})]},Ce)):r.map(ee=>{const Ce=ae(ee.id);return t.jsxs($s,{hover:!0,onClick:Ae=>Q(Ae,ee.id),role:"checkbox","aria-checked":Ce,tabIndex:-1,selected:Ce,sx:{cursor:"pointer"},children:[t.jsx(at,{padding:"checkbox",children:t.jsx(Hc,{color:"primary",checked:Ce,inputProps:{"aria-labelledby":`enhanced-table-checkbox-${ee.id}`}})}),n.map(Ae=>{const We=ee[Ae.id];return t.jsx(at,{align:Ae.align,children:Ae.format?Ae.format(We,ee):We},Ae.id)}),t.jsx(at,{align:"right",children:t.jsx(me,{direction:"row",spacing:1,justifyContent:"flex-end",children:_?_(ee):t.jsxs(t.Fragment,{children:[u&&t.jsx(Pt,{title:"Edit",children:t.jsx(Oe,{size:"small",onClick:Ae=>{Ae.stopPropagation(),u(ee)},children:t.jsx(ws,{fontSize:"small"})})}),t.jsx(Oe,{size:"small",onClick:Ae=>{Ae.stopPropagation(),Z(Ae,ee)},children:t.jsx(np,{fontSize:"small"})})]})})})]},ee.id)})})]})}),t.jsx($v,{rowsPerPageOptions:[10,25,50,100],component:"div",count:s,rowsPerPage:P,page:j,onPageChange:(ee,Ce)=>y==null?void 0:y(Ce),onRowsPerPageChange:ee=>S==null?void 0:S(parseInt(ee.target.value,10))})]}),t.jsxs(Oo,{anchorEl:$,open:!!$,onClose:Ee,children:[u&&K&&t.jsxs(je,{onClick:()=>{u(K),Ee()},children:[t.jsx(ws,{sx:{mr:1},fontSize:"small"}),"Edit"]}),h&&t.jsxs(je,{onClick:()=>z(!0),children:[t.jsx(el,{sx:{mr:1},fontSize:"small"}),"Delete"]})]}),t.jsxs(Gt,{open:L,onClose:()=>z(!1),children:[t.jsx(Qt,{children:"Confirm Delete"}),t.jsx(Yt,{children:t.jsxs(v,{children:["Are you sure you want to delete ",l.length>0?`${l.length} items`:"this item","? This action cannot be undone."]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>z(!1),children:"Cancel"}),t.jsx(ce,{onClick:be,color:"error",variant:"contained",children:"Delete"})]})]})]})},qK=()=>{var Ee;const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState(0),[w,I]=x.useState(25),[T,D]=x.useState(""),[R,_]=x.useState(""),[k,N]=x.useState("createdAt"),[L,z]=x.useState("desc"),$=async()=>{var be;d(!0),h(null);try{const ae={page:j+1,limit:w,search:T||void 0,status:R||void 0,sort:k,order:L},ee=await n(()=>e.admin.news.getAllNews(ae),{showErrorToast:!1});ee&&(s(ee.items||[]),i(((be=ee.metadata)==null?void 0:be.total)||0))}catch{h("Failed to fetch news")}finally{d(!1)}};x.useEffect(()=>{$()},[j,w,T,R,k,L]);const G=be=>{S(be),b(!0)},K=async be=>{const ae=be.map(ee=>ee.id);try{await Promise.all(ae.map(ee=>n(()=>e.app.news.delete(ee)))),p([]),$()}catch{h("Failed to delete news items")}},J=async(be,ae)=>{try{await n(()=>e.app.news.update(be.id,{status:ae})),$()}catch{h("Failed to update news status")}},q=async be=>{var ae;if(y)try{const ee={title:be.title,content:be.content,status:(ae=be.status)==null?void 0:ae.toString()};await n(()=>e.app.news.update(y.id,ee)),b(!1),S(null),$()}catch{h("Failed to update news")}},Q=be=>z4(be),Y=[{id:"title",label:"Title",minWidth:200,sortable:!0,format:(be,ae)=>t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:be}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["ID: ",ae.id]})]})},{id:"channel",label:"Channel",minWidth:150,format:(be,ae)=>{var ee,Ce,Ae,We;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{src:(ee=ae.channel)==null?void 0:ee.photoUrl,sx:{width:24,height:24},children:(Ae=(Ce=ae.channel)==null?void 0:Ce.name)==null?void 0:Ae[0]}),t.jsx(v,{variant:"body2",noWrap:!0,children:((We=ae.channel)==null?void 0:We.name)||"Unknown"})]})}},{id:"status",label:"Status",minWidth:120,sortable:!0,format:be=>t.jsx(Xe,{label:be,color:Q(be),size:"small"})},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:be=>t.jsx(v,{variant:"body2",children:new Date(be).toLocaleDateString()})},{id:"updatedAt",label:"Updated",minWidth:120,sortable:!0,format:be=>t.jsx(v,{variant:"body2",children:new Date(be).toLocaleDateString()})},{id:"views",label:"Views",minWidth:80,align:"right",sortable:!0,format:be=>t.jsx(v,{variant:"body2",children:(be==null?void 0:be.toLocaleString())||"0"})}],oe=Object.entries(Dn).map(([be,ae])=>({value:ae,label:be.replace(/_/g," ").toLowerCase().replace(/\b\w/g,ee=>ee.toUpperCase())})),V=t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:R,label:"Status",onChange:be=>_(be.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),oe.map(be=>t.jsx(je,{value:be.value,children:be.label},be.value))]})]}),Z=be=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View",children:t.jsx(Oe,{size:"small",onClick:ae=>{ae.stopPropagation(),window.open(fe.APP_NEWS_VIEW.replace(":id",be.id),"_blank")},children:t.jsx(Ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Edit",children:t.jsx(Oe,{size:"small",onClick:ae=>{ae.stopPropagation(),G(be)},children:t.jsx(ws,{fontSize:"small"})})}),be.status===Dn.PUBLISHED?t.jsx(Pt,{title:"Unpublish",children:t.jsx(Oe,{size:"small",onClick:ae=>{ae.stopPropagation(),J(be,Dn.DRAFT)},children:t.jsx(ZR,{fontSize:"small"})})}):t.jsx(Pt,{title:"Publish",children:t.jsx(Oe,{size:"small",onClick:ae=>{ae.stopPropagation(),J(be,Dn.PUBLISHED)},children:t.jsx(ek,{fontSize:"small"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"News Management",columns:Y,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:G,onDelete:K,onRefresh:$,onSearch:D,onSort:(be,ae)=>{N(be),z(ae)},onPageChange:P,onRowsPerPageChange:I,page:j,rowsPerPage:w,searchQuery:T,sortColumn:k,sortDirection:L,filters:V,rowActions:Z}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Edit News"}),t.jsx(Yt,{children:y&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(et,{label:"Title",fullWidth:!0,defaultValue:y.title,onChange:be=>S({...y,title:be.target.value})}),t.jsx(et,{label:"Content",fullWidth:!0,multiline:!0,rows:3,defaultValue:y.content,onChange:be=>S({...y,content:be.target.value})}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsx(mt,{value:y.status,label:"Status",onChange:be=>S({...y,status:be.target.value}),children:oe.map(be=>t.jsx(je,{value:be.value,children:be.label},be.value))})]}),t.jsxs(C,{children:[t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["News ID: ",y.id]}),t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created: ",new Date(y.createdAt).toLocaleString()]}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Channel: ",(Ee=y.channel)==null?void 0:Ee.name]})]})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:()=>q(y),variant:"contained",children:"Save Changes"})]})]})]})},KK=()=>{var ee,Ce,Ae,We;const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState(0),[w,I]=x.useState(25),[T,D]=x.useState(""),[R,_]=x.useState(""),[k,N]=x.useState(""),[L,z]=x.useState(""),[$,G]=x.useState("createdAt"),[K,J]=x.useState("desc"),q=x.useCallback(async()=>{var ye;d(!0),h(null);try{const ie={};T&&(ie.search=T),R&&(ie.status=R),k==="true"&&(ie.trending=!0),L==="true"&&(ie.funded=!0),ie.sort=$,ie.order=K;const le=await n(()=>e.admin.polls.getAllPolls(ie,{page:j+1,limit:w}),{showErrorToast:!1});le&&(s(le.items||[]),i(((ye=le.metadata)==null?void 0:ye.total)||0))}catch{h("Failed to fetch polls")}finally{d(!1)}},[j,w,T,R,k,L,$,K,e.admin.polls,n]);x.useEffect(()=>{q()},[q]);const Q=ye=>{S(ye),b(!0)},Y=async ye=>{const ie=ye.map(le=>le.id);try{await Promise.all(ie.map(le=>n(()=>e.app.poll.delete(le)))),p([]),q()}catch{h("Failed to delete polls")}},oe=async()=>{if(y)try{const ye={title:y.title,description:y.description,endDate:y.endDate};await n(()=>e.app.poll.update(y.id,ye)),b(!1),S(null),q()}catch{h("Failed to update poll")}},V=async ye=>{try{await n(()=>e.app.poll.convertToNews(ye.id,{title:ye.title,summary:ye.description})),q()}catch{h("Failed to convert poll to news")}},Z=[{id:"title",label:"Title",minWidth:200,sortable:!0,format:(ye,ie)=>t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:ye}),t.jsxs(me,{direction:"row",spacing:1,alignItems:"center",sx:{mt:.5},children:[t.jsxs(v,{variant:"caption",color:"text.secondary",children:["ID: ",ie.id]}),ie.isTrending&&t.jsx(Xe,{label:"Trending",color:"warning",size:"small",icon:t.jsx(Ss,{}),sx:{height:16,"& .MuiChip-label":{fontSize:"0.6rem",px:.5}}})]})]})},{id:"channel",label:"Channel",minWidth:150,format:(ye,ie)=>{var le,se,ge,pe;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{src:(le=ie.channel)==null?void 0:le.photoUrl,sx:{width:24,height:24},children:(ge=(se=ie.channel)==null?void 0:se.name)==null?void 0:ge[0]}),t.jsx(v,{variant:"body2",noWrap:!0,children:((pe=ie.channel)==null?void 0:pe.name)||"Unknown"})]})}},{id:"creator",label:"Creator",minWidth:120,format:(ye,ie)=>{var le;return t.jsx(v,{variant:"body2",noWrap:!0,children:((le=ie.creator)==null?void 0:le.displayName)||"Unknown"})}},{id:"voteCount",label:"Votes",minWidth:80,align:"right",sortable:!0,format:ye=>t.jsx(v,{variant:"body2",children:(ye==null?void 0:ye.toLocaleString())||"0"})},{id:"stats",label:"Stats",minWidth:120,format:(ye,ie)=>{var le,se,ge,pe;return t.jsxs(me,{spacing:.5,children:[t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Views: ",((se=(le=ie.stats)==null?void 0:le.viewCount)==null?void 0:se.toLocaleString())||"0"]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Funds: $",((pe=(ge=ie.stats)==null?void 0:ge.totalFunds)==null?void 0:pe.toLocaleString())||"0"]})]})}},{id:"endDate",label:"End Date",minWidth:120,sortable:!0,format:ye=>t.jsx(v,{variant:"body2",children:ye?new Date(ye).toLocaleDateString():"No end date"})},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:ye=>t.jsx(v,{variant:"body2",children:new Date(ye).toLocaleDateString()})}],Ee=Object.entries(FW).map(([ye,ie])=>({value:ie,label:ye.replace(/_/g," ").toLowerCase().replace(/\b\w/g,le=>le.toUpperCase())})),be=t.jsxs(me,{direction:"row",spacing:1,children:[t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:R,label:"Status",onChange:ye=>_(ye.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),Ee.map(ye=>t.jsx(je,{value:ye.value,children:ye.label},ye.value))]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Trending"}),t.jsxs(mt,{value:k,label:"Trending",onChange:ye=>N(ye.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Trending Only"}),t.jsx(je,{value:"false",children:"Non-Trending"})]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Funded"}),t.jsxs(mt,{value:L,label:"Funded",onChange:ye=>z(ye.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Funded Only"}),t.jsx(je,{value:"false",children:"Not Funded"})]})]})]}),ae=ye=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View",children:t.jsx(Oe,{size:"small",onClick:ie=>{ie.stopPropagation(),window.open(fe.APP_POLL_VIEW.replace(":id",ye.id),"_blank")},children:t.jsx(Ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Edit",children:t.jsx(Oe,{size:"small",onClick:ie=>{ie.stopPropagation(),Q(ye)},children:t.jsx(ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Convert to News",children:t.jsx(Oe,{size:"small",onClick:ie=>{ie.stopPropagation(),V(ye)},children:t.jsx(tk,{fontSize:"small"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Poll Management",columns:Z,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:Q,onDelete:Y,onRefresh:q,onSearch:D,onSort:(ye,ie)=>{G(ye),J(ie)},onPageChange:P,onRowsPerPageChange:I,page:j,rowsPerPage:w,searchQuery:T,sortColumn:$,sortDirection:K,filters:be,rowActions:ae}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Edit Poll"}),t.jsx(Yt,{children:y&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(et,{label:"Title",fullWidth:!0,defaultValue:y.title,onChange:ye=>S({...y,title:ye.target.value})}),t.jsx(et,{label:"Description",fullWidth:!0,multiline:!0,rows:3,defaultValue:y.description,onChange:ye=>S({...y,description:ye.target.value})}),t.jsx(et,{label:"End Date",type:"datetime-local",fullWidth:!0,defaultValue:y.endDate?new Date(y.endDate).toISOString().slice(0,16):"",onChange:ye=>S({...y,endDate:ye.target.value}),InputLabelProps:{shrink:!0}}),t.jsxs(Wc,{children:[t.jsx(Bc,{expandIcon:t.jsx(Vc,{}),children:t.jsxs(v,{variant:"subtitle2",children:["Poll Options (",((ee=y.options)==null?void 0:ee.length)||0,")"]})}),t.jsx(Uc,{children:t.jsx(me,{spacing:2,children:(Ce=y.options)==null?void 0:Ce.map((ye,ie)=>t.jsxs(C,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:[t.jsxs(v,{variant:"body2",fontWeight:"medium",children:["Option ",ie+1,": ",ye.text]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Votes: ",ye.voteCount]})]},ye.id))})})]}),t.jsxs(C,{children:[t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Poll ID: ",y.id]}),t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created: ",new Date(y.createdAt).toLocaleString()]}),t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Channel: ",(Ae=y.channel)==null?void 0:Ae.name]}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Creator: ",(We=y.creator)==null?void 0:We.displayName]})]})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:()=>oe(),variant:"contained",children:"Save Changes"})]})]})]})},JK=()=>{const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState(0),[w,I]=x.useState(25),[T,D]=x.useState(""),[R,_]=x.useState(""),[k,N]=x.useState(""),[L,z]=x.useState(""),[$,G]=x.useState("created_at"),[K,J]=x.useState("desc"),q=async()=>{var ae;d(!0),h(null);try{const ee={};T&&(ee.search=T),R&&(ee.status=R),k==="true"&&(ee.trending=!0),L==="true"&&(ee.verified=!0);const Ce=await n(()=>e.admin.channels.getAllChannels(ee,{page:j+1,limit:w}),{showErrorToast:!1});Ce&&(s(Ce.items||[]),i(((ae=Ce.metadata)==null?void 0:ae.total)||0))}catch{h("Failed to fetch channels")}finally{d(!1)}};x.useEffect(()=>{q()},[j,w,T,R,k,L,$,K]);const Q=ae=>{S(ae),b(!0)},Y=async ae=>{const ee=ae.map(Ce=>Ce.id);try{await Promise.all(ee.map(Ce=>n(()=>e.app.channel.deleteChannel(Ce)))),p([]),q()}catch{h("Failed to delete channels")}},oe=async ae=>{if(y)try{await n(()=>e.app.channel.updateChannel(y.id,ae)),b(!1),S(null),q()}catch{h("Failed to update channel")}},V=[{id:"name",label:"Channel",minWidth:200,sortable:!0,format:(ae,ee)=>t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Sn,{src:ee.logoUrl,sx:{width:40,height:40},children:ae==null?void 0:ae[0]}),t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:ae}),t.jsxs(v,{variant:"caption",color:"text.secondary",noWrap:!0,children:["@",ee.handle,"  ID: ",ee.id]})]})]})},{id:"description",label:"Description",minWidth:200,format:ae=>t.jsx(v,{variant:"body2",noWrap:!0,sx:{maxWidth:200},children:ae||"No description"})},{id:"status",label:"Status",minWidth:100,sortable:!0,format:ae=>t.jsx(Xe,{label:HB(ae),color:GB(ae),size:"small"})},{id:"stats",label:"Stats",minWidth:150,format:(ae,ee)=>{var Ce,Ae,We,ye,ie,le;return t.jsxs(me,{spacing:.5,children:[t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(Ao,{sx:{fontSize:14},color:"action"}),t.jsxs(v,{variant:"caption",children:[((Ae=(Ce=ee.stats)==null?void 0:Ce.activeSubscriptionCount)==null?void 0:Ae.toLocaleString())||"0"," subscribers"]})]}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(ia,{sx:{fontSize:14},color:"action"}),t.jsxs(v,{variant:"caption",children:[((ye=(We=ee.stats)==null?void 0:We.newsCount)==null?void 0:ye.toLocaleString())||"0"," news"]})]}),t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(Qf,{sx:{fontSize:14},color:"action"}),t.jsxs(v,{variant:"caption",children:[((le=(ie=ee.stats)==null?void 0:ie.pollCount)==null?void 0:le.toLocaleString())||"0"," polls"]})]})]})}},{id:"tiers",label:"Tiers",minWidth:80,align:"center",format:(ae,ee)=>{var Ce,Ae;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"center"},children:[t.jsx(ep,{sx:{fontSize:14},color:"action"}),t.jsx(v,{variant:"body2",children:((Ce=ee.stats)==null?void 0:Ce.tierCount)||((Ae=ee.tiers)==null?void 0:Ae.length)||"0"})]})}},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:ae=>t.jsx(v,{variant:"body2",children:new Date(ae).toLocaleDateString()})},{id:"updatedAt",label:"Updated",minWidth:120,sortable:!0,format:ae=>t.jsx(v,{variant:"body2",children:new Date(ae).toLocaleDateString()})}],Z=KB,Ee=t.jsxs(me,{direction:"row",spacing:1,children:[t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:R,label:"Status",onChange:ae=>_(ae.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),Z.map(ae=>t.jsx(je,{value:ae.value,children:ae.label},ae.value))]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Trending"}),t.jsxs(mt,{value:k,label:"Trending",onChange:ae=>N(ae.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Trending Only"}),t.jsx(je,{value:"false",children:"Non-Trending"})]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Verified"}),t.jsxs(mt,{value:L,label:"Verified",onChange:ae=>z(ae.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Verified Only"}),t.jsx(je,{value:"false",children:"Not Verified"})]})]})]}),be=ae=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View",children:t.jsx(Oe,{size:"small",onClick:ee=>{ee.stopPropagation(),window.open(fe.APP_CHANNEL_VIEW.replace(":channelId",ae.id),"_blank")},children:t.jsx(Ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Edit",children:t.jsx(Oe,{size:"small",onClick:ee=>{ee.stopPropagation(),Q(ae)},children:t.jsx(ws,{fontSize:"small"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Channel Management",columns:V,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:Q,onDelete:Y,onRefresh:q,onSearch:D,onSort:(ae,ee)=>{G(ae),J(ee)},onPageChange:P,onRowsPerPageChange:I,page:j,rowsPerPage:w,searchQuery:T,sortColumn:$,sortDirection:K,filters:Ee,rowActions:be}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Edit Channel"}),t.jsx(Yt,{children:y&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Channel Name",fullWidth:!0,defaultValue:y.name,onChange:ae=>S({...y,name:ae.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Handle",fullWidth:!0,defaultValue:y.handle,onChange:ae=>S({...y,handle:ae.target.value}),InputProps:{startAdornment:"@"}})})]}),t.jsx(et,{label:"Description",fullWidth:!0,multiline:!0,rows:3,defaultValue:y.description,onChange:ae=>S({...y,description:ae.target.value})}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Logo URL",fullWidth:!0,defaultValue:y.logoUrl,onChange:ae=>S({...y,logoUrl:ae.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Banner URL",fullWidth:!0,defaultValue:y.bannerUrl,onChange:ae=>S({...y,bannerUrl:ae.target.value})})})]}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsx(mt,{value:y.status,label:"Status",onChange:ae=>S({...y,status:ae.target.value}),children:Z.map(ae=>t.jsx(je,{value:ae.value,children:ae.label},ae.value))})]}),y.tiers&&y.tiers.length>0&&t.jsxs(Wc,{children:[t.jsx(Bc,{expandIcon:t.jsx(Vc,{}),children:t.jsxs(v,{variant:"subtitle2",children:["Subscription Tiers (",y.tiers.length,")"]})}),t.jsx(Uc,{children:t.jsx(me,{spacing:2,children:y.tiers.map(ae=>t.jsx(C,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"body2",fontWeight:"medium",children:ae.name}),t.jsx(v,{variant:"caption",color:"text.secondary",children:ae.description})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsxs(v,{variant:"body2",children:["Price: ",ae.currency," ",ae.price]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Order: ",ae.order," ",ae.isDefault&&"(Default)"]})]})]})},ae.id))})})]}),t.jsxs(C,{children:[t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Channel ID: ",y.id]}),t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Creator ID: ",y.creatorId]}),t.jsxs(v,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created: ",new Date(y.createdAt).toLocaleString()]}),t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Updated: ",new Date(y.updatedAt).toLocaleString()]})]})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:()=>oe(y),variant:"contained",children:"Save Changes"})]})]})]})},XK=()=>{var le,se,ge;const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState(!1),[w,I]=x.useState(null),[T,D]=x.useState(""),[R,_]=x.useState(""),[k,N]=x.useState(0),[L,z]=x.useState(25),[$,G]=x.useState(""),[K,J]=x.useState(""),[q]=x.useState(""),[Q,Y]=x.useState("created_at"),[oe,V]=x.useState("desc"),Z=async()=>{var pe;d(!0),h(null);try{const ke={};K&&(ke.status=K),q&&(ke.channelId=q);const ne=await n(()=>e.app.expenseOrder.getAllExpenseOrders({page:k+1,limit:L},ke),{showErrorToast:!1});ne&&(s(ne.items||[]),i(((pe=ne.metadata)==null?void 0:pe.total)||0))}catch{h("Failed to fetch expense orders")}finally{d(!1)}};x.useEffect(()=>{Z()},[k,L,$,K,q,Q,oe]);const Ee=pe=>{S(pe),b(!0)},be=(pe,ke)=>{S(pe),I(ke),P(!0),D(""),_("")},ae=async()=>{if(!(!y||!w))try{let pe;switch(w){case"approve":pe=await n(()=>e.app.expenseOrder.approveExpenseOrder(y.id,{notes:T}),{showSuccessMessage:!0,successMessage:"Expense order approved successfully!"});break;case"reject":pe=await n(()=>e.app.expenseOrder.rejectExpenseOrder(y.id,{rejectionReason:T,notes:T}),{showSuccessMessage:!0,successMessage:"Expense order rejected successfully!"});break;case"payment":pe=await n(()=>e.app.expenseOrder.processPayment(y.id,{paymentReference:R}),{showSuccessMessage:!0,successMessage:"Payment processed successfully!"});break}pe&&(P(!1),S(null),I(null),Z())}catch(pe){console.error(`Failed to ${w} expense order:`,pe)}},ee=pe=>{switch(pe){case bt.DRAFT:return"default";case bt.SUBMITTED:return"info";case bt.UNDER_REVIEW:return"warning";case bt.APPROVED:return"success";case bt.REJECTED:return"error";case bt.PAID:return"success";case bt.CANCELLED:return"secondary";default:return"default"}},Ce=(pe,ke)=>new Intl.NumberFormat("en-US",{style:"currency",currency:ke||"USD"}).format(pe),Ae=[{id:"title",label:"Expense",minWidth:200,sortable:!0,format:(pe,ke)=>{var ne;return t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:pe}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:[(ne=ke.type)==null?void 0:ne.name,"  ID: ",ke.id]})]})}},{id:"journalist",label:"Journalist",minWidth:150,format:(pe,ke)=>{var ne,_e,de;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{sx:{width:24,height:24},children:((_e=(ne=ke.journalist)==null?void 0:ne.displayName)==null?void 0:_e[0])||"U"}),t.jsx(v,{variant:"body2",noWrap:!0,children:((de=ke.journalist)==null?void 0:de.displayName)||"Unknown User"})]})}},{id:"channel",label:"Channel",minWidth:120,format:(pe,ke)=>{var ne;return t.jsx(v,{variant:"body2",noWrap:!0,children:((ne=ke.channel)==null?void 0:ne.name)||"Unknown"})}},{id:"amount",label:"Amount",minWidth:100,align:"right",sortable:!0,format:(pe,ke)=>t.jsx(v,{variant:"body2",fontWeight:"medium",children:Ce(pe,ke.currency)})},{id:"status",label:"Status",minWidth:120,sortable:!0,format:pe=>t.jsx(Xe,{label:Nc[pe],color:ee(pe),size:"small"})},{id:"submitted_at",label:"Submitted",minWidth:120,sortable:!0,format:pe=>t.jsx(v,{variant:"body2",children:pe?new Date(pe).toLocaleDateString():"-"})},{id:"paid_at",label:"Paid",minWidth:120,sortable:!0,format:pe=>t.jsx(v,{variant:"body2",children:pe?new Date(pe).toLocaleDateString():"-"})},{id:"created_at",label:"Created",minWidth:120,sortable:!0,format:pe=>t.jsx(v,{variant:"body2",children:new Date(pe).toLocaleDateString()})}],We=Object.entries(Nc).map(([pe,ke])=>({value:pe,label:ke})),ye=t.jsx(me,{direction:"row",spacing:1,children:t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:K,label:"Status",onChange:pe=>J(pe.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),We.map(pe=>t.jsx(je,{value:pe.value,children:pe.label},pe.value))]})]})}),ie=pe=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View",children:t.jsx(Oe,{size:"small",onClick:ke=>{ke.stopPropagation(),Ee(pe)},children:t.jsx(Ws,{fontSize:"small"})})}),pe.receiptUrl&&t.jsx(Pt,{title:"View Receipt",children:t.jsx(Oe,{size:"small",onClick:ke=>{ke.stopPropagation(),window.open(pe.receiptUrl,"_blank")},children:t.jsx(oo,{fontSize:"small"})})}),pe.status===bt.UNDER_REVIEW&&t.jsxs(t.Fragment,{children:[t.jsx(Pt,{title:"Approve",children:t.jsx(Oe,{size:"small",onClick:ke=>{ke.stopPropagation(),be(pe,"approve")},children:t.jsx(pa,{fontSize:"small",color:"success"})})}),t.jsx(Pt,{title:"Reject",children:t.jsx(Oe,{size:"small",onClick:ke=>{ke.stopPropagation(),be(pe,"reject")},children:t.jsx(Fs,{fontSize:"small",color:"error"})})})]}),pe.status===bt.APPROVED&&t.jsx(Pt,{title:"Process Payment",children:t.jsx(Oe,{size:"small",onClick:ke=>{ke.stopPropagation(),be(pe,"payment")},children:t.jsx(qa,{fontSize:"small",color:"primary"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Expense Order Management",columns:Ae,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:Ee,onRefresh:Z,onSearch:G,onSort:(pe,ke)=>{Y(pe),V(ke)},onPageChange:N,onRowsPerPageChange:z,page:k,rowsPerPage:L,searchQuery:$,sortColumn:Q,sortDirection:oe,filters:ye,rowActions:ie}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"View Expense Order"}),t.jsx(Yt,{children:y&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(Fe,{variant:"outlined",children:t.jsx(Ve,{children:t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Title"}),t.jsx(v,{variant:"body2",children:y.title})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Amount"}),t.jsx(v,{variant:"body2",fontWeight:"medium",children:Ce(y.amount,y.currency)})]}),t.jsxs(F,{item:!0,xs:12,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Description"}),t.jsx(v,{variant:"body2",children:y.description})]})]})})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"subtitle2",gutterBottom:!0,children:"Details"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Journalist"}),t.jsx(v,{variant:"body2",children:((le=y.journalist)==null?void 0:le.displayName)||"Unknown User"})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Channel"}),t.jsx(v,{variant:"body2",children:(se=y.channel)==null?void 0:se.name})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Type"}),t.jsx(v,{variant:"body2",children:(ge=y.type)==null?void 0:ge.name})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"caption",color:"text.secondary",children:"Status"}),t.jsx(Xe,{label:Nc[y.status],color:ee(y.status),size:"small"})]})]})]})}),y.notes&&t.jsx(lt,{severity:"info",children:t.jsx(v,{variant:"body2",children:y.notes})}),y.rejectionReason&&t.jsx(lt,{severity:"error",children:t.jsx(v,{variant:"body2",children:y.rejectionReason})}),y.paymentReference&&t.jsx(lt,{severity:"success",children:t.jsxs(v,{variant:"body2",children:["Payment Reference: ",y.paymentReference]})})]})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>b(!1),children:"Close"})})]}),t.jsxs(Gt,{open:j,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Qt,{children:[w==="approve"&&"Approve Expense Order",w==="reject"&&"Reject Expense Order",w==="payment"&&"Process Payment"]}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[w==="payment"&&t.jsx(et,{label:"Payment Reference",fullWidth:!0,value:R,onChange:pe=>_(pe.target.value),placeholder:"Enter payment reference or transaction ID"}),t.jsx(et,{label:w==="reject"?"Rejection Reason":"Notes",fullWidth:!0,multiline:!0,rows:3,value:T,onChange:pe=>D(pe.target.value),placeholder:w==="reject"?"Explain why this expense order is being rejected...":"Add any additional notes...",required:w==="reject"})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>P(!1),children:"Cancel"}),t.jsxs(ce,{onClick:ae,variant:"contained",color:w==="approve"?"success":w==="reject"?"error":"primary",disabled:w==="reject"&&!T.trim(),children:[w==="approve"&&"Approve",w==="reject"&&"Reject",w==="payment"&&"Process Payment"]})]})]})]})},QK=()=>{var se,ge,pe,ke,ne,_e;const[e,n]=x.useState([]),[r,s]=x.useState(0),[o,i]=x.useState(!1),[l,d]=x.useState(null),[u,h]=x.useState([]),[f,p]=x.useState(!1),[g,b]=x.useState(!1),[y,S]=x.useState(!1),[j,P]=x.useState(null),[w,I]=x.useState(""),[T,D]=x.useState(0),[R,_]=x.useState(25),[k,N]=x.useState(""),[L,z]=x.useState(""),[$,G]=x.useState("createdAt"),[K,J]=x.useState("desc"),{api:q}=Ye(),{execute:Q}=Ke(),Y=x.useCallback(async()=>{if(q!=null&&q.app.payout){i(!0),d(null);try{const de={limit:R,offset:T*R};L&&(de.status=L);const Se=await Q(()=>q.app.payout.getPayouts(de));Se&&(n(Se.items||[]),s(Se.total||0))}catch(de){console.error("Failed to fetch payouts:",de),d("Failed to fetch payouts"),n([]),s(0)}finally{i(!1)}}},[q,Q,T,R,L]);x.useEffect(()=>{Y()},[Y]);const oe=de=>{P(de),p(!0)},V=de=>{P(de),b(!0)},Z=async()=>{if(!(!j||!(q!=null&&q.app.payout)))try{await Q(()=>q.app.payout.processPayout(j.id)),b(!1),P(null),Y()}catch{d("Failed to process payout")}},Ee=async de=>{if(q!=null&&q.app.payout)try{await Q(()=>q.app.payout.retryPayout(de.id)),Y()}catch{d("Failed to retry payout")}},be=de=>{P(de),I(""),S(!0)},ae=async()=>{if(!(!j||!(q!=null&&q.app.payout)))try{await Q(()=>q.app.payout.cancelPayout(j.id,{reason:w})),S(!1),P(null),I(""),Y()}catch{d("Failed to cancel payout")}},ee=de=>{switch(de){case"pending":return"warning";case"processing":return"info";case"completed":return"success";case"failed":return"error";case"cancelled":return"default";default:return"default"}},Ce=(de,Se)=>new Intl.NumberFormat("en-US",{style:"currency",currency:Se||"USD"}).format(de/100),Ae=de=>de?`${de.firstName} ${de.lastName}`:"Unknown",We=[{id:"expenseOrder",label:"Expense Order",minWidth:200,sortable:!0,format:(de,Se)=>{var Pe,B,Me;return t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:((Pe=Se.expenseOrder)==null?void 0:Pe.title)||"N/A"}),t.jsxs(me,{direction:"row",spacing:1,alignItems:"center",children:[t.jsx(Xe,{label:((Me=(B=Se.expenseOrder)==null?void 0:B.type)==null?void 0:Me.name)||"Unknown",size:"small",variant:"outlined",sx:{height:16,"& .MuiChip-label":{fontSize:"0.6rem",px:.5}}}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["#",Se.id.slice(0,8)]})]})]})}},{id:"channel",label:"Channel",minWidth:120,format:(de,Se)=>{var Pe;return t.jsx(v,{variant:"body2",noWrap:!0,children:((Pe=Se.channel)==null?void 0:Pe.name)||"N/A"})}},{id:"journalist",label:"Journalist",minWidth:140,format:(de,Se)=>{var Pe,B;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{sx:{width:24,height:24},children:((B=(Pe=Se.journalist)==null?void 0:Pe.firstName)==null?void 0:B[0])||"U"}),t.jsx(v,{variant:"body2",noWrap:!0,children:Ae(Se.journalist)})]})}},{id:"grossAmount",label:"Gross",minWidth:90,align:"right",sortable:!0,format:(de,Se)=>t.jsx(v,{variant:"body2",children:Ce(Se.grossAmount,Se.currency)})},{id:"platformFeeAmount",label:"Fee",minWidth:80,align:"right",format:(de,Se)=>t.jsxs(v,{variant:"body2",color:"text.secondary",children:["-",Ce(Se.platformFeeAmount,Se.currency)]})},{id:"netAmount",label:"Net Payout",minWidth:100,align:"right",sortable:!0,format:(de,Se)=>t.jsx(v,{variant:"body2",fontWeight:"medium",color:"primary",children:Ce(Se.netAmount,Se.currency)})},{id:"status",label:"Status",minWidth:120,sortable:!0,format:(de,Se)=>t.jsxs(me,{spacing:.5,children:[t.jsx(Xe,{label:de,color:ee(de),size:"small",sx:{textTransform:"capitalize"}}),Se.errorMessage&&t.jsx(Pt,{title:Se.errorMessage,children:t.jsx(nk,{color:"error",sx:{fontSize:16}})}),Se.retryCount>0&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Retry ",Se.retryCount,"/",Se.maxRetries]})]})},{id:"paymentReference",label:"Payment Ref",minWidth:120,format:de=>t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.75rem"},children:de?de.slice(0,12)+"...":"-"})},{id:"createdAt",label:"Created",minWidth:110,sortable:!0,format:de=>t.jsx(v,{variant:"body2",children:new Date(de).toLocaleDateString()})}],ye=[{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"cancelled",label:"Cancelled"}],ie=t.jsx(me,{direction:"row",spacing:1,children:t.jsxs(ht,{size:"small",sx:{minWidth:140},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:L,label:"Status",onChange:de=>z(de.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),ye.map(de=>t.jsx(je,{value:de.value,children:de.label},de.value))]})]})}),le=de=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View Details",children:t.jsx(Oe,{size:"small",onClick:Se=>{Se.stopPropagation(),oe(de)},children:t.jsx(Ws,{fontSize:"small"})})}),de.status==="pending"&&t.jsx(Pt,{title:"Process Payout",children:t.jsx(Oe,{size:"small",onClick:Se=>{Se.stopPropagation(),V(de)},children:t.jsx(qa,{fontSize:"small",color:"primary"})})}),de.status==="failed"&&de.retryCount<de.maxRetries&&t.jsx(Pt,{title:"Retry Payout",children:t.jsx(Oe,{size:"small",onClick:Se=>{Se.stopPropagation(),Ee(de)},children:t.jsx(rk,{fontSize:"small",color:"warning"})})}),(de.status==="pending"||de.status==="failed")&&t.jsx(Pt,{title:"Cancel Payout",children:t.jsx(Oe,{size:"small",onClick:Se=>{Se.stopPropagation(),be(de)},children:t.jsx(Fs,{fontSize:"small",color:"error"})})}),de.paymentReference&&t.jsx(Pt,{title:"View Payment Details",children:t.jsx(Oe,{size:"small",onClick:Se=>{Se.stopPropagation()},children:t.jsx(oo,{fontSize:"small"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Payout Management",columns:We,rows:e,totalCount:r,loading:o,error:l,selected:u,onSelectionChange:h,onRefresh:Y,onSearch:N,onSort:(de,Se)=>{G(de),J(Se)},onPageChange:D,onRowsPerPageChange:_,page:T,rowsPerPage:R,searchQuery:k,sortColumn:$,sortDirection:K,filters:ie,rowActions:le}),t.jsxs(Gt,{open:f,onClose:()=>p(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Payout Details"}),t.jsx(Yt,{children:j&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Expense Order Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Title"}),t.jsx(v,{variant:"body2",children:((se=j.expenseOrder)==null?void 0:se.title)||"N/A"})]}),t.jsxs(F,{item:!0,xs:12,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Description"}),t.jsx(v,{variant:"body2",children:((ge=j.expenseOrder)==null?void 0:ge.description)||"N/A"})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Type"}),t.jsx(Xe,{label:((ke=(pe=j.expenseOrder)==null?void 0:pe.type)==null?void 0:ke.name)||"Unknown",size:"small"})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Expense Order ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.85rem"},children:j.expenseOrderId})]})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Payout Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Journalist"}),t.jsx(v,{variant:"body2",children:Ae(j.journalist)}),t.jsx(v,{variant:"caption",color:"text.secondary",children:(ne=j.journalist)==null?void 0:ne.email})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Channel"}),t.jsx(v,{variant:"body2",children:((_e=j.channel)==null?void 0:_e.name)||"N/A"})]}),t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Gross Amount"}),t.jsx(v,{variant:"body2",children:Ce(j.grossAmount,j.currency)})]}),t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Platform Fee"}),t.jsxs(v,{variant:"body2",color:"error",children:["-",Ce(j.platformFeeAmount,j.currency)]})]}),t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Net Payout"}),t.jsx(v,{variant:"body2",fontWeight:"medium",color:"primary",children:Ce(j.netAmount,j.currency)})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Status"}),t.jsx(Xe,{label:j.status,color:ee(j.status),size:"small",sx:{textTransform:"capitalize"}})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Payment Reference"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.85rem"},children:j.paymentReference||"Not processed"})]})]})]})}),j.status==="failed"&&t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Retry Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Retry Count"}),t.jsxs(v,{variant:"body2",children:[j.retryCount," / ",j.maxRetries]})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Next Retry"}),t.jsx(v,{variant:"body2",children:j.nextRetryAt?new Date(j.nextRetryAt).toLocaleString():"No retry scheduled"})]}),j.errorCategory&&t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Error Category"}),t.jsx(Xe,{label:j.errorCategory,size:"small",color:"error"})]})]})]})}),j.errorMessage&&t.jsx(lt,{severity:"error",children:t.jsx(v,{variant:"body2",children:j.errorMessage})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Timeline"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body2",children:new Date(j.createdAt).toLocaleString()})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Processed"}),t.jsx(v,{variant:"body2",children:j.processedAt?new Date(j.processedAt).toLocaleString():"Not processed"})]}),j.processedBy&&t.jsxs(F,{item:!0,xs:12,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Processed By"}),t.jsx(v,{variant:"body2",children:j.processedBy})]})]})]})})]})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>p(!1),children:"Close"})})]}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Process Payout"}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[j&&t.jsxs(lt,{severity:"warning",icon:t.jsx(qa,{}),children:[t.jsxs(v,{variant:"body2",children:["You are about to process a payout of"," ",t.jsx("strong",{children:Ce(j.netAmount,j.currency)})," ","to ",t.jsx("strong",{children:Ae(j.journalist)}),"."]}),t.jsxs(v,{variant:"body2",sx:{mt:1},children:["Platform fee: ",Ce(j.platformFeeAmount,j.currency)]})]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:"This action will initiate the payment process. The funds will be transferred to the journalist's payment method on file."})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:Z,variant:"contained",color:"primary",startIcon:t.jsx(pa,{}),children:"Confirm & Process"})]})]}),t.jsxs(Gt,{open:y,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Cancel Payout"}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[j&&t.jsx(lt,{severity:"error",children:t.jsxs(v,{variant:"body2",children:["You are about to cancel the payout for ",t.jsx("strong",{children:Ae(j.journalist)}),"."]})}),t.jsx(et,{label:"Cancellation Reason",fullWidth:!0,multiline:!0,rows:3,value:w,onChange:de=>I(de.target.value),placeholder:"Provide a reason for cancelling this payout..."})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>S(!1),children:"Close"}),t.jsx(ce,{onClick:ae,variant:"contained",color:"error",startIcon:t.jsx(Fs,{}),children:"Cancel Payout"})]})]})]})},ZK=()=>{const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(!1),[j,P]=x.useState(null),[w,I]=x.useState(null),[T,D]=x.useState(""),[R,_]=x.useState(0),[k,N]=x.useState(25),[L,z]=x.useState(""),[$,G]=x.useState(""),[K]=x.useState(""),[J,q]=x.useState("created_at"),[Q,Y]=x.useState("desc"),oe=x.useCallback(async()=>{var ie;d(!0),h(null);try{const le={};L&&(le.search=L),$&&(le.status=$),K&&(le.channel_id=K);const se=await n(()=>e.app.subscription.getAllSubscriptions({page:R+1,limit:k},le),{showErrorToast:!1});se&&(s(se.items||[]),i(((ie=se.metadata)==null?void 0:ie.total)||0))}catch{h("Failed to fetch subscriptions")}finally{d(!1)}},[R,k,L,$,K,e.app.subscription,n]);x.useEffect(()=>{oe()},[oe]);const V=ie=>{P(ie),b(!0)},Z=(ie,le)=>{P(ie),I(le),S(!0),D("")},Ee=async()=>{if(!(!j||!w))try{const ie=w==="activate"?"active":w==="suspend"?"suspended":"canceled";await n(()=>e.app.subscription.updateSubscriptionStatus(j.id,ie,T)),S(!1),P(null),I(null),D(""),oe()}catch{h(`Failed to ${w} subscription`)}},be=async()=>{try{const ie=$==="cancelled"?"canceled":$,le=await n(()=>e.app.subscription.exportSubscriptions({status:ie,channel_id:K},"csv"));if(le){const se=window.URL.createObjectURL(le),ge=document.createElement("a");ge.href=se,ge.download=`subscriptions-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(ge),ge.click(),window.URL.revokeObjectURL(se),document.body.removeChild(ge)}}catch{h("Failed to export subscriptions")}},ae=(ie,le)=>new Intl.NumberFormat("en-US",{style:"currency",currency:le||"USD"}).format(ie),ee=ie=>new Date(ie).toLocaleDateString(),Ce=[{id:"user",label:"User",minWidth:180,format:(ie,le)=>{var se,ge;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Sn,{sx:{width:32,height:32},children:((se=le.user.displayName)==null?void 0:se[0])||((ge=le.user.email)==null?void 0:ge[0])}),t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:le.user.displayName}),t.jsx(v,{variant:"caption",color:"text.secondary",noWrap:!0,children:le.user.email})]})]})}},{id:"channel",label:"Channel",minWidth:120,format:(ie,le)=>t.jsx(v,{variant:"body2",noWrap:!0,children:le.channel.name})},{id:"tier",label:"Tier",minWidth:150,format:(ie,le)=>t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:le.tier.name}),t.jsx(v,{variant:"caption",color:"text.secondary",children:ae(le.tier.price,le.tier.currency)})]})},{id:"statusId",label:"Status",minWidth:100,sortable:!0,format:ie=>t.jsx(Xe,{label:hd(ie),color:fd(ie),size:"small",sx:{textTransform:"capitalize"}})},{id:"subscribedAt",label:"Subscribed",minWidth:120,sortable:!0,format:ie=>t.jsx(v,{variant:"body2",children:ee(ie)})},{id:"expiresAt",label:"Expires",minWidth:120,sortable:!0,format:ie=>t.jsx(v,{variant:"body2",children:ie?ee(ie):"Never"})},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:ie=>t.jsx(v,{variant:"body2",children:ee(ie)})}],Ae=aB,We=t.jsx(me,{direction:"row",spacing:1,children:t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:$,label:"Status",onChange:ie=>G(ie.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),Ae.map(ie=>t.jsx(je,{value:ie.value,children:ie.label},ie.value))]})]})}),ye=ie=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View Details",children:t.jsx(Oe,{size:"small",onClick:le=>{le.stopPropagation(),V(ie)},children:t.jsx(Ws,{fontSize:"small"})})}),ie.statusId===$n.SUSPENDED&&t.jsx(Pt,{title:"Activate",children:t.jsx(Oe,{size:"small",onClick:le=>{le.stopPropagation(),Z(ie,"activate")},children:t.jsx(pa,{fontSize:"small",color:"success"})})}),ie.statusId===$n.ACTIVE&&t.jsx(Pt,{title:"Suspend",children:t.jsx(Oe,{size:"small",onClick:le=>{le.stopPropagation(),Z(ie,"suspend")},children:t.jsx(Hv,{fontSize:"small",color:"warning"})})}),ie.statusId!==$n.CANCELLED&&t.jsx(Pt,{title:"Cancel",children:t.jsx(Oe,{size:"small",onClick:le=>{le.stopPropagation(),Z(ie,"cancel")},children:t.jsx(Fs,{fontSize:"small",color:"error"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Subscription Management",columns:Ce,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onRefresh:oe,onSearch:z,onSort:(ie,le)=>{q(ie),Y(le)},onPageChange:_,onRowsPerPageChange:N,page:R,rowsPerPage:k,searchQuery:L,sortColumn:J,sortDirection:Q,filters:We,rowActions:ye,actions:t.jsxs(me,{direction:"row",spacing:1,children:[t.jsx(ce,{variant:"outlined",startIcon:t.jsx(Ss,{}),onClick:()=>{},children:"Analytics"}),t.jsx(ce,{variant:"outlined",startIcon:t.jsx(zv,{}),onClick:be,children:"Export"})]})}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Subscription Details"}),t.jsx(Yt,{children:j&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"User Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Name"}),t.jsx(v,{variant:"body2",children:j.user.displayName})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Email"}),t.jsx(v,{variant:"body2",children:j.user.email})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"User ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:j.user.id})]})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Subscription Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Channel"}),t.jsx(v,{variant:"body2",children:j.channel.name})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Tier"}),t.jsx(v,{variant:"body2",children:j.tier.name})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Price"}),t.jsx(v,{variant:"body2",fontWeight:"medium",children:ae(j.tier.price,j.tier.currency)})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Status"}),t.jsx(Xe,{label:hd(j.statusId),color:fd(j.statusId),size:"small",sx:{textTransform:"capitalize"}})]})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Timeline"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Subscribed"}),t.jsx(v,{variant:"body2",children:ee(j.subscribedAt)})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Expires"}),t.jsx(v,{variant:"body2",children:j.expiresAt?ee(j.expiresAt):"Never"})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body2",children:ee(j.createdAt)})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Updated"}),t.jsx(v,{variant:"body2",children:ee(j.updatedAt)})]})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"System Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Subscription ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:j.id})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Channel ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:j.channel.id})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Tier ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:j.tier.id})]})]})]})})]})}),t.jsx(qt,{children:t.jsx(ce,{onClick:()=>b(!1),children:"Close"})})]}),t.jsxs(Gt,{open:y,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Qt,{children:[w==="activate"&&"Activate Subscription",w==="suspend"&&"Suspend Subscription",w==="cancel"&&"Cancel Subscription"]}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[j&&t.jsxs(lt,{severity:w==="activate"?"info":"warning",children:[w==="activate"&&`Activating subscription for ${j.user.displayName}`,w==="suspend"&&`Suspending subscription for ${j.user.displayName}`,w==="cancel"&&`Canceling subscription for ${j.user.displayName}`]}),t.jsx(et,{label:"Reason",fullWidth:!0,multiline:!0,rows:3,value:T,onChange:ie=>D(ie.target.value),placeholder:`Explain why this subscription is being ${w}d...`,required:w!=="activate"})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>S(!1),children:"Cancel"}),t.jsxs(ce,{onClick:Ee,variant:"contained",color:w==="activate"?"success":w==="suspend"?"warning":"error",disabled:(w==="suspend"||w==="cancel")&&!T.trim(),children:[w==="activate"&&"Activate",w==="suspend"&&"Suspend",w==="cancel"&&"Cancel"]})]})]})]})},eJ=()=>{const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(!1),[j,P]=x.useState(!1),[w,I]=x.useState(null),[T,D]=x.useState({email:"",externalId:"",displayName:"",photoUrl:"",roleId:an.REGULAR_USER,statusId:Xn.ACTIVE}),[R,_]=x.useState({system_role:an.REGULAR_USER,system_status:Xn.ACTIVE}),[k,N]=x.useState(0),[L,z]=x.useState(25),[$,G]=x.useState(""),[K,J]=x.useState(""),[q,Q]=x.useState(""),[Y,oe]=x.useState("created_at"),[V,Z]=x.useState("desc"),Ee=async()=>{var B;d(!0),h(null);try{const Me={page:k+1,limit:L,sort:Y,order:V,search:$||void 0,status:K||void 0,role:q||void 0},qe=await n(()=>e.admin.users.getAllUsers(Me),{showErrorToast:!1});qe&&(s(qe.items||[]),i(((B=qe.metadata)==null?void 0:B.total)||0))}catch{h("Failed to fetch users")}finally{d(!1)}};x.useEffect(()=>{Ee()},[k,L,$,K,q,Y,V]);const be=B=>{I(B),b(!0)},ae=async B=>{const Me=B.map(qe=>qe.id);try{await Promise.all(Me.map(qe=>n(()=>e.admin.users.deleteUser(qe)))),p([]),Ee()}catch{h("Failed to delete users")}},ee=async B=>{if(w)try{await n(()=>e.admin.users.updateUser(w.id,B),{showSuccessMessage:!0,successMessage:"User updated successfully"}),b(!1),I(null),Ee()}catch{h("Failed to update user")}},Ce=async()=>{try{await n(()=>e.admin.users.registerUser(T),{showSuccessMessage:!0,successMessage:"User registered successfully"}),S(!1),D({email:"",externalId:"",displayName:"",photoUrl:"",roleId:an.REGULAR_USER,statusId:Xn.ACTIVE}),Ee()}catch{h("Failed to register user")}},Ae=async(B,Me)=>{try{await n(()=>e.admin.users.suspendUser(B,{reason:Me}),{showSuccessMessage:!0,successMessage:"User suspended successfully"}),Ee()}catch{h("Failed to suspend user")}},We=async(B,Me)=>{try{await n(()=>e.admin.users.unsuspendUser(B,{reason:Me}),{showSuccessMessage:!0,successMessage:"User unsuspended successfully"}),Ee()}catch{h("Failed to unsuspend user")}},ye=async()=>{if(w)try{await n(()=>e.admin.users.updateUserCustomClaims(w.id,R),{showSuccessMessage:!0,successMessage:"Custom claims updated successfully"}),P(!1),Ee()}catch{h("Failed to update custom claims")}},ie=B=>{I(B),_({system_role:B.roleId??an.REGULAR_USER,system_status:B.statusId??Xn.ACTIVE}),P(!0)},le=B=>{switch(B){case an.SUPER_ADMIN:return"error";case an.ADMIN:return"error";case an.MODERATOR:return"warning";case an.JOURNALIST:return"primary";case an.EDITOR:return"info";case an.EVALUATOR:return"secondary";case an.FINANCE_MANAGER:return"success";case an.REGULAR_USER:return"default";case an.GUEST:return"default";default:return"default"}},se=B=>{const Me=Object.entries(an).find(([,qe])=>qe===B);return Me?Me[0].replace(/_/g," ").toLowerCase().replace(/\b\w/g,qe=>qe.toUpperCase()):"Unknown"},ge=B=>{switch(B){case Xn.ACTIVE:return"success";case Xn.INACTIVE:return"default";case Xn.PENDING:return"warning";case Xn.BLOCKED:return"error";case Xn.SUSPENDED:return"warning";case Xn.BANNED:return"error";case Xn.DELETED:return"secondary";case Xn.NOT_VERIFIED:return"info";default:return"default"}},pe=B=>{const Me=Object.entries(Xn).find(([,qe])=>qe===B);return Me?Me[0].replace(/_/g," ").toLowerCase().replace(/\b\w/g,qe=>qe.toUpperCase()):"Unknown"},ke=[{id:"displayName",label:"User",minWidth:200,sortable:!0,format:(B,Me)=>{var qe;return t.jsxs(C,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Sn,{src:Me.photoUrl,sx:{width:40,height:40},children:(B==null?void 0:B[0])||((qe=Me.email)==null?void 0:qe[0])}),t.jsxs(C,{children:[t.jsx(v,{variant:"body2",fontWeight:"medium",noWrap:!0,children:B}),t.jsx(v,{variant:"caption",color:"text.secondary",noWrap:!0,children:Me.email})]})]})}},{id:"roleId",label:"Role",minWidth:120,sortable:!0,format:B=>t.jsx(Xe,{label:se(B),color:le(B),size:"small",icon:B===an.SUPER_ADMIN||B===an.ADMIN?t.jsx(sk,{fontSize:"small"}):B===an.JOURNALIST||B===an.EDITOR?t.jsx(ok,{fontSize:"small"}):t.jsx(Jf,{fontSize:"small"})})},{id:"statusId",label:"Status",minWidth:120,sortable:!0,format:B=>t.jsx(Xe,{label:pe(B),color:ge(B),size:"small"})},{id:"lastLogin",label:"Last Login",minWidth:120,sortable:!0,format:B=>t.jsx(v,{variant:"body2",children:B?new Date(B).toLocaleDateString():"Never"})},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:B=>t.jsx(v,{variant:"body2",children:new Date(B).toLocaleDateString()})},{id:"updatedAt",label:"Updated",minWidth:120,sortable:!0,format:B=>t.jsx(v,{variant:"body2",children:new Date(B).toLocaleDateString()})}],ne=Object.entries(Xn).map(([B,Me])=>({value:Me,label:B.replace(/_/g," ").toLowerCase().replace(/\b\w/g,qe=>qe.toUpperCase())})),_e=Object.entries(an).map(([B,Me])=>({value:Me,label:B.replace(/_/g," ").toLowerCase().replace(/\b\w/g,qe=>qe.toUpperCase())})),de=t.jsxs(me,{direction:"row",spacing:1,children:[t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:K,label:"Status",onChange:B=>J(B.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),ne.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Role"}),t.jsxs(mt,{value:q,label:"Role",onChange:B=>Q(B.target.value),children:[t.jsx(je,{value:"",children:"All Roles"}),_e.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))]})]})]}),Se=B=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View/Edit",children:t.jsx(Oe,{size:"small",onClick:Me=>{Me.stopPropagation(),be(B)},children:t.jsx(Ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Update Custom Claims",children:t.jsx(Oe,{size:"small",onClick:Me=>{Me.stopPropagation(),ie(B)},children:t.jsx(ak,{fontSize:"small",color:"info"})})}),B.statusId!==Xn.SUSPENDED&&B.statusId!==Xn.BANNED&&t.jsx(Pt,{title:"Suspend User",children:t.jsx(Oe,{size:"small",onClick:Me=>{Me.stopPropagation(),Ae(B.id)},children:t.jsx(Hv,{fontSize:"small",color:"warning"})})}),B.statusId===Xn.SUSPENDED&&t.jsx(Pt,{title:"Unsuspend User",children:t.jsx(Oe,{size:"small",onClick:Me=>{Me.stopPropagation(),We(B.id)},children:t.jsx(pa,{fontSize:"small",color:"success"})})})]}),Pe=t.jsx(ce,{variant:"contained",startIcon:t.jsx(ko,{}),onClick:()=>S(!0),children:"Register User"});return t.jsxs(C,{children:[t.jsx(Wo,{title:"User Management",columns:ke,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:be,onDelete:ae,onRefresh:Ee,onSearch:G,onSort:(B,Me)=>{oe(B),Z(Me)},onPageChange:N,onRowsPerPageChange:z,page:k,rowsPerPage:L,searchQuery:$,sortColumn:Y,sortDirection:V,filters:de,rowActions:Se,actions:Pe}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Edit User"}),t.jsx(Yt,{children:w&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"User Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Display Name",fullWidth:!0,value:w.displayName||"",onChange:B=>I({...w,displayName:B.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Email",fullWidth:!0,value:w.email||"",onChange:B=>I({...w,email:B.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Photo URL",fullWidth:!0,value:w.photoUrl||"",onChange:B=>I({...w,photoUrl:B.target.value})})})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Role & Status"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Role"}),t.jsx(mt,{value:w.roleId,label:"Role",onChange:B=>I({...w,roleId:B.target.value}),children:_e.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsx(mt,{value:w.statusId,label:"Status",onChange:B=>I({...w,statusId:B.target.value}),children:ne.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]})})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"System Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"User ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:w.id})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"External ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:w.externalId})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body2",children:new Date(w.createdAt).toLocaleString()})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Last Login"}),t.jsx(v,{variant:"body2",children:w.lastLogin?new Date(w.lastLogin).toLocaleString():"Never"})]})]})]})}),w.channelSubscriptions&&w.channelSubscriptions.length>0&&t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsxs(v,{variant:"h6",gutterBottom:!0,children:["Channel Subscriptions (",w.channelSubscriptions.length,")"]}),t.jsxs(me,{spacing:1,children:[w.channelSubscriptions.slice(0,5).map((B,Me)=>{var qe;return t.jsxs(C,{sx:{p:1,border:1,borderColor:"divider",borderRadius:1},children:[t.jsx(v,{variant:"body2",fontWeight:"medium",children:((qe=B.channel)==null?void 0:qe.name)||"Unknown Channel"}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Status: ",B.status,"  Started: ",new Date(B.subscribedAt).toLocaleDateString()]})]},Me)}),w.channelSubscriptions.length>5&&t.jsxs(v,{variant:"caption",color:"text.secondary",children:["And ",w.channelSubscriptions.length-5," more..."]})]})]})})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:()=>ee(w),variant:"contained",children:"Save Changes"})]})]}),t.jsxs(Gt,{open:y,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Register New User"}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[t.jsx(et,{label:"Email",type:"email",fullWidth:!0,required:!0,value:T.email,onChange:B=>D({...T,email:B.target.value})}),t.jsx(et,{label:"External ID (Firebase UID)",fullWidth:!0,required:!0,value:T.externalId,onChange:B=>D({...T,externalId:B.target.value}),helperText:"The Firebase authentication UID for this user"}),t.jsx(et,{label:"Display Name",fullWidth:!0,required:!0,value:T.displayName,onChange:B=>D({...T,displayName:B.target.value})}),t.jsx(et,{label:"Photo URL",fullWidth:!0,value:T.photoUrl,onChange:B=>D({...T,photoUrl:B.target.value})}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Role"}),t.jsx(mt,{value:T.roleId,label:"Role",onChange:B=>D({...T,roleId:B.target.value}),children:_e.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsx(mt,{value:T.statusId,label:"Status",onChange:B=>D({...T,statusId:B.target.value}),children:ne.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>S(!1),children:"Cancel"}),t.jsx(ce,{onClick:Ce,variant:"contained",disabled:!T.email||!T.externalId||!T.displayName,children:"Register User"})]})]}),t.jsxs(Gt,{open:j,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(Qt,{children:"Update Firebase Custom Claims"}),t.jsx(Yt,{children:w&&t.jsxs(me,{spacing:2,sx:{pt:1},children:[t.jsxs(v,{variant:"body2",color:"text.secondary",children:["Update Firebase custom claims for: ",t.jsx("strong",{children:w.displayName})," (",w.email,")"]}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"System Role"}),t.jsx(mt,{value:R.system_role,label:"System Role",onChange:B=>_({...R,system_role:B.target.value}),children:_e.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]}),t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"System Status"}),t.jsx(mt,{value:R.system_status,label:"System Status",onChange:B=>_({...R,system_status:B.target.value}),children:ne.map(B=>t.jsx(je,{value:B.value,children:B.label},B.value))})]}),t.jsx(v,{variant:"caption",color:"warning.main",children:"Warning: This will update the user's Firebase authentication custom claims. The user may need to re-authenticate for changes to take effect."})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>P(!1),children:"Cancel"}),t.jsx(ce,{onClick:ye,variant:"contained",color:"warning",children:"Update Claims"})]})]})]})},os={SYSTEM:"SYSTEM",USER:"USER",CHANNEL:"CHANNEL",TRENDING:"TRENDING"},Br={PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",FLAGGED:"FLAGGED"};function tJ(e){switch(e){case os.SYSTEM:return"System";case os.USER:return"User";case os.CHANNEL:return"Channel";case os.TRENDING:return"Trending";default:return e}}function nJ(e){switch(e){case os.SYSTEM:return"primary";case os.USER:return"info";case os.CHANNEL:return"secondary";case os.TRENDING:return"warning";default:return"default"}}function rJ(e){switch(e){case Br.PENDING:return"Pending";case Br.APPROVED:return"Approved";case Br.REJECTED:return"Rejected";case Br.FLAGGED:return"Flagged";default:return e}}function sJ(e){switch(e){case Br.PENDING:return"warning";case Br.APPROVED:return"success";case Br.REJECTED:return"error";case Br.FLAGGED:return"error";default:return"default"}}const oJ=[{value:os.SYSTEM,label:"System"},{value:os.USER,label:"User"},{value:os.CHANNEL,label:"Channel"},{value:os.TRENDING,label:"Trending"}],aJ=[{value:Br.PENDING,label:"Pending"},{value:Br.APPROVED,label:"Approved"},{value:Br.REJECTED,label:"Rejected"},{value:Br.FLAGGED,label:"Flagged"}],iJ=()=>{var ge,pe,ke;const{api:e}=Ye(),{execute:n}=Ke(),[r,s]=x.useState([]),[o,i]=x.useState(0),[l,d]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState([]),[g,b]=x.useState(!1),[y,S]=x.useState(null),[j,P]=x.useState(!1),[w,I]=x.useState(null),[T,D]=x.useState(0),[R,_]=x.useState(25),[k,N]=x.useState(""),[L,z]=x.useState(""),[$,G]=x.useState(""),[K,J]=x.useState(""),[q,Q]=x.useState(""),[Y,oe]=x.useState("created_at"),[V,Z]=x.useState("desc"),Ee=async()=>{var ne;d(!0),h(null);try{const _e={};k&&(_e.search=k),L&&(_e.status=L),$&&(_e.type=$),K==="true"&&(_e.verified=!0),q==="true"&&(_e.trending=!0);const de=await n(()=>e.app.tag.getTags(_e,{page:T+1,limit:R}),{showErrorToast:!1});de&&(s(de.items||[]),i(((ne=de.metadata)==null?void 0:ne.total)||0))}catch{h("Failed to fetch tags")}finally{d(!1)}};x.useEffect(()=>{Ee()},[T,R,k,L,$,K,q,Y,V]);const be=ne=>{S(ne),b(!0)},ae=async ne=>{const _e=ne.map(de=>de.id);try{await Promise.all(_e.map(de=>n(()=>e.app.tag.deleteTag(de)))),p([]),Ee()}catch{h("Failed to delete tags")}},ee=(ne,_e)=>{S(ne),I(_e),P(!0)},Ce=async()=>{if(!(!y||!w))try{w==="approve"?await n(()=>e.app.tag.approveTag(y.id)):await n(()=>e.app.tag.rejectTag(y.id)),P(!1),S(null),I(null),Ee()}catch{h(`Failed to ${w} tag`)}},Ae=async ne=>{if(y)try{await n(()=>e.app.tag.updateTag(y.id,ne)),b(!1),S(null),Ee()}catch{h("Failed to update tag")}},We=[{id:"name",label:"Tag",minWidth:180,sortable:!0,format:(ne,_e)=>t.jsxs(C,{children:[t.jsxs(me,{direction:"row",alignItems:"center",spacing:1,children:[t.jsx(Zf,{fontSize:"small",color:"action"}),t.jsx(v,{variant:"body2",fontWeight:"medium",children:ne}),_e.isVerified&&t.jsx(ik,{fontSize:"small",color:"primary"}),_e.isTrending&&t.jsx(Ss,{fontSize:"small",color:"warning"})]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["@",_e.slug,"  ID: ",_e.id]})]})},{id:"typeId",label:"Type",minWidth:100,sortable:!0,format:ne=>t.jsx(Xe,{label:tJ(ne),color:nJ(ne),size:"small"})},{id:"statusId",label:"Status",minWidth:100,sortable:!0,format:ne=>t.jsx(Xe,{label:rJ(ne),color:sJ(ne),size:"small"})},{id:"analytics",label:"Analytics",minWidth:150,format:(ne,_e)=>{var de,Se,Pe,B,Me,qe;return t.jsxs(me,{spacing:.5,children:[t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Views: ",((Se=(de=_e.analytics)==null?void 0:de.viewCount)==null?void 0:Se.toLocaleString())||"0"]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Usage: ",((B=(Pe=_e.analytics)==null?void 0:Pe.usageCount)==null?void 0:B.toLocaleString())||"0"]}),t.jsxs(v,{variant:"caption",color:"text.secondary",children:["Searches: ",((qe=(Me=_e.analytics)==null?void 0:Me.searchCount)==null?void 0:qe.toLocaleString())||"0"]})]})}},{id:"createdBy",label:"Created By",minWidth:120,format:ne=>t.jsx(v,{variant:"body2",children:ne||"System"})},{id:"createdAt",label:"Created",minWidth:120,sortable:!0,format:ne=>t.jsx(v,{variant:"body2",children:new Date(ne).toLocaleDateString()})},{id:"approvedAt",label:"Approved",minWidth:120,sortable:!0,format:ne=>t.jsx(v,{variant:"body2",children:ne?new Date(ne).toLocaleDateString():"-"})}],ye=aJ,ie=oJ,le=t.jsxs(me,{direction:"row",spacing:1,children:[t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Status"}),t.jsxs(mt,{value:L,label:"Status",onChange:ne=>z(ne.target.value),children:[t.jsx(je,{value:"",children:"All Status"}),ye.map(ne=>t.jsx(je,{value:ne.value,children:ne.label},ne.value))]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Type"}),t.jsxs(mt,{value:$,label:"Type",onChange:ne=>G(ne.target.value),children:[t.jsx(je,{value:"",children:"All Types"}),ie.map(ne=>t.jsx(je,{value:ne.value,children:ne.label},ne.value))]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Verified"}),t.jsxs(mt,{value:K,label:"Verified",onChange:ne=>J(ne.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Verified Only"}),t.jsx(je,{value:"false",children:"Not Verified"})]})]}),t.jsxs(ht,{size:"small",sx:{minWidth:120},children:[t.jsx(Ct,{children:"Trending"}),t.jsxs(mt,{value:q,label:"Trending",onChange:ne=>Q(ne.target.value),children:[t.jsx(je,{value:"",children:"All"}),t.jsx(je,{value:"true",children:"Trending Only"}),t.jsx(je,{value:"false",children:"Not Trending"})]})]})]}),se=ne=>t.jsxs(me,{direction:"row",spacing:.5,children:[t.jsx(Pt,{title:"View Details",children:t.jsx(Oe,{size:"small",onClick:_e=>{_e.stopPropagation(),be(ne)},children:t.jsx(Ws,{fontSize:"small"})})}),t.jsx(Pt,{title:"Edit",children:t.jsx(Oe,{size:"small",onClick:_e=>{_e.stopPropagation(),be(ne)},children:t.jsx(ws,{fontSize:"small"})})}),ne.statusId===Br.PENDING&&t.jsxs(t.Fragment,{children:[t.jsx(Pt,{title:"Approve",children:t.jsx(Oe,{size:"small",onClick:_e=>{_e.stopPropagation(),ee(ne,"approve")},children:t.jsx(pa,{fontSize:"small",color:"success"})})}),t.jsx(Pt,{title:"Reject",children:t.jsx(Oe,{size:"small",onClick:_e=>{_e.stopPropagation(),ee(ne,"reject")},children:t.jsx(Fs,{fontSize:"small",color:"error"})})})]}),t.jsx(Pt,{title:"View Analytics",children:t.jsx(Oe,{size:"small",onClick:_e=>{_e.stopPropagation()},children:t.jsx(gs,{fontSize:"small",color:"info"})})})]});return t.jsxs(C,{children:[t.jsx(Wo,{title:"Tag Management",columns:We,rows:r,totalCount:o,loading:l,error:u,selected:f,onSelectionChange:p,onEdit:be,onDelete:ae,onRefresh:Ee,onSearch:N,onSort:(ne,_e)=>{oe(ne),Z(_e)},onPageChange:D,onRowsPerPageChange:_,page:T,rowsPerPage:R,searchQuery:k,sortColumn:Y,sortDirection:V,filters:le,rowActions:se,actions:t.jsx(ce,{variant:"outlined",startIcon:t.jsx(yl,{}),onClick:()=>{},children:"Suggestions"})}),t.jsxs(Gt,{open:g,onClose:()=>b(!1),maxWidth:"md",fullWidth:!0,children:[t.jsx(Qt,{children:"Edit Tag"}),t.jsx(Yt,{children:y&&t.jsxs(me,{spacing:3,sx:{pt:1},children:[t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Tag Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Tag Name",fullWidth:!0,defaultValue:y.name,onChange:ne=>S({...y,name:ne.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsx(et,{label:"Slug",fullWidth:!0,defaultValue:y.slug,onChange:ne=>S({...y,slug:ne.target.value})})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Type"}),t.jsx(mt,{value:y.typeId,label:"Type",onChange:ne=>S({...y,typeId:ne.target.value}),children:ie.map(ne=>t.jsx(je,{value:ne.value,children:ne.label},ne.value))})]})}),t.jsx(F,{item:!0,xs:12,sm:6,children:t.jsxs(ht,{fullWidth:!0,children:[t.jsx(Ct,{children:"Status"}),t.jsx(mt,{value:y.statusId,label:"Status",onChange:ne=>S({...y,statusId:ne.target.value}),children:ye.map(ne=>t.jsx(je,{value:ne.value,children:ne.label},ne.value))})]})})]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Tag Properties"}),t.jsxs(me,{spacing:2,children:[t.jsx(Ro,{control:t.jsx(Xa,{checked:y.isVerified,onChange:ne=>S({...y,isVerified:ne.target.checked})}),label:"Verified Tag"}),t.jsx(Ro,{control:t.jsx(Xa,{checked:y.isTrending,onChange:ne=>S({...y,isTrending:ne.target.checked})}),label:"Trending Tag"})]})]})}),y.analytics&&t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"Analytics"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"View Count"}),t.jsx(v,{variant:"h6",children:((ge=y.analytics.viewCount)==null?void 0:ge.toLocaleString())||"0"})]}),t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Usage Count"}),t.jsx(v,{variant:"h6",children:((pe=y.analytics.usageCount)==null?void 0:pe.toLocaleString())||"0"})]}),t.jsxs(F,{item:!0,xs:12,sm:4,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Search Count"}),t.jsx(v,{variant:"h6",children:((ke=y.analytics.searchCount)==null?void 0:ke.toLocaleString())||"0"})]})]}),y.analytics.lastTrendingAt&&t.jsxs(lt,{severity:"info",sx:{mt:2},children:["Last trending: ",new Date(y.analytics.lastTrendingAt).toLocaleString()]})]})}),t.jsx(Fe,{variant:"outlined",children:t.jsxs(Ve,{children:[t.jsx(v,{variant:"h6",gutterBottom:!0,children:"System Information"}),t.jsxs(F,{container:!0,spacing:2,children:[t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Tag ID"}),t.jsx(v,{variant:"body2",sx:{fontFamily:"monospace"},children:y.id})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created By"}),t.jsx(v,{variant:"body2",children:y.createdBy||"System"})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Created"}),t.jsx(v,{variant:"body2",children:new Date(y.createdAt).toLocaleString()})]}),t.jsxs(F,{item:!0,xs:12,sm:6,children:[t.jsx(v,{variant:"subtitle2",color:"text.secondary",children:"Approved"}),t.jsx(v,{variant:"body2",children:y.approvedAt?`${new Date(y.approvedAt).toLocaleString()} by ${y.approvedBy||"System"}`:"Not approved"})]})]})]})})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>b(!1),children:"Cancel"}),t.jsx(ce,{onClick:()=>Ae(y),variant:"contained",children:"Save Changes"})]})]}),t.jsxs(Gt,{open:j,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Qt,{children:[w==="approve"&&"Approve Tag",w==="reject"&&"Reject Tag"]}),t.jsx(Yt,{children:t.jsxs(me,{spacing:2,sx:{pt:1},children:[y&&t.jsxs(lt,{severity:w==="approve"?"success":"warning",children:[w==="approve"&&`Approving tag "${y.name}"`,w==="reject"&&`Rejecting tag "${y.name}"`]}),t.jsx(v,{variant:"body2",color:"text.secondary",children:w==="approve"?"This tag will be made available for use across the platform.":"This tag will be rejected and won't be available for use."})]})}),t.jsxs(qt,{children:[t.jsx(ce,{onClick:()=>P(!1),children:"Cancel"}),t.jsxs(ce,{onClick:Ce,variant:"contained",color:w==="approve"?"success":"error",children:[w==="approve"&&"Approve",w==="reject"&&"Reject"]})]})]})]})},lJ=()=>{const{isLoading:e}=xa();return e?t.jsx(l6,{}):t.jsxs(Ck,{children:[t.jsx(ze,{path:fe.HOME,element:t.jsx(W4,{})}),t.jsx(ze,{path:fe.LOGIN,element:t.jsx(_4,{})}),t.jsx(ze,{path:fe.SIGNUP,element:t.jsx(M4,{})}),t.jsx(ze,{path:fe.POST_SIGNUP,element:t.jsx(N4,{})}),t.jsx(ze,{path:fe.ACCEPT_INVITATION,element:t.jsx(L4,{})}),t.jsxs(ze,{path:`${fe.APP_ROOT}/*`,element:t.jsx(Jh,{children:t.jsx(BF,{})}),children:[t.jsxs(ze,{path:`${Tn.ROOT}/*`,children:[t.jsx(ze,{path:Tn.SUBPATHS.TRENDING,element:t.jsx(Rf,{filters:{trending:!0}},"trending")}),t.jsx(ze,{path:Tn.SUBPATHS.MY_FEED,element:t.jsx(Rf,{filters:{feed:!0}},"feed")}),t.jsx(ze,{path:Tn.SUBPATHS.DISCOVER,element:t.jsx(fW,{})}),t.jsx(ze,{path:`${Tn.VIEW}`,element:t.jsx(cW,{})})]}),t.jsxs(ze,{path:`${In.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(wW,{})}),t.jsx(ze,{path:`${In.VIEW}`,element:t.jsx(HW,{})})]}),t.jsxs(ze,{path:`${ar.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(GW,{})}),t.jsx(ze,{path:`${ar.VIEW}`,element:t.jsx(QW,{})})]}),t.jsxs(ze,{path:`${ms.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(lB,{})}),t.jsx(ze,{path:ms.SETTINGS,element:t.jsx(fB,{})})]}),t.jsxs(ze,{path:`${gr.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(bB,{})}),t.jsx(ze,{path:`${gr.VIEW}`,element:t.jsx(yB,{})})]}),t.jsx(ze,{path:Kv.ROOT,element:t.jsx(mB,{})}),t.jsx(ze,{path:ed.ROOT,element:t.jsx(x0,{})})]}),t.jsxs(ze,{path:`${fe.STUDIO_ROOT}/*`,element:t.jsx(Jh,{children:t.jsx(v4,{})}),children:[t.jsxs(ze,{path:`${Tn.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(VB,{})}),t.jsx(ze,{path:`${Tn.CREATE}`,element:t.jsx(RB,{})}),t.jsx(ze,{path:`${Tn.EDIT}/${Tn.VIEW}`,element:t.jsx(kB,{})}),t.jsx(ze,{path:`${Tn.VIEW}`,element:t.jsx(OB,{})})]}),t.jsxs(ze,{path:`${In.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(zB,{})}),t.jsx(ze,{path:`${In.CREATE}`,element:t.jsx(t6,{})}),t.jsx(ze,{path:`${In.VIEW}`,element:t.jsx(i6,{})}),t.jsx(ze,{path:`${In.EDIT}/${In.VIEW}`,element:t.jsx(U8,{})})]}),t.jsxs(ze,{path:`${In.ROOT}/${In.VIEW}/${bs.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(z8,{})}),t.jsx(ze,{path:`${bs.CREATE}`,element:t.jsx(H8,{})}),t.jsx(ze,{path:`${bs.EDIT}/${bs.NESTED_VIEW}`,element:t.jsx(G8,{})}),t.jsx(ze,{path:`${bs.NESTED_VIEW}`,element:t.jsx(Y8,{})})]}),t.jsxs(ze,{path:`${ar.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(K8,{})}),t.jsx(ze,{path:`${ar.CREATE}`,element:t.jsx(TK,{})}),t.jsx(ze,{path:`${ar.EDIT}/${ar.VIEW}`,element:t.jsx(DK,{})}),t.jsx(ze,{path:`${ar.VIEW}`,element:t.jsx(MK,{})})]}),t.jsxs(ze,{path:`${gr.ROOT}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(LK,{})}),t.jsx(ze,{path:`${gr.CREATE}`,element:t.jsx($K,{})}),t.jsx(ze,{path:`${gr.EDIT}/${gr.VIEW}`,element:t.jsx(FK,{})}),t.jsx(ze,{path:`${gr.VIEW}`,element:t.jsx(WK,{})})]}),t.jsx(ze,{path:ed.ROOT,element:t.jsx(x0,{})})]}),t.jsxs(ze,{path:`${fe.ADMIN_ROOT}/*`,element:t.jsx(Jh,{children:t.jsx(P4,{})}),children:[t.jsx(ze,{index:!0,element:t.jsx(Tv,{})}),t.jsx(ze,{path:_t.DASHBOARD,element:t.jsx(Tv,{})}),t.jsx(ze,{path:_t.NEWS,element:t.jsx(qK,{})}),t.jsx(ze,{path:_t.POLLS,element:t.jsx(KK,{})}),t.jsx(ze,{path:_t.CHANNELS,element:t.jsx(JK,{})}),t.jsx(ze,{path:_t.EXPENSE_ORDERS,element:t.jsx(XK,{})}),t.jsx(ze,{path:_t.PAYOUTS,element:t.jsx(QK,{})}),t.jsx(ze,{path:_t.TAGS,element:t.jsx(iJ,{})}),t.jsx(ze,{path:_t.USERS,element:t.jsx(eJ,{})}),t.jsxs(ze,{path:`${_t.SUBSCRIPTIONS}/*`,children:[t.jsx(ze,{index:!0,element:t.jsx(ZK,{})}),t.jsx(ze,{path:Va.MANAGEMENT,element:t.jsx(UK,{})}),t.jsx(ze,{path:Va.ANALYTICS,element:t.jsx(zK,{})}),t.jsx(ze,{path:Va.REVENUE,element:t.jsx(HK,{})})]}),t.jsx(ze,{path:_t.ANALYTICS,element:t.jsx(GK,{})}),t.jsx(ze,{path:_t.SETTINGS,element:t.jsx(YK,{})}),t.jsx(ze,{path:"users",element:t.jsx(BK,{})}),t.jsx(ze,{path:"channels",element:t.jsx(VK,{})})]}),t.jsx(ze,{path:"*",element:t.jsx(n6,{})})]})},cJ={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},dJ={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class uJ{constructor(n){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=cJ,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=l=>typeof l>"u"?new Date:l===null?null:new Date(l),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=l=>l,this.toJsDate=l=>l,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=l=>{const d=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return l.match(d).map(u=>{const h=u[0];if(h==="p"||h==="P"){const f=this.longFormatters[h];return f(u,this.locale.formatLong)}return u}).join("")},this.formatNumber=l=>l,this.getDayOfWeek=l=>l.getDay()+1;const{locale:r,formats:s,longFormatters:o,lib:i}=n;this.locale=r,this.formats=U({},dJ,s),this.longFormatters=o,this.lib=i||"date-fns"}}class hJ extends uJ{constructor({locale:n,formats:r}={}){super({locale:n??Yd,formats:r,longFormatters:od}),this.parse=(s,o)=>s===""?null:EF(s,o,new Date,{locale:this.locale}),this.isValid=s=>s==null?!1:uS(s),this.format=(s,o)=>this.formatByString(s,this.formats[o]),this.formatByString=(s,o)=>Yp(s,o,{locale:this.locale}),this.isEqual=(s,o)=>s===null&&o===null?!0:s===null||o===null?!1:R$(s,o),this.isSameYear=(s,o)=>AF(s,o),this.isSameMonth=(s,o)=>DF(s,o),this.isSameDay=(s,o)=>v5(s,o),this.isSameHour=(s,o)=>TF(s,o),this.isAfter=(s,o)=>Yh(s,o),this.isAfterYear=(s,o)=>Yh(s,Qy(o)),this.isAfterDay=(s,o)=>Yh(s,Tf(o)),this.isBefore=(s,o)=>qh(s,o),this.isBeforeYear=(s,o)=>qh(s,this.startOfYear(o)),this.isBeforeDay=(s,o)=>qh(s,this.startOfDay(o)),this.isWithinRange=(s,[o,i])=>RF(s,{start:o,end:i}),this.startOfYear=s=>fS(s),this.startOfMonth=s=>T5(s),this.startOfWeek=s=>io(s,{locale:this.locale}),this.startOfDay=s=>sl(s),this.endOfYear=s=>Qy(s),this.endOfMonth=s=>hS(s),this.endOfWeek=s=>D5(s,{locale:this.locale}),this.endOfDay=s=>Tf(s),this.addYears=(s,o)=>b5(s,o),this.addMonths=(s,o)=>lS(s,o),this.addWeeks=(s,o)=>g5(s,o),this.addDays=(s,o)=>Gd(s,o),this.addHours=(s,o)=>u5(s,o),this.addMinutes=(s,o)=>m5(s,o),this.addSeconds=(s,o)=>x5(s,o),this.getYear=s=>A$(s),this.getMonth=s=>T$(s),this.getDate=s=>S$(s),this.getHours=s=>C$(s),this.getMinutes=s=>I$(s),this.getSeconds=s=>D$(s),this.getMilliseconds=s=>E$(s),this.setYear=(s,o)=>$F(s,o),this.setMonth=(s,o)=>kF(s,o),this.setDate=(s,o)=>_F(s,o),this.setHours=(s,o)=>OF(s,o),this.setMinutes=(s,o)=>NF(s,o),this.setSeconds=(s,o)=>LF(s,o),this.setMilliseconds=(s,o)=>MF(s,o),this.getDaysInMonth=s=>bS(s),this.getWeekArray=s=>{const o=this.startOfWeek(this.startOfMonth(s)),i=this.endOfWeek(this.endOfMonth(s));let l=0,d=o;const u=[];for(;this.isBefore(d,i);){const h=Math.floor(l/7);u[h]=u[h]||[],u[h].push(d),d=this.addDays(d,1),l+=1}return u},this.getWeekNumber=s=>Gp(s,{locale:this.locale}),this.getYearRange=([s,o])=>{const i=this.startOfYear(s),l=this.endOfYear(o),d=[];let u=i;for(;this.isBefore(u,l);)d.push(u),u=this.addYears(u,1);return d}}}document.title="Meta Journo v1.1.0";gf.createRoot(document.getElementById("root")).render(t.jsx(Dt.StrictMode,{children:t.jsx(Pk,{children:t.jsx(eL,{children:t.jsx(CN,{children:t.jsx(PN,{children:t.jsx(DN,{children:t.jsx(I4,{children:t.jsx(ZF,{children:t.jsx(t4,{children:t.jsx(BL,{children:t.jsx(b1,{dateAdapter:hJ,children:t.jsx(lJ,{})})})})})})})})})})})}));
